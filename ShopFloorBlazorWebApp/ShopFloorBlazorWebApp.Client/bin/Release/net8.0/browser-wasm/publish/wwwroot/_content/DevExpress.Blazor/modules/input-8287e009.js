import{_ as e}from"./_tslib-6e8ca86b.js";import{T as t,D as s,b as i,c as o,d as n,I as r}from"./text-editor-86b5c4cd.js";import{t as d}from"./constants-9658c0e7.js";import{K as u,D as a}from"./keyboard-navigation-strategy-01c5be51.js";import{s as l}from"./lit-element-462e7ad3.js";import{n as c}from"./property-4ec0b52d.js";import{e as h}from"./custom-element-267f9a21.js";class p extends u{constructor(e){super(e.getKeyboardNavigator(),e),this._editor=e}queryItems(){return this.queryItemsBySelector(`.${t.TextEditInput}`)}}var f;!function(e){e.isDisplayFormatDefined="is-display-format-defined",e.isPassword="is-password",e.needSelection="need-selection"}(f||(f={}));const y={...f,...s};let I=class extends i{constructor(){super(...arguments),this.selectionRequested=!1,this.boundOnInputFocusHandler=this.onInputFocusIn.bind(this),this.boundOnInputFocusOutHandler=this.onInputFocusOut.bind(this),this.boundOnBeforeInputHandler=this.onBeforeInput.bind(this),this.boundOnInputKeyUpHandler=this.onInputKeyUp.bind(this),this.needSelection=!1,this.isDisplayFormatDefined=!1,this.isPassword=!1}get shouldProcessFocusIn(){return this.isDisplayFormatDefined||this.selectionRequested}get shouldProcessFocusOut(){return this.isDisplayFormatDefined}get shouldProcessEnter(){return!1}get inputElement(){return this.fieldElement}get shouldProcessFieldTextVersion(){return!this.isPassword&&super.shouldProcessFieldTextVersion}onFieldReady(e,t){e.addEventListener("keyup",this.boundOnInputKeyUpHandler),e.addEventListener("beforeinput",this.boundOnBeforeInputHandler),e.addEventListener("focusin",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),this.initializeKeyboardNavigator(),super.onFieldReady(e,t),t&&this.focused&&this.onInputFocusIn()}onTemplateWithoutInputReady(e){super.onTemplateWithoutInputReady(e),e.addEventListener("focusin",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),e.addEventListener("keyup",this.boundOnInputKeyUpHandler)}onInputFocusIn(){this.shouldProcessFocusIn&&this.processFocusIn()}onInputFocusOut(e){this.shouldProcessFocusOut&&this.processFocusOut(e)}onInputKeyUp(e){this.isReadOnly||this.processKeyUp(e)}onBeforeInput(e){this.processBeforeInput(e)}processKeyUp(e){return!1}processFocusIn(){if(this.fieldElement){const e=this.selectionRequested||this.focused&&this.isAllSelected();this.raiseFocusIn(e),this.selectionRequested=!1}else this.editBoxTemplateElement&&this.raiseFocusIn(!1)}processFocusOut(e){this.raiseFocusOut(this.fieldElementValue)}processBeforeInput(e){return!1}raiseFocusIn(e){this.dispatchEvent(new o(e))}raiseFocusOut(e,t){this.dispatchEvent(new n(e,t))}raiseKeyDown(e){this.dispatchEvent(new r(e))}getFieldElement(){return this.querySelector(`.${t.TextEditInput}`)}selectInputText(e,t){this.fieldElement&&this.fieldElement.setSelectionRange(e,t)}selectAll(){this.fieldElement&&this.focused&&this.fieldElement.select()}onPasswordChanged(){this.isPassword&&(this.fieldElementValue="")}updated(e){super.updated(e),this.rendered&&e.has("isPassword")&&this.onPasswordChanged(),this.rendered&&e.has("needSelection")&&this.selectAll()}focusAndSelectAll(){var e;this.selectionRequested=!0,null===(e=this.fieldElement)||void 0===e||e.focus()}initializeKeyboardNavigator(){this.keyboardNavigator=this.querySelector(a),this.keyboardNavigator&&!this.keyboardNavigator.initialized&&this.keyboardNavigator.initialize(this,this.createKeyboardStrategy())}createKeyboardStrategy(){return new p(this)}getKeyboardNavigator(){return this.keyboardNavigator}focus(e){var t;null===(t=this.fieldElement)||void 0===t||t.focus(e)}};I.shadowRootOptions={...l.shadowRootOptions,delegatesFocus:!0},e([c({type:Boolean,attribute:f.needSelection})],I.prototype,"needSelection",void 0),e([c({type:Boolean,attribute:f.isDisplayFormatDefined})],I.prototype,"isDisplayFormatDefined",void 0),e([c({type:Boolean,attribute:f.isPassword})],I.prototype,"isPassword",void 0),I=e([h(d)],I);const m=Object.freeze({__proto__:null,DxInputEditorAttributes:y,get DxInputEditor(){return I},default:{loadModule:function(){}}});export{y as D,p as I,I as a,m as i};
