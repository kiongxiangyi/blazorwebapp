/*! For license information please see dxw-html-editor-a82bca2248ed86da0242.js.LICENSE.txt */
(self.webpackChunkdevexpress_blazor_client=self.webpackChunkdevexpress_blazor_client||[]).push([[33],{5833:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>X_});var n=i(7462),o=i(3241),r=i(8214),s=i(9488),a=i(4096),l=i(6206),c=i(9297),u=i(2343),d=i(3544),h=i(7922),p=i(9186),f=i(7224),_=i(8015),m=i(5104),g=i(2678),v=i(146),b=i(3210),y=i(402),C=i(54),w=i(5649);const x=/^[\d\w.+_-]+@[\d\w._-]+\.[\w]+$/i,S="valid",I="invalid",k="pending";class E{constructor(){this.NAME="base"}defaultMessage(t){return C.Z.getFormatter(`validation-${this.NAME}`)(t)}defaultFormattedMessage(t){return C.Z.getFormatter(`validation-${this.NAME}-formatted`)(t)}_isValueEmpty(t){return!T.required.validate(t,{})}validate(t,e){const i=Array.isArray(t)?t:[t];let n=!0;return i.length?i.every((t=>(n=this._validate(t,e),n))):n=this._validate(null,e),n}}class O extends E{constructor(){super(),this.NAME="custom"}validate(t,e){if(e.ignoreEmptyValue&&this._isValueEmpty(t))return!0;const i=e.validator,n=i&&(0,s.mf)(i.option)&&i.option("dataGetter"),o=(0,s.mf)(n)&&n(),a={value:t,validator:i,rule:e};return o&&(0,r.l)(a,o),e.validationCallback(a)}}const T={required:new class extends E{constructor(){super(),this.NAME="required"}_validate(t,e){return!!(0,s.$K)(t)&&!1!==t&&(t=String(t),!e.trim&&(0,s.$K)(e.trim)||(t=t.trim()),""!==t)}},numeric:new class extends E{constructor(){super(),this.NAME="numeric"}_validate(t,e){return!(!1===e.ignoreEmptyValue||!this._isValueEmpty(t))||(e.useCultureSettings&&(0,s.HD)(t)?!isNaN(y.Z.parse(t)):(0,s.kE)(t))}},range:new class extends E{constructor(){super(),this.NAME="range"}_validate(t,e){if(!1!==e.ignoreEmptyValue&&this._isValueEmpty(t))return!0;const i=T.numeric.validate(t,e),n=(0,s.$K)(t)&&""!==t,o=i?parseFloat(t):n&&t.valueOf(),r=e.min,a=e.max;if(!i&&!(0,s.J_)(t)&&!n)return!1;if((0,s.$K)(r))return(0,s.$K)(a)?o>=r&&o<=a:o>=r;if((0,s.$K)(a))return o<=a;throw b.default.Error("E0101")}},stringLength:new class extends E{constructor(){super(),this.NAME="stringLength"}_validate(t,e){return t=String(t??""),!e.trim&&(0,s.$K)(e.trim)||(t=t.trim()),!(!e.ignoreEmptyValue||!this._isValueEmpty(t))||T.range.validate(t.length,(0,r.l)({},e))}},custom:new O,async:new class extends O{constructor(){super(),this.NAME="async"}validate(t,e){if((0,s.$K)(e.reevaluate)||(0,r.l)(e,{reevaluate:!0}),e.ignoreEmptyValue&&this._isValueEmpty(t))return!0;const i=e.validator,n=i&&(0,s.mf)(i.option)&&i.option("dataGetter"),o=(0,s.mf)(n)&&n(),a={value:t,validator:i,rule:e};o&&(0,r.l)(a,o);const l=e.validationCallback(a);if(!(0,s.tI)(l))throw b.default.Error("E0103");return this._getWrappedPromise((0,w.p4)(l).promise())}_getWrappedPromise(t){const e=new w.BH;return t.then((function(t){e.resolve(t)}),(function(t){const i={isValid:!1};(0,s.$K)(t)&&((0,s.HD)(t)?i.message=t:(0,s.Kn)(t)&&(0,s.$K)(t.message)&&(0,s.HD)(t.message)&&(i.message=t.message)),e.resolve(i)})),e.promise()}},compare:new class extends E{constructor(){super(),this.NAME="compare"}_validate(t,e){if(!e.comparisonTarget)throw b.default.Error("E0102");if(e.ignoreEmptyValue&&this._isValueEmpty(t))return!0;(0,r.l)(e,{reevaluate:!0});const i=e.comparisonTarget();switch(e.comparisonType||"=="){case"==":return t==i;case"!=":return t!=i;case"===":return t===i;case"!==":return t!==i;case">":return t>i;case">=":return t>=i;case"<":return t<i;case"<=":return t<=i}}},pattern:new class extends E{constructor(){super(),this.NAME="pattern"}_validate(t,e){if(!1!==e.ignoreEmptyValue&&this._isValueEmpty(t))return!0;let i=e.pattern;return(0,s.HD)(i)&&(i=new RegExp(i)),i.test(t)}},email:new class extends E{constructor(){super(),this.NAME="email"}_validate(t,e){return!(!1===e.ignoreEmptyValue||!this._isValueEmpty(t))||T.pattern.validate(t,(0,r.l)({},e,{pattern:x}))}}},D=m.default.inherit({ctor(t){this.group=t,this.validators=[],this._pendingValidators=[],this._onValidatorStatusChanged=this._onValidatorStatusChanged.bind(this),this._resetValidationInfo(),this._eventsStrategy=new v.m(this)},validate(){const t={isValid:!0,brokenRules:[],validators:[],status:S,complete:null};return this._unsubscribeFromAllChangeEvents(),this._pendingValidators=[],this._resetValidationInfo(),(0,g.each)(this.validators,((e,i)=>{const n=i.validate();t.isValid=t.isValid&&n.isValid,n.brokenRules&&(t.brokenRules=t.brokenRules.concat(n.brokenRules)),t.validators.push(i),n.status===k&&this._addPendingValidator(i),this._subscribeToChangeEvents(i)})),this._pendingValidators.length?t.status=k:(t.status=t.isValid?S:I,this._unsubscribeFromAllChangeEvents(),this._raiseValidatedEvent(t)),this._updateValidationInfo(t),(0,r.l)({},this._validationInfo.result)},_subscribeToChangeEvents(t){t.on("validating",this._onValidatorStatusChanged),t.on("validated",this._onValidatorStatusChanged)},_unsubscribeFromChangeEvents(t){t.off("validating",this._onValidatorStatusChanged),t.off("validated",this._onValidatorStatusChanged)},_unsubscribeFromAllChangeEvents(){(0,g.each)(this.validators,((t,e)=>{this._unsubscribeFromChangeEvents(e)}))},_updateValidationInfo(t){this._validationInfo.result=t,t.status===k&&(this._validationInfo.deferred||(this._validationInfo.deferred=new w.BH,this._validationInfo.result.complete=this._validationInfo.deferred.promise()))},_addPendingValidator(t){(0,l.grep)(this._pendingValidators,(function(e){return e===t}))[0]||this._pendingValidators.push(t)},_removePendingValidator(t){const e=this._pendingValidators.indexOf(t);e>=0&&this._pendingValidators.splice(e,1)},_orderBrokenRules(t){let e=[];return(0,g.each)(this.validators,(function(i,n){const o=(0,l.grep)(t,(function(t){return t.validator===n}));o.length&&(e=e.concat(o))})),e},_updateBrokenRules(t){if(!this._validationInfo.result)return;let e=this._validationInfo.result.brokenRules;const i=(0,l.grep)(e,(function(e){return e.validator!==t.validator}));t.brokenRules&&(e=i.concat(t.brokenRules)),this._validationInfo.result.brokenRules=this._orderBrokenRules(e)},_onValidatorStatusChanged(t){t.status!==k?this._resolveIfComplete(t):this._addPendingValidator(t.validator)},_resolveIfComplete(t){if(this._removePendingValidator(t.validator),this._updateBrokenRules(t),!this._pendingValidators.length){if(this._unsubscribeFromAllChangeEvents(),!this._validationInfo.result)return;this._validationInfo.result.status=0===this._validationInfo.result.brokenRules.length?S:I,this._validationInfo.result.isValid=this._validationInfo.result.status===S;const t=(0,r.l)({},this._validationInfo.result,{complete:null}),e=this._validationInfo.deferred;this._validationInfo.deferred=null,this._raiseValidatedEvent(t),e&&setTimeout((()=>{e.resolve(t)}))}},_raiseValidatedEvent(t){this._eventsStrategy.fireEvent("validated",[t])},_resetValidationInfo(){this._validationInfo={result:null,deferred:null}},_synchronizeValidationInfo(){this._validationInfo.result&&(this._validationInfo.result.validators=this.validators)},removeRegisteredValidator(t){const e=this.validators.indexOf(t);e>-1&&(this.validators.splice(e,1),this._synchronizeValidationInfo(),this._resolveIfComplete({validator:t}))},registerValidator(t){this.validators.includes(t)||(this.validators.push(t),this._synchronizeValidationInfo())},reset(){(0,g.each)(this.validators,(function(t,e){e.reset()})),this._pendingValidators=[],this._resetValidationInfo()},on(t,e){return this._eventsStrategy.on(t,e),this},off(t,e){return this._eventsStrategy.off(t,e),this}}),B={groups:[],getGroupConfig(t){const e=(0,l.grep)(this.groups,(function(e){return e.group===t}));if(e.length)return e[0]},findGroup(t,e){var i;const n=(null===(i=t.data())||void 0===i||null===(i=i.dxComponents)||void 0===i?void 0:i.includes("dxValidationGroup"))&&t.dxValidationGroup("instance");if(n)return n;const o=t.parents(".dx-validationgroup").first();return o.length?o.dxValidationGroup("instance"):e},initGroups(){this.groups=[],this.addGroup()},addGroup(t){let e=this.getGroupConfig(t);return e||(e=new D(t),this.groups.push(e)),e},removeGroup(t){const e=this.getGroupConfig(t),i=this.groups.indexOf(e);return i>-1&&this.groups.splice(i,1),e},_setDefaultMessage(t){const{rule:e,validator:i,name:n}=t;(0,s.$K)(e.message)||(i.defaultFormattedMessage&&(0,s.$K)(n)?e.message=i.defaultFormattedMessage(n):e.message=i.defaultMessage())},_addBrokenRule(t){const{result:e,rule:i}=t;e.brokenRule||(e.brokenRule=i),e.brokenRules||(e.brokenRules=[]),e.brokenRules.push(i)},validate(t,e,i){var n;let o={name:i,value:t,brokenRule:null,brokenRules:null,isValid:!0,validationRules:e,pendingRules:null,status:S,complete:null};const r=null==e||null===(n=e[0])||void 0===n?void 0:n.validator,a=[];return(0,g.each)(e||[],((e,n)=>{const r=T[n.type];let l;if(!r)throw b.default.Error("E0100");return(0,s.$K)(n.isValid)&&n.value===t&&!n.reevaluate?!!n.isValid||(o.isValid=!1,this._addBrokenRule({result:o,rule:n}),!1):(n.value=t,"async"===n.type?(a.push({rule:n,ruleValidator:r}),!0):(l=r.validate(t,n),n.isValid=l,l||(o.isValid=!1,this._setDefaultMessage({rule:n,validator:r,name:i}),this._addBrokenRule({result:o,rule:n})),!!n.isValid&&void 0))})),o.isValid&&!o.brokenRules&&a.length&&(o=this._validateAsyncRules({value:t,items:a,result:o,name:i})),this._synchronizeGroupValidationInfo(r,o),o.status=o.pendingRules?k:o.isValid?S:I,o},_synchronizeGroupValidationInfo(t,e){if(!t)return;const i=B.getGroupConfig(t._validationGroup);i._updateBrokenRules.call(i,{validator:t,brokenRules:e.brokenRules??[]})},_validateAsyncRules(t){let{result:e,value:i,items:n,name:o}=t;const r=[];return(0,g.each)(n,((t,n)=>{const a=n.ruleValidator.validate(i,n.rule);if((0,s.tI)(a)){e.pendingRules||(e.pendingRules=[]),e.pendingRules.push(n.rule);const t=a.then((t=>{const e=this._getPatchedRuleResult(t);return this._updateRuleConfig({rule:n.rule,ruleResult:e,validator:n.ruleValidator,name:o}),e}));r.push(t)}else this._updateRuleConfig({rule:n.rule,ruleResult:this._getPatchedRuleResult(a),validator:n.ruleValidator,name:o})})),r.length&&(e.complete=Promise.all(r).then((t=>this._getAsyncRulesResult({result:e,values:t})))),e},_updateRuleConfig(t){let{rule:e,ruleResult:i,validator:n,name:o}=t;e.isValid=i.isValid,i.isValid||((0,s.$K)(i.message)&&(0,s.HD)(i.message)&&i.message.length?e.message=i.message:this._setDefaultMessage({rule:e,validator:n,name:o}))},_getPatchedRuleResult(t){let e;return(0,s.Kn)(t)?(e=(0,r.l)({},t),(0,s.$K)(e.isValid)||(e.isValid=!0)):e={isValid:!(0,s.jn)(t)||t},e},_getAsyncRulesResult(t){let{values:e,result:i}=t;return(0,g.each)(e,((t,e)=>{if(!1===e.isValid){i.isValid=e.isValid;const n=i.pendingRules[t];this._addBrokenRule({result:i,rule:n})}})),i.pendingRules=null,i.complete=null,i.status=i.isValid?S:I,i},registerValidatorInGroup(t,e){const i=B.addGroup(t);i.registerValidator.call(i,e)},_shouldRemoveGroup(t,e){const i=void 0===t,n=t&&"dxValidationGroup"===t.NAME;return!i&&!n&&!e.length},removeRegisteredValidator(t,e){const i=B.getGroupConfig(t);if(i){i.removeRegisteredValidator.call(i,e);const n=i.validators;this._shouldRemoveGroup(t,n)&&this.removeGroup(t)}},initValidationOptions(t){const e={};return t&&["isValid","validationStatus","validationError","validationErrors"].forEach((i=>{i in t&&(0,r.l)(e,this.synchronizeValidationOptions({name:i,value:t[i]},t))})),e},synchronizeValidationOptions(t,e){let{name:i,value:n}=t;switch(i){case"validationStatus":{const t=n===S||n===k;return e.isValid!==t?{isValid:t}:{}}case"isValid":{const{validationStatus:t}=e;let i=t;return n&&t===I?i=S:n||t===I||(i=I),i!==t?{validationStatus:i}:{}}case"validationErrors":{const t=n&&n.length?n[0]:null;return e.validationError!==t?{validationError:t}:{}}case"validationError":{const{validationErrors:t}=e;if(!n&&t)return{validationErrors:null};if(n&&!t)return{validationErrors:[n]};if(n&&t&&n!==t[0])return t[0]=n,{validationErrors:t.slice()}}}return{}},validateGroup(t){const e=B.getGroupConfig(t);if(!e)throw b.default.Error("E0110");return e.validate()},resetGroup(t){const e=B.getGroupConfig(t);if(!e)throw b.default.Error("E0110");return e.reset()}};B.initGroups();const A=B;var P=i(4343),M=i(741),R=i(3901),N=i(7218),$=i(4196);const V="dx-invalid-message",F=R.Z.inherit({_getDefaultOptions(){return(0,r.l)(this.callBase(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),target:void 0,mode:"auto",validationErrors:void 0,preventScrollEvents:!1,positionSide:"top",boundary:void 0,offset:{h:0,v:0},contentId:void 0})},_init(){this.callBase(),this.updateMaxWidth(),this._updatePosition()},_initMarkup(){this.callBase(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()},_updatePositionByTarget:function(){const{target:t}=this.option();this.option("position.of",t)},_ensureMessageNotEmpty:function(){this._textMarkup=this._getTextMarkup();const t=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(t)},_toggleVisibilityClasses:function(t){t?(this.$element().addClass(V),this.$wrapper().addClass(V)):(this.$element().removeClass(V),this.$wrapper().removeClass(V))},_updateContentId(){const{container:t,contentId:e}=this.option(),i=e??(0,o.Z)(t).attr("aria-describedby");this.$content().addClass("dx-invalid-message-content").attr("id",i)},_renderInnerHtml(t){const e=t&&(0,o.Z)(t);null==e||e.html(this._textMarkup)},_getTextMarkup(){const t=this.option("validationErrors")??[];let e="";return t.forEach((t=>{e+=(e?"<br />":"")+(0,N.encodeHtml)((null==t?void 0:t.message)??"")})),e},_toggleModeClass(){const t=this.option("mode");this.$wrapper().toggleClass("dx-invalid-message-auto","auto"===t).toggleClass("dx-invalid-message-always","always"===t)},updateMaxWidth(){const t=this.option("target"),e=(0,M.Y_)(t);let i="100%";e&&(i=Math.max(e,100)),this.option({maxWidth:i})},_getPositionsArray:function(t,e){switch(t){case"top":return[`${e} bottom`,`${e} top`];case"left":return["right","left"];case"right":return["left","right"];default:return[`${e} top`,`${e} bottom`]}},_updatePosition:function(){const{positionSide:t,rtlEnabled:e,offset:i,boundary:n}=this.option(),o=(0,$.q)(e),r=this._getPositionsArray(t,o),s=Object.assign({},i);this.$element().addClass(`dx-invalid-message-${t}`),e&&"left"!==t&&"right"!==t&&(s.h=-s.h),"top"===t&&(s.v=-s.v),"left"===t&&(s.h=-s.h),this.option("position",{offset:s,boundary:n,my:r[0],at:r[1],collision:"none flip"})},_optionChanged(t){const{name:e,value:i,previousValue:n}=t;switch(e){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),this.callBase(t);break;case"boundary":this.option("position.boundary",i);break;case"mode":this._toggleModeClass(i);break;case"rtlEnabled":case"offset":case"positionSide":this.$element().removeClass(`dx-invalid-message-${n}`),this._updatePosition();break;case"container":this._updateContentId(),this.callBase(t);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:this.callBase(t)}}});(0,c.default)("dxValidationMessage",F);const Z=F;var H=i(8311),L=i(3575);const j="dx-invalid-message-auto",z="dx-validation-target",W=["outlined","filled","underlined"],K={validationMessageMode:"mode",validationMessagePosition:"positionSide",validationMessageOffset:"offset",validationBoundary:"boundary"},q=_.default.inherit({ctor:function(){this.showValidationMessageTimeout=null,this.validationRequest=(0,h.Z)(),this.callBase.apply(this,arguments)},_createElement:function(t){this.callBase(t);const e=this.$element();e&&(0,d.aT)(e[0],z,this)},_initOptions:function(t){this.callBase.apply(this,arguments),this.option(A.initValidationOptions(t))},_init:function(){this._initialValue=this.option("value"),this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions")),this.$element().addClass("dx-show-invalid-badge")},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:"valid",validationMessageMode:"auto",validationMessagePosition:"bottom",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{},_showValidationMessage:!0,isDirty:!1})},_attachKeyboardEvents:function(){this.option("readOnly")||this.callBase()},_setOptionsByReference:function(){this.callBase(),(0,r.l)(this._optionsByReference,{validationError:!0})},_createValueChangeAction:function(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction:function(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction:function(){this._valueChangeActionSuppressed=!1},_initMarkup:function(){var t;this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState(),null===(t=this.option("_onMarkupRendered"))||void 0===t||t()},_raiseValueChangeAction:function(t,e){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(t,e))},_valueChangeArgs:function(t,e){return{value:t,previousValue:e,event:this._valueChangeEventInstance}},_saveValueChangeEvent:function(t){this._valueChangeEventInstance=t},_focusInHandler:function(t){const e="auto"===this.option("validationMessageMode");if(this._canValueBeChangedByClick()&&e){var i;const t=null===(i=this._validationMessage)||void 0===i?void 0:i.$wrapper();null==t||t.removeClass(j),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout((()=>null==t?void 0:t.addClass(j)),150)}return this.callBase(t)},_canValueBeChangedByClick:function(){return!1},_getStylingModePrefix:function(){return"dx-editor-"},_renderStylingMode:function(){const t=this.option("stylingMode"),e=this._getStylingModePrefix(),i=W.map((t=>e+t));i.forEach((t=>this.$element().removeClass(t)));let n=e+t;if(-1===i.indexOf(n)){const t=this._getDefaultOptions().stylingMode,i=this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;n=e+(i||t)}this.$element().addClass(n)},_getValidationErrors:function(){let t=this.option("validationErrors");return!t&&this.option("validationError")&&(t=[this.option("validationError")]),t},_disposeValidationMessage:function(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)},_toggleValidationClasses:function(t){this.$element().toggleClass("dx-invalid",t),this.setAria("invalid",t||void 0)},_renderValidationState:function(){const t=this.option("isValid")&&"invalid"!==this.option("validationStatus"),e=this._getValidationErrors(),i=this.$element();if(this._toggleValidationClasses(!t),(0,p.hasWindow)()&&!1!==this.option("_showValidationMessage")&&(this._disposeValidationMessage(),!t&&e)){const{validationMessageMode:t,validationMessageOffset:n,validationBoundary:s,rtlEnabled:a}=this.option();this._$validationMessage=(0,o.Z)("<div>").appendTo(i);const l=`dx-${new H.Z}`;this.setAria("describedby",l),this._validationMessage=new Z(this._$validationMessage,(0,r.l)({validationErrors:e,rtlEnabled:a,target:this._getValidationMessageTarget(),visualContainer:i,mode:t,positionSide:this._getValidationMessagePosition(),offset:n,boundary:s,contentId:l},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}},_getValidationMessagePosition:function(){return this.option("validationMessagePosition")},_getValidationMessageTarget:function(){return this.$element()},_toggleReadOnlyState:function(){const t=this.option("readOnly");this._toggleBackspaceHandler(t),this.$element().toggleClass("dx-state-readonly",!!t),this._setAriaReadonly(t)},_setAriaReadonly(t){this.setAria("readonly",t||void 0)},_toggleBackspaceHandler:function(t){const e=this._keyboardEventBindingTarget(),i=(0,f.addNamespace)("keydown","editorReadOnly");P.Z.off(e,i),t&&P.Z.on(e,i,(t=>{"backspace"===(0,f.normalizeKeyName)(t)&&t.preventDefault()}))},_dispose:function(){const t=this.$element()[0];(0,d.aT)(t,z,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),this.callBase()},_setSubmitElementName:function(t){const e=this._getSubmitElement();e&&(t.length>0?e.attr("name",t):e.removeAttr("name"))},_getSubmitElement:function(){return null},_setValidationMessageOption:function(t){var e;let{name:i,value:n}=t;const o=K[i]?K[i]:i;null===(e=this._validationMessage)||void 0===e||e.option(o,n)},_hasActiveElement:l.noop,_optionChanged:function(t){var e;switch(t.name){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":t.value!=t.previousValue&&(this.option("isDirty",this._initialValue!==t.value),this.validationRequest.fire({value:t.value,editor:this})),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(t.value,t.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(t),null===(e=this._validationMessage)||void 0===e||e.updateMaxWidth();break;case"name":this._setSubmitElementName(t.value);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(A.synchronizeValidationOptions(t,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessagePosition":case"validationMessageOffset":this._setValidationMessageOption(t);break;case"rtlEnabled":this._setValidationMessageOption(t),this.callBase(t);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,t);break;case"_showValidationMessage":case"isDirty":break;default:this.callBase(t)}},_resetToInitialValue:function(){this.option("value",this._initialValue)},blur:function(){this._hasActiveElement()&&(0,L.resetActiveElement)()},clear:function(){const t=this._getDefaultOptions();this.option("value",t.value)},reset:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;arguments.length&&(this._initialValue=t),this._resetToInitialValue(),this.option("isDirty",!1),this.option("isValid",!0)}});q.isEditor=t=>t instanceof q;const U=q;var G=i(1898),Y=i(6819),Q=i(1734),X=i(6694),J=i(418),tt=i(9925);const et=m.default.abstract,it=tt.default.real(),nt=m.default.inherit(function(){const t=(0,f.addNamespace)("scroll","dxScrollEmitter");return{ctor:function(e){this._element=e,this._locked=!1,this._proxiedScroll=t=>{this._disposed||this._scroll(t)},P.Z.on(this._element,t,this._proxiedScroll)},_scroll:et,check:function(t,e){this._locked&&e()},dispose:function(){this._disposed=!0,P.Z.off(this._element,t,this._proxiedScroll)}}}()),ot=nt.inherit({ctor:function(t,e){this.callBase(t),this._timeout=e},_scroll:function(){this._prepare(),this._forget()},_prepare:function(){this._timer&&this._clearTimer(),this._locked=!0},_clearTimer:function(){clearTimeout(this._timer),this._locked=!1,this._timer=null},_forget:function(){const t=this;this._timer=setTimeout((function(){t._clearTimer()}),this._timeout)},dispose:function(){this.callBase(),this._clearTimer()}}),rt=ot.inherit({ctor:function(t){this.callBase(t,400),this._lastWheelDirection=null},check:function(t,e){this._checkDirectionChanged(t),this.callBase(t,e)},_checkDirectionChanged:function(t){if(!(0,f.isDxMouseWheelEvent)(t))return void(this._lastWheelDirection=null);const e=t.shiftKey||!1,i=null!==this._lastWheelDirection&&e!==this._lastWheelDirection;this._lastWheelDirection=e,this._locked=this._locked&&!i}});let st=ot.inherit({ctor:function(t){this.callBase(t,400)}});!function(){const{ios:t,android:e}=it;(t||e)&&(st=nt.inherit({_scroll:function(){this._locked=!0;const t=this;(0,J.cancelAnimationFrame)(this._scrollFrame),this._scrollFrame=(0,J.requestAnimationFrame)((function(){t._locked=!1}))},check:function(t,e){(0,J.cancelAnimationFrame)(this._scrollFrame),(0,J.cancelAnimationFrame)(this._checkFrame);const i=this,n=this.callBase;this._checkFrame=(0,J.requestAnimationFrame)((function(){n.call(i,t,e),i._locked=!1}))},dispose:function(){this.callBase(),(0,J.cancelAnimationFrame)(this._scrollFrame),(0,J.cancelAnimationFrame)(this._checkFrame)}}))}();const at=Q.default.inherit(function(){const t=Math.round(1e3/60);return{ctor:function(t){this.callBase.apply(this,arguments),this.direction="both",this._pointerLocker=new st(t),this._wheelLocker=new rt(t)},validate:function(){return!0},configure:function(t){t.scrollTarget&&(this._pointerLocker.dispose(),this._wheelLocker.dispose(),this._pointerLocker=new st(t.scrollTarget),this._wheelLocker=new rt(t.scrollTarget)),this.callBase(t)},_init:function(t){this._wheelLocker.check(t,function(){(0,f.isDxMouseWheelEvent)(t)&&this._accept(t)}.bind(this)),this._pointerLocker.check(t,function(){const e=this.isNative&&(0,f.isMouseEvent)(t);(0,f.isDxMouseWheelEvent)(t)||e||this._accept(t)}.bind(this)),this._fireEvent("dxscrollinit",t),this._prevEventData=(0,f.eventData)(t)},move:function(t){this.callBase.apply(this,arguments),t.isScrollingEvent=this.isNative||t.isScrollingEvent},_start:function(t){this._savedEventData=(0,f.eventData)(t),this._fireEvent("dxscrollstart",t),this._prevEventData=(0,f.eventData)(t)},_move:function(t){const e=(0,f.eventData)(t);this._fireEvent("dxscroll",t,{delta:(0,f.eventDelta)(this._prevEventData,e)}),(0,f.eventDelta)(this._savedEventData,e).time>200&&(this._savedEventData=this._prevEventData),this._prevEventData=(0,f.eventData)(t)},_end:function(e){const i=(0,f.eventDelta)(this._prevEventData,(0,f.eventData)(e));let n={x:0,y:0};if(!(0,f.isDxMouseWheelEvent)(e)&&i.time<100){const e=(0,f.eventDelta)(this._savedEventData,this._prevEventData),i=t/e.time;n={x:e.x*i,y:e.y*i}}this._fireEvent("dxscrollend",e,{velocity:n})},_stop:function(t){this._fireEvent("dxscrollstop",t)},cancel:function(t){this.callBase.apply(this,arguments),this._fireEvent("dxscrollcancel",t)},dispose:function(){this.callBase.apply(this,arguments),this._pointerLocker.dispose(),this._wheelLocker.dispose()},_clearSelection:function(){if(!this.isNative)return this.callBase.apply(this,arguments)},_toggleGestureCover:function(){if(!this.isNative)return this.callBase.apply(this,arguments)}}}());(0,X.Z)({emitter:at,events:["dxscrollinit","dxscrollstart","dxscroll","dxscrollend","dxscrollstop","dxscrollcancel"]});const lt="dxscrollinit",ct="dxscrollstart",ut="dxscroll",dt="dxscrollend",ht="dxscrollstop",pt="dxscrollcancel";var ft=i(9743),_t=i(1853),mt=i.n(_t);function gt(){if(!mt())throw G.Z.Error("E1041","Quill");return mt()}let vt;if(mt()){const t=mt().import("core/theme");vt=class extends t{constructor(t,e){super(t,e),this.quill.root.classList.add("dx-htmleditor-content"),this.quill.root.setAttribute("role","textbox"),this.quill.root.setAttribute("aria-label","Editor content")}}}else vt={};const bt=vt;let yt={};if(mt()){const t=mt().import("formats/image");yt=class extends t{static create(t){const e=t&&t.src||t,i=super.create(e);if((0,s.Kn)(t)){const e=(e,n)=>{t[e]&&i.setAttribute(e,n)};e("alt",t.alt),e("width",t.width),e("height",t.height)}return i}static formats(t){const e=super.formats(t);return e.imageSrc=t.getAttribute("src"),e}formats(){const t=super.formats(),e=this.domNode.style.float;return e&&(t.float=e),t}format(t,e){"float"===t?this.domNode.style[t]=e:super.format(t,e)}static value(t){return{src:t.getAttribute("src"),width:t.getAttribute("width"),height:t.getAttribute("height"),alt:t.getAttribute("alt")}}},yt.blotName="extendedImage"}const Ct=yt;let wt={};if(mt()){const t=mt().import("formats/link");wt=class e extends t{static create(t){const e=(null==t?void 0:t.href)??t,i=super.create(e);return(0,s.Kn)(t)&&(t.text&&(i.innerText=t.text),t.target||i.removeAttribute("target")),i}static formats(t){return{href:t.getAttribute("href"),target:t.getAttribute("target")}}formats(){const t=super.formats(),{href:i,target:n}=e.formats(this.domNode);return t.link=i,t.target=n,t}format(t,e){"link"===t&&(0,s.Kn)(e)?(e.text&&(this.domNode.innerText=e.text),e.target?this.domNode.setAttribute("target","_blank"):this.domNode.removeAttribute("target"),this.domNode.setAttribute("href",e.href)):super.format(t,e)}static value(t){return{href:t.getAttribute("href"),text:t.innerText,target:!!t.getAttribute("target")}}}}const xt=wt;let St={};mt()&&(St=mt().import("attributors/style/font"),St.whitelist=null);const It=St;let kt={};mt()&&(kt=mt().import("attributors/style/size"),kt.whitelist=null);const Et=kt;let Ot={};mt()&&(Ot=mt().import("attributors/style/align"),Ot.whitelist.push("left"));const Tt=Ot;let Dt=class{};if(mt()){const t=mt().import("core/module");Dt=class extends t{constructor(t,e){super(t,e),this.editorInstance=e.editorInstance}saveValueChangeEvent(t){this.editorInstance._saveValueChangeEvent(t)}addCleanCallback(t){this.editorInstance.addCleanCallback(t)}handleOptionChangeValue(t){(0,s.Kn)(t)?Object.entries(t).forEach((t=>{let[e,i]=t;return this.option(e,i)})):(0,s.$K)(t)||null==this||this.clean()}}}const Bt=Dt;var At=i(5650),Pt=i(8805),Mt=i(4094),Rt=i(7331),Nt=i(4408),$t=i(8083);const Vt=m.default.inherit({ctor:function(t,e,i){this._$element=t,this._options=e,this._rawData=i,(0,$t.nf)(t,this,this._dispose),this._render()},_render:function(){const t=(0,o.Z)("<div>").addClass("dx-item-content-placeholder");this._$element.append(t),this._watchers=[],this._renderWatchers()},_renderWatchers:function(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))},_startWatcher:function(t,e){const i=this._rawData,n=this._options.fieldGetter(t),o=function(t,e,i){const n=function(){let t;return function(e){t!==e&&(i(e,t),t=e)}}();return{dispose:t(e,n),force:function(){n(e())}}}(this._options.watchMethod(),(function(){return n(i)}),function(t,i){this._dirty=!0,e(t,i)}.bind(this));this._watchers.push(o)},setDataField:function(){if(this._dirty=!1,(0,g.each)(this._watchers,(function(t,e){e.force()})),this._dirty)return!0},_renderDisabled:function(t,e){this._$element.toggleClass("dx-state-disabled",!!t),this._$element.attr("aria-disabled",!!t),this._updateOwnerFocus(t)},_updateOwnerFocus:function(t){const e=this._options.owner;e&&t&&e._resetItemFocus(this._$element)},_renderVisible:function(t,e){this._$element.toggleClass("dx-state-invisible",void 0!==t&&!t)},_dispose:function(){(0,g.each)(this._watchers,(function(t,e){e.dispose()}))}});Vt.getInstance=function(t){return(0,$t.Bt)(t,this)};const Ft=Vt;var Zt=i(3400),Ht=i(4321);const Lt=Math.abs,jt=Ht.Z.inherit({start:function(t){this._startEventData=(0,f.eventData)(t),this._startTimer(t)},_startTimer:function(t){const e="timeout"in this?this.timeout:750;this._holdTimer=setTimeout(function(){this._requestAccept(t),this._fireEvent("dxhold",t,{target:t.target}),this._forgetAccept()}.bind(this),e)},move:function(t){this._touchWasMoved(t)&&this._cancel(t)},_touchWasMoved:function(t){const e=(0,f.eventDelta)(this._startEventData,(0,f.eventData)(t));return Lt(e.x)>5||Lt(e.y)>5},end:function(){this._stopTimer()},_stopTimer:function(){clearTimeout(this._holdTimer)},cancel:function(){this._stopTimer()},dispose:function(){this._stopTimer()}});(0,X.Z)({emitter:jt,bubble:!0,events:["dxhold"]});const zt="dxhold";var Wt=i(9922),Kt=i(4969),qt=i(5971),Ut=i(8240);const Gt=(0,f.addNamespace)("contextmenu","dxContexMenu"),Yt=(0,f.addNamespace)(zt,"dxContexMenu"),Qt=m.default.inherit({setup:function(t){const e=(0,o.Z)(t);P.Z.on(e,Gt,this._contextMenuHandler.bind(this)),(qt.touch||tt.default.isSimulator())&&P.Z.on(e,Yt,this._holdHandler.bind(this))},_holdHandler:function(t){(0,f.isMouseEvent)(t)&&!tt.default.isSimulator()||this._fireContextMenu(t)},_contextMenuHandler:function(t){this._fireContextMenu(t)},_fireContextMenu:function(t){return(0,f.fireEvent)({type:"dxcontextmenu",originalEvent:t})},teardown:function(t){P.Z.off(t,".dxContexMenu")}});(0,Ut.Z)("dxcontextmenu",new Qt);const Xt="dxcontextmenu";var Jt=i(8692),te=i(5924);class ee extends Jt.S{constructor(t,e,i,n){super(),this._render=t,this._fields=e,this._fieldsMap=n||{},this._watchMethod=i}_renderCore(t){const e=(0,o.Z)(t.container),i=function(t,e,i,n,o){let r;const a=((t,e,i)=>e((()=>t),i))(t,e,(function(t){r&&r(),(0,s.pt)(t)?o(t):r=function(t,e,i,n,o){const r={},s=i.slice(),a=i.map((function(i){const a=n[i];return e(a?()=>a(t):()=>t[i],(function(t){if(r[i]=t,s.length){const t=s.indexOf(i);t>=0&&s.splice(t,1)}s.length||o(r)}))}));return function(){a.forEach((t=>t()))}}(t,e,i,n,o)}));return function(){r&&r(),a&&a()}}(t.model,this._watchMethod,this._fields,this._fieldsMap,(i=>{e.empty(),this._render(e,i,t.model)}));return P.Z.on(e,te.x,i),e.contents()}}const ie="dx-item",ne=/^([^.]+\[\d+\]\.)+([\w.]+)$/,oe=_.default.inherit({_activeStateUnit:"."+ie,_supportedKeys:function(){const t=function(t,e){(0,f.isCommandKeyPressed)(e)||(e.preventDefault(),e.stopPropagation(),this._moveFocus(t,e))};return(0,r.l)(this.callBase(),{space:function(t){t.preventDefault(),this._enterKeyHandler(t)},enter:this._enterKeyHandler,leftArrow:t.bind(this,"left"),rightArrow:t.bind(this,"right"),upArrow:t.bind(this,"up"),downArrow:t.bind(this,"down"),pageUp:t.bind(this,"up"),pageDown:t.bind(this,"down"),home:t.bind(this,"first"),end:t.bind(this,"last")})},_enterKeyHandler:function(t){const e=(0,o.Z)(this.option("focusedElement"));if(!e.length)return;const i=this._getItemData(e);null!=i&&i.onClick&&this._itemEventHandlerByHandler(e,i.onClick,{event:t}),this._itemClickHandler((0,r.l)({},t,{target:e.get(0),currentTarget:e.get(0)}))},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:C.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,dataSource:null,_dataController:null,_itemAttributes:{},itemTemplateProperty:"template",focusOnSelectedItem:!0,focusedElement:null,displayExpr:void 0,disabledExpr:function(t){return t?t.disabled:void 0},visibleExpr:function(t){return t?t.visible:void 0}})},_init:function(){this._compileDisplayGetter(),this._initDataController(),this.callBase(),this._cleanRenderedItems(),this._refreshDataSource()},_compileDisplayGetter:function(){const t=this.option("displayExpr");this._displayGetter=t?(0,Wt.vb)(this.option("displayExpr")):void 0},_initTemplates:function(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),this.callBase()},_getAnonymousTemplateName:function(){return"item"},_initDefaultItemTemplate:function(){const t=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new ee(function(e,i){(0,s.PO)(i)?this._prepareDefaultItemTemplate(i,e):(t&&(0,s.mf)(t.text)&&(i=t.text(i)),e.text(String((0,l.ensureDefined)(i,""))))}.bind(this),this._getBindableFields(),this.option("integrationOptions.watchMethod"),t)})},_getBindableFields:function(){return["text","html"]},_getFieldsMap:function(){if(this._displayGetter)return{text:this._displayGetter}},_prepareDefaultItemTemplate:function(t,e){(0,s.$K)(t.text)&&e.text(t.text),(0,s.$K)(t.html)&&e.html(t.html)},_initItemsFromMarkup:function(){const t=(0,Pt.hK)(this.$element(),"dxItem");if(!t.length||this.option("items").length)return;const e=t.map((t=>{let{element:e,options:i}=t;return/\S/.test(e.innerHTML)&&!i.template?i.template=this._prepareItemTemplate(e):(0,o.Z)(e).remove(),i}));this.option("items",e)},_prepareItemTemplate:function(t){const e="tmpl-"+new H.Z,i=(0,o.Z)(t).detach().clone().removeAttr("data-options").addClass("dx-template-wrapper");return this._saveTemplate(e,i),e},_dataSourceOptions:function(){return{paginate:!1}},_cleanRenderedItems:function(){this._renderedItemsCount=0},_focusTarget:function(){return this.$element()},_focusInHandler:function(t){if(this.callBase.apply(this,arguments),!this._isFocusTarget(t.target))return;const e=(0,o.Z)(this.option("focusedElement"));if(e.length)this._setFocusedItem(e);else{const t=this._getActiveItem();t.length&&this.option("focusedElement",(0,a.u)(t))}},_focusOutHandler:function(){this.callBase.apply(this,arguments);const t=(0,o.Z)(this.option("focusedElement"));this._updateFocusedItemState(t,!1)},_findActiveTarget(t){return t.find(this._activeStateUnit)},_getActiveItem:function(t){const e=(0,o.Z)(this.option("focusedElement"));if(e.length)return e;let i=this.option("focusOnSelectedItem")?this.option("selectedIndex"):0;const n=this._getActiveElement(),r=n.length-1;return i<0&&(i=t?r:0),n.eq(i)},_moveFocus:function(t){const e=this._getAvailableItems();let i;switch(t){case"pageup":case"up":i=this._prevItem(e);break;case"pagedown":case"down":i=this._nextItem(e);break;case"right":i=this.option("rtlEnabled")?this._prevItem(e):this._nextItem(e);break;case"left":i=this.option("rtlEnabled")?this._nextItem(e):this._prevItem(e);break;case"first":i=e.first();break;case"last":i=e.last();break;default:return!1}0!==i.length&&this.option("focusedElement",(0,a.u)(i))},_getVisibleItems:function(t){return(t=t||this._itemElements()).filter(":visible")},_getAvailableItems:function(t){return this._getVisibleItems(t)},_prevItem:function(t){const e=this._getActiveItem(),i=t.index(e),n=t.last();let r=(0,o.Z)(t[i-1]);const s=this.option("loopItemFocus");return 0===r.length&&s&&(r=n),r},_nextItem:function(t){const e=this._getActiveItem(!0),i=t.index(e),n=t.first();let r=(0,o.Z)(t[i+1]);const s=this.option("loopItemFocus");return 0===r.length&&s&&(r=n),r},_selectFocusedItem:function(t){this.selectItem(t)},_updateFocusedItemState:function(t,e,i){const n=(0,o.Z)(t);n.length&&(this._refreshActiveDescendant(),this._refreshItemId(n,i),this._toggleFocusClass(e,n)),this._updateParentActiveDescendant()},_refreshActiveDescendant:function(t){this.setAria("activedescendant",(0,s.$K)(this.option("focusedElement"))?this.getFocusedItemId():null,t)},_refreshItemId:function(t,e){!e&&this.option("focusedElement")?this.setAria("id",this.getFocusedItemId(),t):this.setAria("id",null,t)},_isDisabled:t=>t&&"true"===(0,o.Z)(t).attr("aria-disabled"),_setFocusedItem:function(t){if(!t||!t.length)return;this._updateFocusedItemState(t,!0),this.onFocusedItemChanged(this.getFocusedItemId());const{selectOnFocus:e}=this.option(),i=this._isDisabled(t);e&&!i&&this._selectFocusedItem(t)},_findItemElementByItem:function(t){let e=(0,o.Z)();const i=this;return this.itemElements().each((function(){const n=(0,o.Z)(this);if(n.data(i._itemDataKey())===t)return e=n,!1})),e},_getIndexByItem:function(t){return this.option("items").indexOf(t)},_itemOptionChanged:function(t,e,i,n){const o=this._findItemElementByItem(t);o.length&&(this.constructor.ItemClass.getInstance(o).setDataField(e,i)||this._refreshItem(o,t),"disabled"===e&&i&&this._resetItemFocus(o))},_resetItemFocus(t){t.is(this.option("focusedElement"))&&this.option("focusedElement",null)},_refreshItem:function(t){const e=this._getItemData(t),i=t.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+i,e,null,t)},_updateParentActiveDescendant:l.noop,_optionChanged:function(t){if("items"===t.name){const e=t.fullName.match(ne);if(e&&e.length){const i=e[e.length-1],n=t.fullName.replace("."+i,""),o=this.option(n);return void this._itemOptionChanged(o,i,t.value,t.previousValue)}}switch(t.name){case"items":case"_itemAttributes":case"itemTemplateProperty":case"useItemTextAsTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":case"encodeNoDataText":this._renderEmptyMessage();break;case"itemTemplate":case"visibleExpr":case"disabledExpr":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":case"selectOnFocus":case"loopItemFocus":case"focusOnSelectedItem":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"focusedElement":this._updateFocusedItemState(t.previousValue,!1,!0),this._setFocusedItem((0,o.Z)(t.value));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;default:this.callBase(t)}},_invalidate:function(){return this.option("focusedElement",null),this.callBase.apply(this,arguments)},_loadNextPage:function(){return this._expectNextPageLoading(),this._dataController.loadNextPage()},_expectNextPageLoading:function(){this._startIndexForAppendedItems=0},_expectLastItemLoading:function(){this._startIndexForAppendedItems=-1},_forgetNextPageLoading:function(){this._startIndexForAppendedItems=null},_dataSourceChangedHandler:function(t){const e=this.option("items");this._initialized&&e&&this._shouldAppendItems()?(this._renderedItemsCount=e.length,this._isLastPage()&&-1===this._startIndexForAppendedItems||(this.option().items=e.concat(t.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",t.slice())},_refreshContent:function(){this._prepareContent(),this._renderContent()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this.option("items",this.option("items"))},_shouldAppendItems:function(){return null!=this._startIndexForAppendedItems&&this._allowDynamicItemsAppend()},_allowDynamicItemsAppend:function(){return!1},_clean:function(){this._cleanFocusState(),this._cleanItemContainer(),this._inkRipple&&delete this._inkRipple,this._resetActiveState()},_cleanItemContainer:function(){(0,o.Z)(this._itemContainer()).empty()},_dispose:function(){this.callBase(),clearTimeout(this._itemFocusTimeout)},_refresh:function(){this._cleanRenderedItems(),this.callBase.apply(this,arguments)},_itemContainer:function(){return this.$element()},_itemClass:function(){return ie},_itemContentClass:function(){return this._itemClass()+"-content"},_selectedItemClass:function(){return"dx-item-selected"},_itemResponseWaitClass:function(){return"dx-item-response-wait"},_itemSelector:function(){return"."+this._itemClass()},_itemDataKey:function(){return"dxItemData"},_itemIndexKey:function(){return"dxItemIndex"},_itemElements:function(){return this._itemContainer().find(this._itemSelector())},_initMarkup:function(){this.callBase(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()},_prepareContent:(0,l.deferRenderer)((function(){this._renderContentImpl()})),_renderContent:function(){this._fireContentReadyAction()},_render:function(){this.callBase(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()},_getPointerEvent:()=>ft.Z.down,_attachClickEvent(){const t=this._itemSelector(),e=this._getPointerEvent(),i=(0,f.addNamespace)(Kt.name,this.NAME),n=(0,f.addNamespace)(e,this.NAME),r=new Rt.Z((t=>{const{event:e}=t;this._itemPointerDownHandler(e)}));P.Z.off(this._itemContainer(),i,t),P.Z.off(this._itemContainer(),n,t),P.Z.on(this._itemContainer(),i,t,(t=>this._itemClickHandler(t))),P.Z.on(this._itemContainer(),n,t,(t=>{r.execute({element:(0,o.Z)(t.target),event:t})}))},_itemClickHandler:function(t,e,i){this._itemDXEventHandler(t,"onItemClick",e,i)},_itemPointerDownHandler:function(t){this.option("focusStateEnabled")&&(this._itemFocusHandler=function(){if(clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=null,t.isDefaultPrevented())return;const e=(0,o.Z)(t.target),i=e.closest(this._itemElements()),n=this._closestFocusable(e);i.length&&this._isFocusTarget(null==n?void 0:n.get(0))&&this.option("focusedElement",(0,a.u)(i))}.bind(this),this._itemFocusTimeout=setTimeout(this._forcePointerDownFocus.bind(this)))},_closestFocusable:function(t){if(t.is(Zt.KW))return t;for(t=t.parent();t.length&&!Mt.Z.isDocument(t.get(0))&&!Mt.Z.isDocumentFragment(t.get(0));){if(t.is(Zt.KW))return t;t=t.parent()}},_forcePointerDownFocus:function(){this._itemFocusHandler&&this._itemFocusHandler()},_updateFocusState:function(){this.callBase.apply(this,arguments),this._forcePointerDownFocus()},_attachHoldEvent:function(){const t=this._itemContainer(),e=this._itemSelector(),i=(0,f.addNamespace)(zt,this.NAME);P.Z.off(t,i,e),P.Z.on(t,i,e,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))},_getHoldTimeout:function(){return this.option("itemHoldTimeout")},_shouldFireHoldEvent:function(){return this.hasActionSubscription("onItemHold")},_itemHoldHandler:function(t){this._shouldFireHoldEvent()?this._itemDXEventHandler(t,"onItemHold"):t.cancel=!0},_attachContextMenuEvent:function(){const t=this._itemContainer(),e=this._itemSelector(),i=(0,f.addNamespace)(Xt,this.NAME);P.Z.off(t,i,e),P.Z.on(t,i,e,this._itemContextMenuHandler.bind(this))},_shouldFireContextMenuEvent:function(){return this.hasActionSubscription("onItemContextMenu")},_itemContextMenuHandler:function(t){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(t,"onItemContextMenu"):t.cancel=!0},_renderContentImpl:function(){const t=this.option("items")||[];this._renderedItemsCount?this._renderItems(t.slice(this._renderedItemsCount)):this._renderItems(t)},_renderItems:function(t){t.length&&(0,g.each)(t,function(t,e){this._renderItem(this._renderedItemsCount+t,e)}.bind(this)),this._renderEmptyMessage()},_getItemsContainer:function(){return this._itemContainer()},_setAttributes(t){const e=(0,n.Z)({},this.option("_itemAttributes")),{class:i}=e;if(i){const n=t.get(0).className;e.class=[n,i].join(" ")}t.attr(e)},_renderItem:function(t,e,i,n){const o=(null==t?void 0:t.item)??t;i=i||this._getItemsContainer();const r=this._renderItemFrame(o,e,i,n);this._setElementData(r,e,o),this._setAttributes(r),this._attachItemClickEvent(e,r);const s=this._getItemContent(r),l=this._renderItemContent({index:o,itemData:e,container:(0,a.u)(s),contentClass:this._itemContentClass(),defaultTemplateName:this.option("itemTemplate")}),c=this;return(0,w.gx)(l).done((function(i){c._postprocessRenderItem({itemElement:r,itemContent:i,itemData:e,itemIndex:o}),c._executeItemRenderAction(t,e,(0,a.u)(r))})),r},_getItemContent:function(t){const e=t.find(".dx-item-content-placeholder");return e.removeClass("dx-item-content-placeholder"),e},_attachItemClickEvent:function(t,e){t&&t.onClick&&P.Z.on(e,Kt.name,function(i){this._itemEventHandlerByHandler(e,t.onClick,{event:i})}.bind(this))},_renderItemContent:function(t){const e=this._getItemTemplateName(t),i=this._getTemplate(e);this._addItemContentClasses(t);const n=(0,o.Z)(this._createItemByTemplate(i,t));return n.hasClass("dx-template-wrapper")?this._renderItemContentByNode(t,n):t.container},_renderItemContentByNode:function(t,e){return(0,o.Z)(t.container).replaceWith(e),t.container=(0,a.u)(e),this._addItemContentClasses(t),e},_addItemContentClasses:function(t){const e=[ie+"-content",t.contentClass];(0,o.Z)(t.container).addClass(e.join(" "))},_appendItemToContainer:function(t,e,i){e.appendTo(t)},_renderItemFrame:function(t,e,i,n){const r=(0,o.Z)("<div>");if(new this.constructor.ItemClass(r,this._itemOptions(),e||{}),n&&n.length?n.replaceWith(r):this._appendItemToContainer.call(this,i,r,t),this.option("useItemTextAsTitle")){const t=this._displayGetter?this._displayGetter(e):e;r.attr("title",t)}return r},_itemOptions:function(){const t=this;return{watchMethod:function(){return t.option("integrationOptions.watchMethod")},owner:t,fieldGetter:function(e){const i=t.option(e+"Expr");return(0,Wt.vb)(i)}}},_postprocessRenderItem:l.noop,_executeItemRenderAction:function(t,e,i){this._getItemRenderAction()({itemElement:i,itemIndex:t,itemData:e})},_setElementData:function(t,e,i){t.addClass([ie,this._itemClass()].join(" ")).data(this._itemDataKey(),e).data(this._itemIndexKey(),i)},_createItemRenderAction:function(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"})},_getItemRenderAction:function(){return this._itemRenderAction||this._createItemRenderAction()},_getItemTemplateName:function(t){const e=t.itemData,i=t.templateProperty||this.option("itemTemplateProperty");return e&&e[i]||t.defaultTemplateName},_createItemByTemplate:function(t,e){return t.render({model:e.itemData,container:e.container,index:e.index,onRendered:this._onItemTemplateRendered(t,e)})},_onItemTemplateRendered:function(){return l.noop},_emptyMessageContainer:function(){return this._itemContainer()},_renderEmptyMessage:function(t){t=t||this.option("items");const e=this.option("noDataText"),i=!e||t&&t.length||this._dataController.isLoading();i&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),i||(this._$noData=this._$noData||(0,o.Z)("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer()),this.option("encodeNoDataText")?this._$noData.text(e):this._$noData.html(e)),this.$element().toggleClass("dx-empty-collection",!i)},_itemDXEventHandler:function(t,e,i,n){this._itemEventHandler(t.target,e,(0,r.l)(i,{event:t}),n)},_itemEventHandler:function(t,e,i,n){const o=this._createActionByOption(e,(0,r.l)({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(t,o,i)},_itemEventHandlerByHandler:function(t,e,i,n){const o=this._createAction(e,(0,r.l)({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(t,o,i)},_itemEventHandlerImpl:function(t,e,i){const n=this._closestItemElement((0,o.Z)(t)),s=(0,r.l)({},i);return e((0,r.l)(i,this._extendActionArgs(n),s))},_extendActionArgs:function(t){return{itemElement:(0,a.u)(t),itemIndex:this._itemElements().index(t),itemData:this._getItemData(t)}},_closestItemElement:function(t){return(0,o.Z)(t).closest(this._itemSelector())},_getItemData:function(t){return(0,o.Z)(t).data(this._itemDataKey())},_getSummaryItemsSize(t,e,i){let n=0;return e&&(0,g.each)(e,(function(e,o){"width"===t?n+=(0,M.Y_)(o,i||!1):"height"===t&&(n+=(0,M.zp)(o,i||!1))})),n},getFocusedItemId:function(){return this._focusedItemId||(this._focusedItemId="dx-"+new H.Z),this._focusedItemId},itemElements:function(){return this._itemElements()},itemsContainer:function(){return this._itemContainer()}}).include(Nt.Z);oe.ItemClass=Ft;const re=oe,se=m.default.abstract,ae=m.default.inherit({ctor:function(t){this._collectionWidget=t},getIndexByItemData:se,getItemDataByIndex:se,getKeysByItems:se,getItemsByKeys:se,itemsGetter:se,getKeyByIndex:function(t){const e=this._denormalizeItemIndex(t);return this.getKeysByItems([this.getItemDataByIndex(e)])[0]},_equalKeys:function(t,e){return this._collectionWidget._isKeySpecified()?(0,l.equalByValue)(t,e):t===e},beginCache:function(){this._cache={}},endCache:function(){this._cache=null},getIndexByKey:se,getNormalizedIndex:function(t){return this._isNormalizedItemIndex(t)?t:this._isItemIndex(t)?this._normalizeItemIndex(t):this._isNode(t)?this._getNormalizedItemIndex(t):this._normalizeItemIndex(this.getIndexByItemData(t))},getIndex:function(t){return this._isNormalizedItemIndex(t)?this._denormalizeItemIndex(t):this._isItemIndex(t)?t:this._isNode(t)?this._denormalizeItemIndex(this._getNormalizedItemIndex(t)):this.getIndexByItemData(t)},getItemElement:function(t){if(this._isNormalizedItemIndex(t))return this._getItemByNormalizedIndex(t);if(this._isItemIndex(t))return this._getItemByNormalizedIndex(this._normalizeItemIndex(t));if(this._isNode(t))return(0,o.Z)(t);const e=this._normalizeItemIndex(this.getIndexByItemData(t));return this._getItemByNormalizedIndex(e)},_isNode:t=>Mt.Z.isNode(t&&(0,s.ZU)(t)?t.get(0):t),deleteItemAtIndex:se,itemPlacementFunc:function(t,e){return this._itemsFromSameParent(t,e)&&t<e?"after":"before"},moveItemAtIndexToIndex:se,_isNormalizedItemIndex:function(t){return"number"==typeof t&&Math.round(t)===t},_isItemIndex:se,_getNormalizedItemIndex:se,_normalizeItemIndex:se,_denormalizeItemIndex:se,_getItemByNormalizedIndex:se,_itemsFromSameParent:se}).inherit({_getPlainItems:function(){return this._collectionWidget.option("items")||[]},getIndexByItemData:function(t){const e=this._collectionWidget.keyOf.bind(this._collectionWidget);return e?this.getIndexByKey(e(t)):this._getPlainItems().indexOf(t)},getItemDataByIndex:function(t){return this._getPlainItems()[t]},deleteItemAtIndex:function(t){this._getPlainItems().splice(t,1)},itemsGetter:function(){return this._getPlainItems()},getKeysByItems:function(t){const e=this._collectionWidget.keyOf.bind(this._collectionWidget);let i=t;if(e){i=[];for(let n=0;n<t.length;n++)i.push(e(t[n]))}return i},getIndexByKey:function(t){const e=this._cache,i=e&&e.keys||this.getKeysByItems(this._getPlainItems());if(e&&!e.keys&&(e.keys=i),"object"!=typeof t)return i.indexOf(t);for(let e=0,n=i.length;e<n;e++)if(this._equalKeys(t,i[e]))return e;return-1},getItemsByKeys:function(t,e){return(e||t).slice()},moveItemAtIndexToIndex:function(t,e){const i=this._getPlainItems(),n=i[t];i.splice(t,1),i.splice(e,0,n)},_isItemIndex:function(t){return"number"==typeof t&&Math.round(t)===t},_getNormalizedItemIndex:function(t){return this._collectionWidget._itemElements().index(t)},_normalizeItemIndex:function(t){return t},_denormalizeItemIndex:function(t){return t},_getItemByNormalizedIndex:function(t){return t>-1?this._collectionWidget._itemElements().eq(t):null},_itemsFromSameParent:function(){return!0}}),le=ae;var ce=i(5206),ue=i(9659),de=i(3250);class he{constructor(t){this.options=t,this._setOption("disabledItemKeys",[]),this._clearItemKeys()}_clearItemKeys(){this._setOption("addedItemKeys",[]),this._setOption("removedItemKeys",[]),this._setOption("removedItems",[]),this._setOption("addedItems",[])}validate(){}_setOption(t,e){this.options[t]=e}onSelectionChanged(){const t=this.options.addedItemKeys,e=this.options.removedItemKeys,i=this.options.addedItems,n=this.options.removedItems,o=this.options.selectedItems,r=this.options.selectedItemKeys,s=this.options.onSelectionChanged||l.noop;this._clearItemKeys(),s({selectedItems:o,selectedItemKeys:r,addedItemKeys:t,removedItemKeys:e,addedItems:i,removedItems:n})}equalKeys(t,e){return this.options.equalByReference&&(0,s.Kn)(t)&&(0,s.Kn)(e)?t===e:(0,l.equalByValue)(t,e)}getSelectableItems(t){return t.filter((function(t){return!(null!=t&&t.disabled)}))}_clearSelection(t,e,i,n){return t=t||[],t=Array.isArray(t)?t:[t],this.validate(),this.selectedItemKeys(t,e,i,n)}_removeTemplateProperty(t){return Array.isArray(t)?t.map((t=>this._removeTemplateProperty(t))):((0,s.Kn)(t)&&delete t.template,t)}_loadFilteredData(t,e,i,n){const o=encodeURI(JSON.stringify(this._removeTemplateProperty(t))).length,r=this.options.maxFilterLengthInRequest&&o>this.options.maxFilterLengthInRequest,a=new w.BH,l={filter:r?void 0:t,select:r?this.options.dataFields():i||this.options.dataFields()};return t&&0===t.length?a.resolve([]):this.options.load(l).done((function(i){let o=(0,s.PO)(i)?i.data:i;e&&!n?o=o.filter(e):r&&(o=(0,de.Z)(o).filter(t).toArray()),a.resolve(o)})).fail(a.reject.bind(a)),a}updateSelectedItemKeyHash(t){for(let e=0;e<t.length;e++){const i=(0,l.getKeyHash)(t[e]);(0,s.Kn)(i)||(this.options.keyHashIndices[i]=this.options.keyHashIndices[i]||[],this.options.keyHashIndices[i].push(e))}}_isAnyItemSelected(t){for(let e=0;e<t.length;e++)if(this.options.isItemSelected(t[e]))return;return!1}_getFullSelectAllState(){const t=this.options.plainItems(),e=this.options.filter();let i=this.options.ignoreDisabledItems?this.options.selectedItems:this.options.selectedItems.filter((t=>!(null!=t&&t.disabled)));e&&(i=(0,de.Z)(i).filter(e).toArray());const n=i.length,o=t.length-this.getSelectableItems(t).length;return n?n>=this.options.totalCount()-o||void 0:this._isAnyItemSelected(t)}_getVisibleSelectAllState(){const t=this.getSelectableItems(this.options.plainItems());let e=!1,i=!1;for(let n=0;n<t.length;n++){const o=t[n],r=this.options.getItemData(o),s=this.options.keyOf(r);this.options.isSelectableItem(o)&&(this.isItemKeySelected(s)?e=!0:i=!0)}return!!e&&(!i||void 0)}}class pe extends he{getSelectedItems(){return this._loadFilteredData(this.options.selectionFilter)}getSelectedItemKeys(){const t=new w.BH,e=this,i=this.options.key(),n=(0,s.HD)(i)?[i]:i;return this._loadFilteredData(this.options.selectionFilter,null,n).done((function(i){const n=i.map((function(t){return e.options.keyOf(t)}));t.resolve(n)})).fail(t.reject),t.promise()}selectedItemKeys(t,e,i,n){if(n){const t=this.options.filter();!t||JSON.stringify(t)===JSON.stringify(this.options.selectionFilter)&&i?this._setOption("selectionFilter",i?[]:null):this._addSelectionFilter(i,t,n)}else{e||this._setOption("selectionFilter",[]);for(let o=0;o<t.length;o++)i?this.removeSelectedItem(t[o]):this.addSelectedItem(t[o],n,!e)}return this.onSelectionChanged(),(new w.BH).resolve()}setSelectedItems(t){this._setOption("selectionFilter",null);for(let e=0;e<t.length;e++)this.addSelectedItem(t[e])}isItemDataSelected(t){return this.isItemKeySelected(t)}isItemKeySelected(t){const e=this.options.selectionFilter;return!e||!!(0,de.Z)([t]).filter(e).toArray().length}_getKeyExpr(){const t=this.options.key();return Array.isArray(t)&&1===t.length?t[0]:t}_normalizeKey(t){const e=this.options.key();return Array.isArray(e)&&1===e.length?t[e[0]]:t}_getFilterByKey(t){const e=this._getKeyExpr();let i=[e,"=",this._normalizeKey(t)];if(Array.isArray(e)){i=[];for(let n=0;n<e.length;n++)i.push([e[n],"=",t[e[n]]]),n!==e.length-1&&i.push("and")}return i}addSelectedItem(t,e,i){const n=this._getFilterByKey(t);this._addSelectionFilter(!1,n,e,i)}removeSelectedItem(t){const e=this._getFilterByKey(t);this._addSelectionFilter(!0,e)}validate(){const t=this.options.key;if(t&&void 0===t())throw G.Z.Error("E1042","Deferred selection")}_findSubFilter(t,e){if(!t)return-1;const i=JSON.stringify(e);for(let e=0;e<t.length;e++){const n=t[e];if(n&&JSON.stringify(n)===i)return e}return-1}_isLastSubFilter(t,e){return!(!t||!e||this._findSubFilter(t,e)!==t.length-1&&0!==this._findSubFilter([t],e))}_addFilterOperator(t,e){return t.length>1&&(0,s.HD)(t[1])&&t[1]!==e&&(t=[t]),t.length&&t.push(e),t}_denormalizeFilter(t){return t&&(0,s.HD)(t[0])&&(t=[t]),t}_isOnlyNegativeFiltersLeft(t){return t.every(((t,e)=>e%2==0?Array.isArray(t)&&"!"===t[0]:"and"===t))}_addSelectionFilter(t,e,i,n){var o;const r=this,s=t?["!",e]:e,a=t?"and":"or";let l=!0,c=r.options.selectionFilter||[];if(c=r._denormalizeFilter(c),null!==(o=c)&&void 0!==o&&o.length&&!n){const n=r._removeSameFilter(c,e,t,i),o=r._removeSameFilter(c,e,!t);t&&(-1!==n||-1!==o)&&this._isOnlyNegativeFiltersLeft(c)&&(c=[]);const s=this._isKeyFilter(e)&&this._hasKeyFiltersOnlyStartingFromIndex(c,o);l=e.length&&!s}l&&(c=r._addFilterOperator(c,a),c.push(s)),c=r._normalizeFilter(c),r._setOption("selectionFilter",t||c.length?c:null)}_normalizeFilter(t){return t&&1===t.length&&(t=t[0]),t}_removeFilterByIndex(t,e,i){const n=t[1];e>0?t.splice(e-1,2):t.splice(e,2),i&&"and"===n&&t.splice(0,t.length)}_isSimpleKeyFilter(t,e){return 3===t.length&&t[0]===e&&"="===t[1]}_isKeyFilter(t){if(2===t.length&&"!"===t[0])return this._isKeyFilter(t[1]);const e=this._getKeyExpr();if(Array.isArray(e)){if(t.length!==2*e.length-1)return!1;for(let i=0;i<e.length;i++){if(i>0&&"and"!==t[2*i-1])return!1;if(!this._isSimpleKeyFilter(t[2*i],e[i]))return!1}return!0}return this._isSimpleKeyFilter(t,e)}_hasKeyFiltersOnlyStartingFromIndex(t,e){if(e>=0){for(let i=e;i<t.length;i++)if("string"!=typeof t[i]&&!this._isKeyFilter(t[i]))return!1;return!0}return!1}_removeSameFilter(t,e,i,n){if(e=i?["!",e]:e,JSON.stringify(e)===JSON.stringify(t))return t.splice(0,t.length),0;const o=this._findSubFilter(t,e);if(o>=0)return this._removeFilterByIndex(t,o,n),o;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&t[i].length>2){const o=this._removeSameFilter(t[i],e,!1,n);if(o>=0)return t[i].length?1===t[i].length&&(t[i]=t[i][0]):this._removeFilterByIndex(t,i,n),o}return-1}getSelectAllState(){const t=this.options.filter();let e=this.options.selectionFilter;return!e||!!e.length&&(t&&t.length?(e=this._denormalizeFilter(e),!!this._isLastSubFilter(e,t)||!this._isLastSubFilter(e,["!",t])&&void 0):void 0)}loadSelectedItemsWithFilter(){const t=this.options.filter(),e=this.options.selectionFilter,i=t?[t,"and",e]:e;return this._loadFilteredData(i)}}var fe=i(555);const _e=function(t,e){const i=e(t);if((0,s.Kn)(i))try{return JSON.stringify(i)}catch(t){return i}return i},me=function(t,e,i,n){return e[i[_e(t,n)]]},ge=function(t,e){let i;this.getLocalFilter=function(t,e,i,n){return e=void 0===e?l.equalByValue:e,r.bind(this,e,t,i,n)},this.getExpr=function(i){if(!i)return;let n;return t.forEach((function(t,o){let r;n=n||[],o>0&&n.push(e?"and":"or"),r=(0,s.HD)(i)?a(i,t):function(t,i){const n=[];for(let o=0,r=t.length;o<r;o++){const r=t[o],s=(0,Wt.vb)(r),l=a(r,i&&s(i));if(!l)break;o>0&&n.push(e?"or":"and"),n.push(l)}return n}(i,t),n.push(r)})),n&&1===n.length&&(n=n[0]),n},this.getCombinedFilter=function(t,i){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.getExpr(t);let r=o;return(n||e)&&i&&(o?(r=[],r.push(o),r.push(i)):r=i),r};const n=function(e,n){if(!i){i={};const r=o(t,e,n);for(let t=0;t<r.length;t++)i[(0,l.getKeyHash)(r[t])]=!0}return i},o=function(t,e,i){return Array.isArray(i)?t.map((t=>e(t))):t};function r(i,o,r,a,c){const u=o(c);let d,h;if(!r&&(d=(0,l.getKeyHash)(u),!(0,s.Kn)(d)))return n(o,a)[d]?!e:!!e;for(h=0;h<t.length;h++)if(i(t[h],u))return!e;return!!e}function a(t,i){if(void 0!==i)return[t,e?"<>":"=",i]}};class ve extends he{constructor(t){super(t),this._initSelectedItemKeyHash()}_initSelectedItemKeyHash(){this._setOption("keyHashIndices",this.options.equalByReference?null:{})}getSelectedItemKeys(){return this.options.selectedItemKeys.slice(0)}getSelectedItems(){return this.options.selectedItems.slice(0)}_preserveSelectionUpdate(t,e){const i=this.options.keyOf;let n,o,r;if(!i)return;const s=e&&t.length>1&&!this.options.equalByReference;for(s&&(n={}),r=0;r<t.length;r++){const s=t[r],a=i(s);e?(o=this.removeSelectedItem(a,n,null==s?void 0:s.disabled),n&&o>=0&&(n[o]=!0)):this.addSelectedItem(a,s)}s&&this._batchRemoveSelectedItems(n)}_batchRemoveSelectedItems(t){const e=this.options.selectedItemKeys.slice(0),i=this.options.selectedItems.slice(0);this.options.selectedItemKeys.length=0,this.options.selectedItems.length=0;for(let n=0;n<e.length;n++)t[n]||(this.options.selectedItemKeys.push(e[n]),this.options.selectedItems.push(i[n]));this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_loadSelectedItemsCore(t,e,i,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=new w.BH;const s=this.options.key();if(!t.length&&!i)return r.resolve([]),r;if(i&&e&&!n)return r.resolve(this.getSelectedItems()),r;const a=new ge(t,i),l=a.getCombinedFilter(s,n,o);let c=[];if(e){const e=this.options.selectedItems;c=l&&t.length!==e.length?(0,de.Z)(e).filter(l).toArray():e.slice(0)}let u=c.length?c:this.options.plainItems(!0).filter(this.options.isSelectableItem).map(this.options.getItemData);const d=a.getLocalFilter(this.options.keyOf,this.equalKeys.bind(this),this.options.equalByReference,s);return u=u.filter(d),c.length||!i&&u.length===t.length?r.resolve(u):r=this._loadFilteredData(l,d,null,i),r}_replaceSelectionUpdate(t){const e=[],i=this.options.keyOf;if(i){for(let n=0;n<t.length;n++){const o=i(t[n]);e.push(o)}this.setSelectedItems(e,t)}}_warnOnIncorrectKeys(t){const e=this.options.allowNullValue;for(let i=0;i<t.length;i++){const n=t[i];e&&null===n||this.isItemKeySelected(n)||G.Z.log("W1002",n)}}_isMultiSelectEnabled(){const t=this.options.mode;return"all"===t||"multiple"===t}_requestInProgress(){var t;return"pending"===(null===(t=this._lastLoadDeferred)||void 0===t?void 0:t.state())}_concatRequestsItems(t,e,i,n){let o;const r=e?t:[];return o=n||(0,fe.R1)(t,this.options.selectedItemKeys),{addedItems:i.added.concat(o),removedItems:i.removed.concat(r),keys:t}}_collectLastRequestData(t,e,i,n){const o=e&&i,r={added:[],removed:[]},s=this._isMultiSelectEnabled();let a=s?this._lastRequestData:{};return s&&(this._shouldMergeWithLastRequest&&(o?(this._lastLoadDeferred.reject(),a={}):function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<e.length;i++)if(t[i]!==e[i])return!1;return!0}(t,this.options.selectedItemKeys)||(r.added=a.addedItems,r.removed=a.removedItems,e||this._lastLoadDeferred.reject())),a=this._concatRequestsItems(t,e,r,this._shouldMergeWithLastRequest?void 0:n)),a}_updateKeysByLastRequestData(t,e,i){let n=t;var o,r;return this._isMultiSelectEnabled()&&this._shouldMergeWithLastRequest&&!e&&!i&&(n=(0,fe.R1)(t.concat(null===(o=this._lastRequestData)||void 0===o?void 0:o.addedItems),null===(r=this._lastRequestData)||void 0===r?void 0:r.removedItems),n=(0,fe.rZ)(n)),n}_loadSelectedItems(t,e,i,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=this,s=new w.BH,a=r.options.filter();return this._shouldMergeWithLastRequest=this._requestInProgress(),this._lastRequestData=this._collectLastRequestData(t,e,i,n),(0,w.gx)(r._lastLoadDeferred).always((function(){const n=r._updateKeysByLastRequestData(t,e,i);r._shouldMergeWithLastRequest=!1,r._loadSelectedItemsCore(n,e,i,a,o).done(s.resolve).fail(s.reject)})),r._lastLoadDeferred=s,s}selectedItemKeys(t,e,i,n,o){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=this,a=s._loadSelectedItems(t,i,n,o,r);return a.done((function(t){e?s._preserveSelectionUpdate(t,i):s._replaceSelectionUpdate(t),s.onSelectionChanged()})),a}addSelectedItem(t,e){if((0,s.$K)(e)&&!this.options.ignoreDisabledItems&&e.disabled)return void(-1===this.options.disabledItemKeys.indexOf(t)&&this.options.disabledItemKeys.push(t));const i=this._getKeyHash(t);-1===this._indexOfSelectedItemKey(i)&&(!(0,s.Kn)(i)&&this.options.keyHashIndices&&(this.options.keyHashIndices[i]=[this.options.selectedItemKeys.length]),this.options.selectedItemKeys.push(t),this.options.addedItemKeys.push(t),this.options.addedItems.push(e),this.options.selectedItems.push(e))}_getSelectedIndexByKey(t,e){const i=this.options.selectedItemKeys;for(let n=0;n<i.length;n++)if((!e||!e[n])&&this.equalKeys(i[n],t))return n;return-1}_getSelectedIndexByHash(t,e){let i=this.options.keyHashIndices[t];return i&&i.length>1&&e&&(i=i.filter((function(t){return!e[t]}))),i&&i[0]>=0?i[0]:-1}_indexOfSelectedItemKey(t,e){let i;return i=this.options.equalByReference?this.options.selectedItemKeys.indexOf(t):(0,s.Kn)(t)?this._getSelectedIndexByKey(t,e):this._getSelectedIndexByHash(t,e),i}_shiftSelectedKeyIndices(t){for(let e=t;e<this.options.selectedItemKeys.length;e++){const i=this.options.selectedItemKeys[e],n=(0,l.getKeyHash)(i),o=this.options.keyHashIndices[n];if(o)for(let e=0;e<o.length;e++)o[e]>t&&o[e]--}}removeSelectedItem(t,e,i){if(!this.options.ignoreDisabledItems&&i)return;const n=this._getKeyHash(t),o=!!e,r=this._indexOfSelectedItemKey(n,e);if(r<0)return r;if(this.options.removedItemKeys.push(t),this.options.removedItems.push(this.options.selectedItems[r]),o)return r;if(this.options.selectedItemKeys.splice(r,1),this.options.selectedItems.splice(r,1),(0,s.Kn)(n)||!this.options.keyHashIndices)return r;const a=this.options.keyHashIndices[n];return a?(a.shift(),a.length||delete this.options.keyHashIndices[n],this._shiftSelectedKeyIndices(r),r):r}_updateAddedItemKeys(t,e){for(let i=0;i<t.length;i++)this.isItemKeySelected(t[i])||(this.options.addedItemKeys.push(t[i]),this.options.addedItems.push(e[i]))}_updateRemovedItemKeys(t,e,i){for(let t=0;t<e.length;t++)this.isItemKeySelected(e[t])||(this.options.removedItemKeys.push(e[t]),this.options.removedItems.push(i[t]))}_isItemSelectionInProgress(t,e){return!!(e&&this._lastRequestData&&this._requestInProgress())&&(this._lastRequestData.addedItems??[]).includes(t)}_getKeyHash(t){return this.options.equalByReference?t:(0,l.getKeyHash)(t)}setSelectedItems(t,e){this._updateAddedItemKeys(t,e);const i=this.options.selectedItemKeys,n=this.options.selectedItems;this.options.equalByReference||(this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(t)),this._setOption("selectedItemKeys",t),this._setOption("selectedItems",e),this._updateRemovedItemKeys(t,i,n)}isItemDataSelected(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.options.keyOf(t);return this.isItemKeySelected(i,e)}isItemKeySelected(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._isItemSelectionInProgress(t,e.checkPending);if(!i){const e=this._getKeyHash(t);i=-1!==this._indexOfSelectedItemKey(e)}return i}getSelectAllState(t){return t?this._getVisibleSelectAllState():this._getFullSelectAllState()}loadSelectedItemsWithFilter(){const t=this.options.key(),e=this.getSelectedItemKeys(),i=this.options.filter();if(!e.length)return(0,w.BH)().resolve([]);const n=new ge(e).getCombinedFilter(t,i,!0);return this._loadFilteredData(n)}}class be{constructor(t){this.options=(0,r.l)(this._getDefaultOptions(),t,{selectedItemKeys:t.selectedKeys||[]}),this._selectionStrategy=this.options.deferred?new pe(this.options):new ve(this.options),this._focusedItemIndex=-1,this.options.equalByReference||this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_getDefaultOptions(){return{allowNullValue:!1,deferred:!1,equalByReference:!1,mode:"multiple",selectedItems:[],selectionFilter:[],maxFilterLengthInRequest:0,onSelectionChanged:l.noop,key:l.noop,keyOf:function(t){return t},load:function(){return(new w.BH).resolve([])},totalCount:function(){return-1},isSelectableItem:function(){return!0},isItemSelected:function(){return!1},getItemData:function(t){return t},dataFields:l.noop,filter:l.noop}}validate(){this._selectionStrategy.validate()}getSelectedItemKeys(){return this._selectionStrategy.getSelectedItemKeys()}getSelectedItems(){return this._selectionStrategy.getSelectedItems()}selectionFilter(t){if(void 0===t)return this.options.selectionFilter;const e=this.options.selectionFilter!==t&&JSON.stringify(this.options.selectionFilter)!==JSON.stringify(t);this.options.selectionFilter=t,e&&this.onSelectionChanged()}setSelection(t,e){return this.selectedItemKeys(t,!1,!1,!1,e)}select(t){return this.selectedItemKeys(t,!0)}deselect(t){return this.selectedItemKeys(t,!0,!0)}selectedItemKeys(t,e,i,n,o){return t=t??[],t=Array.isArray(t)?t:[t],this.validate(),this._selectionStrategy.selectedItemKeys(t,e,i,n,o)}clearSelection(){return this.selectedItemKeys([])}_addSelectedItem(t,e){this._selectionStrategy.addSelectedItem(e,t)}_removeSelectedItem(t){this._selectionStrategy.removeSelectedItem(t)}_setSelectedItems(t,e){this._selectionStrategy.setSelectedItems(t,e)}onSelectionChanged(){this._selectionStrategy.onSelectionChanged()}changeItemSelection(t,e,i){var n,o;let r;const a=this.options.plainItems(),l=a[t];let c;const u=this.options.isVirtualPaging,d=null===(n=(o=this.options).allowLoadByRange)||void 0===n?void 0:n.call(o),h=this.options.alwaysSelectByShift;let p,f=!1,_=!1;const m=t=>t>=0&&!a.filter((e=>e.loadIndex===t)).length;if(u&&(0,s.$K)(l)&&(d&&(p=l.loadIndex-t,t=l.loadIndex),f=m(this._focusedItemIndex),(0,s.$K)(this._shiftFocusedItemIndex)&&(_=m(this._shiftFocusedItemIndex))),!this.isSelectable()||!this.isDataItem(l))return!1;const g=this.options.getItemData(l),v=this.options.keyOf(g);let b=(e=e||{}).shift;if(!1===h&&b&&(b=!1!==d||!f&&!_),b&&"multiple"===this.options.mode&&this._focusedItemIndex>=0)d&&(f||_)?(r=t!==this._shiftFocusedItemIndex||this._focusedItemIndex!==this._shiftFocusedItemIndex,r&&(c=this.changeItemSelectionWhenShiftKeyInVirtualPaging(t))):r=this.changeItemSelectionWhenShiftKeyPressed(t,a,p);else if(e.control){if(this._resetItemSelectionWhenShiftKeyPressed(),!i){const t=this._selectionStrategy.isItemDataSelected(g);"single"===this.options.mode&&this.clearSelectedItems(),t?this._removeSelectedItem(v):this._addSelectedItem(g,v)}r=!0}else{this._resetItemSelectionWhenShiftKeyPressed();const t=this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0],v);1===this.options.selectedItemKeys.length&&t||(this._setSelectedItems([v],[g]),r=!0)}return r?((0,w.gx)(c).done((()=>{this._focusedItemIndex=t,!i&&this.onSelectionChanged()})),!0):void 0}isDataItem(t){return this.options.isSelectableItem(t)}isSelectable(){return"single"===this.options.mode||"multiple"===this.options.mode}isItemDataSelected(t){return this._selectionStrategy.isItemDataSelected(t,{checkPending:!0})}isItemSelected(t,e){return this._selectionStrategy.isItemKeySelected(t,e)}_resetItemSelectionWhenShiftKeyPressed(){delete this._shiftFocusedItemIndex}_resetFocusedItemIndex(){this._focusedItemIndex=-1}changeItemSelectionWhenShiftKeyInVirtualPaging(t){const e=this.options.getLoadOptions(t,this._focusedItemIndex,this._shiftFocusedItemIndex),i=new w.BH,n=e.skip;return this.options.load(e).done((e=>{this.changeItemSelectionWhenShiftKeyPressed(t,e,n),i.resolve()})),i.promise()}changeItemSelectionWhenShiftKeyPressed(t,e,i){let n,o=!1;const r=(0,s.$K)(i);let a=r?this._focusedItemIndex-i:this._focusedItemIndex;const l=this.options.keyOf,c=e[a],u=this.options.getItemData(c),d=l(u),h=c&&this.isItemDataSelected(u);let p,f,_,m;if((0,s.$K)(this._shiftFocusedItemIndex)||(this._shiftFocusedItemIndex=this._focusedItemIndex),this._shiftFocusedItemIndex!==this._focusedItemIndex)for(n=this._focusedItemIndex<this._shiftFocusedItemIndex?1:-1,_=r?this._focusedItemIndex-i:this._focusedItemIndex,m=r?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,a=_;a!==m;a+=n)(r||this.isDataItem(e[a]))&&(f=l(this.options.getItemData(e[a])),this._removeSelectedItem(f),o=!0);if(t!==this._shiftFocusedItemIndex)for(n=t<this._shiftFocusedItemIndex?1:-1,_=r?t-i:t,m=r?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,a=_;a!==m;a+=n)(r||this.isDataItem(e[a]))&&(p=this.options.getItemData(e[a]),f=l(p),this._addSelectedItem(p,f),o=!0);return!r&&!this.isDataItem(c)||h||(this._addSelectedItem(u,d),o=!0),o}clearSelectedItems(){this._setSelectedItems([],[])}selectAll(t){return this._resetFocusedItemIndex(),t?this._onePageSelectAll(!1):this.selectedItemKeys([],!0,!1,!0)}deselectAll(t){return this._resetFocusedItemIndex(),t?this._onePageSelectAll(!0):this.selectedItemKeys([],!0,!0,!0)}_onePageSelectAll(t){const e=this._selectionStrategy.getSelectableItems(this.options.plainItems());for(let i=0;i<e.length;i++){const n=e[i];if(this.isDataItem(n)){const e=this.options.getItemData(n),i=this.options.keyOf(e),o=this.isItemSelected(i);o||t||this._addSelectedItem(e,i),o&&t&&this._removeSelectedItem(i)}}return this.onSelectionChanged(),(new w.BH).resolve()}getSelectAllState(t){return this._selectionStrategy.getSelectAllState(t)}loadSelectedItemsWithFilter(){return this._selectionStrategy.loadSelectedItemsWithFilter()}}const ye=function(t){return-1!==t},Ce=re.inherit({_setOptionsByReference:function(){this.callBase(),(0,r.l)(this._optionsByReference,{selectedItem:!0})},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{selectionMode:"none",selectionRequired:!1,selectByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:-1,selectedItem:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})},ctor:function(t,e){this._userOptions=e||{},this.callBase(t,e)},_init:function(){this._initEditStrategy(),this.callBase(),this._initKeyGetter(),this._initSelectionModule()},_initKeyGetter:function(){this._keyGetter=(0,Wt.vb)(this.option("keyExpr"))},_getKeysByItems:function(t){return this._editStrategy.getKeysByItems(t)},_getItemsByKeys:function(t,e){return this._editStrategy.getItemsByKeys(t,e)},_getKeyByIndex:function(t){return this._editStrategy.getKeyByIndex(t)},_getIndexByKey:function(t){return this._editStrategy.getIndexByKey(t)},_getIndexByItemData:function(t){return this._editStrategy.getIndexByItemData(t)},_isKeySpecified:function(){return!!this._dataController.key()},_getCombinedFilter:function(){return this._dataController.filter()},key:function(){return this.option("keyExpr")?this.option("keyExpr"):this._dataController.key()},keyOf:function(t){let e=t;return this.option("keyExpr")?e=this._keyGetter(t):this._dataController.store()&&(e=this._dataController.keyOf(t)),e},_nullValueSelectionSupported:function(){return!1},_initSelectionModule:function(){const t=this,e=t._editStrategy.itemsGetter;this._selection=new be({allowNullValue:this._nullValueSelectionSupported(),mode:this.option("selectionMode"),maxFilterLengthInRequest:this.option("maxFilterLengthInRequest"),equalByReference:!this._isKeySpecified(),onSelectionChanged:function(e){(e.addedItemKeys.length||e.removedItemKeys.length)&&(t.option("selectedItems",t._getItemsByKeys(e.selectedItemKeys,e.selectedItems)),t._updateSelectedItems(e))},filter:t._getCombinedFilter.bind(t),totalCount:function(){const e=t.option("items"),i=t._dataController.totalCount();return i>=0?i:t._getItemsCount(e)},key:t.key.bind(t),keyOf:t.keyOf.bind(t),load:function(e){var i;const n=t._dataController;return e.customQueryParams=null===(i=n.loadOptions())||void 0===i?void 0:i.customQueryParams,e.userData=n.userData(),n.store()?n.loadFromStore(e).done((function(e){if(t._disposed)return;const i=(0,ue.r6)(e).data;n.applyMapFunction(i)})):(new w.BH).resolve(this.plainItems())},dataFields:function(){return t._dataController.select()},plainItems:e.bind(t._editStrategy)})},_getItemsCount:function(t){return t.reduce(((t,e)=>t+(e.items?this._getItemsCount(e.items):1)),0)},_initEditStrategy:function(){const t=le;this._editStrategy=new t(this)},_getSelectedItemIndices:function(t){const e=this,i=[];return t=t||this._selection.getSelectedItemKeys(),e._editStrategy.beginCache(),(0,g.each)(t,(function(t,n){const o=e._getIndexByKey(n);ye(o)&&i.push(o)})),e._editStrategy.endCache(),i},_initMarkup:function(){this._rendering=!0,this._dataController.isLoading()||this._syncSelectionOptions().done((()=>this._normalizeSelectedItems())),this.callBase()},_render:function(){this.callBase(),this._rendering=!1},_fireContentReadyAction:function(){this._rendering=!1,this._rendered=!0,this.callBase.apply(this,arguments)},_syncSelectionOptions:function(t){let e,i,n,o;switch(t=t||this._chooseSelectOption()){case"selectedIndex":e=this._editStrategy.getItemDataByIndex(this.option("selectedIndex")),(0,s.$K)(e)?(this._setOptionWithoutOptionChange("selectedItems",[e]),this._setOptionWithoutOptionChange("selectedItem",e),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([e]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break;case"selectedItems":if(o=this.option("selectedItems")||[],i=o.length?this._editStrategy.getIndexByItemData(o[0]):-1,this.option("selectionRequired")&&!ye(i))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",o[0]),this._setOptionWithoutOptionChange("selectedIndex",i),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(o));break;case"selectedItem":if(e=this.option("selectedItem"),i=this._editStrategy.getIndexByItemData(e),this.option("selectionRequired")&&!ye(i))return this._syncSelectionOptions("selectedIndex");(0,s.$K)(e)?(this._setOptionWithoutOptionChange("selectedItems",[e]),this._setOptionWithoutOptionChange("selectedIndex",i),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([e]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",-1));break;case"selectedItemKeys":if(n=this.option("selectedItemKeys"),this.option("selectionRequired")){const t=this._getIndexByKey(n[0]);if(!ye(t))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(n)}return(new w.BH).resolve().promise()},_chooseSelectOption:function(){let t="selectedIndex";const e=function(t){const e=this.option(t);return(0,s.$K)(e)&&e.length||t in this._userOptions}.bind(this);return e("selectedItems")?t="selectedItems":e("selectedItem")?t="selectedItem":e("selectedItemKeys")&&(t="selectedItemKeys"),t},_compareKeys:function(t,e){if(t.length!==e.length)return!1;for(let i=0;i<e.length;i++)if(t[i]!==e[i])return!1;return!0},_normalizeSelectedItems:function(){if("none"===this.option("selectionMode"))this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if("single"===this.option("selectionMode")){const t=this.option("selectedItems");if(t.length>1||!t.length&&this.option("selectionRequired")&&this.option("items")&&this.option("items").length){const e=this._selection.getSelectedItems();let i=void 0===t[0]?e[0]:t[0];return void 0===i&&(i=this._editStrategy.itemsGetter()[0]),this.option("grouped")&&i&&i.items&&(i.items=[i.items[0]]),this._selection.setSelection(this._getKeysByItems([i])),this._setOptionWithoutOptionChange("selectedItems",[i]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(t))}else{const t=this._getKeysByItems(this.option("selectedItems")),e=this._selection.getSelectedItemKeys();this._compareKeys(e,t)||this._selection.setSelection(t)}return(new w.BH).resolve().promise()},_itemClickHandler:function(t){let e=(new w.BH).resolve();const i=this.callBase;this._createAction(function(t){e=this._itemSelectHandler(t.event)??e}.bind(this),{validatingTargetName:"itemElement"})({itemElement:(0,o.Z)(t.currentTarget),event:t}),e.always((()=>{i.apply(this,arguments)}))},_itemSelectHandler:function(t){var e;let i;if(!this.option("selectByClick"))return;const n=t.currentTarget;return this.isItemSelected(n)?this.unselectItem(t.currentTarget):i=this.selectItem(t.currentTarget),null===(e=i)||void 0===e?void 0:e.promise()},_selectedItemElement:function(t){return this._itemElements().eq(t)},_postprocessRenderItem:function(t){if("none"!==this.option("selectionMode")){const e=(0,o.Z)(t.itemElement),i=this._editStrategy.getNormalizedIndex(e),n=this._isItemSelected(i);this._processSelectableItem(e,n)}},_processSelectableItem:function(t,e){t.toggleClass(this._selectedItemClass(),e),this._setAriaSelectionAttribute(t,String(e))},_updateSelectedItems:function(t){const e=this,i=t.addedItemKeys,n=t.removedItemKeys;if(e._rendered&&(i.length||n.length)){const o=e._selectionChangePromise;if(!e._rendering){const t=[];let o;const r=[];e._editStrategy.beginCache();for(let n=0;n<i.length;n++)o=e._getIndexByKey(i[n]),t.push(o),e._addSelection(o);for(let t=0;t<n.length;t++)o=e._getIndexByKey(n[t]),r.push(o),e._removeSelection(o);e._editStrategy.endCache(),e._updateSelection(t,r)}(0,w.gx)(o).done((function(){e._fireSelectionChangeEvent(t.addedItems,t.removedItems)}))}},_fireSelectionChangeEvent:function(t,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:t,removedItems:e})},_updateSelection:l.noop,_setAriaSelectionAttribute:function(t,e){this.setAria("selected",e,t)},_removeSelection:function(t){const e=this._editStrategy.getItemElement(t);ye(t)&&(this._processSelectableItem(e,!1),P.Z.triggerHandler(e,"stateChanged",!1))},_addSelection:function(t){const e=this._editStrategy.getItemElement(t);ye(t)&&(this._processSelectableItem(e,!0),P.Z.triggerHandler(e,"stateChanged",!0))},_isItemSelected:function(t){const e=this._getKeyByIndex(t);return this._selection.isItemSelected(e,{checkPending:!0})},_optionChanged:function(t){switch(t.name){case"selectionMode":this._invalidate();break;case"dataSource":(!t.value||Array.isArray(t.value)&&!t.value.length)&&this.option("selectedItemKeys",[]),this.callBase(t);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(t.name).done((()=>this._normalizeSelectedItems()));break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"selectByClick":case"onSelectionChanged":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":break;default:this.callBase(t)}},_clearSelectedItems:function(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")},_waitDeletingPrepare:function(t){if(t.data("dxItemDeleting"))return(new w.BH).resolve().promise();t.data("dxItemDeleting",!0);const e=new w.BH,i={cancel:!1},n=this._itemEventHandler(t,"onItemDeleting",i,{excludeValidators:["disabled","readOnly"]});return(0,w.gx)(n).always(function(o){const r=!n,s=!r&&"resolved"===n.state(),a=r||s&&!arguments.length||s&&o;(0,w.gx)((0,w.p4)(i.cancel)).always((function(){t.data("dxItemDeleting",!1)})).done((function(t){a&&!t?e.resolve():e.reject()})).fail(e.reject)}.bind(this)),e.promise()},_deleteItemFromDS:function(t){const e=this._dataController,i=new w.BH,n=this.option("disabled"),o=e.store();if(!o)return(new w.BH).resolve().promise();if(!o.remove)throw G.Z.Error("E1011");return this.option("disabled",!0),o.remove(e.keyOf(this._getItemData(t))).done((function(t){void 0!==t?i.resolve():i.reject()})).fail((function(){i.reject()})),i.always(function(){this.option("disabled",n)}.bind(this)),i},_tryRefreshLastPage:function(){const t=new w.BH;return this._isLastPage()||this.option("grouped")?t.resolve():this._refreshLastPage().done((function(){t.resolve()})),t.promise()},_refreshLastPage:function(){return this._expectLastItemLoading(),this._dataController.load()},_updateSelectionAfterDelete:function(t){const e=this._getKeyByIndex(t);this._selection.deselect([e])},_updateIndicesAfterIndex:function(t){const e=this._itemElements();for(let i=t+1;i<e.length;i++)(0,o.Z)(e[i]).data(this._itemIndexKey(),i-1)},_simulateOptionChange:function(t){const e=this.option(t);e instanceof ce.o||this._optionChangedAction({name:t,fullName:t,value:e})},isItemSelected:function(t){return this._isItemSelected(this._editStrategy.getNormalizedIndex(t))},selectItem:function(t){if("none"===this.option("selectionMode"))return;const e=this._editStrategy.getNormalizedIndex(t);if(!ye(e))return;const i=this._getKeyByIndex(e);if(!this._selection.isItemSelected(i)){if("single"===this.option("selectionMode"))return this._selection.setSelection([i]);{const t=this.option("selectedItemKeys")||[];return this._selection.setSelection([...t,i],[i])}}},unselectItem:function(t){const e=this._editStrategy.getNormalizedIndex(t);if(!ye(e))return;const i=this._selection.getSelectedItemKeys();if(this.option("selectionRequired")&&i.length<=1)return;const n=this._getKeyByIndex(e);this._selection.isItemSelected(n,{checkPending:!0})&&this._selection.deselect([n])},_deleteItemElementByIndex:function(t){this._updateSelectionAfterDelete(t),this._updateIndicesAfterIndex(t),this._editStrategy.deleteItemAtIndex(t)},_afterItemElementDeleted:function(t,e){const i=this._dataController.getDataSource()?"dataSource":"items";this._simulateOptionChange(i),this._itemEventHandler(t,"onItemDeleted",e,{beforeExecute:function(){t.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()},deleteItem:function(t){const e=this,i=new w.BH,n=this._editStrategy.getItemElement(t),o=this._editStrategy.getNormalizedIndex(t),r=this._itemResponseWaitClass();return ye(o)?this._waitDeletingPrepare(n).done((function(){n.addClass(r);const t=e._extendActionArgs(n);e._deleteItemFromDS(n).done((function(){e._deleteItemElementByIndex(o),e._afterItemElementDeleted(n,t),e._tryRefreshLastPage().done((function(){i.resolveWith(e)}))})).fail((function(){n.removeClass(r),i.rejectWith(e)}))})).fail((function(){i.rejectWith(e)})):i.rejectWith(e),i.promise()},reorderItem:function(t,e){const i=new w.BH,n=this,o=this._editStrategy,r=o.getItemElement(t),s=o.getItemElement(e),a=o.getNormalizedIndex(t),l=o.getNormalizedIndex(e),c=this._dataController.getDataSource()?"dataSource":"items";return ye(a)&&ye(l)&&a!==l?i.resolveWith(this):i.rejectWith(this),i.promise().done((function(){s[o.itemPlacementFunc(a,l)](r),o.moveItemAtIndexToIndex(a,l),this._updateIndicesAfterIndex(a),n.option("selectedItems",n._getItemsByKeys(n._selection.getSelectedItemKeys(),n._selection.getSelectedItems())),"items"===c&&n._simulateOptionChange(c),n._itemEventHandler(r,"onItemReordered",{fromIndex:o.getIndex(a),toIndex:o.getIndex(l)},{excludeValidators:["disabled","readOnly"]})}))}}),we=Ce,xe=we.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(t){const e=new w.BH,i=new w.BH;this._deferredItems[t.index]=i;const n=this.callBase.call(this,t);return i.done((()=>{e.resolve(n)})),e.promise()},_onItemTemplateRendered:function(t,e){return()=>{this._deferredItems[e.index].resolve()}},_postProcessRenderItems:l.noop,_renderItemsAsync(){const t=new w.BH;return w.gx.apply(this,this._deferredItems).done((()=>{this._postProcessRenderItems(),t.resolve()})),t.promise()},_clean(){this.callBase(),this._deferredItems=[]}});var Se=i(8868);const Ie="dx-toolbar";class ke extends xe{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter((t=>"disabled"!==t))}_initTemplates(){super._initTemplates();const t=new ee(function(t,e,i){if((0,s.PO)(e)){const{text:i,html:n,widget:o}=e;i&&t.text(i).wrapInner("<div>"),n&&t.html(n),"dxDropDownButton"===o&&(e.options=e.options??{},(0,s.$K)(e.options.stylingMode)||(e.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),"dxButton"===o&&(this.option("useFlatButtons")&&(e.options=e.options??{},e.options.stylingMode=e.options.stylingMode??"text"),this.option("useDefaultButtons")&&(e.options=e.options??{},e.options.type=e.options.type??"default"))}else t.text(String(e));this._getTemplate("dx-polymorph-widget").render({container:t,model:i,parent:this})}.bind(this),["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:t,menuItem:t})}_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return(0,At.yj)()},options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".dx-toolbar-before",".dx-toolbar-center",".dx-toolbar-after"].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return"dxToolbarItemDataKey"}_dimensionChanged(){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(Ie),this._$toolbarItemsContainer=(0,o.Z)("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){const t=this._$toolbarItemsContainer;(0,g.each)(["before","center","after"],((e,i)=>{const n=`dx-toolbar-${i}`;t.find(`.${n}`).length||(this[`_$${i}Section`]=(0,o.Z)("<div>").addClass(n).attr("role","presentation").appendTo(t))}))}_arrangeItems(t){t=t??(0,M.dz)(this.$element()),this._$centerSection.css({margin:"0 auto",float:"none"});const e=(0,$.l)(this._$beforeSection.get(0)),i=(0,$.l)(this._$afterSection.get(0));this._alignCenterSection(e,i,t);const n=this._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0),o=n.parent();if(!n.length)return;const r=e.width?e.width:n.position().left,s=o.hasClass("dx-toolbar-before")?0:r,a=o.hasClass("dx-toolbar-after")?0:i.width;let l=0;o.children().not(".dx-toolbar-label").each((function(){l+=(0,M.Y_)(this)}));const c=t-l,u=Math.max(c-s-a,0);if(o.hasClass("dx-toolbar-before"))this._alignSection(this._$beforeSection,u);else{const t=(0,M.Y_)(n)-(0,M.dz)(n);n.css("maxWidth",u-t)}}_alignCenterSection(t,e,i){this._alignSection(this._$centerSection,i-t.width-e.width);const n=this.option("rtlEnabled"),o=n?e:t,r=n?t:e,s=(0,$.l)(this._$centerSection.get(0));(o.right>s.left||s.right>r.left)&&this._$centerSection.css({marginLeft:o.width,marginRight:r.width,float:o.width>r.width?"none":"right"})}_alignSection(t,e){let i=t.find(".dx-toolbar-label").toArray();e-=this._getCurrentLabelsPaddings(i);const n=this._getCurrentLabelsWidth(i),o=Math.abs(n-e);e<n?(i=i.reverse(),this._alignSectionLabels(i,o,!1)):this._alignSectionLabels(i,o,!0)}_alignSectionLabels(t,e,i){const n=function(t){return(0,$.l)(t).width};for(let r=0;r<t.length;r++){const s=(0,o.Z)(t[r]),a=Math.ceil(n(t[r]));let l;i&&s.css("maxWidth","inherit");const c=Math.ceil(i?n(t[r]):a);if(!(c<e)){l=i?a+e:a-e,s.css("maxWidth",l);break}l=i?c:0,e-=c,s.css("maxWidth",l)}}_applyCompactMode(){const t=this.$element();t.removeClass("dx-toolbar-compact"),this.option("compactMode")&&this._getSummaryItemsSize("width",this.itemElements(),!0)>(0,M.dz)(t)&&t.addClass("dx-toolbar-compact")}_getCurrentLabelsWidth(t){let e=0;return t.forEach((function(t,i){e+=(0,M.Y_)(t)})),e}_getCurrentLabelsPaddings(t){let e=0;return t.forEach((function(t,i){e+=(0,M.Y_)(t)-(0,M.dz)(t)})),e}_renderItem(t,e,i,n){const o=e.location??"center",r=i??this[`_$${o}Section`],s=!!(e.text??e.html),a=super._renderItem(t,e,r,n);return a.toggleClass("dx-toolbar-button",!s).toggleClass("dx-toolbar-label",s).addClass(e.cssClass),a}_renderGroupedItems(){(0,g.each)(this.option("items"),((t,e)=>{const i=e.items,n=(0,o.Z)("<div>").addClass("dx-toolbar-group"),r=e.location??"center";i&&i.length&&((0,g.each)(i,((t,e)=>{this._renderItem(t,e,n,null)})),this._$toolbarItemsContainer.find(`.dx-toolbar-${r}`).append(n))}))}_renderItems(t){this.option("grouped")&&t.length&&t[0].items?this._renderGroupedItems():super._renderItems(t)}_getToolbarItems(){return this.option("items")??[]}_renderContentImpl(){const t=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",0===t.length),this._renderedItemsCount?this._renderItems(t.slice(this._renderedItemsCount)):this._renderItems(t),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(t){t&&this._arrangeItems()}_isVisible(){return(0,M.dz)(this.$element())>0&&(0,M.Cr)(this.$element())>0}_getIndexByItem(t){return this._getToolbarItems().indexOf(t)}_itemOptionChanged(t,e,i){super._itemOptionChanged.apply(this,[t,e,i]),this._arrangeItems()}_optionChanged(t){let{name:e,value:i}=t;switch(e){case"width":super._optionChanged.apply(this,arguments),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged.apply(this,arguments)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){if((0,At.x2)()){const t=()=>new Promise((t=>{const e=()=>{let e=!0;return this.$element().parents().each(((t,i)=>{if(Se.default.isAnimating((0,o.Z)(i)))return e=!1,!1})),e&&t(),e},i=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout((()=>e()||i()),15)};i()})),e=()=>{const t=this.$element().find(".dx-toolbar-label"),e=[];return t.each(((t,i)=>{const n=(0,o.Z)(i).text(),r=(0,o.Z)(i).css("fontWeight");e.push((0,At.Ih)(n,r))})),Promise.all(e)};Promise.all([t(),e()]).then((()=>{this._dimensionChanged()}))}}}(0,c.default)("dxToolbarBase",ke);const Ee=ke,Oe=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"];function Te(t,e){var i;if(!t)return;const n=t._findItemElementByItem(e);if(!n.length)return;const r=t._getItemData(n),s=!!(null!==(i=r.options)&&void 0!==i&&i.disabled||r.disabled||t.option("disabled")),{widget:a}=r;if(a&&-1!==Oe.indexOf(a)){const t=n.find(a.toLowerCase().replace("dx",".dx-"));if(t.length){var l,c;const e=function(t){const e=t.data&&t.data(),i=e&&e.dxComponents,n=i&&i[0];return n&&e[n]}(t);if(!e)return;let i=null===(l=e._focusTarget)||void 0===l?void 0:l.call(e);i="dxDropDownButton"===a?i&&i.find(".dx-buttongroup"):i??(0,o.Z)(e.element());const n=null===(c=r.options)||void 0===c?void 0:c.tabIndex;s?i.attr("tabIndex",-1):i.attr("tabIndex",n??0)}}}class De{constructor(t){this._toolbar=t}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){return this._toolbar.option("items")??[]}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",this._toolbar.itemElements(),!0)}_arrangeItems(){const t=this._toolbar._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0);if(!t.length)return;const e=(0,M.dz)(this._toolbar.$element()),i=(0,M.Y_)(t)-(0,M.dz)(t);t.css("maxWidth",e-i)}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}var Be=Array.isArray;function Ae(t){var e=typeof t;return"string"===e||"number"===e}function Pe(t){return null==t}function Me(t){return null===t||!1===t||!0===t||void 0===t}function Re(t){return"function"==typeof t}function Ne(t){return"string"==typeof t}function $e(t){return null===t}function Ve(t,e){var i={};if(t)for(var n in t)i[n]=t[n];if(e)for(var o in e)i[o]=e[o];return i}function Fe(t){return!$e(t)&&"object"==typeof t}var Ze={};function He(t){return t.substr(2).toLowerCase()}function Le(t,e){t.appendChild(e)}function je(t,e,i){$e(i)?Le(t,e):t.insertBefore(e,i)}function ze(t,e){t.removeChild(e)}function We(t){for(var e=0;e<t.length;e++)t[e]()}function Ke(t,e,i){var n=t.children;return 4&i?n.$LI:8192&i?2===t.childFlags?n:n[e?0:n.length-1]:n}function qe(t,e){for(var i;t;){if(2033&(i=t.flags))return t.dom;t=Ke(t,e,i)}return null}function Ue(t,e){do{var i=t.flags;if(2033&i)return void ze(e,t.dom);var n=t.children;if(4&i&&(t=n.$LI),8&i&&(t=n),8192&i){if(2!==t.childFlags){for(var o=0,r=n.length;o<r;++o)Ue(n[o],e);return}t=n}}while(t)}function Ge(t,e,i){do{var n=t.flags;if(2033&n)return void je(e,t.dom,i);var o=t.children;if(4&n&&(t=o.$LI),8&n&&(t=o),8192&n){if(2!==t.childFlags){for(var r=0,s=o.length;r<s;++r)Ge(o[r],e,i);return}t=o}}while(t)}function Ye(t,e,i){return t.constructor.getDerivedStateFromProps?Ve(i,t.constructor.getDerivedStateFromProps(e,i)):i}var Qe={v:!1},Xe={componentComparator:null,createVNode:null,renderComplete:null};function Je(t,e){t.textContent=e}function ti(t,e){return Fe(t)&&t.event===e.event&&t.data===e.data}function ei(t,e){for(var i in e)void 0===t[i]&&(t[i]=e[i]);return t}function ii(t,e){return!!Re(t)&&(t(e),!0)}var ni="$";function oi(t,e,i,n,o,r,s,a){this.childFlags=t,this.children=e,this.className=i,this.dom=null,this.flags=n,this.key=void 0===o?null:o,this.props=void 0===r?null:r,this.ref=void 0===s?null:s,this.type=a}function ri(t,e,i,n,o,r,s,a){var l=void 0===o?1:o,c=new oi(l,n,i,t,s,r,a,e);return Xe.createVNode&&Xe.createVNode(c),0===l&&pi(c,c.children),c}function si(t,e,i,n,o){t=function(t,e){return 12&t?t:e.prototype&&e.prototype.render?4:e.render?32776:8}(t,e);var r=new oi(1,null,null,t,n,function(t,e,i){var n=(32768&t?e.render:e).defaultProps;return Pe(n)?i:Pe(i)?Ve(n,null):ei(i,n)}(t,e,i),function(t,e,i){if(4&t)return i;var n=(32768&t?e.render:e).defaultHooks;return Pe(n)?i:Pe(i)?n:ei(i,n)}(t,e,o),e);return Xe.createVNode&&Xe.createVNode(r),r}function ai(t,e){return new oi(1,Pe(t)||!0===t||!1===t?"":t,null,16,e,null,null,null)}function li(t,e,i){var n=ri(8192,8192,null,t,e,null,i,null);switch(n.childFlags){case 1:n.children=di(),n.childFlags=2;break;case 16:n.children=[ai(t)],n.childFlags=4}return n}function ci(t){var e=t.props;if(e){var i=t.flags;481&i&&(void 0!==e.children&&Pe(t.children)&&pi(t,e.children),void 0!==e.className&&(Pe(t.className)&&(t.className=e.className||null),e.className=void 0)),void 0!==e.key&&(t.key=e.key,e.key=void 0),void 0!==e.ref&&(t.ref=8&i?Ve(t.ref,e.ref):e.ref,e.ref=void 0)}return t}function ui(t){var e=-16385&t.flags,i=t.props;if(14&e&&!$e(i)){var n=i;for(var o in i={},n)i[o]=n[o]}return 0==(8192&e)?new oi(t.childFlags,t.children,t.className,e,t.key,i,t.ref,t.type):function(t){var e=t.children,i=t.childFlags;return li(2===i?ui(e):e.map(ui),i,t.key)}(t)}function di(){return ai("",null)}function hi(t,e,i,n){for(var o=t.length;i<o;i++){var r=t[i];if(!Me(r)){var s=n+ni+i;if(Be(r))hi(r,e,0,s);else{if(Ae(r))r=ai(r,s);else{var a=r.key,l=Ne(a)&&a[0]===ni;(81920&r.flags||l)&&(r=ui(r)),r.flags|=65536,l?a.substring(0,n.length)!==n&&(r.key=n+a):$e(a)?r.key=s:r.key=n+a}e.push(r)}}}}function pi(t,e){var i,n=1;if(Me(e))i=e;else if(Ae(e))n=16,i=e;else if(Be(e)){for(var o=e.length,r=0;r<o;++r){var s=e[r];if(Me(s)||Be(s)){i=i||e.slice(0,r),hi(e,i,r,"");break}if(Ae(s))(i=i||e.slice(0,r)).push(ai(s,ni+r));else{var a=s.key,l=(81920&s.flags)>0,c=$e(a),u=Ne(a)&&a[0]===ni;l||c||u?(i=i||e.slice(0,r),(l||u)&&(s=ui(s)),(c||u)&&(s.key=ni+r),i.push(s)):i&&i.push(s),s.flags|=65536}}n=0===(i=i||e).length?1:8}else(i=e).flags|=65536,81920&e.flags&&(i=ui(e)),n=2;return t.children=i,t.childFlags=n,t}function fi(t){return Me(t)||Ae(t)?ai(t,null):Be(t)?li(t,0,null):16384&t.flags?ui(t):t}var _i="http://www.w3.org/1999/xlink",mi="http://www.w3.org/XML/1998/namespace",gi={"xlink:actuate":_i,"xlink:arcrole":_i,"xlink:href":_i,"xlink:role":_i,"xlink:show":_i,"xlink:title":_i,"xlink:type":_i,"xml:base":mi,"xml:lang":mi,"xml:space":mi};function vi(t){return{onClick:t,onDblClick:t,onFocusIn:t,onFocusOut:t,onKeyDown:t,onKeyPress:t,onKeyUp:t,onMouseDown:t,onMouseMove:t,onMouseUp:t,onTouchEnd:t,onTouchMove:t,onTouchStart:t}}var bi=vi(0),yi=vi(null),Ci=vi(!0);function wi(t,e){var i=e.$EV;return i||(i=e.$EV=vi(null)),i[t]||1==++bi[t]&&(yi[t]=function(t){var e="onClick"===t||"onDblClick"===t?function(t){return function(e){0===e.button?Si(e,!0,t,Oi(e)):e.stopPropagation()}}(t):function(t){return function(e){Si(e,!1,t,Oi(e))}}(t);return document.addEventListener(He(t),e),e}(t)),i}function xi(t,e){var i=e.$EV;i&&i[t]&&(0==--bi[t]&&(document.removeEventListener(He(t),yi[t]),yi[t]=null),i[t]=null)}function Si(t,e,i,n){var o=function(t){return Re(t.composedPath)?t.composedPath()[0]:t.target}(t);do{if(e&&o.disabled)return;var r=o.$EV;if(r){var s=r[i];if(s&&(n.dom=o,s.event?s.event(s.data,t):s(t),t.cancelBubble))return}o=o.parentNode}while(!$e(o))}function Ii(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function ki(){return this.defaultPrevented}function Ei(){return this.cancelBubble}function Oi(t){var e={dom:document};return t.isDefaultPrevented=ki,t.isPropagationStopped=Ei,t.stopPropagation=Ii,Object.defineProperty(t,"currentTarget",{configurable:!0,get:function(){return e.dom}}),e}function Ti(t,e,i){if(t[e]){var n=t[e];n.event?n.event(n.data,i):n(i)}else{var o=e.toLowerCase();t[o]&&t[o](i)}}function Di(t,e){var i=function(i){var n=this.$V;if(n){var o=n.props||Ze,r=n.dom;if(Ne(t))Ti(o,t,i);else for(var s=0;s<t.length;++s)Ti(o,t[s],i);if(Re(e)){var a=this.$V,l=a.props||Ze;e(l,r,!1,a)}}};return Object.defineProperty(i,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),i}function Bi(t,e,i){var n="$"+e,o=t[n];if(o){if(o[1].wrapped)return;t.removeEventListener(o[0],o[1]),t[n]=null}Re(i)&&(t.addEventListener(e,i),t[n]=[e,i])}function Ai(t){return"checkbox"===t||"radio"===t}var Pi=Di("onInput",Ni),Mi=Di(["onClick","onChange"],Ni);function Ri(t){t.stopPropagation()}function Ni(t,e){var i=t.type,n=t.value,o=t.checked,r=t.multiple,s=t.defaultValue,a=!Pe(n);i&&i!==e.type&&e.setAttribute("type",i),Pe(r)||r===e.multiple||(e.multiple=r),Pe(s)||a||(e.defaultValue=s+""),Ai(i)?(a&&(e.value=n),Pe(o)||(e.checked=o)):a&&e.value!==n?(e.defaultValue=n,e.value=n):Pe(o)||(e.checked=o)}function $i(t,e){if("option"===t.type)!function(t,e){var i=t.props||Ze,n=t.dom;n.value=i.value,i.value===e||Be(e)&&-1!==e.indexOf(i.value)?n.selected=!0:Pe(e)&&Pe(i.selected)||(n.selected=i.selected||!1)}(t,e);else{var i=t.children,n=t.flags;if(4&n)$i(i.$LI,e);else if(8&n)$i(i,e);else if(2===t.childFlags)$i(i,e);else if(12&t.childFlags)for(var o=0,r=i.length;o<r;++o)$i(i[o],e)}}Ri.wrapped=!0;var Vi=Di("onChange",Fi);function Fi(t,e,i,n){var o=Boolean(t.multiple);Pe(t.multiple)||o===e.multiple||(e.multiple=o);var r=t.selectedIndex;if(-1===r&&(e.selectedIndex=-1),1!==n.childFlags){var s=t.value;"number"==typeof r&&r>-1&&e.options[r]&&(s=e.options[r].value),i&&Pe(s)&&(s=t.defaultValue),$i(n,s)}}var Zi,Hi,Li=Di("onInput",zi),ji=Di("onChange");function zi(t,e,i){var n=t.value,o=e.value;if(Pe(n)){if(i){var r=t.defaultValue;Pe(r)||r===o||(e.defaultValue=r,e.value=r)}}else o!==n&&(e.defaultValue=n,e.value=n)}function Wi(t,e,i,n,o,r){64&t?Ni(n,i):256&t?Fi(n,i,o,e):128&t&&zi(n,i,o),r&&(i.$V=e)}function Ki(t){return t.type&&Ai(t.type)?!Pe(t.checked):!Pe(t.value)}function qi(t){t&&!ii(t,null)&&t.current&&(t.current=null)}function Ui(t,e,i){t&&(Re(t)||void 0!==t.current)&&i.push((function(){ii(t,e)||void 0===t.current||(t.current=e)}))}function Gi(t,e){Yi(t),Ue(t,e)}function Yi(t){var e,i=t.flags,n=t.children;if(481&i){e=t.ref;var o=t.props;qi(e);var r=t.childFlags;if(!$e(o))for(var s=Object.keys(o),a=0,l=s.length;a<l;a++){var c=s[a];Ci[c]&&xi(c,t.dom)}12&r?Qi(n):2===r&&Yi(n)}else n&&(4&i?(Re(n.componentWillUnmount)&&n.componentWillUnmount(),qi(t.ref),n.$UN=!0,Yi(n.$LI)):8&i?(!Pe(e=t.ref)&&Re(e.onComponentWillUnmount)&&e.onComponentWillUnmount(qe(t,!0),t.props||Ze),Yi(n)):1024&i?Gi(n,t.ref):8192&i&&12&t.childFlags&&Qi(n))}function Qi(t){for(var e=0,i=t.length;e<i;++e)Yi(t[e])}function Xi(t){t.textContent=""}function Ji(t,e,i){Qi(i),8192&e.flags?Ue(e,t):Xi(t)}function tn(t,e,i,n,o,r,s){switch(t){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":n.autofocus=!!i;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":n[t]=!!i;break;case"defaultChecked":case"value":case"volume":if(r&&"value"===t)break;var a=Pe(i)?"":i;n[t]!==a&&(n[t]=a);break;case"style":!function(t,e,i){if(Pe(e))i.removeAttribute("style");else{var n,o,r=i.style;if(Ne(e))r.cssText=e;else if(Pe(t)||Ne(t))for(n in e)o=e[n],r.setProperty(n,o);else{for(n in e)(o=e[n])!==t[n]&&r.setProperty(n,o);for(n in t)Pe(e[n])&&r.removeProperty(n)}}}(e,i,n);break;case"dangerouslySetInnerHTML":!function(t,e,i,n){var o=t&&t.__html||"",r=e&&e.__html||"";o!==r&&(Pe(r)||function(t,e){var i=document.createElement("i");return i.innerHTML=e,i.innerHTML===t.innerHTML}(n,r)||($e(i)||(12&i.childFlags?Qi(i.children):2===i.childFlags&&Yi(i.children),i.children=null,i.childFlags=1),n.innerHTML=r))}(e,i,s,n);break;default:Ci[t]?function(t,e,i,n){if(Re(i))wi(t,n)[t]=i;else if(Fe(i)){if(ti(e,i))return;wi(t,n)[t]=i}else xi(t,n)}(t,e,i,n):111===t.charCodeAt(0)&&110===t.charCodeAt(1)?function(t,e,i,n){if(Fe(i)){if(ti(e,i))return;i=function(t){var e=t.event;return function(i){e(t.data,i)}}(i)}Bi(n,He(t),i)}(t,e,i,n):Pe(i)?n.removeAttribute(t):o&&gi[t]?n.setAttributeNS(gi[t],t,i):n.setAttribute(t,i)}}function en(t,e,i,n,o){var r=!1,s=(448&e)>0;for(var a in s&&(r=Ki(i))&&function(t,e,i){64&t?function(t,e){Ai(e.type)?(Bi(t,"change",Mi),Bi(t,"click",Ri)):Bi(t,"input",Pi)}(e,i):256&t?function(t){Bi(t,"change",Vi)}(e):128&t&&function(t,e){Bi(t,"input",Li),e.onChange&&Bi(t,"change",ji)}(e,i)}(e,n,i),i)tn(a,null,i[a],n,o,r,null);s&&Wi(e,t,n,i,!0,r)}function nn(t,e,i){var n=fi(t.render(e,t.state,i)),o=i;return Re(t.getChildContext)&&(o=Ve(i,t.getChildContext())),t.$CX=o,n}function on(t,e,i,n,o,r){var s=new e(i,n),a=s.$N=Boolean(e.getDerivedStateFromProps||s.getSnapshotBeforeUpdate);if(s.$SVG=o,s.$L=r,t.children=s,s.$BS=!1,s.context=n,s.props===Ze&&(s.props=i),a)s.state=Ye(s,i,s.state);else if(Re(s.componentWillMount)){s.$BR=!0,s.componentWillMount();var l=s.$PS;if(!$e(l)){var c=s.state;if($e(c))s.state=l;else for(var u in l)c[u]=l[u];s.$PS=null}s.$BR=!1}return s.$LI=nn(s,i,n),s}function rn(t,e){var i=t.props||Ze;return 32768&t.flags?t.type.render(i,t.ref,e):t.type(i,e)}function sn(t,e,i,n,o,r){var s=t.flags|=16384;481&s?ln(t,e,i,n,o,r):4&s?function(t,e,i,n,o,r){var s=on(t,t.type,t.props||Ze,i,n,r);sn(s.$LI,e,s.$CX,n,o,r),un(t.ref,s,r)}(t,e,i,n,o,r):8&s?(function(t,e,i,n,o,r){sn(t.children=fi(rn(t,i)),e,i,n,o,r)}(t,e,i,n,o,r),dn(t,r)):512&s||16&s?an(t,e,o):8192&s?function(t,e,i,n,o,r){var s=t.children,a=t.childFlags;12&a&&0===s.length&&(a=t.childFlags=2,s=t.children=di()),2===a?sn(s,i,e,n,o,r):cn(s,i,e,n,o,r)}(t,i,e,n,o,r):1024&s&&function(t,e,i,n,o){sn(t.children,t.ref,e,!1,null,o);var r=di();an(r,i,n),t.dom=r.dom}(t,i,e,o,r)}function an(t,e,i){var n=t.dom=document.createTextNode(t.children);$e(e)||je(e,n,i)}function ln(t,e,i,n,o,r){var s=t.flags,a=t.props,l=t.className,c=t.childFlags,u=t.dom=function(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t)}(t.type,n=n||(32&s)>0),d=t.children;if(Pe(l)||""===l||(n?u.setAttribute("class",l):u.className=l),16===c)Je(u,d);else if(1!==c){var h=n&&"foreignObject"!==t.type;2===c?(16384&d.flags&&(t.children=d=ui(d)),sn(d,u,i,h,null,r)):8!==c&&4!==c||cn(d,u,i,h,null,r)}$e(e)||je(e,u,o),$e(a)||en(t,s,a,u,n),Ui(t.ref,u,r)}function cn(t,e,i,n,o,r){for(var s=0;s<t.length;++s){var a=t[s];16384&a.flags&&(t[s]=a=ui(a)),sn(a,e,i,n,o,r)}}function un(t,e,i){Ui(t,e,i),Re(e.componentDidMount)&&i.push(function(t){return function(){t.componentDidMount()}}(e))}function dn(t,e){var i=t.ref;Pe(i)||(ii(i.onComponentWillMount,t.props||Ze),Re(i.onComponentDidMount)&&e.push(function(t,e){return function(){t.onComponentDidMount(qe(e,!0),e.props||Ze)}}(i,t)))}function hn(t,e,i,n,o,r,s){var a=e.flags|=16384;t.flags!==a||t.type!==e.type||t.key!==e.key||2048&a?16384&t.flags?function(t,e,i,n,o,r){Yi(t),0!=(e.flags&t.flags&2033)?(sn(e,null,n,o,null,r),function(t,e,i){t.replaceChild(e,i)}(i,e.dom,t.dom)):(sn(e,i,n,o,qe(t,!0),r),Ue(t,i))}(t,e,i,n,o,s):sn(e,i,n,o,r,s):481&a?function(t,e,i,n,o,r){var s,a=e.dom=t.dom,l=t.props,c=e.props,u=!1,d=!1;if(n=n||(32&o)>0,l!==c){var h=l||Ze;if((s=c||Ze)!==Ze)for(var p in(u=(448&o)>0)&&(d=Ki(s)),s){var f=h[p],_=s[p];f!==_&&tn(p,f,_,a,n,d,t)}if(h!==Ze)for(var m in h)Pe(s[m])&&!Pe(h[m])&&tn(m,h[m],null,a,n,d,t)}var g=e.children,v=e.className;t.className!==v&&(Pe(v)?a.removeAttribute("class"):n?a.setAttribute("class",v):a.className=v),4096&o?function(t,e){t.textContent!==e&&(t.textContent=e)}(a,g):pn(t.childFlags,e.childFlags,t.children,g,a,i,n&&"foreignObject"!==e.type,null,t,r),u&&Wi(o,e,a,s,!1,d);var b=e.ref,y=t.ref;y!==b&&(qi(y),Ui(b,a,r))}(t,e,n,o,a,s):4&a?function(t,e,i,n,o,r,s){var a=e.children=t.children;if(!$e(a)){a.$L=s;var l=e.props||Ze,c=e.ref,u=t.ref,d=a.state;if(!a.$N){if(Re(a.componentWillReceiveProps)){if(a.$BR=!0,a.componentWillReceiveProps(l,n),a.$UN)return;a.$BR=!1}$e(a.$PS)||(d=Ve(d,a.$PS),a.$PS=null)}fn(a,d,l,i,n,o,!1,r,s),u!==c&&(qi(u),Ui(c,a,s))}}(t,e,i,n,o,r,s):8&a?function(t,e,i,n,o,r,s){var a=!0,l=e.props||Ze,c=e.ref,u=t.props,d=!Pe(c),h=t.children;if(d&&Re(c.onComponentShouldUpdate)&&(a=c.onComponentShouldUpdate(u,l)),!1!==a){d&&Re(c.onComponentWillUpdate)&&c.onComponentWillUpdate(u,l);var p=fi(rn(e,n));hn(h,p,i,n,o,r,s),e.children=p,d&&Re(c.onComponentDidUpdate)&&c.onComponentDidUpdate(u,l)}else e.children=h}(t,e,i,n,o,r,s):16&a?function(t,e){var i=e.children,n=e.dom=t.dom;i!==t.children&&(n.nodeValue=i)}(t,e):512&a?e.dom=t.dom:8192&a?function(t,e,i,n,o,r){var s=t.children,a=e.children,l=t.childFlags,c=e.childFlags,u=null;12&c&&0===a.length&&(c=e.childFlags=2,a=e.children=di());var d=0!=(2&c);if(12&l){var h=s.length;(8&l&&8&c||d||!d&&a.length>h)&&(u=qe(s[h-1],!1).nextSibling)}pn(l,c,s,a,i,n,o,u,t,r)}(t,e,i,n,o,s):function(t,e,i,n){var o=t.ref,r=e.ref,s=e.children;if(pn(t.childFlags,e.childFlags,t.children,s,o,i,!1,null,t,n),e.dom=t.dom,o!==r&&!Me(s)){var a=s.dom;ze(o,a),Le(r,a)}}(t,e,n,s)}function pn(t,e,i,n,o,r,s,a,l,c){switch(t){case 2:switch(e){case 2:hn(i,n,o,r,s,a,c);break;case 1:Gi(i,o);break;case 16:Yi(i),Je(o,n);break;default:!function(t,e,i,n,o,r){Yi(t),cn(e,i,n,o,qe(t,!0),r),Ue(t,i)}(i,n,o,r,s,c)}break;case 1:switch(e){case 2:sn(n,o,r,s,a,c);break;case 1:break;case 16:Je(o,n);break;default:cn(n,o,r,s,a,c)}break;case 16:switch(e){case 16:!function(t,e,i){t!==e&&(""!==t?i.firstChild.nodeValue=e:Je(i,e))}(i,n,o);break;case 2:Xi(o),sn(n,o,r,s,a,c);break;case 1:Xi(o);break;default:Xi(o),cn(n,o,r,s,a,c)}break;default:switch(e){case 16:Qi(i),Je(o,n);break;case 2:Ji(o,l,i),sn(n,o,r,s,a,c);break;case 1:Ji(o,l,i);break;default:var u=0|i.length,d=0|n.length;0===u?d>0&&cn(n,o,r,s,a,c):0===d?Ji(o,l,i):8===e&&8===t?function(t,e,i,n,o,r,s,a,l,c){var u,d,h=r-1,p=s-1,f=0,_=t[f],m=e[f];t:{for(;_.key===m.key;){if(16384&m.flags&&(e[f]=m=ui(m)),hn(_,m,i,n,o,a,c),t[f]=m,++f>h||f>p)break t;_=t[f],m=e[f]}for(_=t[h],m=e[p];_.key===m.key;){if(16384&m.flags&&(e[p]=m=ui(m)),hn(_,m,i,n,o,a,c),t[h]=m,p--,f>--h||f>p)break t;_=t[h],m=e[p]}}if(f>h){if(f<=p)for(d=(u=p+1)<s?qe(e[u],!0):a;f<=p;)16384&(m=e[f]).flags&&(e[f]=m=ui(m)),++f,sn(m,i,n,o,d,c)}else if(f>p)for(;f<=h;)Gi(t[f++],i);else!function(t,e,i,n,o,r,s,a,l,c,u,d,h){var p,f,_,m=0,g=a,v=a,b=r-a+1,y=s-a+1,C=new Int32Array(y+1),w=b===n,x=!1,S=0,I=0;if(o<4||(b|y)<32)for(m=g;m<=r;++m)if(p=t[m],I<y){for(a=v;a<=s;a++)if(f=e[a],p.key===f.key){if(C[a-v]=m+1,w)for(w=!1;g<m;)Gi(t[g++],l);S>a?x=!0:S=a,16384&f.flags&&(e[a]=f=ui(f)),hn(p,f,l,i,c,u,h),++I;break}!w&&a>s&&Gi(p,l)}else w||Gi(p,l);else{var k={};for(m=v;m<=s;++m)k[e[m].key]=m;for(m=g;m<=r;++m)if(p=t[m],I<y)if(void 0!==(a=k[p.key])){if(w)for(w=!1;m>g;)Gi(t[g++],l);C[a-v]=m+1,S>a?x=!0:S=a,16384&(f=e[a]).flags&&(e[a]=f=ui(f)),hn(p,f,l,i,c,u,h),++I}else w||Gi(p,l);else w||Gi(p,l)}if(w)Ji(l,d,t),cn(e,l,i,c,u,h);else if(x){var E=function(t){var e=0,i=0,n=0,o=0,r=0,s=0,a=0,l=t.length;for(l>_n&&(_n=l,Zi=new Int32Array(l),Hi=new Int32Array(l));i<l;++i)if(0!==(e=t[i])){if(t[n=Zi[o]]<e){Hi[i]=n,Zi[++o]=i;continue}for(r=0,s=o;r<s;)t[Zi[a=r+s>>1]]<e?r=a+1:s=a;e<t[Zi[r]]&&(r>0&&(Hi[i]=Zi[r-1]),Zi[r]=i)}r=o+1;var c=new Int32Array(r);for(s=Zi[r-1];r-- >0;)c[r]=s,s=Hi[s],Zi[r]=0;return c}(C);for(a=E.length-1,m=y-1;m>=0;m--)0===C[m]?(16384&(f=e[S=m+v]).flags&&(e[S]=f=ui(f)),sn(f,l,i,c,(_=S+1)<o?qe(e[_],!0):u,h)):a<0||m!==E[a]?Ge(f=e[S=m+v],l,(_=S+1)<o?qe(e[_],!0):u):a--}else if(I!==y)for(m=y-1;m>=0;m--)0===C[m]&&(16384&(f=e[S=m+v]).flags&&(e[S]=f=ui(f)),sn(f,l,i,c,(_=S+1)<o?qe(e[_],!0):u,h))}(t,e,n,r,s,h,p,f,i,o,a,l,c)}(i,n,o,r,s,u,d,a,l,c):function(t,e,i,n,o,r,s,a,l){for(var c,u,d=r>s?s:r,h=0;h<d;++h)c=e[h],u=t[h],16384&c.flags&&(c=e[h]=ui(c)),hn(u,c,i,n,o,a,l),t[h]=c;if(r<s)for(h=d;h<s;++h)16384&(c=e[h]).flags&&(c=e[h]=ui(c)),sn(c,i,n,o,a,l);else if(r>s)for(h=d;h<r;++h)Gi(t[h],i)}(i,n,o,r,s,u,d,a,c)}}}function fn(t,e,i,n,o,r,s,a,l){var c=t.state,u=t.props,d=Boolean(t.$N),h=Re(t.shouldComponentUpdate);if(d&&(e=Ye(t,i,e!==c?Ve(c,e):e)),s||!h||h&&t.shouldComponentUpdate(i,e,o)){!d&&Re(t.componentWillUpdate)&&t.componentWillUpdate(i,e,o),t.props=i,t.state=e,t.context=o;var p=null,f=nn(t,i,o);d&&Re(t.getSnapshotBeforeUpdate)&&(p=t.getSnapshotBeforeUpdate(u,c)),hn(t.$LI,f,n,t.$CX,r,a,l),t.$LI=f,Re(t.componentDidUpdate)&&function(t,e,i,n,o){o.push((function(){t.componentDidUpdate(e,i,n)}))}(t,u,c,p,l)}else t.props=i,t.state=e,t.context=o}var _n=0;function mn(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=Ze),function(t,e,i,n){var o=[],r=e.$V;Qe.v=!0,Pe(r)?Pe(t)||(16384&t.flags&&(t=ui(t)),sn(t,e,n,!1,null,o),e.$V=t,r=t):Pe(t)?(Gi(r,e),e.$V=null):(16384&t.flags&&(t=ui(t)),hn(r,t,e,n,!1,null,o),r=e.$V=t),We(o),Qe.v=!1,Re(i)&&i(),Re(Xe.renderComplete)&&Xe.renderComplete(r,e)}(t,e,i,n)}"undefined"!=typeof document&&window.Node&&(Node.prototype.$EV=null,Node.prototype.$V=null);var gn=[],vn="undefined"!=typeof Promise?Promise.resolve().then.bind(Promise.resolve()):function(t){window.setTimeout(t,0)},bn=!1;function yn(t,e,i,n){var o=t.$PS;if(Re(e)&&(e=e(o?Ve(t.state,o):t.state,t.props,t.context)),Pe(o))t.$PS=e;else for(var r in e)o[r]=e[r];if(t.$BR)Re(i)&&t.$L.push(i.bind(t));else{if(!Qe.v&&0===gn.length)return xn(t,n),void(Re(i)&&i.call(t));if(-1===gn.indexOf(t)&&gn.push(t),n&&(t.$F=!0),bn||(bn=!0,vn(wn)),Re(i)){var s=t.$QU;s||(s=t.$QU=[]),s.push(i)}}}function Cn(t){for(var e=t.$QU,i=0;i<e.length;++i)e[i].call(t);t.$QU=null}function wn(){var t;for(bn=!1;t=gn.shift();)if(!t.$UN){var e=t.$F;t.$F=!1,xn(t,e),t.$QU&&Cn(t)}}function xn(t,e){if(e||!t.$BR){var i=t.$PS;t.$PS=null;var n=[];Qe.v=!0,fn(t,Ve(t.state,i),t.props,qe(t.$LI,!0).parentNode,t.context,t.$SVG,e,null,n),We(n),Qe.v=!1}else t.state=t.$PS,t.$PS=null}var Sn=function(t,e){this.state=null,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=t||Ze,this.context=e||Ze};Sn.prototype.forceUpdate=function(t){this.$UN||yn(this,{},t,!0)},Sn.prototype.setState=function(t,e){this.$UN||this.$BS||yn(this,t,e,!1)},Sn.prototype.render=function(t,e,i){return null};var In=i(6209);const kn={lockCount:0,lock(){this.lockCount++},callbacks:[],callEffects(){if(this.lockCount--,this.lockCount<0)throw new Error("Unexpected Effect Call");if(0===this.lockCount){const t=this.callbacks;this.callbacks=[],t.forEach((t=>t()))}}},En=(t,e)=>{if(!(t instanceof Object&&e instanceof Object))return t===e;const i=Object.keys(t),n=Object.keys(e);return i.length===n.length&&!i.some((i=>t[i]!==e[i]))};class On extends Sn{constructor(){super(...arguments),this._pendingContext=this.context}componentWillReceiveProps(t,e){this._pendingContext=null!=e?e:{}}shouldComponentUpdate(t,e){return!En(this.props,t)||!En(this.state,e)||!En(this.context,this._pendingContext)}}class Tn extends On{constructor(){super(...arguments),this._effects=[]}createEffects(){return[]}updateEffects(){}componentWillMount(){kn.lock()}componentWillUpdate(t,e,i){kn.lock()}componentDidMount(){kn.callbacks.push((()=>{this._effects=this.createEffects()})),kn.callEffects()}componentDidUpdate(){kn.callbacks.push((()=>this.updateEffects())),kn.callEffects()}destroyEffects(){this._effects.forEach((t=>t.dispose()))}componentWillUnmount(){this.destroyEffects()}}class Dn extends Tn{constructor(){super(...arguments),this.vDomElement=null}vDomUpdateClasses(){const t=this.vDomElement,e=t.className.length?t.className.split(" "):[],i=e.filter((e=>t.dxClasses.previous.indexOf(e)<0)),n=t.dxClasses.previous.filter((t=>e.indexOf(t)<0));i.forEach((e=>{const i=t.dxClasses.removed.indexOf(e);i>-1?t.dxClasses.removed.splice(i,1):t.dxClasses.added.push(e)})),n.forEach((e=>{const i=t.dxClasses.added.indexOf(e);i>-1?t.dxClasses.added.splice(i,1):t.dxClasses.removed.push(e)}))}componentDidMount(){const t=qe(this.$LI,!0);this.vDomElement=t,super.componentDidMount(),t.dxClasses=t.dxClasses||{removed:[],added:[],previous:[]},t.dxClasses.previous=(null==t?void 0:t.className.length)?t.className.split(" "):[]}componentDidUpdate(){super.componentDidUpdate();const t=this.vDomElement;null!==t&&(t.dxClasses.added.forEach((e=>t.classList.add(e))),t.dxClasses.removed.forEach((e=>t.classList.remove(e))),t.dxClasses.previous=t.className.length?t.className.split(" "):[])}shouldComponentUpdate(t,e){const i=super.shouldComponentUpdate(t,e);return i&&this.vDomUpdateClasses(),i}}let Bn=0;class An{constructor(t,e){this.dependency=e,this.effect=t,this.destroy=t()}update(t){const e=this.dependency;t&&(this.dependency=t),t&&!t.some(((t,i)=>e[i]!==t))||(this.dispose(),this.destroy=this.effect())}dispose(){this.destroy&&this.destroy()}}const Pn=()=>new An((()=>{wn()}),[]),Mn="a runtime error occured! Use Inferno in development environment to find the error.";function Rn(t){return null===t}function Nn(t,e,i,n,o,r){const s=t.childFlags,a=t.children,l=t.props,c=t.flags;if(1!==s){if(2===s)Rn(i)?sn(a,e,n,o,null,r):i=(i=Vn(a,e,i,n,o,r))?i.nextSibling:null;else if(16===s)Rn(i)?e.appendChild(document.createTextNode(a)):1!==e.childNodes.length||3!==i.nodeType?e.textContent=a:i.nodeValue!==a&&(i.nodeValue=a),i=null;else if(12&s){let t=!1;for(let s=0,l=a.length;s<l;++s){const l=a[s];Rn(i)||t&&(16&l.flags)>0?sn(l,e,n,o,i,r):i=(i=Vn(l,e,i,n,o,r))?i.nextSibling:null,t=(16&l.flags)>0}}if(0==(8192&c)){let t=null;for(;i;)t=i.nextSibling,e.removeChild(i),i=t}}else Rn(e.firstChild)||function(t,e){return Boolean(e&&e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html&&function(t,e){const i=document.createElement("i");return i.innerHTML=e,i.innerHTML===t.innerHTML}(t,e.dangerouslySetInnerHTML.__html))}(e,l)||(e.textContent="",448&c&&(e.defaultValue=""))}function $n(t,e,i){if(3!==i.nodeType)e.replaceChild(t.dom=document.createTextNode(t.children),i);else{const e=t.children;i.nodeValue!==e&&(i.nodeValue=e),t.dom=i}return t.dom}function Vn(t,e,i,n,o,r){const s=t.flags|=16384;return 14&s?function(t,e,i,n,o,r,s){const a=t.type,l=t.ref,c=t.props||Ze;let u;if(r){const r=on(t,a,c,n,o,s);u=Vn(r.$LI,e,i,r.$CX,o,s),un(l,r,s)}else{const r=fi(rn(t,n));u=Vn(r,e,i,n,o,s),t.children=r,dn(t,s)}return u}(t,e,i,n,o,(4&s)>0,r):481&s?function(t,e,i,n,o,r){const s=t.props,a=t.className,l=t.flags,c=t.ref;return o=o||(32&l)>0,1!==i.nodeType?(ln(t,null,n,o,null,r),e.replaceChild(t.dom,i)):(t.dom=i,Nn(t,i,i.firstChild,n,o,r),Rn(s)||en(t,l,s,i,o),null==a?""!==i.className&&i.removeAttribute("class"):o?i.setAttribute("class",a):i.className=a,Ui(c,i,r)),t.dom}(t,e,i,n,o,r):16&s?$n(t,e,i):512&s?t.dom=i:8192&s?function(t,e,i,n,o,r){const s=t.children;return 2===t.childFlags?($n(s,e,i),s.dom):(Nn(t,e,i,n,o,r),function(t){let e,i;for(;t;){if(e=t.flags,2033&e)return t.dom;i=t.children,t=8192&e?2===t.childFlags?i:i[i.length-1]:4&e?i.$LI:i}return null}(s[s.length-1]))}(t,e,i,n,o,r):(function(t){throw t||(t=Mn),new Error(`Inferno Error: ${t}`)}(),null)}function Fn(t){return null==t}function Zn(t){return void 0===t}var Hn={onComponentDidMount:1,onComponentDidUpdate:1,onComponentShouldUpdate:1,onComponentWillMount:1,onComponentWillUnmount:1,onComponentWillUpdate:1};function Ln(t,e,i){var n,o,r=arguments,s=null,a=null,l=null,c=0,u=arguments.length-2;if(1===u)n=i;else if(u>1)for(n=[];u-- >0;)n[u]=r[u+2];if("string"!=typeof t){if(c=2,Zn(n)||(e||(e={}),e.children=n),!Fn(e))for(var d in o={},e)"key"===d?a=e.key:"ref"===d?s=e.ref:1===Hn[d]?(s||(s={}),s[d]=e[d]):o[d]=e[d];return si(c,t,o,a,s)}if(c=function(t){switch(t){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case"$F":return 8192;default:return 1}}(t),!Fn(e))for(var h in o={},e)"className"===h||"class"===h?l=e[h]:"key"===h?a=e.key:"children"===h&&Zn(n)?n=e.children:"ref"===h?s=e.ref:("contenteditable"===h&&(c|=4096),o[h]=e[h]);return 8192&c?li(1===u?[n]:n,0,a):ri(c,t,l,n,0,o,a,s)}const jn=new Set(["animationIterationCount","borderImageOutset","borderImageSlice","border-imageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","fillOpacity","flex","flexGrow","flexNegative","flexOrder","flexPositive","flexShrink","floodOpacity","fontWeight","gridColumn","gridRow","lineClamp","lineHeight","opacity","order","orphans","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","tabSize","widows","zIndex","zoom"]),zn=/[A-Z]/g;function Wn(t){if(t instanceof Object)return Object.entries(t).reduce(((t,[e,i])=>{var n;return t[(n=e,n.replace(zn,"-$&").toLowerCase())]=(t=>"number"==typeof t||!Number.isNaN(Number(t)))(i)?((t,e)=>jn.has(t)?e:`${e}px`)(e,i):i,t}),{})}var Kn=i(224);const qn=t=>{const{parentNode:e}=t;if(e){const i=t.nextSibling;(0,d.nK)(t),e.$V=t.$V,mn(null,e),e.insertBefore(t,i),t.innerHTML="",delete e.$V}delete t.$V},Un=(0,Kn.Z)({createElement:(t,e)=>Ln(t,e),remove:qn,onAfterRender:()=>{kn.callEffects()},onPreRender:()=>{kn.lock()},render:(t,e,i,n)=>{if(n)mn(Ln(t,e),i);else{const{parentNode:n}=i,o=null==i?void 0:i.nextSibling,r=Mt.Z.createElement("div");r.appendChild(i);const s=Mt.Z.createDocumentFragment().appendChild(r);!!i.$V&&qn(i),function(t,e,i){let n=e.firstChild;if(Rn(n))mn(t,e,i);else{const i=[];for(null!==(o=t)&&!1!==o&&!0!==o&&void 0!==o&&(n=Vn(t,e,n,{},!1,i));n&&(n=n.nextSibling);)e.removeChild(n);if(i.length>0){let t;for(;void 0!==(t=i.shift());)t()}}var o;e.$V=t}(Ln(t,e),s),i.$V=s.$V,n&&n.insertBefore(i,o)}}});var Gn=i(4906),Yn=i(3366);const Qn=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every((i=>t[i]===e[i])),Xn=["isEqual"];class Jn extends Tn{constructor(t){super(t),this.renderTemplate=this.renderTemplate.bind(this)}renderTemplate(){const t=qe(this.$LI,!0);if(null==t||!t.parentNode)return()=>{};const e=t.parentNode,i=(0,o.Z)(e),r=i.contents().toArray(),s=function(t,e){const{data:i,index:r}=t.model??{data:{}};i&&Object.keys(i).forEach((t=>{i[t]&&Mt.Z.isNode(i[t])&&(i[t]=(0,a.u)((0,o.Z)(i[t])))}));const s=t.template.render((0,n.Z)({container:e,transclude:t.transclude},{renovated:t.renovated},t.transclude?{}:{model:i},!t.transclude&&Number.isFinite(r)?{index:r}:{}));return void 0===s?[]:s.toArray?s.toArray():[(0,o.Z)(s).get(0)]}(this.props,(0,a.u)(i));return(0,L.replaceWith)((0,o.Z)(t),(0,o.Z)(s)),()=>{const i=(0,o.Z)(e).contents().toArray();var n;n=r,i.forEach((t=>{!n.find((e=>t===e))&&t.parentNode&&(0,o.Z)(t).remove()})),e.appendChild(t)}}shouldComponentUpdate(t){const{model:e,template:i}=this.props,{isEqual:n,model:o,template:r}=t,a=n??Qn;if(i!==r)return!0;if(!(0,s.$K)(e)||!(0,s.$K)(o))return e!==o;const{data:l,index:c}=e,{data:u,index:d}=o;return c!==d||!a(l,u)}createEffects(){return[new An(this.renderTemplate,[this.props.template,this.props.model])]}updateEffects(){this._effects[0].update([this.props.template,this.props.model])}componentWillUnmount(){}render(){return null}}function to(t){return Array.isArray(t)?[...t]:(0,n.Z)({},t)}function eo(t,e,i){const n=i.length>0&&e&&t!==e?to(e):to(t),o=i[0];return i.length>1?n[o]=eo(t[o],null==e?void 0:e[o],i.slice(1)):o&&((0,s.PO)(t[o])?n[o]=to(t[o]):n[o]=t[o]),n}function io(t,e,i,n){const o=e[i],r=t[i],a=t;(0,s.PO)(o)||i!==n&&Array.isArray(o)?a[i]=eo(o,r,(0,Wt.Zw)(n).slice(1)):a[i]=o}var no=i(8530),oo=i(8141);const ro=(t,e)=>i=>{Object.prototype.hasOwnProperty.call(t,i)&&void 0===t[i]&&(t[i]=e(i))};class so extends Gn.default{get _propsInfo(){return{allowNull:[],twoWay:[],elements:[],templates:[],props:[]}}constructor(t,e){super(t,e),this._shouldRaiseContentReady=!1,this.validateKeyDownHandler()}validateKeyDownHandler(){const t=this.getSupportedKeyNames().length>0,e="function"==typeof this._viewComponent.prototype.keyDown;if(t&&!e)throw Error("Component's declaration must have 'keyDown' method.")}get viewRef(){var t;return null===(t=this._viewRef)||void 0===t?void 0:t.current}_checkContentReadyOption(t){const e=this._getContentReadyOptions().reduce(((t,e)=>(t[e]=!0,t)),{});return this._checkContentReadyOption=t=>!!e[t],this._checkContentReadyOption(t)}_getContentReadyOptions(){return["rtlEnabled"]}_fireContentReady(){this._actionsMap.onContentReady({})}_getDefaultOptions(){const t=this._getViewComponentDefaultProps();return(0,r.l)(!0,super._getDefaultOptions(),t,this._propsInfo.twoWay.reduce(((e,i)=>{let[o,r,s]=i;return(0,n.Z)({},e,{[o]:t[r],[s]:t=>this.option(o,t)})}),{}),this._propsInfo.templates.reduce(((t,e)=>(0,n.Z)({},t,{[e]:null})),{}))}_getUnwrappedOption(){const t={};return Object.keys(this.option()).forEach((e=>{t[e]=this.option(e)})),t}_initializeComponent(){var t;super._initializeComponent(),null===(t=this._templateManager)||void 0===t||t.addDefaultTemplates(this.getDefaultTemplates());const e=this._getUnwrappedOption();this._props=this._optionsWithDefaultTemplates(e),this._propsInfo.templates.forEach((t=>{this._componentTemplates[t]=this._createTemplateComponent(this._props[t])})),Object.keys(this._getActionConfigsFull()).forEach((t=>this._addAction(t))),this._viewRef={current:null},this.defaultKeyHandlers=this._createDefaultKeyHandlers()}_initMarkup(){const t=this.getProps();this._renderWrapper(t)}_renderWrapper(t){const e=this.$element()[0];this._isNodeReplaced||Un.onPreRender(),Un.render(this._viewComponent,t,e,this._isNodeReplaced),this._isNodeReplaced||(this._isNodeReplaced=!0,Un.onAfterRender(),this._shouldRaiseContentReady=!0),this._shouldRaiseContentReady&&(this._fireContentReady(),this._shouldRaiseContentReady=!1)}_silent(t,e){this._options.silent(t,e)}_render(){}_removeWidget(){Un.remove(this.$element()[0])}_dispose(){this._removeWidget(),super._dispose()}get elementAttr(){const t=this.$element()[0];if(!this._elementAttr){const{attributes:e}=t,i=Array.from(e).filter((t=>{var i;return!this._propsInfo.templates.includes(t.name)&&(null===(i=e[t.name])||void 0===i?void 0:i.specified)})).reduce(((e,i)=>{let{name:n,value:o}=i;const r=e,s=n in t;return r[n]=""===o&&s?t[n]:o,r}),{});this._elementAttr=i,this._storedClasses=t.getAttribute("class")||""}const e=t.style,i={};for(let t=0;t<e.length;t+=1)i[e[t]]=e.getPropertyValue(e[t]);return this._elementAttr.style=i,this._elementAttr.class=this._storedClasses,this._elementAttr}_getAdditionalActionConfigs(){return{onContentReady:{excludeValidators:["disabled","readOnly"]}}}_getAdditionalProps(){return[]}_patchOptionValues(t){const{allowNull:e,elements:i,props:n,twoWay:o}=this._propsInfo,r=this._getViewComponentDefaultProps(),a=Object.keys(r),l=this._getDefaultOptions(),{children:c,onKeyboardHandled:u,ref:d}=t,h={ref:d,children:c,onKeyDown:u?(t,e)=>{u(e)}:void 0};return[...n,...this._getAdditionalProps()].forEach((e=>{Object.prototype.hasOwnProperty.call(t,e)&&(h[e]=t[e])})),e.forEach(ro(h,(()=>null))),a.forEach(ro(h,(t=>l[t]))),o.forEach((t=>{let[e,i]=t;ro(h,(()=>l[i]))(e)})),i.forEach((t=>{if(t in h){const e=h[t];(0,s.ZU)(e)&&(h[t]=this._patchElementParam(e))}})),h}getSupportedKeyNames(){return[]}prepareStyleProp(t){return"string"==typeof t.style?(0,n.Z)({},t,{style:{},cssText:t.style}):t}getProps(){const{elementAttr:t}=this.option(),e=this._patchOptionValues((0,n.Z)({},this._props,{ref:this._viewRef,children:this._extractDefaultSlot(),aria:this._aria}));return this._propsInfo.templates.forEach((t=>{e[t]=this._componentTemplates[t]})),this.prepareStyleProp((0,n.Z)({},e,this.elementAttr,t,{className:[...(this.elementAttr.class??"").split(" "),...((null==t?void 0:t.class)??"").split(" ")].filter(((t,e,i)=>t&&i.indexOf(t)===e)).join(" ").trim(),class:""},this._actionsMap))}_getActionConfigs(){return{}}_getActionConfigsFull(){return(0,n.Z)({},this._getActionConfigs(),this._getAdditionalActionConfigs())}getDefaultTemplates(){const t=Object.values(this._templatesInfo),e={};return t.forEach((t=>{e[t]="dx-renovation-template-mock"})),e}get _templatesInfo(){return{}}_optionsWithDefaultTemplates(t){const e=Object.entries(this._templatesInfo).reduce(((e,i)=>{let[o,r]=i;return(0,n.Z)({},e,{[o]:t[o]??r})}),{});return(0,n.Z)({},t,e)}_init(){super._init(),this.customKeyHandlers={},this._actionsMap={},this._aria={},this._componentTemplates={}}_createDefaultKeyHandlers(){const t={};return this.getSupportedKeyNames().forEach((e=>{t[e]=t=>this.viewRef.keyDown(In.Z.createKeyDownOptions(t))})),t}_addAction(t,e){let i=e;if(!i){const e=this._createActionByOption(t,this._getActionConfigsFull()[t]);i=t=>(Object.keys(t).forEach((e=>{(0,s.$K)(t[e])&&Mt.Z.isNode(t[e])&&(t[e]=(0,a.u)((0,o.Z)(t[e])))})),e(t))}this._actionsMap[t]=i}_optionChanged(t){const{fullName:e,name:i,previousValue:n,value:o}=t;io(this._props,this.option(),i,e),this._propsInfo.templates.includes(i)&&o!==n&&(this._componentTemplates[i]=this._createTemplateComponent(o)),i&&this._getActionConfigsFull()[i]&&this._addAction(i),this._shouldRaiseContentReady=this._shouldRaiseContentReady||this._checkContentReadyOption(e),super._optionChanged(t),this._invalidate()}_extractDefaultSlot(){return this.option("_hasAnonymousTemplateContent")?Un.createElement(Jn,{template:this._getTemplate(this._templateManager.anonymousTemplateName),transclude:!0,renovated:!0}):null}_createTemplateComponent(t){if(!t)return;const e=this._getTemplate(t);return(0,s.HD)(e)&&"dx-renovation-template-mock"===e?void 0:t=>Un.createElement(Jn,function(t,e){const i={template:e,model:(0,n.Z)({},t)},o=t.data??{},{isEqual:r}=o,s=(0,Yn.Z)(o,Xn);return r&&(i.model.data=s,i.isEqual=r),i}(t,e))}_wrapKeyDownHandler(t){return e=>{const{keyName:i,originalEvent:n,which:o}=e,r=this.customKeyHandlers,s=r[i]||r[o];return void 0===s||s.bind(this)(n,e)?null==t?void 0:t(n,e):(n.cancel=!0,n)}}_toPublicElement(t){return(0,a.u)((0,o.Z)(t))}_patchElementParam(t){try{const e=(0,o.Z)(t),i=null==e?void 0:e.get(0);return null!=i&&i.nodeType?i:t}catch(e){return t}}repaint(){this._isNodeReplaced=!1,this._shouldRaiseContentReady=!0,this._removeWidget(),this._refresh()}_supportedKeys(){return(0,n.Z)({},this.defaultKeyHandlers,this.customKeyHandlers)}registerKeyHandler(t,e){this.customKeyHandlers[t]=e}setAria(t,e){this._aria[t]=e,this._initMarkup()}_getViewComponentDefaultProps(){return this._viewComponent.defaultProps||{}}}so.IS_RENOVATED_WIDGET=!1;const ao=so;so.IS_RENOVATED_WIDGET=!0;const lo=t=>!(!t||"string"!=typeof t)&&(/^\s*<svg[^>]*>(.|\r?\n)*?<\/svg>\s*$/i.test(t)?"svg":/data:.*base64|\.|[^<\s]\/{1,1}/.test(t)?"image":/^[\w-_]+$/.test(t)?"dxIcon":!!/^\s?([\w-_:]\s?)+$/.test(t)&&"fontIcon"),co=t=>{switch(lo(t)){case"image":return(0,o.Z)("<img>").attr("src",t).addClass("dx-icon");case"fontIcon":return(0,o.Z)("<i>").addClass(`dx-icon ${t}`);case"dxIcon":return(0,o.Z)("<i>").addClass(`dx-icon dx-icon-${t}`);case"svg":return(0,o.Z)("<i>").addClass("dx-icon dx-svg-icon").append(t);default:return null}};class uo extends ao{get _validationGroupConfig(){return A.getGroupConfig(this._findGroup())}getDefaultTemplateNames(){return["content"]}getSupportedKeyNames(){return["space","enter"]}getProps(){const t=super.getProps();return t.onClick=t=>{let{event:e}=t;this._clickAction({event:e,validationGroup:this._validationGroupConfig})},"svg"===lo(t.icon)&&(t.iconTemplate=this._createTemplateComponent((()=>t.icon))),t}get _templatesInfo(){return{template:"content"}}_toggleActiveState(t,e){const i=this.viewRef;e?i.activate():i.deactivate()}_getSubmitAction(){let t=!0,e="valid";return this._createAction((i=>{let{event:n,submitInput:o}=i;if(t){const i=this._validationGroupConfig;if(void 0!==i&&""!==i){const n=i.validate();e=n.status,"pending"===n.status&&(t=!1,this.option("disabled",!0),n.complete.then((i=>{let{status:n}=i;this.option("disabled",!1),e=n,"valid"===e&&o.click(),t=!0})))}}"valid"!==e&&n.preventDefault(),n.stopPropagation()}))}_initializeComponent(){super._initializeComponent(),this._addAction("onSubmit",this._getSubmitAction()),this._clickAction=this._createClickAction()}_initMarkup(){super._initMarkup();const t=this.$element().find(".dx-button-content").first(),e=t.children().filter(".dx-template-wrapper"),i=t.children().filter(".dx-button-submit-input");e.length&&(e.addClass("dx-button-content"),e.append(i),t.replaceWith(e))}_patchOptionValues(t){return super._patchOptionValues((0,n.Z)({},t,{templateData:t._templateData}))}_findGroup(){const t=this.$element(),e=this.option("validationGroup");return void 0!==e&&""!==e?e:A.findGroup(t,this._modelByElement(t))}_createClickAction(){return this._createActionByOption("onClick",{excludeValidators:["readOnly"]})}_optionChanged(t){"onClick"===t.name&&(this._clickAction=this._createClickAction()),super._optionChanged(t)}}var ho=i(1950),po=i(2151);function fo(t){return Object.keys(t).filter((e=>t[e])).join(" ")}var _o=i(2753);const mo=["iconTemplate","position","source"];class go extends On{constructor(t){super(t),this.state={}}get sourceType(){return lo(this.props.source)}get cssClass(){return"left"!==this.props.position?"dx-icon-right":""}get iconClassName(){const t={"dx-icon":!0,[this.cssClass]:!!this.cssClass},{source:e}=this.props;return"dxIcon"===this.sourceType?fo((0,n.Z)({},t,{[`dx-icon-${e}`]:!0})):"fontIcon"===this.sourceType?fo((0,n.Z)({},t,{[String(e)]:!!e})):"image"===this.sourceType?fo(t):"svg"===this.sourceType?fo((0,n.Z)({},t,{"dx-svg-icon":!0})):""}get restAttributes(){const t=this.props;return(0,Yn.Z)(t,mo)}render(){const t=this.props;return(t=>{let{iconClassName:e,props:{iconTemplate:i,source:n},sourceType:o}=t;return li(["dxIcon"===o&&ri(1,"i",e),"fontIcon"===o&&ri(1,"i",e),"image"===o&&ri(1,"img",e,null,1,{alt:"",src:n}),i&&ri(1,"i",e,i({}),0)],0)})({props:(0,n.Z)({},t,{iconTemplate:(e=t.iconTemplate,e&&(e.defaultProps?t=>ci(si(2,e,(0,n.Z)({},t))):e))}),sourceType:this.sourceType,cssClass:this.cssClass,iconClassName:this.iconClassName,restAttributes:this.restAttributes});var e}}go.defaultProps={position:"left",source:""};const vo="dx-inkripple-showing",bo="dx-inkripple-hiding",yo=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{useHoldAnimation:e,waveSizeCoefficient:i,isCentered:n,wavesNumber:o}=t;return{waveSizeCoefficient:i||2,isCentered:n||!1,wavesNumber:o||1,durations:ko(e??!0)}},Co=function(t){const e=yo(t);return{showWave:So.bind(this,e),hideWave:Oo.bind(this,e)}},wo=function(t,e){const i=function(t){let e=t.children(".dx-inkripple");return 0===e.length&&(e=(0,o.Z)("<div>").addClass("dx-inkripple").appendTo(t)),e}((0,o.Z)(t)),n=i.children(".dx-inkripple-wave").toArray();for(let t=n.length;t<e;t++){const t=(0,o.Z)("<div>").appendTo(i).addClass("dx-inkripple-wave");n.push(t[0])}return(0,o.Z)(n)},xo=function(t,e){const i=(0,o.Z)(e.element),n=(0,M.Y_)(i),r=(0,M.zp)(i),s=parseInt(Math.sqrt(n*n+r*r)),a=Math.min(4e3,parseInt(s*t.waveSizeCoefficient));let l,c;if(t.isCentered)l=(n-a)/2,c=(r-a)/2;else{const t=e.event,n=i.offset();l=t.pageX-n.left-a/2,c=t.pageY-n.top-a/2}return{left:l,top:c,height:a,width:a}};function So(t,e){const i=wo(e.element,t.wavesNumber).eq(e.wave||0);t.hidingTimeout&&clearTimeout(t.hidingTimeout),Eo(i),i.css(xo(t,e)),t.showingTimeout=setTimeout(Io.bind(this,t,i),0)}function Io(t,e){const i=t.durations.showingScale+"ms";e.addClass(vo).css("transitionDuration",i)}function ko(t){return{showingScale:t?1e3:300,hidingScale:300,hidingOpacity:300}}function Eo(t){t.removeClass(bo).css("transitionDuration","")}function Oo(t,e){t.showingTimeout&&clearTimeout(t.showingTimeout);const i=wo(e.element,e.wavesNumber).eq(e.wave||0),n=t.durations,o=n.hidingScale+"ms, "+n.hidingOpacity+"ms";i.addClass(bo).removeClass(vo).css("transitionDuration",o);const r=Math.max(n.hidingScale,n.hidingOpacity);t.hidingTimeout=setTimeout(Eo.bind(this,i),r)}const To=["config"],Do={config:Object.freeze({})};class Bo extends On{constructor(t){super(t),this.state={},this.__getterCache={},this.hideWave=this.hideWave.bind(this),this.showWave=this.showWave.bind(this)}get getConfig(){return void 0!==this.__getterCache.getConfig?this.__getterCache.getConfig:this.__getterCache.getConfig=(()=>{const{config:t}=this.props;return yo(t)})()}get restAttributes(){const t=this.props;return(0,Yn.Z)(t,To)}hideWave(t){Oo(this.getConfig,t)}showWave(t){So(this.getConfig,t)}componentWillUpdate(t,e,i){this.props.config!==t.config&&(this.__getterCache.getConfig=void 0)}render(){const t=this.props;return e={props:(0,n.Z)({},t),getConfig:this.getConfig,restAttributes:this.restAttributes},ci(ri(1,"div","dx-inkripple",null,1,(0,n.Z)({},e.restAttributes)));var e}}function Ao(t){return(e,i,n,o)=>{const r=o?(0,f.addNamespace)(t,o):t;if(i)return P.Z.on(e,r,n,i),()=>{P.Z.off(e,r,i)}}}Bo.defaultProps=Do,Ao(Kt.name),Ao("scroll"),Ao(lt),Ao(ct),Ao(ut),Ao(dt),Ao(ht),Ao(pt),Ao(ft.Z.down),Ao(ft.Z.up),Ao(ft.Z.move),Ao("mouseenter"),Ao("mouseleave"),Ao("keydown");const Po=Ao("dxactive"),Mo=Ao("dxinactive"),Ro=Ao("dxhoverstart"),No=Ao("dxhoverend"),$o=Ao("focusin"),Vo=Ao("focusout");var Fo=i(9731);const Zo={className:"",activeStateEnabled:!1,disabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,tabIndex:0,visible:!0},Ho=function(t){const e=Bn++;return{id:e,defaultValue:t,Provider:class extends Sn{getChildContext(){return Object.assign(Object.assign({},this.context),{[e]:this.props.value||t})}render(){return this.props.children}}}}(void 0),Lo=["children","rtlEnabled"];class jo extends On{constructor(t){super(t),this.state={},this.__getterCache={}}getChildContext(){return(0,n.Z)({},this.context,{[Ho.id]:this.config||Ho.defaultValue})}get config(){return void 0!==this.__getterCache.config?this.__getterCache.config:this.__getterCache.config=(()=>({rtlEnabled:this.props.rtlEnabled}))()}get restAttributes(){const t=this.props;return(0,Yn.Z)(t,Lo)}componentWillUpdate(t,e,i){this.props.rtlEnabled!==t.rtlEnabled&&(this.__getterCache.config=void 0)}render(){const t=this.props;return[(0,n.Z)({},t),this.config,this.restAttributes][0].children}}jo.defaultProps={};var zo=i(4417),Wo=i(7581);const Ko=["_feedbackHideTimeout","_feedbackShowTimeout","accessKey","activeStateEnabled","activeStateUnit","addWidgetClass","aria","children","className","classes","cssText","disabled","focusStateEnabled","height","hint","hoverStateEnabled","name","onActive","onClick","onDimensionChanged","onFocusIn","onFocusOut","onHoverEnd","onHoverStart","onInactive","onKeyDown","onRootElementRendered","onVisibilityChange","rootElementRef","rtlEnabled","tabIndex","visible","width"],qo=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Zo),Object.getOwnPropertyDescriptors({_feedbackHideTimeout:400,_feedbackShowTimeout:30,cssText:"",aria:Object.freeze({}),classes:"",name:"",addWidgetClass:!0})));class Uo extends Dn{get config(){return this.context[Ho.id]?this.context[Ho.id]:Ho.defaultValue}constructor(t){super(t),this.widgetElementRef={current:null},this.state={active:!1,focused:!1,hovered:!1},this.setRootElementRef=this.setRootElementRef.bind(this),this.activeEffect=this.activeEffect.bind(this),this.inactiveEffect=this.inactiveEffect.bind(this),this.clickEffect=this.clickEffect.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.focusInEffect=this.focusInEffect.bind(this),this.focusOutEffect=this.focusOutEffect.bind(this),this.hoverStartEffect=this.hoverStartEffect.bind(this),this.hoverEndEffect=this.hoverEndEffect.bind(this),this.keyboardEffect=this.keyboardEffect.bind(this),this.resizeEffect=this.resizeEffect.bind(this),this.windowResizeEffect=this.windowResizeEffect.bind(this),this.visibilityEffect=this.visibilityEffect.bind(this),this.checkDeprecation=this.checkDeprecation.bind(this),this.applyCssTextEffect=this.applyCssTextEffect.bind(this)}createEffects(){return[new An(this.setRootElementRef,[]),new An(this.activeEffect,[this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),new An(this.inactiveEffect,[this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),new An(this.clickEffect,[this.props.disabled,this.props.name,this.props.onClick]),new An(this.focusInEffect,[this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),new An(this.focusOutEffect,[this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),new An(this.hoverStartEffect,[this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),new An(this.hoverEndEffect,[this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),new An(this.keyboardEffect,[this.props.focusStateEnabled,this.props.onKeyDown]),new An(this.resizeEffect,[this.props.name,this.props.onDimensionChanged]),new An(this.windowResizeEffect,[this.props.onDimensionChanged]),new An(this.visibilityEffect,[this.props.name,this.props.onVisibilityChange]),new An(this.checkDeprecation,[this.props.height,this.props.width]),new An(this.applyCssTextEffect,[this.props.cssText]),Pn()]}updateEffects(){var t,e,i,n,o,r,s,a,l,c,u,d,h;null===(t=this._effects[1])||void 0===t||t.update([this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),null===(e=this._effects[2])||void 0===e||e.update([this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),null===(i=this._effects[3])||void 0===i||i.update([this.props.disabled,this.props.name,this.props.onClick]),null===(n=this._effects[4])||void 0===n||n.update([this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),null===(o=this._effects[5])||void 0===o||o.update([this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),null===(r=this._effects[6])||void 0===r||r.update([this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),null===(s=this._effects[7])||void 0===s||s.update([this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),null===(a=this._effects[8])||void 0===a||a.update([this.props.focusStateEnabled,this.props.onKeyDown]),null===(l=this._effects[9])||void 0===l||l.update([this.props.name,this.props.onDimensionChanged]),null===(c=this._effects[10])||void 0===c||c.update([this.props.onDimensionChanged]),null===(u=this._effects[11])||void 0===u||u.update([this.props.name,this.props.onVisibilityChange]),null===(d=this._effects[12])||void 0===d||d.update([this.props.height,this.props.width]),null===(h=this._effects[13])||void 0===h||h.update([this.props.cssText])}setRootElementRef(){const{onRootElementRendered:t,rootElementRef:e}=this.props;e&&(e.current=this.widgetElementRef.current),null==t||t(this.widgetElementRef.current)}activeEffect(){const{_feedbackShowTimeout:t,activeStateEnabled:e,activeStateUnit:i,disabled:n,onActive:o}=this.props,r=i;if(e&&!n)return Po(this.widgetElementRef.current,(t=>{this.setState((t=>({active:!0}))),null==o||o(t)}),{timeout:t,selector:r},"UIFeedback")}inactiveEffect(){const{_feedbackHideTimeout:t,activeStateEnabled:e,activeStateUnit:i,onInactive:n}=this.props,o=i;if(e)return Mo(this.widgetElementRef.current,(t=>{this.state.active&&(this.setState((t=>({active:!1}))),null==n||n(t))}),{timeout:t,selector:o},"UIFeedback")}clickEffect(){const{disabled:t,name:e,onClick:i}=this.props,n=e;if(i&&!t)return po.wt.on(this.widgetElementRef.current,i,{namespace:n}),()=>po.wt.off(this.widgetElementRef.current,{namespace:n})}focusInEffect(){const{disabled:t,focusStateEnabled:e,name:i,onFocusIn:n}=this.props,o=`${i}Focus`;if(e&&!t)return $o(this.widgetElementRef.current,(t=>{t.isDefaultPrevented()||(this.setState((t=>({focused:!0}))),null==n||n(t))}),null,o)}focusOutEffect(){const{focusStateEnabled:t,name:e,onFocusOut:i}=this.props,n=`${e}Focus`;if(t)return Vo(this.widgetElementRef.current,(t=>{!t.isDefaultPrevented()&&this.state.focused&&(this.setState((t=>({focused:!1}))),null==i||i(t))}),null,n)}hoverStartEffect(){const{activeStateUnit:t,disabled:e,hoverStateEnabled:i,onHoverStart:n}=this.props,o=t;if(i&&!e)return Ro(this.widgetElementRef.current,(t=>{!this.state.active&&this.setState((t=>({hovered:!0}))),null==n||n(t)}),{selector:o},"UIFeedback")}hoverEndEffect(){const{activeStateUnit:t,hoverStateEnabled:e,onHoverEnd:i}=this.props,n=t;if(e)return No(this.widgetElementRef.current,(t=>{this.state.hovered&&(this.setState((t=>({hovered:!1}))),null==i||i(t))}),{selector:n},"UIFeedback")}keyboardEffect(){const{focusStateEnabled:t,onKeyDown:e}=this.props;if(t&&e){const t=po.dG.on(this.widgetElementRef.current,this.widgetElementRef.current,(t=>e(t)));return()=>po.dG.off(t)}}resizeEffect(){const t=`${this.props.name}VisibilityChange`,{onDimensionChanged:e}=this.props;if(e)return po.SI.on(this.widgetElementRef.current,e,{namespace:t}),()=>po.SI.off(this.widgetElementRef.current,{namespace:t})}windowResizeEffect(){const{onDimensionChanged:t}=this.props;if(t)return Wo.default.add(t),()=>{Wo.default.remove(t)}}visibilityEffect(){const{name:t,onVisibilityChange:e}=this.props,i=`${t}VisibilityChange`;if(e)return po.WD.on(this.widgetElementRef.current,(()=>e(!0)),(()=>e(!1)),{namespace:i}),()=>po.WD.off(this.widgetElementRef.current,{namespace:i})}checkDeprecation(){const{height:t,width:e}=this.props;(0,s.mf)(e)&&b.default.log("W0017","width"),(0,s.mf)(t)&&b.default.log("W0017","height")}applyCssTextEffect(){const{cssText:t}=this.props;""!==t&&(this.widgetElementRef.current.style.cssText=t)}get shouldRenderConfigProvider(){const{rtlEnabled:t}=this.props;return function(t,e){const i=(0,s.$K)(t),n=(0,s.$K)((0,zo.default)().rtlEnabled)&&!i&&!(0,s.$K)(null==e?void 0:e.rtlEnabled);return i&&t!==(null==e?void 0:e.rtlEnabled)||n}(t,this.config)}get rtlEnabled(){const{rtlEnabled:t}=this.props;return e=t,i=this.config,void 0!==e?e:void 0!==(null==i?void 0:i.rtlEnabled)?i.rtlEnabled:(0,zo.default)().rtlEnabled;var e,i}get attributes(){const{aria:t,disabled:e,focusStateEnabled:i,visible:o}=this.props,s=i&&!e&&this.props.accessKey;return(0,n.Z)({},(0,r.l)({},s&&{accessKey:s}),(a=(0,n.Z)({},t,{disabled:e,hidden:!o}),Object.keys(a).reduce(((t,e)=>a[e]?(0,n.Z)({},t,{["role"===e||"id"===e?e:`aria-${e}`]:String(a[e])}):t),{})),(0,r.l)({},this.restAttributes));var a}get styles(){const{height:t,width:e}=this.props,i=this.restAttributes.style||{},o=(0,Fo.bh)("width",(0,s.mf)(e)?e():e),r=(0,Fo.bh)("height",(0,s.mf)(t)?t():t);return(0,n.Z)({},i,{height:r??i.height,width:o??i.width})}get cssClasses(){const{activeStateEnabled:t,addWidgetClass:e,className:i,classes:n,disabled:o,focusStateEnabled:r,hoverStateEnabled:s,onVisibilityChange:a,visible:l}=this.props,c=!!r&&!o,u=!!s&&!o,d=!!t&&!o;return fo({"dx-widget":!!e,[String(n)]:!!n,[String(i)]:!!i,"dx-state-disabled":!!o,"dx-state-invisible":!l,"dx-state-focused":!!this.state.focused&&c,"dx-state-active":!!this.state.active&&d,"dx-state-hover":!!this.state.hovered&&u&&!this.state.active,"dx-rtl":!!this.rtlEnabled,"dx-visibility-change-handler":!!a})}get tabIndex(){const{disabled:t,focusStateEnabled:e,tabIndex:i}=this.props;return e&&!t?i:void 0}get restAttributes(){const t=this.props;return(0,Yn.Z)(t,Ko)}focus(){po.T_.trigger(this.widgetElementRef.current)}blur(){const t=Mt.Z.getActiveElement(this.widgetElementRef.current);this.widgetElementRef.current===t&&t.blur()}activate(){this.setState((t=>({active:!0})))}deactivate(){this.setState((t=>({active:!1})))}render(){const t=this.props;return(t=>{const e=ci(ri(1,"div",t.cssClasses,t.props.children,0,(0,n.Z)({},t.attributes,{tabIndex:t.tabIndex,title:t.props.hint,style:Wn(t.styles)}),null,t.widgetElementRef));return t.shouldRenderConfigProvider?si(2,jo,{rtlEnabled:t.rtlEnabled,children:e}):e})({props:(0,n.Z)({},t),active:this.state.active,focused:this.state.focused,hovered:this.state.hovered,widgetElementRef:this.widgetElementRef,config:this.config,shouldRenderConfigProvider:this.shouldRenderConfigProvider,rtlEnabled:this.rtlEnabled,attributes:this.attributes,styles:this.styles,cssClasses:this.cssClasses,tabIndex:this.tabIndex,restAttributes:this.restAttributes})}}Uo.defaultProps=qo;const Go=["accessKey","activeStateEnabled","children","className","disabled","focusStateEnabled","height","hint","hoverStateEnabled","icon","iconPosition","iconTemplate","onClick","onKeyDown","onSubmit","pressed","rtlEnabled","stylingMode","tabIndex","template","templateData","text","type","useInkRipple","useSubmitBehavior","visible","width"],Yo=["outlined","text","contained"],Qo=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Zo),Object.getOwnPropertyDescriptors({activeStateEnabled:!0,hoverStateEnabled:!0,icon:"",iconPosition:"left",stylingMode:"contained",text:"",type:"normal",useInkRipple:!1,useSubmitBehavior:!1,templateData:Object.freeze({})}))),Xo=(0,ho.J3)([{device:()=>"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,At.x2)((0,At.Vk)()),options:{useInkRipple:!0}}]),Jo=t=>t&&(t.defaultProps?e=>ci(si(2,t,(0,n.Z)({},e))):t);class tr extends Dn{constructor(t){super(t),this.state={},this.contentRef={current:null},this.inkRippleRef={current:null},this.submitInputRef={current:null},this.widgetRef={current:null},this.__getterCache={},this.focus=this.focus.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.submitEffect=this.submitEffect.bind(this),this.onActive=this.onActive.bind(this),this.onInactive=this.onInactive.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this),this.emitClickEvent=this.emitClickEvent.bind(this)}createEffects(){return[new An(this.submitEffect,[this.props.onSubmit,this.props.useSubmitBehavior]),Pn()]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.props.onSubmit,this.props.useSubmitBehavior])}submitEffect(){const{onSubmit:t,useSubmitBehavior:e}=this.props;if(e&&t)return po.V4.on(this.submitInputRef.current,(e=>t({event:e,submitInput:this.submitInputRef.current})),{namespace:"UIFeedback"}),()=>po.V4.off(this.submitInputRef.current,{namespace:"UIFeedback"})}onActive(t){const{useInkRipple:e}=this.props;e&&this.inkRippleRef.current.showWave({element:this.contentRef.current,event:t})}onInactive(t){const{useInkRipple:e}=this.props;e&&this.inkRippleRef.current.hideWave({element:this.contentRef.current,event:t})}onWidgetClick(t){const{onClick:e,useSubmitBehavior:i}=this.props;null==e||e({event:t}),i&&this.submitInputRef.current.click()}keyDown(t){const{onKeyDown:e}=this.props,{keyName:i,originalEvent:n,which:o}=t,r=null==e?void 0:e(t);if(null!=r&&r.cancel)return r;"space"!==i&&"space"!==o&&"enter"!==i&&"enter"!==o||(n.preventDefault(),this.emitClickEvent())}emitClickEvent(){this.contentRef.current.click()}get aria(){const{icon:t,text:e}=this.props;let i=e??"";if(!e&&t)switch(lo(t)){case"image":{const e=/^(?!(?:https?:\/\/)|(?:ftp:\/\/)|(?:www\.))[^\s]+$/;i=!t.includes("base64")&&e.test(t)?t.replace(/.+\/([^.]+)\..+$/,"$1"):"";break}case"dxIcon":i=C.Z.format((0,_o.camelize)(t,!0))||t;break;case"fontIcon":i=t;break;case"svg":var o;i=(null===(o=/<title>(.*?)<\/title>/.exec(t))||void 0===o?void 0:o[1])??""}return(0,n.Z)({role:"button"},i?{label:i}:{})}get cssClasses(){return(t=>{const{icon:e,iconPosition:i,stylingMode:n,text:o,type:r}=t;return fo({"dx-button":!0,[`dx-button-mode-${n&&Yo.includes(n)?n:"contained"}`]:!0,[`dx-button-${r??"normal"}`]:!0,"dx-button-has-text":!!o,"dx-button-has-icon":!!e,"dx-button-icon-right":"left"!==i})})(this.props)}get iconSource(){const{icon:t}=this.props;return t??""}get inkRippleConfig(){return void 0!==this.__getterCache.inkRippleConfig?this.__getterCache.inkRippleConfig:this.__getterCache.inkRippleConfig=(()=>{const{icon:t,text:e}=this.props;return!e&&t?{isCentered:!0,useHoldAnimation:!1,waveSizeCoefficient:1}:{}})()}get buttonTemplateData(){const{icon:t,templateData:e,text:i}=this.props;return(0,n.Z)({icon:t,text:i},e)}get restAttributes(){const t=this.props;return(0,Yn.Z)(t,Go)}focus(){this.widgetRef.current.focus()}activate(){this.widgetRef.current.activate()}deactivate(){this.widgetRef.current.deactivate()}componentWillUpdate(t,e,i){super.componentWillUpdate(),this.props.icon===t.icon&&this.props.text===t.text||(this.__getterCache.inkRippleConfig=void 0)}render(){const t=this.props;return(t=>{const{children:e,iconPosition:i,iconTemplate:o,template:r,text:s}=t.props,a=!t.props.template&&!e&&""!==s,l="left"===i,c=!t.props.template&&!e&&(t.iconSource||t.props.iconTemplate)&&si(2,go,{source:t.iconSource,position:i,iconTemplate:o});return ci(si(2,Uo,(0,n.Z)({accessKey:t.props.accessKey,activeStateEnabled:t.props.activeStateEnabled,aria:t.aria,className:t.props.className,classes:t.cssClasses,disabled:t.props.disabled,focusStateEnabled:t.props.focusStateEnabled,height:t.props.height,hint:t.props.hint,hoverStateEnabled:t.props.hoverStateEnabled,onActive:t.onActive,onClick:t.onWidgetClick,onInactive:t.onInactive,onKeyDown:t.keyDown,rtlEnabled:t.props.rtlEnabled,tabIndex:t.props.tabIndex,visible:t.props.visible,width:t.props.width},t.restAttributes,{children:ri(1,"div","dx-button-content",[t.props.template&&r({data:t.buttonTemplateData}),!t.props.template&&e,l&&c,a&&ri(1,"span","dx-button-text",s,0),!l&&c,t.props.useSubmitBehavior&&ri(64,"input","dx-button-submit-input",null,1,{type:"submit",tabIndex:-1},null,t.submitInputRef),t.props.useInkRipple&&si(2,Bo,{config:t.inkRippleConfig},null,t.inkRippleRef)],0,null,null,t.contentRef)}),null,t.widgetRef))})({props:(0,n.Z)({},t,{template:Jo(t.template),iconTemplate:Jo(t.iconTemplate)}),contentRef:this.contentRef,submitInputRef:this.submitInputRef,inkRippleRef:this.inkRippleRef,widgetRef:this.widgetRef,onActive:this.onActive,onInactive:this.onInactive,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,emitClickEvent:this.emitClickEvent,aria:this.aria,cssClasses:this.cssClasses,iconSource:this.iconSource,inkRippleConfig:this.inkRippleConfig,buttonTemplateData:this.buttonTemplateData,restAttributes:this.restAttributes})}}tr.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Qo),Object.getOwnPropertyDescriptors((0,n.Z)({},(0,ho.wt)(Xo)))));const er=[];class ir extends uo{getProps(){const t=super.getProps();return t.onKeyDown=this._wrapKeyDownHandler(t.onKeyDown),t}focus(){var t;return null===(t=this.viewRef)||void 0===t?void 0:t.focus(...arguments)}activate(){var t;return null===(t=this.viewRef)||void 0===t?void 0:t.activate(...arguments)}deactivate(){var t;return null===(t=this.viewRef)||void 0===t?void 0:t.deactivate(...arguments)}_getActionConfigs(){return{onClick:{excludeValidators:["readOnly"]},onSubmit:{}}}get _propsInfo(){return{twoWay:[],allowNull:[],elements:["onSubmit"],templates:["template","iconTemplate"],props:["activeStateEnabled","hoverStateEnabled","icon","iconPosition","onClick","onSubmit","pressed","stylingMode","template","iconTemplate","text","type","useInkRipple","useSubmitBehavior","templateData","className","accessKey","disabled","focusStateEnabled","height","hint","onKeyDown","rtlEnabled","tabIndex","visible","width"]}}get _viewComponent(){return tr}}(0,c.default)("dxButton",ir),ir.defaultOptions=function(t){er.push(t),tr.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(tr.defaultProps),Object.getOwnPropertyDescriptors((0,ho.wt)(Xo)),Object.getOwnPropertyDescriptors((0,ho.wt)(er))))};const nr=ir,or="dxswipestart",rr="dxswipe",sr="dxswipeend",ar={horizontal:{defaultItemSizeFunc:function(){return(0,M.dz)(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(t){return((0,f.eventData)(t).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){const e=(0,f.eventData)(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.x-this._tickData.x)>=e.time-this._tickData.time}},vertical:{defaultItemSizeFunc:function(){return(0,M.Cr)(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(t){return((0,f.eventData)(t).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,t)},isFastSwipe:function(t){const e=(0,f.eventData)(t);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(e.y-this._tickData.y)>=e.time-this._tickData.time}}},lr=Q.default.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(t){this.callBase(t),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return ar[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(t){this._tickData=(0,f.eventData)(t)},_start:function(t){this._savedEventData=(0,f.eventData)(t),(t=this._fireEvent("dxswipestart",t)).cancel||(this._maxLeftOffset=t.maxLeftOffset,this._maxRightOffset=t.maxRightOffset,this._maxTopOffset=t.maxTopOffset,this._maxBottomOffset=t.maxBottomOffset)},_move:function(t){const e=this._getStrategy(),i=(0,f.eventData)(t);let n=e.calcOffsetRatio.call(this,t);n=this._fitOffset(n,this.elastic),i.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=i),this._fireEvent("dxswipe",t,{offset:n}),!1!==t.cancelable&&t.preventDefault()},_end:function(t){const e=this._getStrategy(),i=e.calcOffsetRatio.call(this,t),n=e.isFastSwipe.call(this,t);let o=i,r=this._calcTargetOffset(i,n);o=this._fitOffset(o,this.elastic),r=this._fitOffset(r,!1),this._fireEvent("dxswipeend",t,{offset:o,targetOffset:r})},_fitOffset:function(t,e){const i=this._getStrategy().getBounds.call(this);return t<-i[0]?e?(-2*i[0]+t)/3:-i[0]:t>i[1]?e?(2*i[1]+t)/3:i[1]:t},_calcTargetOffset:function(t,e){let i;return e?(i=Math.ceil(Math.abs(t)),t<0&&(i=-i)):i=Math.round(t),i}});(0,X.Z)({emitter:lr,events:["dxswipestart","dxswipe","dxswipeend"]});const cr=Ft.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge:function(t){if(this._$element.children(".dx-list-item-badge-container").remove(),!t)return;const e=(0,o.Z)("<div>").addClass("dx-list-item-badge-container").append((0,o.Z)("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(t)),i=this._$element.children(".dx-list-item-chevron-container").first();i.length>0?e.insertBefore(i):e.appendTo(this._$element)},_renderShowChevron:function(t){if(this._$element.children(".dx-list-item-chevron-container").remove(),!t)return;const e=(0,o.Z)("<div>").addClass("dx-list-item-chevron-container"),i=(0,o.Z)("<div>").addClass("dx-list-item-chevron");e.append(i).appendTo(this._$element)}});var ur=i(4965),dr=i(3487),hr=i(4497),pr=i(2222);const fr="dxScrollbar",_r="horizontal",mr="onScroll",gr="onHover",vr="always",br="never";let yr=null;const Cr=_.default.inherit({_getDefaultOptions(){return(0,r.l)(this.callBase(),{direction:null,visible:!1,activeStateEnabled:!1,visibilityMode:mr,containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})},_init(){this.callBase(),this._isHovered=!1},_initMarkup(){this._renderThumb(),this.callBase()},_render(){this.callBase(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode()),this.$element().toggleClass("dx-scrollbar-hoverable",this.option("hoverStateEnabled"))},_renderThumb(){this._$thumb=(0,o.Z)("<div>").addClass("dx-scrollable-scroll"),(0,o.Z)("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass("dx-scrollable-scrollbar").append(this._$thumb)},isThumb(t){return!!this.$element().find(t).length},_isHoverMode(){const t=this.option("visibilityMode");return(t===gr||t===vr)&&this.option("expandable")},_renderDirection(){const t=this.option("direction");this.$element().addClass(`dx-scrollbar-${t}`),this._dimension=t===_r?"width":"height",this._prop=t===_r?"left":"top"},_attachPointerDownHandler(){P.Z.on(this._$thumb,(0,f.addNamespace)(ft.Z.down,fr),this.feedbackOn.bind(this))},feedbackOn(){this.$element().addClass("dx-scrollable-scrollbar-active"),yr=this},feedbackOff(){this.$element().removeClass("dx-scrollable-scrollbar-active"),yr=null},cursorEnter(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)},cursorLeave(){this._isHovered=!1,this.option("visible",!1)},_renderDimensions(){this._$thumb.css({width:this.option("width"),height:this.option("height")})},_toggleVisibility(t){this.option("visibilityMode")===mr&&this._$thumb.css("opacity"),t=this._adjustVisibility(t),this.option().visible=t,this._$thumb.toggleClass("dx-state-invisible",!t)},_adjustVisibility(t){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;switch(this.option("visibilityMode")){case mr:break;case gr:t=t||!!this._isHovered;break;case br:t=!1;break;case vr:t=!0}return t},moveTo(t){if(this._isHidden())return;(0,s.PO)(t)&&(t=t[this._prop]||0);const e={};e[this._prop]=this._calculateScrollBarPosition(t),(0,hr.pB)(this._$thumb,e)},_calculateScrollBarPosition(t){return-t*this._thumbRatio},_update(){const t=Math.round(this.option("containerSize")),e=Math.round(this.option("contentSize"));let i=Math.round(this.option("baseContainerSize")),n=Math.round(this.option("baseContentSize"));isNaN(i)&&(i=t,n=e),this._baseContainerToContentRatio=n?i/n:i,this._realContainerToContentRatio=e?t/e:t;const o=Math.round(Math.max(Math.round(t*this._realContainerToContentRatio),15));this._thumbRatio=(t-o)/(this.option("scaleRatio")*(e-t)),this.option(this._dimension,o/this.option("scaleRatio")),this.$element().css("display",this._needScrollbar()?"":"none")},_isHidden(){return this.option("visibilityMode")===br},_needScrollbar(){return!this._isHidden()&&this._baseContainerToContentRatio<1},containerToContentRatio(){return this._realContainerToContentRatio},_normalizeSize(t){return(0,s.PO)(t)?t[this._dimension]||0:t},_clean(){this.callBase(),this===yr&&(yr=null),P.Z.off(this._$thumb,`.${fr}`)},_optionChanged(t){if(!this._isHidden())switch(t.name){case"containerSize":case"contentSize":this.option()[t.name]=this._normalizeSize(t.value),this._update();break;case"baseContentSize":case"baseContainerSize":case"scaleRatio":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;default:this.callBase.apply(this,arguments)}},update:(0,l.deferRenderer)((function(){this._adjustVisibility()&&this.option("visible",!0)}))});pr.default.add((()=>{P.Z.subscribeGlobal(Mt.Z.getDocument(),(0,f.addNamespace)(ft.Z.up,fr),(()=>{yr&&yr.feedbackOff()}))}));const wr=Cr,xr="dxNativeScrollable",Sr="vertical",Ir="horizontal",kr=m.default.inherit({ctor(t){this._init(t)},_init(t){this._component=t,this._$element=t.$element(),this._$container=(0,o.Z)(t.container()),this._$content=t.$content(),this._direction=t.option("direction"),this._useSimulatedScrollbar=t.option("useSimulatedScrollbar"),this.option=t.option.bind(t),this._createActionByOption=t._createActionByOption.bind(t),this._isLocked=t._isLocked.bind(t),this._isDirection=t._isDirection.bind(t),this._allowedDirection=t._allowedDirection.bind(t),this._getMaxOffset=t._getMaxOffset.bind(t),this._isRtlNativeStrategy=t._isRtlNativeStrategy.bind(t)},render(){const t=tt.default.real().platform;this._$element.addClass("dx-scrollable-native").addClass(`dx-scrollable-native-${t}`).toggleClass("dx-scrollable-scrollbars-hidden",!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()},updateRtlPosition(t){t&&this.option("rtlEnabled")&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()},_renderScrollbars(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass("dx-scrollable-scrollbar-simulated"),this._renderScrollbar(Sr),this._renderScrollbar(Ir)},_renderScrollbar(t){this._isDirection(t)&&(this._scrollbars[t]=new wr((0,o.Z)("<div>").appendTo(this._$element),{direction:t,expandable:this._component.option("scrollByThumb")}))},handleInit:l.noop,handleStart:l.noop,handleMove(t){this._isLocked()?t.cancel=!0:this._allowedDirection()&&(t.originalEvent.isScrollingEvent=!0)},handleEnd:l.noop,handleCancel:l.noop,handleStop:l.noop,_eachScrollbar(t){t=t.bind(this),(0,g.each)(this._scrollbars||{},((e,i)=>{t(i,e)}))},createActions(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")},_createActionArgs(){const{left:t,top:e}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-t):this._isReachedLeft(t),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(t)):this._isReachedRight(t),reachedTop:this._isDirection(Sr)?Math.round(e)>=0:void 0,reachedBottom:this._isDirection(Sr)?Math.round(Math.abs(e)-this._getMaxOffset().top)>=0:void 0}},_getScrollOffset(){const{top:t,left:e}=this.location();return{top:-t,left:this._normalizeOffsetLeft(-e)}},_normalizeOffsetLeft(t){return this._isRtlNativeStrategy()?this._getMaxOffset().left+t:t},_isReachedLeft(t){return this._isDirection(Ir)?Math.round(t)>=0:void 0},_isReachedRight(t){return this._isDirection(Ir)?Math.round(Math.abs(t)-this._getMaxOffset().left)>=0:void 0},_isScrollbarVisible(){const{showScrollbar:t}=this.option();return"never"!==t&&!1!==t},handleScroll(t){this._eventForUserAction=t,this._moveScrollbars(),this._scrollAction(this._createActionArgs())},_moveScrollbars(){const{top:t,left:e}=this._getScrollOffset();this._eachScrollbar((i=>{i.moveTo({top:-t,left:-e}),i.option("visible",!0)})),this._hideScrollbars()},_hideScrollbars(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout((()=>{this._eachScrollbar((t=>{t.option("visible",!1)}))}),500)},location(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}},disabledChanged:l.noop,update(){this._update(),this._updateAction(this._createActionArgs())},_update(){this._updateDimensions(),this._updateScrollbars()},_updateDimensions(){this._containerSize={height:(0,M.Cr)(this._$container),width:(0,M.dz)(this._$container)},this._componentContentSize={height:(0,M.Cr)(this._component.$content()),width:(0,M.dz)(this._component.$content())},this._contentSize={height:(0,M.Cr)(this._$content),width:(0,M.dz)(this._$content)}},_updateScrollbars(){this._eachScrollbar((function(t,e){const i=e===Sr?"height":"width";t.option({containerSize:this._containerSize[i],contentSize:this._componentContentSize[i]}),t.update()}))},_allowedDirections(){return{vertical:this._isDirection(Sr)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(Ir)&&this._contentSize.width>this._containerSize.width}},dispose(){const{className:t}=this._$element.get(0),e=new RegExp("dx-scrollable-native\\S*","g");e.test(t)&&this._$element.removeClass(t.match(e).join(" ")),P.Z.off(this._$element,`.${xr}`),P.Z.off(this._$container,`.${xr}`),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)},_removeScrollbars(){this._eachScrollbar((t=>{t.$element().remove()}))},scrollBy(t){const e=this.location();this._$container.scrollTop(Math.round(-e.top-t.top)),this._$container.scrollLeft(Math.round(-e.left-t.left))},validate(t){return!(this.option("disabled")||(0,f.isDxMouseWheelEvent)(t)&&this._isScrolledInMaxDirection(t)||!this._allowedDirection())},_isScrolledInMaxDirection(t){const e=this._$container.get(0);let i;return i=t.delta>0?t.shiftKey?!e.scrollLeft:!e.scrollTop:t.shiftKey?e.scrollLeft>=this._getMaxOffset().left:e.scrollTop>=this._getMaxOffset().top,i},getDirection(){return this._allowedDirection()}}),Er=kr,Or=Er.inherit({_init(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$refreshingText=t._$refreshingText,this._$scrollViewContent=(0,o.Z)(t.content()),this._$container=(0,o.Z)(t.container()),this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=(0,h.Z)(),this.releaseCallbacks=(0,h.Z)(),this.reachBottomCallbacks=(0,h.Z)()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const t=(0,o.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,o.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),i=new ur.Z((0,o.Z)("<div>")).$element(),n=this._$pullDownText=(0,o.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,o.Z)("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=(0,o.Z)("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=(0,o.Z)("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(t).append(e.append(i)).append(n)},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const t=this,e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];(0,g.each)(e,((e,i)=>{const n=t._state===i.visibleState?"addClass":"removeClass";i.element[n]("dx-scrollview-pull-down-text-visible")}))},update(){this.callBase(),this._setTopPocketOffset()},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections(){const t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},_setTopPocketOffset(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd(){this.callBase(),this._complete()},handleStop(){this.callBase(),this._complete()},_complete(){1===this._state&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout((()=>{this._pullDownRefreshing()}),400))},_setPullDownOffset(t){(0,hr.pB)(this._$topPocket,{top:t}),(0,hr.pB)(this._$scrollViewContent,{top:t})},handleScroll(t){if(this.callBase(t),2===this._state)return;const e=this.location().top,i=(this._location||0)-e;this._location=e,this._isPullDown()?this._pullDownReady():i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isPullDown(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){3!==this._state&&(this._state=3,this.reachBottomCallbacks.fire())},_pullDownReady(){1!==this._state&&(this._state=1,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){0!==this._state&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._releaseState())},_pullDownRefreshing(){2!==this._state&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable(t){t&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=t},reachBottomEnable(t){this._reachBottomEnabled=t},pendingRelease(){this._state=1},release(){const t=(0,w.BH)();return this._updateDimensions(),clearTimeout(this._releaseTimeout),3===this._state&&(this._state=0),this._releaseTimeout=setTimeout((()=>{this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}),400),t.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),Tr=Or,Dr=Er.inherit({_init(t){this.callBase(t),this._$topPocket=t._$topPocket,this._$pullDown=t._$pullDown,this._$scrollViewContent=(0,o.Z)(t.content()),this._$container=(0,o.Z)(t.container()),this._initCallbacks(),this._location=0},_initCallbacks(){this.pullDownCallbacks=(0,h.Z)(),this.releaseCallbacks=(0,h.Z)(),this.reachBottomCallbacks=(0,h.Z)()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const t=(0,o.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),e=new ur.Z((0,o.Z)("<div>")).$element();this._$icon=(0,o.Z)("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(t.append(e))},_releaseState(){this._state=0,this._releasePullDown(),this._updateDimensions()},_releasePullDown(){this._$pullDown.css({opacity:0})},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const t=this._$scrollViewContent.get(0),e=this._$container.get(0);this._bottomBoundary=Math.max(t.clientHeight-e.clientHeight,0)},_allowedDirections(){const t=this.callBase();return t.vertical=t.vertical||this._pullDownEnabled,t},handleInit(t){this.callBase(t),0===this._state&&0===this._location&&(this._startClientY=(0,f.eventData)(t.originalEvent).y,this._state=4)},handleMove(t){this.callBase(t),this._deltaY=(0,f.eventData)(t.originalEvent).y-this._startClientY,4===this._state&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),5===this._state&&(t.preventDefault(),this._movePullDown())},_movePullDown(){const t=this._getPullDownHeight(),e=Math.min(3*t,this._deltaY+this._getPullDownStartPosition()),i=180*e/t/3;this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",e<t),(0,hr.pB)(this._$pullDown,{top:e}),this._$icon.css({transform:`rotate(${i}deg)`})},_isPullDown(){return this._pullDownEnabled&&5===this._state&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight(){return Math.round(.05*(0,M.zp)(this._$element))},_getPullDownStartPosition(){return-Math.round(1.5*(0,M.zp)(this._$pullDown))},handleEnd(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop(){this._complete()},_complete(){4!==this._state&&5!==this._state||this._releaseState()},handleScroll(t){if(this.callBase(t),2===this._state)return;const e=this.location().top,i=this._location-e;this._location=e,i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){this.reachBottomCallbacks.fire()},_stateReleased(){0!==this._state&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading"),this._releaseState())},_pullDownRefreshing(){this._state=2,this._pullDownRefreshHandler()},_pullDownRefreshHandler(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown(){this._$pullDown.addClass("dx-scrollview-pull-down-loading"),(0,hr.pB)(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable(t){this._$topPocket.toggle(t),this._pullDownEnabled=t},reachBottomEnable(t){this._reachBottomEnabled=t},pendingRelease(){this._state=1},release(){const t=(0,w.BH)();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout((()=>{this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),t.resolve()}),800),t.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),{abstract:Br}=m.default,Ar=m.default.inherit({ctor(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)},start(){this._stopped=!1,this._finished=!1,this._stepCore()},stop(){this._stopped=!0,(0,J.cancelAnimationFrame)(this._stepAnimationFrame)},_stepCore(){if(this._isStopped())this._stop();else{if(this._isFinished())return this._finished=!0,void this._complete();this._step(),this._stepAnimationFrame=(0,J.requestAnimationFrame)(this._proxiedStepCore)}},_step:Br,_isFinished:l.noop,_stop:l.noop,_complete:l.noop,_isStopped(){return this._stopped},inProgress(){return!(this._stopped||this._finished)}}),Pr="dxSimulatedScrollable",Mr=`${Pr}Cursor`,Rr=`${Pr}Keyboard`,Nr="vertical",$r="horizontal",Vr=(1-.92**(400/Math.round(1e3/60)))/(1-.92),Fr=Ar.inherit({ctor(t){this.callBase(),this.scroller=t},VELOCITY_LIMIT:1,_isFinished(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT},_step(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()},_acceleration(){return this.scroller._inBounds()?.92:.5},_complete(){this.scroller._scrollComplete()}}),Zr=Fr.inherit({VELOCITY_LIMIT:.2,_isFinished(){return this.scroller._crossBoundOnNextStep()||this.callBase()},_acceleration:()=>.92,_complete(){this.scroller._move(this.scroller._bounceLocation),this.callBase()}}),Hr=m.default.inherit({ctor(t){this._initOptions(t),this._initAnimators(),this._initScrollbar()},_initOptions(t){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=t.direction===$r?"x":"y",this._prop=t.direction===$r?"left":"top",this._dimension=t.direction===$r?"width":"height",this._scrollProp=t.direction===$r?"scrollLeft":"scrollTop",(0,g.each)(t,((t,e)=>{this[`_${t}`]=e}))},_initAnimators(){this._inertiaAnimator=new Fr(this),this._bounceAnimator=new Zr(this)},_initScrollbar(){this._scrollbar=new wr((0,o.Z)("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()},_visibilityModeNormalize:t=>!0===t?"onScroll":!1===t?"never":t,_scrollStep(t){const e=this._location;this._location+=t,this._suppressBounce(),this._move(),Math.abs(e-this._location)<1||P.Z.triggerHandler(this._$container,{type:"scroll"})},_suppressBounce(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())},_boundLocation(t){return t=void 0!==t?t:this._location,Math.max(Math.min(t,this._maxOffset),this._minOffset)},_move(t){this._location=void 0!==t?t*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()},_moveContent(){const t=this._location;this._$container[this._scrollProp](-t/this._getScaleRatio()),this._moveContentByTranslator(t)},_getScaleRatio(){if((0,p.hasWindow)()&&!this._scaleRatio){const t=this._$element.get(0),e=this._getRealDimension(t,this._dimension),i=this._getBaseDimension(t,this._dimension);this._scaleRatio=Math.round(e/i*100)/100}return this._scaleRatio||1},_getRealDimension:(t,e)=>Math.round((0,$.l)(t)[e]),_getBaseDimension:(t,e)=>t[`offset${(0,_o.titleize)(e)}`],_moveContentByTranslator(t){let e;const i=-this._maxScrollPropValue;if(e=t>0?t:t<=i?t-i:t%1,this._translateOffset===e)return;const n={};n[this._prop]=e,this._translateOffset=e,0!==e?(0,hr.pB)(this._$content,n):(0,hr.Kx)(this._$content)},_moveScrollbar(){this._scrollbar.moveTo(this._location)},_scrollComplete(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()},_scrollToBounds(){this._inBounds()||(this._bounceAction(),this._setupBounce(),this._bounceAnimator.start())},_setupBounce(){const t=(this._bounceLocation=this._boundLocation())-this._location;this._velocity=t/Vr},_inBounds(t){return t=void 0!==t?t:this._location,this._boundLocation(t)===t},_crossBoundOnNextStep(){const t=this._location,e=t+this._velocity;return t<this._minOffset&&e>=this._minOffset||t>this._maxOffset&&e<=this._maxOffset},_initHandler(t){this._stopScrolling(),this._prepareThumbScrolling(t)},_stopScrolling:(0,l.deferRenderer)((function(){this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()})),_prepareThumbScrolling(t){if((0,f.isDxMouseWheelEvent)(t.originalEvent))return;const e=(0,o.Z)(t.originalEvent.target),i=this._isScrollbar(e);i&&this._moveToMouseLocation(t),this._thumbScrolling=i||this._isThumb(e),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(e),this._thumbScrolling&&this._scrollbar.feedbackOn()},_isThumbScrollingHandler(t){return this._isThumb(t)},_moveToMouseLocation(t){const e=t[`page${this._axis.toUpperCase()}`]-this._$element.offset()[this._prop],i=this._location+e/this._containerToContentRatio()-(0,M.Cr)(this._$container)/2;this._scrollStep(-Math.round(i))},_startHandler(){this._showScrollbar()},_moveHandler(t){this._crossThumbScrolling||(this._thumbScrolling&&(t[this._axis]=-Math.round(t[this._axis]/this._containerToContentRatio())),this._scrollBy(t))},_scrollBy(t){t=t[this._axis],this._inBounds()||(t*=.5),this._scrollStep(t)},_scrollByHandler(t){this._scrollBy(t),this._scrollComplete()},_containerToContentRatio(){return this._scrollbar.containerToContentRatio()},_endHandler(t){return this._completeDeferred=(0,w.BH)(),this._velocity=t[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()},_inertiaHandler(){this._suppressInertia(),this._inertiaAnimator.start()},_suppressInertia(){this._inertiaEnabled&&!this._thumbScrolling||(this._velocity=0)},_resetThumbScrolling(){this._thumbScrolling=!1,this._crossThumbScrolling=!1},_stopHandler(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()},_disposeHandler(){this._stopScrolling(),this._$scrollbar.remove()},_updateHandler(){this._update(),this._moveToBounds()},_update(){return this._stopScrolling(),(0,l.deferUpdate)((()=>{this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),(0,l.deferRender)((()=>{this._moveScrollbar(),this._scrollbar.update()}))}))},_resetScaleRatio(){this._scaleRatio=null},_updateLocation(){this._location=((0,hr.jt)(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()},_updateBounds(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()},_getMaxOffset:()=>0,_getMinOffset(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue},_updateScrollbar:(0,l.deferUpdater)((function(){const t=this._containerSize(),e=this._contentSize(),i=this._getBaseDimension(this._$container.get(0),this._dimension),n=this._getBaseDimension(this._$content.get(0),this._dimension);(0,l.deferRender)((()=>{this._scrollbar.option({containerSize:t,contentSize:e,baseContainerSize:i,baseContentSize:n,scaleRatio:this._getScaleRatio()})}))})),_moveToBounds:(0,l.deferRenderer)((0,l.deferUpdater)((0,l.deferRenderer)((function(){const t=this._boundLocation(),e=t!==this._location;this._location=t,this._move(),e&&this._scrollAction()})))),_createActionsHandler(t){this._scrollAction=t.scroll,this._bounceAction=t.bounce},_showScrollbar(){this._scrollbar.option("visible",!0)},_hideScrollbar(){this._scrollbar.option("visible",!1)},_containerSize(){return this._getRealDimension(this._$container.get(0),this._dimension)},_contentSize(){const t="hidden"===this._$content.css(`overflow${this._axis.toUpperCase()}`);let e=this._getRealDimension(this._$content.get(0),this._dimension);if(!t){const t=this._$content[0][`scroll${(0,_o.titleize)(this._dimension)}`]*this._getScaleRatio();e=Math.max(t,e)}return e},_validateEvent(t){const e=(0,o.Z)(t.originalEvent.target);return this._isThumb(e)||this._isScrollbar(e)},_isThumb(t){return this._scrollByThumb&&this._scrollbar.isThumb(t)},_isScrollbar(t){return this._scrollByThumb&&t&&t.is(this._$scrollbar)},_reachedMin(){return Math.round(this._location-this._minOffset)<=0},_reachedMax(){return Math.round(this._location-this._maxOffset)>=0},_cursorEnterHandler(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()},_cursorLeaveHandler(){this._scrollbar.cursorLeave()},dispose:l.noop});let Lr,jr;const zr=m.default.inherit({ctor(t){this._init(t)},_init(t){this._component=t,this._$element=t.$element(),this._$container=(0,o.Z)(t.container()),this._$wrapper=t._$wrapper,this._$content=t.$content(),this.option=t.option.bind(t),this._createActionByOption=t._createActionByOption.bind(t),this._isLocked=t._isLocked.bind(t),this._isDirection=t._isDirection.bind(t),this._allowedDirection=t._allowedDirection.bind(t),this._getMaxOffset=t._getMaxOffset.bind(t)},render(){this._$element.addClass("dx-scrollable-simulated"),this._createScrollers(),this.option("useKeyboard")&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()},_createScrollers(){this._scrollers={},this._isDirection($r)&&this._createScroller($r),this._isDirection(Nr)&&this._createScroller(Nr),this._$element.toggleClass("dx-scrollable-scrollbars-alwaysvisible","always"===this.option("showScrollbar"))},_createScroller(t){this._scrollers[t]=new Hr(this._scrollerOptions(t))},_scrollerOptions(t){return{direction:t,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}},_applyScaleRatio(t){for(const e in this._scrollers){const i=this._getPropByDirection(e);if((0,s.$K)(t[i])){const n=this._scrollers[e];t[i]*=n._getScaleRatio()}}return t},_isAnyThumbScrolling(t){let e=!1;return this._eventHandler("isThumbScrolling",t).done(((t,i)=>{e=t||i})),e},handleInit(t){this._suppressDirections(t),this._eventForUserAction=t,this._eventHandler("init",t)},_suppressDirections(t){(0,f.isDxMouseWheelEvent)(t.originalEvent)?this._prepareDirections(!0):(this._prepareDirections(),this._eachScroller((function(e,i){const n=(0,o.Z)(t.originalEvent.target),r=e._validateEvent(t)||this.option("scrollByContent")&&this._isContent(n);this._validDirections[i]=r})))},_isContent(t){return!!t.closest(this._$element).length},_prepareDirections(t){t=t||!1,this._validDirections={},this._validDirections[$r]=t,this._validDirections[Nr]=t},_eachScroller(t){t=t.bind(this),(0,g.each)(this._scrollers,((e,i)=>{t(i,e)}))},handleStart(t){this._eventForUserAction=t,this._eventHandler("start").done(this._startAction)},_saveActive(){jr=this},_resetActive(){jr===this&&(jr=null)},handleMove(t){if(this._isLocked())return t.cancel=!0,void this._resetActive();this._saveActive(),t.preventDefault&&t.preventDefault(),this._adjustDistance(t,t.delta),this._eventForUserAction=t,this._eventHandler("move",t.delta)},_adjustDistance(t,e){e.x*=this._validDirections[$r],e.y*=this._validDirections[Nr];const i=this._tryGetDevicePixelRatio();i&&(0,f.isDxMouseWheelEvent)(t.originalEvent)&&(e.x=Math.round(e.x/i*100)/100,e.y=Math.round(e.y/i*100)/100)},_tryGetDevicePixelRatio(){if((0,p.hasWindow)())return(0,p.getWindow)().devicePixelRatio},handleEnd(t){return this._resetActive(),this._refreshCursorState(t.originalEvent&&t.originalEvent.target),this._adjustDistance(t,t.velocity),this._eventForUserAction=t,this._eventHandler("end",t.velocity).done(this._endAction)},handleCancel(t){return this._resetActive(),this._eventForUserAction=t,this._eventHandler("end",{x:0,y:0})},handleStop(){this._resetActive(),this._eventHandler("stop")},handleScroll(){this._updateRtlConfig(),this._scrollAction()},_attachKeyboardHandler(){P.Z.off(this._$element,`.${Rr}`),!this.option("disabled")&&this.option("useKeyboard")&&P.Z.on(this._$element,(0,f.addNamespace)("keydown",Rr),this._keyDownHandler.bind(this))},_keyDownHandler(t){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout((()=>{"tab"===(0,f.normalizeKeyName)(t)&&this._eachScroller((t=>{t._updateHandler()}))})),!this._$container.is(Mt.Z.getActiveElement(this._$container.get(0))))return;let e=!0;switch((0,f.normalizeKeyName)(t)){case"downArrow":this._scrollByLine({y:1});break;case"upArrow":this._scrollByLine({y:-1});break;case"rightArrow":this._scrollByLine({x:1});break;case"leftArrow":this._scrollByLine({x:-1});break;case"pageDown":this._scrollByPage(1);break;case"pageUp":this._scrollByPage(-1);break;case"home":this._scrollToHome();break;case"end":this._scrollToEnd();break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault())},_scrollByLine(t){const e=this._tryGetDevicePixelRatio();let i=40;e&&(i=Math.abs(i/e*100)/100),this.scrollBy({top:(t.y||0)*-i,left:(t.x||0)*-i})},_scrollByPage(t){const e=this._wheelProp(),i={},n="width"===this._dimensionByProp(e)?M.dz:M.Cr;i[e]=t*-n(this._$container),this.scrollBy(i)},_dimensionByProp:t=>"left"===t?"width":"height",_getPropByDirection:t=>t===$r?"left":"top",_scrollToHome(){const t={};t[this._wheelProp()]=0,this._component.scrollTo(t)},_scrollToEnd(){const t=this._wheelProp(),e={},i="width"===this._dimensionByProp(t)?M.dz:M.Cr;e[t]=i(this._$content)-i(this._$container),this._component.scrollTo(e)},createActions(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()},_createScrollerActions(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})},_createActionHandler(t){const e=this._createActionByOption(t);return()=>{e((0,r.l)(this._createActionArgs(),arguments))}},_createActionArgs(){const{horizontal:t,vertical:e}=this._scrollers,i=this._getScrollOffset();return this._scrollOffset={top:e&&i.top,left:t&&i.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:t&&t._reachedMax(),reachedRight:t&&t._reachedMin(),reachedTop:e&&e._reachedMax(),reachedBottom:e&&e._reachedMin()}},_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}},_eventHandler(t){const e=[].slice.call(arguments).slice(1),i=(0,g.map)(this._scrollers,(i=>i[`_${t}Handler`].apply(i,e)));return w.gx.apply(o.Z,i).promise()},location(){const t=(0,hr.jt)(this._$content);return t.top-=this._$container.scrollTop(),t.left-=this._$container.scrollLeft(),t},disabledChanged(){this._attachCursorHandlers()},_attachCursorHandlers(){P.Z.off(this._$element,`.${Mr}`),!this.option("disabled")&&this._isHoverMode()&&(P.Z.on(this._$element,(0,f.addNamespace)("mouseenter",Mr),this._cursorEnterHandler.bind(this)),P.Z.on(this._$element,(0,f.addNamespace)("mouseleave",Mr),this._cursorLeaveHandler.bind(this)))},_isHoverMode(){return"onHover"===this.option("showScrollbar")},_cursorEnterHandler(t){(t=t||{}).originalEvent=t.originalEvent||{},jr||t.originalEvent._hoverHandled||(Lr&&Lr._cursorLeaveHandler(),Lr=this,this._eventHandler("cursorEnter"),t.originalEvent._hoverHandled=!0)},_cursorLeaveHandler(t){Lr===this&&jr!==Lr&&(this._eventHandler("cursorLeave"),Lr=null,this._refreshCursorState(t&&t.relatedTarget))},_refreshCursorState(t){if(!this._isHoverMode()&&(!t||jr))return;const e=(0,o.Z)(t).closest(".dx-scrollable-simulated:not(.dx-state-disabled)"),i=e.length&&e.data("dxScrollableStrategy");Lr&&Lr!==i&&Lr._cursorLeaveHandler(),i&&i._cursorEnterHandler()},update(){const t=this._eventHandler("update").done(this._updateAction);return(0,w.gx)(t,(0,l.deferUpdate)((()=>{const t=this._allowedDirections();return(0,l.deferRender)((()=>{let e=t.vertical?"pan-x":"";e=t.horizontal?"pan-y":e,e=t.vertical&&t.horizontal?"none":e,this._$container.css("touchAction",e)})),(0,w.gx)().promise()})))},_allowedDirections(){const t=this.option("bounceEnabled"),e=this._scrollers[Nr],i=this._scrollers[$r];return{vertical:e&&(e._minOffset<0||t),horizontal:i&&(i._minOffset<0||t)}},_updateBounds(){this._scrollers[$r]&&this._scrollers[$r]._updateBounds()},_isHorizontalAndRtlEnabled(){return this.option("rtlEnabled")&&this.option("direction")!==Nr},updateRtlPosition(t){if(t&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()){let t=this._getMaxOffset().left-this._rtlConfig.scrollRight;t<=0&&(t=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),this._getScrollOffset().left!==t&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:t}),this._rtlConfig.skipUpdating=!1)}},_updateRtlConfig(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){const{clientWidth:t,scrollLeft:e}=this._$container.get(0),i=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===i&&this._rtlConfig.clientWidth===t&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-e),this._rtlConfig.clientWidth=t,this._rtlConfig.windowPixelRatio=i}},_getWindowDevicePixelRatio:()=>(0,p.hasWindow)()?(0,p.getWindow)().devicePixelRatio:1,scrollBy(t){const e=this._scrollers[Nr],i=this._scrollers[$r];e&&(t.top=e._boundLocation(t.top+e._location)-e._location),i&&(t.left=i._boundLocation(t.left+i._location)-i._location),this._prepareDirections(!0),this._startAction(),this._eventHandler("scrollBy",{x:t.left,y:t.top}),this._endAction(),this._updateRtlConfig()},validate(t){return(!(0,f.isDxMouseWheelEvent)(t)||!(0,f.isCommandKeyPressed)(t))&&!this.option("disabled")&&(!!this.option("bounceEnabled")||((0,f.isDxMouseWheelEvent)(t)?this._validateWheel(t):this._validateMove(t)))},_validateWheel(t){const e=this._scrollers[this._wheelDirection(t)],i=e._reachedMin(),n=e._reachedMax(),o=!i||!n,r=!i&&!n,s=i&&t.delta>0,a=n&&t.delta<0;let l=o&&(r||s||a);return l=l||void 0!==this._validateWheelTimer,l&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout((()=>{this._validateWheelTimer=void 0}),500)),l},_validateMove(t){return!(!this.option("scrollByContent")&&!(0,o.Z)(t.target).closest(".dx-scrollable-scrollbar").length)&&this._allowedDirection()},getDirection(t){return(0,f.isDxMouseWheelEvent)(t)?this._wheelDirection(t):this._allowedDirection()},_wheelProp(){return this._wheelDirection()===$r?"left":"top"},_wheelDirection(t){switch(this.option("direction")){case $r:return $r;case Nr:return Nr;default:return t&&t.shiftKey?$r:Nr}},dispose(){this._resetActive(),Lr===this&&(Lr=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass("dx-scrollable-simulated"),this._eventForUserAction=null,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)},_detachEventHandlers(){P.Z.off(this._$element,`.${Mr}`),P.Z.off(this._$container,`.${Rr}`)}}),Wr=Math,Kr=Hr.inherit({ctor(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const t=this,e=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];(0,g.each)(e,((e,i)=>{const n=t._state===i.visibleState?"addClass":"removeClass";i.element[n]("dx-scrollview-pull-down-text-visible")}))},_initCallbacks(){this.pullDownCallbacks=(0,h.Z)(),this.releaseCallbacks=(0,h.Z)(),this.reachBottomCallbacks=(0,h.Z)()},_updateBounds(){if("horizontal"!==this._direction){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;const t=this._$container.get(0),e=this._$content.get(0);this._bottomBoundary=Math.max(e.clientHeight-this._bottomPocketSize-t.clientHeight,0)}this.callBase()},_updateScrollbar(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():0!==this._state&&this._stateReleased()},_moveScrollbar(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown(){return this._pullDownEnabled&&this._location>=0},_isReachBottom(){const t=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(t.scrollTop))<=1},_scrollComplete(){this._inBounds()&&1===this._state?this._pullDownRefreshing():this._inBounds()&&3===this._state?this._reachBottomLoading():this.callBase()},_reachBottomReady(){3!==this._state&&(this._state=3,this._minOffset=this._getMinOffset())},_getMaxOffset(){return-this._topPocketSize},_getMinOffset(){return Wr.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading(){this.reachBottomCallbacks.fire()},_pullDownReady(){1!==this._state&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){0!==this._state&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this.releaseCallbacks.fire())},_pullDownRefreshing(){2!==this._state&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler(){return 0===this._state&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=(0,l.executeAsync)(this._release.bind(this)),this._releaseTask.promise},_release(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler(t){this._reachBottomEnabled!==t&&(this._reachBottomEnabled=t,this._updateBounds())},_pullDownEnablingHandler(t){this._pullDownEnabled!==t&&(this._pullDownEnabled=t,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange(){this._location-=(0,M.Cr)(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler(){this._state=1},dispose(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),qr=zr.inherit({_init(t){this.callBase(t),this._$pullDown=t._$pullDown,this._$topPocket=t._$topPocket,this._$bottomPocket=t._$bottomPocket,this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=(0,h.Z)(),this.releaseCallbacks=(0,h.Z)(),this.reachBottomCallbacks=(0,h.Z)()},render(){this._renderPullDown(),this.callBase()},_renderPullDown(){const t=(0,o.Z)("<div>").addClass("dx-scrollview-pull-down-image"),e=(0,o.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),i=new ur.Z((0,o.Z)("<div>")).$element(),n=this._$pullDownText=(0,o.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,o.Z)("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=(0,o.Z)("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=(0,o.Z)("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(t).append(e.append(i)).append(n)},pullDownEnable(t){this._eventHandler("pullDownEnabling",t)},reachBottomEnable(t){this._eventHandler("reachBottomEnabling",t)},_createScroller(t){const e=this,i=e._scrollers[t]=new Kr(e._scrollerOptions(t));i.pullDownCallbacks.add((()=>{e.pullDownCallbacks.fire()})),i.releaseCallbacks.add((()=>{e.releaseCallbacks.fire()})),i.reachBottomCallbacks.add((()=>{e.reachBottomCallbacks.fire()}))},_scrollerOptions(t){return(0,r.l)(this.callBase(t),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease(){this._eventHandler("pendingRelease")},release(){return this._eventHandler("release").done(this._updateAction)},location(){const t=this.callBase();return t.top+=(0,M.Cr)(this._$topPocket),t},dispose(){(0,g.each)(this._scrollers,(function(){this.dispose()})),this.callBase()}});var Ur=i(9011);const Gr="vertical",Yr="both",Qr=function(){return[{device:()=>!qt.nativeScrolling,options:{useNative:!1}},{device:t=>!tt.default.isSimulator()&&"desktop"===tt.default.real().deviceType&&"generic"===t.platform,options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:qt.touch,showScrollbar:"onHover"}}]},Xr="dxScrollable",Jr="vertical",ts="horizontal",es="both",is=Gn.default.inherit({_getDefaultOptions(){return(0,r.l)(this.callBase(),{disabled:!1,onScroll:null,direction:Jr,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1,_onVisibilityChanged:l.noop})},_defaultOptionsRules(){return this.callBase().concat(Qr(),[{device:()=>qt.nativeScrolling&&"android"===tt.default.real().platform&&!Ur.default.mozilla,options:{useSimulatedScrollbar:!0}}])},_initOptions(t){this.callBase(t),"useSimulatedScrollbar"in t||this._setUseSimulatedScrollbar()},_setUseSimulatedScrollbar(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))},_init(){this.callBase(),this._initScrollableMarkup(),this._locked=!1},_visibilityChanged(t){t?(this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset,this.option("_onVisibilityChanged")(this)):this._savedScrollOffset=this.scrollOffset()},_initScrollableMarkup(){const t=this.$element().addClass("dx-scrollable"),e=this._$container=(0,o.Z)("<div>").addClass("dx-scrollable-container"),i=this._$wrapper=(0,o.Z)("<div>").addClass("dx-scrollable-wrapper");(this._$content=(0,o.Z)("<div>").addClass("dx-scrollable-content")).append(t.contents()).appendTo(e),e.appendTo(i),i.appendTo(t)},_dimensionChanged(){this.update(),this._updateRtlPosition()},_initMarkup(){this.callBase(),this._renderDirection()},_render(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),this.callBase(),this._updateRtlPosition(!0)},_updateRtlPosition(t){this._strategy.updateRtlPosition(t)},_getMaxOffset(){const{scrollWidth:t,clientWidth:e,scrollHeight:i,clientHeight:n}=(0,o.Z)(this.container()).get(0);return{left:t-e,top:i-n}},_attachEventHandlers(){const t=this._strategy,e={getDirection:t.getDirection.bind(t),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};P.Z.off(this._$wrapper,`.${Xr}`),P.Z.on(this._$wrapper,(0,f.addNamespace)(lt,Xr),e,this._initHandler.bind(this)),P.Z.on(this._$wrapper,(0,f.addNamespace)(ct,Xr),t.handleStart.bind(t)),P.Z.on(this._$wrapper,(0,f.addNamespace)(ut,Xr),t.handleMove.bind(t)),P.Z.on(this._$wrapper,(0,f.addNamespace)(dt,Xr),t.handleEnd.bind(t)),P.Z.on(this._$wrapper,(0,f.addNamespace)(pt,Xr),t.handleCancel.bind(t)),P.Z.on(this._$wrapper,(0,f.addNamespace)(ht,Xr),t.handleStop.bind(t)),P.Z.off(this._$container,`.${Xr}`),P.Z.on(this._$container,(0,f.addNamespace)("scroll",Xr),t.handleScroll.bind(t))},_validate(t){return!this._isLocked()&&(this._updateIfNeed(),this._moveIsAllowed(t))},_moveIsAllowed(t){return this._strategy.validate(t)},handleMove(t){this._strategy.handleMove(t)},_prepareDirections(t){this._strategy._prepareDirections(t)},_initHandler(){const t=this._strategy;t.handleInit.apply(t,arguments)},_renderDisabledState(){this.$element().toggleClass("dx-scrollable-disabled",this.option("disabled")),this.option("disabled")?this._lock():this._unlock()},_renderDirection(){this.$element().removeClass(`dx-scrollable-${ts}`).removeClass(`dx-scrollable-${Jr}`).removeClass(`dx-scrollable-${es}`).addClass(`dx-scrollable-${this.option("direction")}`)},_renderStrategy(){this._createStrategy(),this._strategy.render(),this.$element().data("dxScrollableStrategy",this._strategy)},_createStrategy(){this._strategy=this.option("useNative")?new Er(this):new zr(this)},_createActions(){this._strategy&&this._strategy.createActions()},_clean(){this._strategy&&this._strategy.dispose()},_optionChanged(t){switch(t.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),this._strategy&&this._strategy.disabledChanged();break;case"updateManually":case"scrollByContent":case"_onVisibilityChanged":break;case"width":this.callBase(t),this._updateRtlPosition();break;default:this.callBase(t)}},_resetInactiveDirection(){const t=this._getInactiveProp();if(!t||!(0,p.hasWindow)())return;const e=this.scrollOffset();e[t]=0,this.scrollTo(e)},_getInactiveProp(){const t=this.option("direction");return t===Jr?"left":t===ts?"top":void 0},_location(){return this._strategy.location()},_normalizeLocation(t){if((0,s.PO)(t)){const e=(0,l.ensureDefined)(t.left,t.x),i=(0,l.ensureDefined)(t.top,t.y);return{left:(0,s.$K)(e)?-e:void 0,top:(0,s.$K)(i)?-i:void 0}}const e=this.option("direction");return{left:e!==Jr?-t:void 0,top:e!==ts?-t:void 0}},_isLocked(){return this._locked},_lock(){this._locked=!0},_unlock(){this.option("disabled")||(this._locked=!1)},_isDirection(t){const e=this.option("direction");return t===Jr?e!==ts:t===ts?e!==Jr:e===t},_updateAllowedDirection(){const t=this._strategy._allowedDirections();this._isDirection(es)&&t.vertical&&t.horizontal?this._allowedDirectionValue=es:this._isDirection(ts)&&t.horizontal?this._allowedDirectionValue=ts:this._isDirection(Jr)&&t.vertical?this._allowedDirectionValue=Jr:this._allowedDirectionValue=null},_allowedDirection(){return this._allowedDirectionValue},$content(){return this._$content},content(){return(0,a.u)(this._$content)},container(){return(0,a.u)(this._$container)},scrollOffset(){return this._strategy._getScrollOffset()},_isRtlNativeStrategy(){const{useNative:t,rtlEnabled:e}=this.option();return t&&e},scrollTop(){return this.scrollOffset().top},scrollLeft(){return this.scrollOffset().left},clientHeight(){return(0,M.Cr)(this._$container)},scrollHeight(){return(0,M.zp)(this.$content())},clientWidth(){return(0,M.dz)(this._$container)},scrollWidth(){return(0,M.Y_)(this.$content())},update(){if(this._strategy)return(0,w.gx)(this._strategy.update()).done((()=>{this._updateAllowedDirection()}))},scrollBy(t){((t=this._normalizeLocation(t)).top||t.left)&&(this._updateIfNeed(),this._strategy.scrollBy(t))},scrollTo(t){t=this._normalizeLocation(t),this._updateIfNeed();let e=this._location();this.option("useNative")||(t=this._strategy._applyScaleRatio(t),e=this._strategy._applyScaleRatio(e)),this._isRtlNativeStrategy()&&(e.left-=this._getMaxOffset().left);const i=this._normalizeLocation({left:e.left-(0,l.ensureDefined)(t.left,e.left),top:e.top-(0,l.ensureDefined)(t.top,e.top)});(i.top||i.left)&&this._strategy.scrollBy(i)},scrollToElement(t,e){const i=(0,o.Z)(t),n=this.$content().find(t).length,r=i.parents(".dx-scrollable").length-i.parents(".dx-scrollable-content").length==0;if(!n||!r)return;const s={top:0,left:0},a=this.option("direction");a!==Jr&&(s.left=this.getScrollElementPosition(i,ts,e)),a!==ts&&(s.top=this.getScrollElementPosition(i,Jr,e)),this.scrollTo(s)},getScrollElementPosition(t,e,i){const r=this.scrollOffset();return function(t,e,i,o,r){const s=(0,n.Z)({top:0,left:0,right:0,bottom:0},r),a=e===Gr,l=a?"top":"left",c=a?"bottom":"right",u=a?"height":"width",d=i[`offset${(0,_o.titleize)(u)}`],h=i[`client${(0,_o.titleize)(u)}`],p=i.getBoundingClientRect()[u],f=t.getBoundingClientRect()[u];let _=1;Math.abs(p-d)>1&&(_=p/d);const m=function(t,e){const i={left:0,top:0};let n=e;for(;null!==(o=n)&&void 0!==o&&o.offsetParent&&!n.classList.contains("dx-scrollable-content");){var o;const t=n.offsetParent,e=n.getBoundingClientRect(),r=t.getBoundingClientRect();i.left+=e.left-r.left,i.top+=e.top-r.top,n=n.offsetParent}return i}(0,t)[l]/_,g=o[l],v=g-m+s[l],b=g-m-f/_+h-s[c];return v<=0&&b>=0?g:g-(Math.abs(v)>Math.abs(b)?b:v)}(t.get(0),e,(0,o.Z)(this.container()).get(0),r,i)},_updateIfNeed(){this.option("updateManually")||this.update()},_useTemplates:()=>!1,isRenovated:()=>!!is.IS_RENOVATED_WIDGET});(0,c.default)(Xr,is);const ns=is,os={pullDown:Tr,swipeDown:Dr,simulated:qr},rs=!(0,p.hasWindow)(),ss={finishLoading:l.noop,release:l.noop,refresh:l.noop,scrollOffset:()=>({top:0,left:0}),_optionChanged(t){if("onUpdated"!==t.name)return this.callBase.apply(this,arguments)}},as=ns.inherit(rs?ss:{_getDefaultOptions(){return(0,r.l)(this.callBase(),{pullingDownText:C.Z.format("dxScrollView-pullingDownText"),pulledDownText:C.Z.format("dxScrollView-pulledDownText"),refreshingText:C.Z.format("dxScrollView-refreshingText"),reachBottomText:C.Z.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"android"===tt.default.real().platform,options:{refreshStrategy:"swipeDown"}},{device:()=>(0,At.yj)(),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup(){this.callBase(),this.$element().addClass("dx-scrollview"),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent(){const t=(0,o.Z)("<div>").addClass("dx-scrollview-content");this._$content.wrapInner(t)},_initTopPocket(){const t=this._$topPocket=(0,o.Z)("<div>").addClass("dx-scrollview-top-pocket"),e=this._$pullDown=(0,o.Z)("<div>").addClass("dx-scrollview-pull-down");t.append(e),this._$content.prepend(t)},_initBottomPocket(){const t=this._$bottomPocket=(0,o.Z)("<div>").addClass("dx-scrollview-bottom-pocket"),e=this._$reachBottom=(0,o.Z)("<div>").addClass("dx-scrollview-scrollbottom"),i=(0,o.Z)("<div>").addClass("dx-scrollview-scrollbottom-indicator"),n=new ur.Z((0,o.Z)("<div>")).$element(),r=this._$reachBottomText=(0,o.Z)("<div>").addClass("dx-scrollview-scrollbottom-text");this._updateReachBottomText(),e.append(i.append(n)).append(r),t.append(e),this._$content.append(t)},_initLoadPanel(){const t=(0,o.Z)("<div>").addClass("dx-scrollview-loadpanel").appendTo(this.$element()),e={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(t,dr.Z,e)},_updateReachBottomText(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy(){const t=this.option("useNative")?this.option("refreshStrategy"):"simulated",e=os[t];this._strategy=new e(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on(t){const e=this.callBase.apply(this,arguments);return"pullDown"!==t&&"reachBottom"!==t||this._tryRefreshPocketState(),e},_pullDownEnable(t){if(0===arguments.length)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(t),this._strategy.pullDownEnable(t),this._pullDownEnabled=t)},_reachBottomEnable(t){if(0===arguments.length)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(t),this._strategy.reachBottomEnable(t),this._reachBottomEnabled=t)},_pullDownHandler(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator(t){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=t},_pullDownLoading(){this.startLoading(),this._pullDownAction()},_reachBottomHandler(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading(){this.startLoading(),this._reachBottomAction()},_releaseHandler(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged(t){switch(t.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(t)}},content(){return(0,a.u)(this._$content.children().eq(1))},release(t){return void 0!==t&&this.toggleLoading(!t),this._strategy.release()},toggleLoading(t){this._reachBottomEnable(t)},refresh(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading(){this._loadPanel.hide(),this._unlock()},_dispose(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});(0,c.default)("dxScrollView",as);const ls=as;var cs=i(6559),us=i(1413);const ds=we.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{repaintChangesOnly:!1})},ctor:function(){var t;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=t=>{this._dataController.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&t.storeLoadOptions&&(t.storeLoadOptions.skip+=this._correctionIndex)},null===(t=this._dataController)||void 0===t||t.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload:function(){this._correctionIndex=0},_init:function(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey:function(t){let e=(0,o.Z)();const i=this.key();return this.itemElements().each(((n,r)=>{const s=(0,o.Z)(r),a=this._getItemData(s);if(i?(0,us.OI)(i,this.keyOf(a),t):this._isItemEquals(a,t))return e=s,!1})),e},_dataSourceChangedHandler:function(t,e){null!=e&&e.changes?this._modifyByChanges(e.changes):(this.callBase(t,e),this._refreshItemsCache())},_isItemEquals:function(t,e){t&&t.__dx_key__&&(t=t.data);try{return JSON.stringify(t)===JSON.stringify(e)}catch(i){return t===e}},_isItemStrictEquals:function(t,e){return this._isItemEquals(t,e)},_shouldAddNewGroup:function(t,e){let i=!1;return this.option("grouped")&&(t.length||(i=!0),(0,g.each)(t,((t,n)=>{"insert"===n.type&&(i=!0,(0,g.each)(e,((t,e)=>{if(void 0!==n.data.key&&n.data.key===e.key)return i=!1,!1})))}))),i},_partialRefresh:function(){if(this.option("repaintChangesOnly")){const t=t=>t&&void 0!==t.__dx_key__?t.__dx_key__:this.keyOf(t),e=function(t,e,i,n){const o={},r={};let s=0,a=0;const l=[];t.forEach((function(t,e){const n=_e(t,i);o[n]=e})),e.forEach((function(t,e){const n=_e(t,i);r[n]=e}));const c=Math.max(t.length,e.length);for(let u=0;u<c+s;u++){const c=e[u],d=u-s+a,h=t[d];if(!c||h&&!me(h,e,r,i))h&&(l.push({type:"remove",key:i(h),index:u,oldItem:h}),a++,u--);else{const e=_e(c,i),r=o[e],a=t[r];if(a){if(r!==d)return;n(a,c)||l.push({type:"update",data:c,key:i(c),index:u,oldItem:a})}else s++,l.push({type:"insert",data:c,index:u})}}return l}(this._itemsCache,this._editStrategy.itemsGetter(),t,this._isItemStrictEquals.bind(this));if(e&&this._itemsCache.length&&!this._shouldAddNewGroup(e,this._itemsCache))return this._modifyByChanges(e,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache:function(){if(this.option("repaintChangesOnly")){const t=this._editStrategy.itemsGetter();try{this._itemsCache=(0,r.l)(!0,[],t),this.key()||(this._itemsCache=this._itemsCache.map(((e,i)=>({__dx_key__:t[i],data:e}))))}catch(e){this._itemsCache=(0,r.l)([],t)}}},_dispose:function(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange:function(t,e,i,n){if(n)this._renderItem(i.index,i.data,null,this._findItemElementByKey(i.key));else{const n=e[(0,cs.qk)(t,e,i.key)];n&&(0,cs.Vx)(t,e,i.key,i.data).done((()=>{this._renderItem(e.indexOf(n),n,null,this._findItemElementByKey(i.key))}))}},_insertByChange:function(t,e,i,n){(0,w.gx)(n||(0,cs.$T)(t,e,i.data,i.index)).done((()=>{this._beforeItemElementInserted(i),this._renderItem(i.index??e.length,i.data),this._afterItemElementInserted(),this._correctionIndex++}))},_updateSelectionAfterRemoveByChange:function(t){const e=this.option("selectedIndex");e>t?this.option("selectedIndex",e-1):e===t&&1===this.option("selectedItems").length?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted:function(t){const e=this.option("selectedIndex");t.index<=e&&this.option("selectedIndex",e+1)},_afterItemElementInserted:l.noop,_removeByChange:function(t,e,i,n){const o=n?i.index:(0,cs.qk)(t,e,i.key);if(n?i.oldItem:e[o]){const t=this._findItemElementByKey(i.key),e=this._extendActionArgs(t);this._waitDeletingPrepare(t).done((()=>{n?(this._updateIndicesAfterIndex(o-1),this._afterItemElementDeleted(t,e),this._updateSelectionAfterRemoveByChange(o)):(this._deleteItemElementByIndex(o),this._afterItemElementDeleted(t,e))})),this._correctionIndex--}},_modifyByChanges:function(t,e){const i=this._editStrategy.itemsGetter(),n={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},o=this._dataController,r=o.paginate(),s=o.group();(r||s)&&(t=t.filter((t=>"insert"!==t.type||void 0!==t.index))),t.forEach((t=>this[`_${t.type}ByChange`](n,i,t,e))),this._renderedItemsCount=i.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer:function(t,e,i){const n=t.children(this._itemSelector()).get(i);Mt.Z.insertElement(t.get(0),e.get(0),n)},_optionChanged:function(t){switch(t.name){case"items":this._partialRefresh(t.value)||this.callBase(t);break;case"dataSource":this.option("repaintChangesOnly")&&t.value||this.option("items",[]),this.callBase(t);break;case"repaintChangesOnly":break;default:this.callBase(t)}}}),hs={_getSpecificDataSourceOption:function(){let t=this.option("dataSource"),e=!1,i={};return this._getGroupedOption()&&(t=>Array.isArray(t)&&t.every((t=>2===Object.keys(t).length&&"key"in t&&"items"in t&&Array.isArray(t.items))))(t)&&(i=t.reduce(((t,i)=>{const n=i.items.map((t=>((0,s.Kn)(t)||(t={text:t},e=!0),"key"in t||(t.key=i.key),t)));return t.concat(n)}),[]),t={store:{type:"array",data:i},group:{selector:"key",keepInitialKeyOrder:!0}},e&&(t.searchExpr="text")),t}};function ps(t,e){const i=(n=t)&&(0,p.hasWindow)()?null===(o=(r=(0,p.getWindow)()).getComputedStyle)||void 0===o?void 0:o.call(r,n):null;var n,o,r,s;return i&&(s=i[`margin${(0,_o.titleize)(e)}`])?Number(s.replace("px","")):0}const fs=(0,Wt.vb)("items");const _s=ds.inherit({_activeStateUnit:[".dx-list-item",".dx-list-select-all"].join(","),_supportedKeys:function(){const t=this,e=function(e){let n=i(e);n.is(t.option("focusedElement"))&&(function(e,i){let n=e.position().top;"prev"===i&&(n=e.position().top-(0,M.Cr)(t.$element())+(0,M.zp)(e)),t.scrollTo(n)}(n,e),n=i(e)),t.option("focusedElement",(0,a.u)(n)),t.scrollToItem(n)};function i(e){const i=t.scrollTop(),n=(0,M.Cr)(t.$element());let r=(0,o.Z)(t.option("focusedElement")),s=!0;if(!r.length)return(0,o.Z)();for(;s;){const t=r[e]();if(!t.length)break;const o=t.position().top+(0,M.zp)(t)/2;s=o<n+i&&o>i,s&&(r=t)}return r}return(0,r.l)(this.callBase(),{leftArrow:l.noop,rightArrow:l.noop,pageUp:function(){return e("prev"),!1},pageDown:function(){return e("next"),!1}})},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:C.Z.format("dxList-pullingDownText"),pulledDownText:C.Z.format("dxList-pulledDownText"),refreshingText:C.Z.format("dxList-refreshingText"),pageLoadingText:C.Z.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:C.Z.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:function(t){return t?t.showChevron:void 0},badgeExpr:function(t){return t?t.badge:void 0}})},_defaultOptionsRules:function(){const t=(0,At.Vk)();return this.callBase().concat(Qr(),[{device:function(){return!qt.nativeScrolling},options:{useNativeScrolling:!1}},{device:function(t){return!qt.nativeScrolling&&!tt.default.isSimulator()&&"desktop"===tt.default.real().deviceType&&"generic"===t.platform},options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:function(){return"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,At.x2)(t)},options:{useInkRipple:!0}},{device:function(){return(0,At.yj)(t)},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:""}}])},_visibilityChanged:function(t){t&&this._updateLoadingState(!0)},_itemClass:function(){return"dx-list-item"},_itemDataKey:function(){return"dxListItemData"},_itemContainer:function(){return this._$container},_getItemsContainer:function(){return this._$listContainer},_cleanItemContainer:function(){this.callBase();const t=this._getItemsContainer();(0,o.Z)(t).empty(),t.appendTo(this._$container)},_saveSelectionChangeEvent:function(t){this._selectionChangeEventInstance=t},_getSelectionChangeEvent:function(){return this._selectionChangeEventInstance},_refreshItemElements:function(){this.option("grouped")?this._itemElementsCache=this._getItemsContainer().children(".dx-list-group").children(".dx-list-group-body").children(this._itemSelector()):this._itemElementsCache=this._getItemsContainer().children(this._itemSelector())},_modifyByChanges:function(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem:function(t,e){return this.callBase(t,e).done((function(){this._refreshItemElements()}))},deleteItem:function(t){return this.callBase(t).done((function(){this._refreshItemElements()}))},_itemElements:function(){return this._itemElementsCache},_itemSelectHandler:function(t){if("single"!==this.option("selectionMode")||!this.isItemSelected(t.currentTarget))return this.callBase(t)},_allowDynamicItemsAppend:function(){return!0},_init:function(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._$listContainer=(0,o.Z)("<div>").addClass("dx-list-items"),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()},_scrollBottomMode:function(){return"scrollBottom"===this.option("pageLoadMode")},_nextButtonMode:function(){return"nextButton"===this.option("pageLoadMode")},_dataSourceOptions:function(){const t=this._scrollBottomMode(),e=this._nextButtonMode();return(0,r.l)(this.callBase(),{paginate:(0,l.ensureDefined)(t||e,!0)})},_getGroupedOption:function(){return this.option("grouped")},_getGroupContainerByIndex:function(t){return this._getItemsContainer().find(".dx-list-group").eq(t).find(".dx-list-group-body")},_dataSourceFromUrlLoadMode:function(){return"raw"},_initScrollView:function(){const t=this.option("scrollingEnabled"),e=t&&this.option("pullRefreshEnabled"),i=t&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),ls,{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!t,onScroll:this._scrollHandler.bind(this),onPullDown:e?this._pullDownHandler.bind(this):null,onReachBottom:i?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=(0,o.Z)(this._scrollView.content()),this._$listContainer.appendTo(this._$container),this._toggleWrapItemText(this.option("wrapItemText")),this._createScrollViewActions()},_toggleWrapItemText:function(t){this._$listContainer.toggleClass("dx-wrap-item-text",t)},_createScrollViewActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler:function(t){this._scrollAction&&this._scrollAction(t)},_initTemplates:function(){this._templateManager.addDefaultTemplates({group:new ee((function(t,e){(0,s.PO)(e)?e.key&&t.text(e.key):t.text(String(e))}),["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate:function(t,e){if(this.callBase(t,e),t.icon){const i=co(t.icon).addClass("dx-list-item-icon"),n=(0,o.Z)("<div>").addClass("dx-list-item-icon-container");n.append(i),e.prepend(n)}},_getBindableFields:function(){return["text","html","icon"]},_updateLoadingState:function(t){const e=this._dataController,i=this._scrollBottomMode()&&t&&!e.isLoading()&&!this._isLastPage();this._shouldContinueLoading(i)?this._infiniteDataLoading():(this._scrollView.release(!i&&!e.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton:function(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted:function(t){return(0,s.$K)(t)&&(this._isFirstLoadCompleted=t),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler:function(t){this._loadIndicationSuppressed()||(t&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(function(){var t;!this._itemElements().length&&!this._isDataSourceFirstLoadCompleted()||null===(t=this._scrollView)||void 0===t||t.startLoading()}.bind(this)):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),t||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler:function(){!this._shouldAppendItems()&&(0,p.hasWindow)()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent:function(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff:function(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed:function(t){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=t},_scrollViewIsFull:function(){const t=this._scrollView;return!t||(0,M.Cr)(t.content())>(0,M.Cr)(t.container())},_pullDownHandler:function(t){this._pullRefreshAction(t);const e=this._dataController;e.getDataSource()&&!e.isLoading()?(this._clearSelectedItems(),e.pageIndex(0),e.reload()):this._updateLoadingState()},_shouldContinueLoading:function(t){var e;const i=(0,M.Cr)(this._scrollView.content())-(0,M.Cr)(this._scrollView.container())<((null===(e=this._scrollView.scrollOffset())||void 0===e?void 0:e.top)??0);return t&&(!this._scrollViewIsFull()||i)},_infiniteDataLoading:function(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout((()=>{this._loadNextPage()})))},_scrollBottomHandler:function(t){this._pageLoadingAction(t),this._dataController.isLoading()||this._isLastPage()?this._updateLoadingState():this._loadNextPage()},_renderItems:function(t){this.option("grouped")?((0,g.each)(t,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),(0,At.x2)()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent:function(){const t=(0,f.addNamespace)(Kt.name,this.NAME),e=this.$element(),i=this.option("collapsibleGroups");e.toggleClass("dx-list-collapsible-groups",i),P.Z.off(e,t,".dx-list-group-header"),i&&P.Z.on(e,t,".dx-list-group-header",function(t){this._createAction(function(t){const e=(0,o.Z)(t.event.currentTarget).parent();this._collapseGroupHandler(e),this.option("focusStateEnabled")&&this.option("focusedElement",(0,a.u)(e.find(".dx-list-item").eq(0)))}.bind(this),{validatingTargetName:"element"})({event:t})}.bind(this))},_collapseGroupHandler:function(t,e){const i=new w.BH;if(t.hasClass("dx-list-group-collapsed")===e)return i.resolve();const n=t.children(".dx-list-group-body"),o=(0,M.zp)(n);let r=0;return 0===o&&((0,M.QQ)(n,"auto"),r=(0,M.zp)(n)),t.toggleClass("dx-list-group-collapsed",e),Se.default.animate(n,{type:"custom",from:{height:o},to:{height:r},duration:200,complete:function(){this.updateDimensions(),this._updateLoadingState(!0),i.resolve()}.bind(this)}),i.promise()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup:function(){this._itemElementsCache=(0,o.Z)(),this.$element().addClass("dx-list"),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria({role:"group",roledescription:"list"},this.$element()),this.setAria({role:"application"},this._focusTarget()),this._setListAria()},_setListAria(){const{items:t,allowItemDeleting:e}=this.option(),i=e?C.Z.format("dxList-listAriaLabel-deletable"):C.Z.format("dxList-listAriaLabel"),n=null!=t&&t.length?{role:"listbox",label:i}:{role:void 0,label:void 0};this.setAria(n,this._$listContainer)},_focusTarget:function(){return this._itemContainer()},_renderInkRipple:function(){this._inkRipple=Co()},_toggleActiveState:function(t,e,i){this.callBase.apply(this,arguments);const n=this;if(!this._inkRipple)return;const o={element:t,event:i};e?(0,At.x2)()?this._inkRippleTimer=setTimeout((function(){n._inkRipple.showWave(o)}),35):n._inkRipple.showWave(o):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(o))},_postprocessRenderItem:function(t){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent((0,o.Z)(t.itemElement))},_attachSwipeEvent:function(t){const e=(0,f.addNamespace)(sr,this.NAME);P.Z.on(t,e,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler:function(t){this._itemDXEventHandler(t,"onItemSwipe",{direction:t.offset<0?"left":"right"})},_nextButtonHandler:function(t){this._pageLoadingAction(t);const e=this._dataController;e.getDataSource()&&!e.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup:function(t,e){const i=(0,o.Z)("<div>").addClass("dx-list-group").appendTo(this._getItemsContainer()),n=`dx-${(new H.Z).toString()}`,r={role:"group",labelledby:n};this.setAria(r,i);const s=(0,o.Z)("<div>").addClass("dx-list-group-header").attr("id",n).appendTo(i),l=this.option("groupTemplate"),c=this._getTemplate(e.template||l,e,t,s),u={index:t,itemData:e,container:(0,a.u)(s)};this._createItemByTemplate(c,u),(0,o.Z)("<div>").addClass("dx-list-group-header-indicator").prependTo(s),this._renderingGroupIndex=t;const d=(0,o.Z)("<div>").addClass("dx-list-group-body").appendTo(i);(0,g.each)(fs(e)||[],function(e,i){this._renderItem({group:t,item:e},i,d)}.bind(this)),this._groupRenderAction({groupElement:(0,a.u)(i),groupIndex:t,groupData:e})},downInkRippleHandler:function(t){this._toggleActiveState((0,o.Z)(t.currentTarget),!0,t)},upInkRippleHandler:function(t){this._toggleActiveState((0,o.Z)(t.currentTarget),!1)},attachGroupHeaderInkRippleEvents:function(){const t=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);const e=[t,"dxpointerdown",".dx-list-group-header",this._downInkRippleHandler],i=[t,"dxpointerup dxpointerout",".dx-list-group-header",this._upInkRippleHandler];P.Z.off(...e),P.Z.on(...e),P.Z.off(...i),P.Z.on(...i)},_createGroupRenderAction:function(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean:function(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose:function(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState:function(t){this.callBase(t),this._scrollView.option("disabled",t||!this.option("scrollingEnabled"))},_toggleNextButton:function(t){const e=this._dataController,i=this._getNextButton();this.$element().toggleClass("dx-has-next",t),t&&e.isLoaded()&&i.appendTo(this._itemContainer()),t||i.detach()},_getNextButton:function(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton:function(){const t=(0,o.Z)("<div>").addClass("dx-list-next-button"),e=(0,o.Z)("<div>").appendTo(t);return this._createComponent(e,nr,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:(0,At.yj)()?"default":void 0,integrationOptions:{}}),t},_moveFocus:function(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh:function(){if((0,p.hasWindow)()){const t=this._scrollView.scrollTop();this.callBase(),t&&this._scrollView.scrollTo(t)}else this.callBase()},_optionChanged:function(t){switch(t.name){case"pageLoadMode":this._toggleNextButton(t.value),this._initScrollView();break;case"dataSource":this.callBase(t),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(t),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"collapsibleGroups":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"wrapItemText":this._toggleWrapItemText(t.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(t),this._scrollView.option(t.name,t.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(t),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(t);break;case"_swipeEnabled":case"selectByClick":break;default:this.callBase(t)}},_extendActionArgs:function(t){if(!this.option("grouped"))return this.callBase(t);const e=t.closest(".dx-list-group"),i=e.find(".dx-list-item");return(0,r.l)(this.callBase(t),{itemIndex:{group:e.index(),item:i.index(t)}})},expandGroup:function(t){const e=new w.BH,i=this._getItemsContainer().find(".dx-list-group").eq(t);return this._collapseGroupHandler(i,!1).done(function(){e.resolveWith(this)}.bind(this)),e.promise()},collapseGroup:function(t){const e=new w.BH,i=this._getItemsContainer().find(".dx-list-group").eq(t);return this._collapseGroupHandler(i,!0).done(function(){e.resolveWith(this)}.bind(this)),e},updateDimensions:function(){const t=this,e=new w.BH;return t._scrollView?t._scrollView.update().done((function(){!t._scrollViewIsFull()&&t._updateLoadingState(!0),e.resolveWith(t)})):e.resolveWith(t),e.promise()},reload:function(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint:function(){this.scrollTo(0),this.callBase()},scrollTop:function(){return this._scrollView.scrollOffset().top},clientHeight:function(){return this._scrollView.clientHeight()},scrollHeight:function(){return this._scrollView.scrollHeight()},scrollBy:function(t){this._scrollView.scrollBy(t)},scrollTo:function(t){this._scrollView.scrollTo(t)},scrollToItem:function(t){const e=this._editStrategy.getItemElement(t),i=null==e?void 0:e.get(0);this._scrollView.scrollToElement(i,{bottom:ps(i,"bottom")})},_dimensionChanged:function(){this.updateDimensions()}}).include(hs);_s.ItemClass=cr;class ms extends _s{_init(){super._init(),this._activeStateUnit=".dx-toolbar-menu-action:not(.dx-toolbar-hidden-button-group)"}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){const t=this._itemContainer();(0,g.each)(["before","center","after","menu"],((e,i)=>{const n=`_$${i}Section`;this[n]||(this[n]=(0,o.Z)("<div>").addClass("dx-toolbar-menu-section")),this[n].appendTo(t)}))}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".dx-scrollview-content").attr("role","menu")}_updateSections(){const t=this.$element().find(".dx-toolbar-menu-section");t.removeClass("dx-toolbar-menu-last-section"),t.not(":empty").eq(-1).addClass("dx-toolbar-menu-last-section")}_renderItem(t,e,i,n){const o=e.location??"menu",r=this[`_$${o}Section`],s=super._renderItem(t,e,r,n);return this._getItemTemplateName({itemData:e})&&s.addClass("dx-toolbar-menu-custom"),("menu"===o||"dxButton"===e.widget||"dxButtonGroup"===e.widget||e.isAction)&&s.addClass("dx-toolbar-menu-action"),"dxButton"===e.widget&&s.addClass("dx-toolbar-hidden-button"),"dxButtonGroup"===e.widget&&s.addClass("dx-toolbar-hidden-button-group"),s.addClass(e.cssClass),s}_getItemTemplateName(t){const e=super._getItemTemplateName(t),i=t.itemData;return i&&i.menuItemTemplate||e}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(t,e,i){(0,o.Z)(t.target).closest(".dx-toolbar-menu-action").length&&super._itemClickHandler(t,e,i)}_clean(){this._getSections().empty(),super._clean()}}var gs=i(3046),vs=i(7028),bs=i(8839),ys=i(4072),Cs=i(112);const ws=class{constructor(t){this.init(t)}init(t){let{dragEnabled:e,handle:i,draggableElement:n,positionController:o}=t;this._positionController=o,this._draggableElement=n,this._handle=i,this._dragEnabled=e,this.unsubscribe(),e&&this.subscribe()}moveDown(t){this._moveTo(5,0,t)}moveUp(t){this._moveTo(-5,0,t)}moveLeft(t){this._moveTo(0,-5,t)}moveRight(t){this._moveTo(0,5,t)}subscribe(){const t=this._getEventNames();P.Z.on(this._handle,t.startEventName,(t=>{this._dragStartHandler(t)})),P.Z.on(this._handle,t.updateEventName,(t=>{this._dragUpdateHandler(t)})),P.Z.on(this._handle,t.endEventName,(t=>{this._dragEndHandler(t)}))}unsubscribe(){const t=this._getEventNames();P.Z.off(this._handle,t.startEventName),P.Z.off(this._handle,t.updateEventName),P.Z.off(this._handle,t.endEventName)}_getEventNames(){return{startEventName:(0,f.addNamespace)(Cs.BL,"overlayDrag"),updateEventName:(0,f.addNamespace)(Cs.pB,"overlayDrag"),endEventName:(0,f.addNamespace)(Cs.ut,"overlayDrag")}}_dragStartHandler(t){const e=this._getAllowedOffsets();this._prevOffset={x:0,y:0},t.targetElements=[],t.maxTopOffset=e.top,t.maxBottomOffset=e.bottom,t.maxLeftOffset=e.left,t.maxRightOffset=e.right}_dragUpdateHandler(t){const e={top:t.offset.y-this._prevOffset.y,left:t.offset.x-this._prevOffset.x};this._moveByOffset(e),this._prevOffset=t.offset}_dragEndHandler(t){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(t)}_moveTo(t,e,i){if(!this._dragEnabled)return;i.preventDefault(),i.stopPropagation();const n=this._fitOffsetIntoAllowedRange(t,e);this._moveByOffset(n),this._dragEndHandler(i)}_fitOffsetIntoAllowedRange(t,e){const i=this._getAllowedOffsets();return{top:(0,ys.n$)(t,-i.top,i.bottom),left:(0,ys.n$)(e,-i.left,i.right)}}_getContainerDimensions(){const t=Mt.Z.getDocument(),e=this._positionController.$dragResizeContainer.get(0);let i=(0,M.Y_)(e),n=(0,M.zp)(e);return(0,s.FJ)(e)&&(n=Math.max(t.body.clientHeight,n),i=Math.max(t.body.clientWidth,i)),{width:i,height:n}}_getContainerPosition(){const t=this._positionController.$dragResizeContainer.get(0);return(0,s.FJ)(t)?{top:0,left:0}:(0,M.os)(t)}_getElementPosition(){return(0,M.os)(this._draggableElement)}_getInnerDelta(){const t=this._getContainerDimensions(),e=this._getElementDimensions();return{x:t.width-e.width,y:t.height-e.height}}_getOuterDelta(){const{width:t,height:e}=this._getElementDimensions(),i=this._positionController.outsideDragFactor;return{x:t*i,y:e*i}}_getFullDelta(){const t=this._getInnerDelta(),e=this._getOuterDelta();return{x:t.x+e.x,y:t.y+e.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){const t=this._getFullDelta();if(!(t.y>=0&&t.x>=0))return{top:0,bottom:0,left:0,right:0};const e=this._getElementPosition(),i=this._getContainerPosition(),n=this._getOuterDelta();return{top:e.top-i.top+n.y,bottom:-e.top+i.top+t.y,left:e.left-i.left+n.x,right:-e.left+i.left+t.x}}_moveByOffset(t){const e=(0,hr.jt)(this._draggableElement),i={left:e.left+t.left,top:e.top+t.top};(0,hr.pB)(this._draggableElement,i)}},xs="dxResizable",Ss=(0,f.addNamespace)(Cs.BL,xs),Is=(0,f.addNamespace)(Cs.pB,xs),ks=(0,f.addNamespace)(Cs.ut,xs),Es={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},Os=Gn.default.inherit({_getDefaultOptions(){return(0,r.l)(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init(){this.callBase(),this.$element().addClass("dx-resizable")},_initMarkup(){this.callBase(),this._renderHandles()},_render(){this.callBase(),this._renderActions()},_renderActions(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles(){this._handles=[];const t=this.option("handles");if("none"===t||!t)return;const e="all"===t?["top","bottom","left","right"]:t.split(" "),i={};(0,g.each)(e,((t,e)=>{i[e]=!0,this._renderHandle(e)})),i.bottom&&i.right&&this._renderHandle("corner-bottom-right"),i.bottom&&i.left&&this._renderHandle("corner-bottom-left"),i.top&&i.right&&this._renderHandle("corner-top-right"),i.top&&i.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()},_renderHandle(t){const e=(0,o.Z)("<div>").addClass("dx-resizable-handle").addClass(`dx-resizable-handle-${t}`).appendTo(this.$element());this._handles.push(e)},_attachEventHandlers(){if(this.option("disabled"))return;const t={};t[Ss]=this._dragStartHandler.bind(this),t[Is]=this._dragHandler.bind(this),t[ks]=this._dragEndHandler.bind(this),this._handles.forEach((e=>{P.Z.on(e,t,{direction:"both",immediate:!0})}))},_detachEventHandlers(){this._handles.forEach((t=>{P.Z.off(t)}))},_toggleEventHandlers(t){t?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize(){const t=this.$element();return"border-box"===t.css("boxSizing")?{width:(0,M.Y_)(t),height:(0,M.zp)(t)}:{width:(0,M.dz)(t),height:(0,M.Cr)(t)}},_dragStartHandler(t){const e=this.$element();e.is(".dx-state-disabled, .dx-state-disabled *")?t.cancel=!0:(this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(t),this._elementLocation=(0,hr.jt)(e),this._elementSize=this._getElementSize(),this._renderDragOffsets(t),this._resizeStartAction({event:t,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),t.targetElements=null)},_toggleResizingClass(t){this.$element().toggleClass("dx-resizable-resizing",t)},_renderDragOffsets(t){const e=this._getArea();if(!e)return;const i=(0,o.Z)(t.target).closest(".dx-resizable-handle"),n=(0,M.Y_)(i),r=(0,M.zp)(i),s=i.offset(),a=e.offset,l=this._getAreaScrollOffset();t.maxLeftOffset=this._leftMaxOffset=s.left-a.left-l.scrollX,t.maxRightOffset=this._rightMaxOffset=a.left+e.width-s.left-n+l.scrollX,t.maxTopOffset=this._topMaxOffset=s.top-a.top-l.scrollY,t.maxBottomOffset=this._bottomMaxOffset=a.top+e.height-s.top-r+l.scrollY},_getBorderWidth(t,e){if((0,s.FJ)(t.get(0)))return 0;const i=t.css(Es[e]);return parseInt(i)||0},_proportionate(t,e){const i=this._elementSize;return e*("x"===t?i.width/i.height:i.height/i.width)},_getProportionalDelta(t){let{x:e,y:i}=t;const n=this._proportionate("y",e);if(n>=i)return{x:e,y:n};const o=this._proportionate("x",i);return o>=e?{x:o,y:i}:{x:0,y:0}},_getDirectionName(t){const e=this._movingSides;return"x"===t?e.left?"left":"right":e.top?"top":"bottom"},_fitIntoArea(t,e){const i=this._getDirectionName(t);return Math.min(e,this[`_${i}MaxOffset`]??1/0)},_fitDeltaProportionally(t){let e=(0,n.Z)({},t);const i=this._elementSize,{minWidth:o,minHeight:r,maxWidth:s,maxHeight:a}=this.option(),l=()=>i.width+e.x,c=()=>i.height+e.y,u=t=>e[t]===this._fitIntoArea(t,e[t]),d=()=>(0,ys.Z2)(l(),o,s)&&u("x"),h=()=>(0,ys.Z2)(c(),r,a)&&u("y");if(!d()){const t=this._fitIntoArea("x",(0,ys.n$)(l(),o,s)-i.width);e={x:t,y:this._proportionate("y",t)}}if(!h()){const t=this._fitIntoArea("y",(0,ys.n$)(c(),r,a)-i.height);e={x:this._proportionate("x",t),y:t}}return d()&&h()?e:{x:0,y:0}},_fitDelta(t){let{x:e,y:i}=t;const n=this._elementSize,{minWidth:o,minHeight:r,maxWidth:s,maxHeight:a}=this.option();return{x:(0,ys.n$)(n.width+e,o,s)-n.width,y:(0,ys.n$)(n.height+i,r,a)-n.height}},_getDeltaByOffset(t){const e=this._movingSides,i=this._isCornerHandler(e)&&this.option("keepAspectRatio");let n={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)};if(i){const t=this._getProportionalDelta(n);n=this._fitDeltaProportionally(t)}else{const t=this._fitDelta(n);n=this._roundByStep(t)}return n},_updatePosition(t,e){let{width:i,height:n}=e;const o=this._elementLocation,r=this._movingSides,s=this.$element(),a=this._getElementSize(),l=t.y*(r.top?-1:1)-((a.height||n)-n),c=t.x*(r.left?-1:1)-((a.width||i)-i);(0,hr.pB)(s,{top:o.top+(r.top?l:0),left:o.left+(r.left?c:0)})},_dragHandler(t){const e=this._getOffset(t),i=this._getDeltaByOffset(e),n=this._updateDimensions(i);this._updatePosition(i,n),this._triggerResizeAction(t,n)},_updateDimensions(t){const e=t=>"px"===t.substring(t.length-2),i="strict"===this.option("stepPrecision"),n=this._elementSize,o=n.width+t.x,r=n.height+t.y,s=this.$element().get(0).style,a=t.x||i||e(s.width),l=t.y||i||e(s.height);return a&&this.option({width:o}),l&&this.option({height:r}),{width:a?o:n.width,height:l?r:n.height}},_triggerResizeAction(t,e){let{width:i,height:n}=e;this._resizeAction({event:t,width:this.option("width")||i,height:this.option("height")||n,handles:this._movingSides}),(0,bs.U_)(this.$element())},_isCornerHandler:t=>0===Object.values(t).reduce(((t,e)=>t^e),0),_getOffset(t){const{offset:e}=t,i=this._movingSides;return i.left||i.right||(e.x=0),i.top||i.bottom||(e.y=0),e},_roundByStep(t){return"strict"===this.option("stepPrecision")?this._roundStrict(t):this._roundNotStrict(t)},_getSteps(){return(0,l.pairToObject)(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict(t){const e=this._getSteps();return{x:t.x-t.x%e.h,y:t.y-t.y%e.v}},_roundStrict(t){const e=this._movingSides,i={x:t.x*(e.left?-1:1),y:t.y*(e.top?-1:1)},n=this._getSteps(),o=this._elementLocation,r=this._elementSize,s=e.left?o.left:o.left+r.width,a=e.top?o.top:o.top+r.height,l=(s+i.x)%n.h,c=(a+i.y)%n.v,u=Math.sign||(t=>0==(t=+t)||isNaN(t)?t:t>0?1:-1),d=(t,e)=>(1+.2*u(e))%1*t,h=(t,e)=>Math.abs(t)<.2*e;let p=i.x-l,f=i.y-c;l>d(n.h,i.x)&&(p+=n.h),c>d(n.v,i.y)&&(f+=n.v);const _=!e.left&&!e.right||h(i.x,n.h)?0:p,m=!e.top&&!e.bottom||h(i.y,n.v)?0:f;return{x:_*(e.left?-1:1),y:m*(e.top?-1:1)}},_getMovingSides(t){const e=(0,o.Z)(t.target),i=e.hasClass("dx-resizable-handle-corner-top-left"),n=e.hasClass("dx-resizable-handle-corner-top-right"),r=e.hasClass("dx-resizable-handle-corner-bottom-left"),s=e.hasClass("dx-resizable-handle-corner-bottom-right");return{top:e.hasClass("dx-resizable-handle-top")||i||n,left:e.hasClass("dx-resizable-handle-left")||i||r,bottom:e.hasClass("dx-resizable-handle-bottom")||r||s,right:e.hasClass("dx-resizable-handle-right")||n||s}},_getArea(){let t=this.option("area");return(0,s.mf)(t)&&(t=t.call(this)),(0,s.PO)(t)?this._getAreaFromObject(t):this._getAreaFromElement(t)},_getAreaScrollOffset(){const t=this.option("area"),e={scrollY:0,scrollX:0};if(!(0,s.mf)(t)&&!(0,s.PO)(t)){const i=(0,o.Z)(t)[0];(0,s.FJ)(i)&&(e.scrollX=i.pageXOffset,e.scrollY=i.pageYOffset)}return e},_getAreaFromObject(t){const e={width:t.right-t.left,height:t.bottom-t.top,offset:{left:t.left,top:t.top}};return this._correctAreaGeometry(e),e},_getAreaFromElement(t){const e=(0,o.Z)(t);let i;return e.length&&(i={width:(0,M.Xt)(e),height:(0,M.fA)(e),offset:(0,r.l)({top:0,left:0},(0,s.FJ)(e[0])?{}:e.offset())},this._correctAreaGeometry(i,e)),i},_correctAreaGeometry(t,e){const i=e?this._getBorderWidth(e,"left"):0,n=e?this._getBorderWidth(e,"top"):0;t.offset.left+=i+this._getBorderWidth(this.$element(),"left"),t.offset.top+=n+this._getBorderWidth(this.$element(),"top"),t.width-=(0,M.Y_)(this.$element())-(0,M.Xt)(this.$element()),t.height-=(0,M.zp)(this.$element())-(0,M.fA)(this.$element())},_dragEndHandler(t){const e=this.$element();this._resizeEndAction({event:t,width:(0,M.Y_)(e),height:(0,M.zp)(e),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth(t){this.option("width",(0,ys.n$)(t,this.option("minWidth"),this.option("maxWidth")))},_renderHeight(t){this.option("height",(0,ys.n$)(t,this.option("minHeight"),this.option("maxHeight")))},_optionChanged(t){switch(t.name){case"disabled":this._toggleEventHandlers(!t.value),this.callBase(t);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":(0,p.hasWindow)()&&this._renderWidth((0,M.Y_)(this.$element()));break;case"minHeight":case"maxHeight":(0,p.hasWindow)()&&this._renderHeight((0,M.zp)(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(t)}},_clean(){this.$element().find(".dx-resizable-handle").remove()},_useTemplates:()=>!1});(0,c.default)(xs,Os);const Ts=Os;var Ds=i(925),Bs=i(9546),As=i(6425),Ps=i(6897);const Ms=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],Rs=(0,p.getWindow)();class Ns extends Ps.H{constructor(t){let{fullScreen:e,forceApplyBindings:i,dragOutsideBoundary:o,dragAndResizeArea:r,outsideDragFactor:s}=t;super((0,Yn.Z)(t,Ms)),this._props=(0,n.Z)({},this._props,{fullScreen:e,forceApplyBindings:i,dragOutsideBoundary:o,dragAndResizeArea:r,outsideDragFactor:s}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}set fullScreen(t){this._props.fullScreen=t,t?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}set dragAndResizeArea(t){this._props.dragAndResizeArea=t,this._updateDragResizeContainer()}set dragOutsideBoundary(t){this._props.dragOutsideBoundary=t,this._updateDragResizeContainer()}set outsideDragFactor(t){this._props.outsideDragFactor=t}updateContainer(t){super.updateContainer(t),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){var t,e;this._props.fullScreen?((0,hr.pB)(this._$content,{top:0,left:0}),this.detectVisualPositionChange()):(null===(t=(e=this._props).forceApplyBindings)||void 0===t||t.call(e),super.positionContent())}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._props.dragOutsideBoundary?(0,o.Z)(Rs):this._props.dragAndResizeArea?(0,o.Z)(this._props.dragAndResizeArea):(0,As.In)().get(0)||this._props.container?this._$markupContainer:(0,o.Z)(Rs)}_getVisualContainer(){return this._props.fullScreen?(0,o.Z)(Rs):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}const $s={setOverflow:l.noop,restoreOverflow:l.noop},Vs=(0,p.getWindow)(),Fs=["cancel","clear","done"],Zs=Ur.default.safari&&(0,vs.q)(Ur.default.version,[11])<0,Hs={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},Ls=R.Z.inherit({_supportedKeys:function(){return(0,r.l)(this.callBase(),{upArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveUp(t)},downArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveDown(t)},leftArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveLeft(t)},rightArrow:t=>{var e;null===(e=this._drag)||void 0===e||e.moveRight(t)}})},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:function(t){return"desktop"===tt.default.real().deviceType&&"generic"===t.platform},options:{dragEnabled:!0}},{device:function(){return"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,At.yj)()},options:{useFlatToolbarButtons:!0}},{device:function(){return(0,At.x2)()},options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation:function(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init:function(){const t=this.option("_wrapperClassExternal"),e=t?`dx-popup-wrapper ${t}`:"dx-popup-wrapper";this.callBase(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass("dx-popup"),this.$wrapper().addClass(e),this._$popupContent=this._$content.wrapInner((0,o.Z)("<div>").addClass("dx-popup-content")).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")},_render:function(){const t=this.option("fullScreen");this._toggleFullScreenClass(t),this.callBase()},_createBodyOverflowManager:function(){this._bodyOverflowManager=(()=>{if(!(0,p.hasWindow)())return $s;const t=(0,p.getWindow)(),e=Mt.Z.getDocument().documentElement,i=Mt.Z.getBody(),n="ios"===tt.default.real().platform,o={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null};return{setOverflow:n?()=>{if((0,s.$K)(o.position)||"fixed"===i.style.position)return;const{scrollY:e,scrollX:n}=t;o.position=i.style.position,o.top=i.style.top,o.left=i.style.left,i.style.setProperty("position","fixed"),i.style.setProperty("top",-e+"px"),i.style.setProperty("left",-n+"px")}:()=>{(()=>{const n=t.innerWidth-e.clientWidth;if(o.paddingRight||n<=0)return;const r=t.getComputedStyle(i).getPropertyValue("padding-right"),s=parseInt(r,10);o.paddingRight=s,i.style.setProperty("padding-right",`${s+n}px`)})(),o.overflow||"hidden"===i.style.overflow||(o.overflow=i.style.overflow,o.overflowX=i.style.overflowX,o.overflowY=i.style.overflowY,i.style.setProperty("overflow","hidden"))},restoreOverflow:n?()=>{if(!(0,s.$K)(o.position))return;const e=-parseInt(i.style.top,10),n=-parseInt(i.style.left,10);["position","top","left"].forEach((t=>{o[t]?i.style.setProperty(t,o[t]):i.style.removeProperty(t)})),t.scrollTo(n,e),o.position=null}:()=>{(0,s.$K)(o.paddingRight)&&(o.paddingRight?i.style.setProperty("padding-right",`${o.paddingRight}px`):i.style.removeProperty("padding-right"),o.paddingRight=null),["overflow","overflowX","overflowY"].forEach((t=>{if(!(0,s.$K)(o[t]))return;const e=t.replace(/(X)|(Y)/,(t=>`-${t.toLowerCase()}`));o[t]?i.style.setProperty(e,o[t]):i.style.removeProperty(e),o[t]=null}))}}})()},_toggleFullScreenClass:function(t){this.$overlayContent().toggleClass("dx-popup-fullscreen",t).toggleClass("dx-popup-normal",!t)},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new u.s,bottom:new u.s})},_getActionsList:function(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler:function(t){this._shouldSkipContentResize(t)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions:function(){const t=this.option("animation");return["to","from"].some((e=>{var i;const n=null==t||null===(i=t.show)||void 0===i?void 0:i[e];return(0,s.Kn)(n)&&("width"in n||"height"in n)}))},_updateResizeCallbackSkipCondition(){const t=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=e=>t&&this._showAnimationProcessing||this._areContentDimensionsRendered(e)},_observeContentResize:function(t){if(!this.option("useResizeObserver"))return;const e=this._$content.get(0);t?Ds.Z.observe(e,(t=>{this._contentResizeHandler(t)})):Ds.Z.unobserve(e)},_areContentDimensionsRendered:function(t){var e,i,n;const o=null===(e=t.contentBoxSize)||void 0===e?void 0:e[0];var r,s;if(o)return parseInt(o.inlineSize,10)===(null===(r=this._renderedDimensions)||void 0===r?void 0:r.width)&&parseInt(o.blockSize,10)===(null===(s=this._renderedDimensions)||void 0===s?void 0:s.height);const a=t.contentRect;return parseInt(a.width,10)===(null===(i=this._renderedDimensions)||void 0===i?void 0:i.width)&&parseInt(a.height,10)===(null===(n=this._renderedDimensions)||void 0===n?void 0:n.height)},_renderContent(){this.callBase(),this._observeContentResize(!0)},_renderContentImpl:function(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle:function(){const t=this._getToolbarItems("top"),{title:e,showTitle:i}=this.option();if(i&&e&&t.unshift({location:tt.default.current().ios?"center":"before",text:e}),i||t.length>0){this._$title&&this._$title.remove();const e=(0,o.Z)("<div>").addClass("dx-popup-title").insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",t,e).addClass("dx-popup-title"),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass("dx-has-close-button",this._hasCloseButton())}else this._$title&&this._$title.detach();this._toggleAriaLabel()},_toggleAriaLabel(){var t;const{title:e,showTitle:i}=this.option(),n=i&&e?new H.Z:null;null===(t=this._$title)||void 0===t||t.find(".dx-toolbar-label").eq(0).attr("id",n),this.$overlayContent().attr("aria-labelledby",n)},_renderTemplateByType:function(t,e,i,n){const{rtlEnabled:s,useDefaultToolbarButtons:l,useFlatToolbarButtons:c,disabled:d}=this.option(),h=this._getTemplateByOption(t);if(h instanceof u.s){const t=(0,r.l)({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),o=(0,r.l)(n,{items:e,rtlEnabled:s,useDefaultButtons:l,useFlatButtons:c,disabled:d,integrationOptions:t});this._getTemplate("dx-polymorph-widget").render({container:i,model:{widget:this._getToolbarName(),options:o}});const a=i.children("div");return i.replaceWith(a),a}{const t=(0,o.Z)(h.render({container:(0,a.u)(i)}));return t.hasClass("dx-template-wrapper")&&(i.replaceWith(t),i=t),i}},_getToolbarName:function(){return"dxToolbarBase"},_renderVisibilityAnimate:function(t){return this.callBase(t)},_hide(){return this._observeContentResize(!1),this.callBase()},_executeTitleRenderAction:function(t){this._getTitleRenderAction()({titleElement:(0,a.u)(t)})},_getTitleRenderAction:function(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction:function(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton:function(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer:function(){return(t,e,i)=>{const n=(0,o.Z)("<div>").addClass("dx-closebutton");this._createComponent(n,nr,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),(0,o.Z)(i).append(n)}},_getToolbarItems:function(t){const e=this.option("toolbarItems"),i=[];this._toolbarItemClasses=[];const n=tt.default.current().platform;let o=0;return(0,g.each)(e,((e,a)=>{const l=(0,s.$K)(a.shortcut),c=l?(t=>{const e=tt.default.current().platform;let i="bottom",n="before";if("ios"===e)switch(t){case"cancel":i="top";break;case"clear":i="top",n="after";break;case"done":n="after"}else if("android"===e)switch(t){case"cancel":case"done":n="after"}return{toolbar:i,location:n}})(a.shortcut):a;if(l&&"ios"===n&&o<2&&(c.toolbar="top",o++),c.toolbar=a.toolbar||c.toolbar||"top",c&&c.toolbar===t){l&&(0,r.l)(c,{location:a.location},this._getToolbarItemByAlias(a));const t="generic"===n;"done"===a.shortcut&&t||"cancel"===a.shortcut&&!t?i.unshift(c):i.push(c)}})),"top"===t&&this._hasCloseButton()&&i.push(this._getCloseButton()),i},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:t=>"done"===t.toLowerCase()?"OK":(0,_o.camelize)(t,!0),_getToolbarButtonStylingMode:function(t){return(0,At.dC)()?"done"===t?"contained":"outlined":this.option("useFlatToolbarButtons")?"text":"contained"},_getToolbarButtonType:function(t){return(0,At.dC)()&&"done"===t||this.option("useDefaultToolbarButtons")?"default":"normal"},_getToolbarItemByAlias:function(t){const e=this,i=t.shortcut;if(!Fs.includes(i))return!1;const n=(0,r.l)({text:C.Z.format(this._getLocalizationKey(i)),onClick:this._createToolbarItemAction(t.onClick),integrationOptions:{},type:this._getToolbarButtonType(i),stylingMode:this._getToolbarButtonStylingMode(i)},t.options||{}),s="dx-popup-"+i;return this._toolbarItemClasses.push(s),{template:function(t,i,r){const a=(0,o.Z)("<div>").addClass(s).appendTo(r);e._createComponent(a,nr,n)}}},_createToolbarItemAction:function(t){return this._createAction(t,{afterExecute:function(t){t.component.hide()}})},_renderBottom:function(){const t=this._getToolbarItems("bottom");if(t.length){this._$bottom&&this._$bottom.remove();const e=(0,o.Z)("<div>").addClass("dx-popup-bottom").insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",t,e,{compactMode:!0}).addClass("dx-popup-bottom"),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState:function(t){this.callBase(...arguments),this.$content().toggleClass("dx-state-disabled",Boolean(t))},_toggleClasses:function(){const t=Fs;(0,g.each)(t,((t,e)=>{const i="dx-popup-"+e;this._toolbarItemClasses.includes(i)?(this.$wrapper().addClass(i+"-visible"),this._$bottom.addClass(i)):(this.$wrapper().removeClass(i+"-visible"),this._$bottom.removeClass(i))}))},_toggleFocusClass(t,e){if(this.callBase(t,e),t&&!Bs.Ao(this._zIndex)){const t=Bs.Ue(this._zIndexInitValue());Bs.Od(this._zIndex),this._zIndex=t,this._$wrapper.css("zIndex",t),this._$content.css("zIndex",t)}},_toggleContentScrollClass(){const t=!this.option("preventScrollEvents");this.$content().toggleClass("dx-popup-content-scrollable",t)},_getPositionControllerConfig(){const{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:o}=this.option();return(0,r.l)({},this.callBase(),{fullScreen:t,forceApplyBindings:e,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:o})},_initPositionController(){this._positionController=new Ns(this._getPositionControllerConfig())},_getDragTarget:function(){return this.topToolbar()},_renderGeometry:function(t){const{visible:e,useResizeObserver:i}=this.option();if(e&&(0,p.hasWindow)()){const e=this._showAnimationProcessing&&!(null!=t&&t.forceStopAnimation)&&i;this._isAnimationPaused=e||void 0,this._stopAnimation(),null!=t&&t.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(null==t?void 0:t.isDimensionChange),e&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions:function(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt((0,M.dz)(this._$content),10),height:parseInt((0,M.Cr)(this._$content),10)})},_renderGeometryImpl:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight:function(){"auto"===this._getOptionValue("height")&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag:function(){const t=this._getDragTarget(),e=this.option("dragEnabled");if(!t)return;const i={dragEnabled:e,handle:t.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(i):this._drag=new ws(i),this.$overlayContent().toggleClass("dx-popup-draggable",e)},_renderResize:function(){this._resizable=this._createComponent(this._$content,Ts,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:t=>{this._resizeEndHandler(t),this._observeContentResize(!0)},onResize:t=>{this._setContentHeight(),this._actions.onResize(t)},onResizeStart:t=>{this._observeContentResize(!1),this._actions.onResizeStart(t)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler:function(t){const e=this._resizable.option("width"),i=this._resizable.option("height");e&&this._setOptionWithoutOptionChange("width",e),i&&this._setOptionWithoutOptionChange("height",i),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(t.event),this._actions.onResizeEnd(t)},_setContentHeight:function(){(this.option("forceApplyBindings")||l.noop)();const t=this.$overlayContent().get(0),e=this._chooseHeightStrategy(t);this.$content().css(this._getHeightCssStyles(e,t)),this._setHeightClasses(this.$overlayContent(),e)},_heightStrategyChangeOffset:function(t,e){return t===Hs.flex?-e:0},_chooseHeightStrategy:function(t){const e="auto"===t.style.width||""===t.style.width;let i=Hs.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(i=e||Zs?Hs.inherit:Hs.flex),i},_getHeightCssStyles:function(t,e){let i={};const n=this._getOptionValue("maxHeight",e),r=this._getOptionValue("minHeight",e),s=this._splitPopupHeight(),a=s.header+s.footer+s.contentVerticalOffsets+s.popupVerticalOffsets+this._heightStrategyChangeOffset(t,s.popupVerticalPaddings);if(t===Hs.static){if(!this._isAutoHeight()||n||r){const t=(this.option("fullScreen")?Math.min((0,$.l)(e).height,(0,p.getWindow)().innerHeight):(0,$.l)(e).height)-a;i={height:Math.max(0,t),minHeight:"auto",maxHeight:"auto"}}}else{const t=(0,o.Z)(this._positionController.$visualContainer).get(0),e=(0,M.n2)(n,-a,t);i={height:"auto",minHeight:(0,M.eK)(r,-a,t),maxHeight:e}}return i},_setHeightClasses:function(t,e){let i="";for(const t in Hs)Hs[t]!==e&&(i+=" "+Hs[t]);t.removeClass(i).addClass(e)},_isAutoHeight:function(){return"auto"===this.$overlayContent().get(0).style.height},_splitPopupHeight:function(){const t=this.topToolbar(),e=this.bottomToolbar();return{header:(0,M.$D)(t&&t.get(0)),footer:(0,M.$D)(e&&e.get(0)),contentVerticalOffsets:(0,M.sQ)(this.$overlayContent().get(0),!0),popupVerticalOffsets:(0,M.sQ)(this.$content().get(0),!0),popupVerticalPaddings:(0,M.sQ)(this.$content().get(0),!1)}},_isAllWindowCovered:function(){return this.callBase()||this.option("fullScreen")},_renderDimensions:function(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),(0,p.hasWindow)()&&this._renderFullscreenWidthClass()},_dimensionChanged:function(){this._renderGeometry({isDimensionChange:!0})},_clean:function(){this.callBase(),this._observeContentResize(!1)},_dispose:function(){this.callBase(),this._toggleBodyScroll(!0)},_renderFullscreenWidthClass:function(){this.$overlayContent().toggleClass("dx-popup-fullscreen-width",(0,M.Y_)(this.$overlayContent())===(0,M.dz)(Vs))},_toggleSafariScrolling(){this.option("enableBodyScroll")&&this.callBase()},_toggleBodyScroll:function(t){if(!this._bodyOverflowManager)return;const{setOverflow:e,restoreOverflow:i}=this._bodyOverflowManager;t?i():e()},refreshPosition:function(){this._renderPosition()},_optionChanged:function(t){var e;const{value:i,name:n}=t;switch(n){case"disabled":this.callBase(t),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this.option("visible")&&this._toggleBodyScroll(i);break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),(0,bs.U_)(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),(0,bs.U_)(this.$overlayContent());break;case"container":var o;this.callBase(t),this.option("resizeEnabled")&&(null===(o=this._resizable)||void 0===o||o.option("area",this._positionController.$dragResizeContainer));break;case"width":case"height":this.callBase(t),null===(e=this._resizable)||void 0===e||e.option(n,i);break;case"onTitleRendered":this._createTitleRenderAction(i);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":{const e=!t.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),e&&(this._renderGeometry(),(0,bs.U_)(this.$overlayContent()));break}case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=i;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),(0,bs.U_)(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=i,this._toggleFullScreenClass(i),this._toggleSafariScrolling(),this._renderGeometry(),(0,bs.U_)(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;case"preventScrollEvents":this.callBase(t),this._toggleContentScrollClass();break;default:this.callBase(t)}},bottomToolbar:function(){return this._$bottom},topToolbar:function(){return this._$title},$content:function(){return this._$popupContent},content:function(){return(0,a.u)(this.$content())},$overlayContent:function(){return this._$content},getFocusableElements:function(){return this.$wrapper().find("[tabindex]").filter(((t,e)=>e.getAttribute("tabindex")>=0))}});(0,c.default)("dxPopup",Ls);const js=Ls;class zs extends js{_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{preventScrollEvents:!1})}_getToolbarName(){return"dxToolbar"}}zs.defaultOptions=function(t){js.defaultOptions(t)},(0,c.default)("dxPopup",zs);const Ws=zs;class Ks extends _.default{_supportedKeys(){let t={};return this.option("opened")&&this._list.option("focusedElement")||(t=this._button._supportedKeys()),(0,r.l)(super._supportedKeys(),t,{tab:function(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:function(){return"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return(0,At.yj)()},options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new gs.s("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){const t=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(t,nr,{icon:"overflow",template:"content",stylingMode:(0,At.dC)()?"text":"contained",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:t=>{this.option("opened",!this.option("opened")),this._buttonClickAction(t)}})}_toggleActiveState(t,e,i){this._button._toggleActiveState(t,e,i)}_toggleMenuVisibility(t){const e=t??!this._popup.option("visible");t&&this._renderPopup(),this._popup.toggle(e),this.setAria("expanded",e)}_renderPopup(){if(this._$popup)return;this._$popup=(0,o.Z)("<div>").appendTo(this.$element());const{rtlEnabled:t,container:e,animation:i}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(t){let{component:e}=t;e.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,contentTemplate:t=>this._renderList(t),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top "+(t?"left":"right"),at:"bottom "+(t?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:i,onOptionChanged:t=>{let{name:e,value:i}=t;"visible"===e&&this.option("opened",i)},container:e,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:t=>this._closeOutsideDropDownHandler(t),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}_getMaxHeight(){const t=this.$element(),e=t.offset().top,i=(0,M.zp)((0,p.getWindow)()),n=Math.max(e,i-e-(0,M.zp)(t));return Math.min(i,n-3-10)}_closeOutsideDropDownHandler(t){return!(0,o.Z)(t.target).closest(this.$element()).length}_renderList(t){const e=(0,o.Z)(t);e.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(e,ms,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:t=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(t)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(t,e,i){var n;null===(n=this._list)||void 0===n||n._itemOptionChanged(t,e,i),Te(this._list,t)}_getListDataSource(){return this.option("dataSource")??this.option("items")}_setListDataSource(){var t;null===(t=this._list)||void 0===t||t.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(t){super._toggleVisibility(t),this._button.option("visible",t)}_optionChanged(t){var e,i,n;const{name:o,value:r}=t;switch(o){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":null===(e=this._list)||void 0===e||e.option(o,this._getTemplate(r));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":null===(i=this._list)||void 0===i||i.option(o,r),super._optionChanged(t);break;case"onItemRendered":null===(n=this._list)||void 0===n||n.option(o,r);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(r),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(o,r);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(t)}}_updateFocusableItemsTabIndex(){this.option("items").forEach((t=>Te(this._list,t)))}}const qs="dx-toolbar-item-invisible";class Us{constructor(t){this._toolbar=t}_initMarkup(){(0,l.deferRender)((()=>{this._renderOverflowMenu(),this._renderMenuItems()}))}_renderOverflowMenu(){if(!this._hasVisibleMenuItems())return;this._renderMenuButtonContainer();const t=(0,o.Z)("<div>").appendTo(this._overflowMenuContainer()),e=this._toolbar._createActionByOption("onItemClick"),i=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(t,Ks,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>i,onItemClick:t=>{e(t)},container:this._toolbar.option("menuContainer"),onOptionChanged:t=>{let{name:e,value:i}=t;"opened"===e&&this._toolbar.option("overflowMenuVisible",i),"items"===e&&this._updateMenuVisibility(i)}})}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=(0,o.Z)("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(t){const e=t??this._getMenuItems(),i=e.length&&this._hasVisibleMenuItems(e);this._toggleMenuVisibility(i)}_toggleMenuVisibility(t){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass("dx-state-invisible",!t)}_renderMenuItems(){(0,l.deferRender)((()=>{this.renderMenuItems()}))}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){return(0,l.grep)(this._toolbar.option("items")??[],(t=>!this._toolbar._isMenuItem(t)))}_getHiddenItems(){return this._toolbar._itemContainer().children(`.dx-toolbar-item-auto-hide.${qs}`).not(".dx-state-invisible")}_getMenuItems(){const t=(0,l.grep)(this._toolbar.option("items")??[],(t=>this._toolbar._isMenuItem(t))),e=this._getHiddenItems();return this._restoreItems=this._restoreItems??[],[...[].slice.call(e).map((t=>{const e=this._toolbar._getItemData(t),i=(0,o.Z)(t),n=i.children();return(0,r.l)({menuItemTemplate:()=>(this._restoreItems.push({container:i,item:n}),(0,o.Z)("<div>").addClass("dx-toolbar-item-auto-hide").append(n))},e)})),...t]}_hasVisibleMenuItems(t){const e=t??this._toolbar.option("items");let i=!1;const n=(0,Wt.vb)("visible"),o=(0,Wt.vb)("locateInMenu");return(0,g.each)(e,(function(t,e){const r=n(e,{functionsAsIs:!0}),s=o(e,{functionsAsIs:!0});(!1===r||"auto"!==s&&"always"!==s)&&"menu"!==e.location||(i=!0)})),i}_arrangeItems(){this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),(0,g.each)(this._restoreItems??[],(function(t,e){(0,o.Z)(e.container).append(e.item)})),this._restoreItems=[];const t=(0,M.dz)(this._toolbar.$element());return this._hideOverflowItems(t),t}_hideOverflowItems(t){const e=this._toolbar.$element().find(".dx-toolbar-item-auto-hide");if(!e.length)return;t=t??(0,M.dz)(this._toolbar.$element()),(0,o.Z)(e).removeClass(qs);let i=this._getItemsWidth();for(;e.length&&t<i;)e.eq(-1).addClass(qs),i=this._getItemsWidth(),e.splice(-1,1)}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",[this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(t,e,i){var n;"disabled"!==e&&"options.disabled"!==e||!this._toolbar._isMenuItem(t)?this.renderMenuItems():null===(n=this._menu)||void 0===n||n._itemOptionChanged(t,e,i)}_renderItem(t,e){"auto"===t.locateInMenu&&e.addClass("dx-toolbar-item-auto-hide")}_optionChanged(t,e){var i,n,o,r,s;switch(t){case"disabled":null===(i=this._menu)||void 0===i||i.option(t,e);break;case"overflowMenuVisible":null===(n=this._menu)||void 0===n||n.option("opened",e);break;case"onItemClick":null===(o=this._menu)||void 0===o||o.option(t,e);break;case"menuContainer":null===(r=this._menu)||void 0===r||r.option("container",e);break;case"menuItemTemplate":null===(s=this._menu)||void 0===s||s.option("itemTemplate",e)}}}class Gs extends Ee{_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(t){"height"!==t&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new De(this):new Us(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(t,e,i,n){const o=super._renderItem(t,e,i,n);this._layoutStrategy._renderItem(e,o);const{widget:r,showText:s}=e;return"dxButton"===r&&"inMenu"===s&&o.toggleClass("dx-toolbar-text-auto-hide"),o}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(this.$element().is(":hidden"))return;const t=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(t)}_itemOptionChanged(t,e,i){this._isMenuItem(t)||super._itemOptionChanged(t,e,i),this._layoutStrategy._itemOptionChanged(t,e,i),"disabled"!==e&&"options.disabled"!==e||Te(this,t),"location"===e&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach((t=>Te(this,t)))}_isMenuItem(t){return"menu"===t.location||"always"===t.locateInMenu}_isToolbarItem(t){return void 0===t.location||"never"===t.locateInMenu}_optionChanged(t){let{name:e,value:i}=t;switch(this._layoutStrategy._optionChanged(e,i),e){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged.apply(this,arguments),this._updateFocusableItemsTabIndex();break;default:super._optionChanged.apply(this,arguments)}}updateDimensions(){this._dimensionChanged()}}(0,c.default)("dxToolbar",Gs);const Ys=Gs,Qs="dx-invalid-message-auto",Xs="dx-validation-target";class Js extends ao{getProps(){const t=super.getProps();return t.onFocusIn=()=>{if("auto"===this.option("validationMessageMode")){const i=(0,o.Z)((".dx-invalid-message.dx-overlay-wrapper",((null===(e=(t=this.element()).getRootNode)||void 0===e?void 0:e.call(t))??document).querySelector(".dx-invalid-message.dx-overlay-wrapper")));null==i||i.removeClass(Qs);const n=150;this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout((()=>{null==i||i.addClass(Qs)}),n)}var t,e},t.saveValueChangeEvent=t=>{this._valueChangeEventInstance=t},t}_createElement(t){super._createElement(t),this.showValidationMessageTimeout=void 0,this.validationRequest=(0,h.Z)(),(0,d.aT)(this.$element()[0],Xs,this)}_render(){var t;null===(t=this.option("_onMarkupRendered"))||void 0===t||t()}_init(){super._init(),this._initialValue=this.option("value")}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(t){super._initOptions(t),this.option(A.initValidationOptions(t))}_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(t,e){const i=(0,r.l)({},t.option()),n=()=>this._silent(e,i);n(),t.on("optionChanged",n)}_raiseValidation(t,e){const i=!(0,s.$K)(t)&&!(0,s.$K)(e);t===e||i||this.validationRequest.fire({value:t,editor:this})}_raiseValueChangeAction(t,e){var i;null===(i=this._valueChangeAction)||void 0===i||i.call(this,{element:this.$element(),previousValue:e,value:t,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(t){const{name:e,previousValue:i,value:n}=t;switch(e&&void 0!==this._getActionConfigs()[e]&&this._addAction(e),e){case"value":this._raiseValidation(n,i),this.option("isDirty",this._initialValue!==n),this._raiseValueChangeAction(n,i);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(A.synchronizeValidationOptions(t,this.option()))}super._optionChanged(t)}clear(){const{value:t}=this._getDefaultOptions();this.option({value:t})}reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;arguments.length&&(this._initialValue=t),this.option("value",this._initialValue),this.option("isDirty",!1),this.option("isValid",!0)}_dispose(){super._dispose(),(0,d.aT)(this.element(),Xs,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}}const ta=U.isEditor,ea=t=>ta(t)||t instanceof Js;Js.isEditor=ea,U.isEditor=ea;class ia extends Js{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){const t=super.getProps();return null!==t.value&&(t.value=Boolean(t.value)),t}}const na=["dataSource","selectedRowKeys"],oa={integrationOptions:!0};function ra(t,e,i){return{path:t,value:e,previousValue:i}}function sa(t,e,i,o,r,a){if(oa[o])return;const l=(0,s.dt)(e),c=(0,s.dt)(i);if(e!==i)if(l!==c)t.push(ra(o,i,e));else if("object"===l)if((0,s.PO)(i)){const s=la(e,i,r,a);t.push(...s.map((t=>(0,n.Z)({},t,{path:`${o}.${t.path}`}))))}else t.push(ra(o,i,e));else if("array"===l)if(a.some((t=>r.includes(t)))&&e!==i)t.push(ra(o,i,e));else if(e.length!==i.length)t.push(ra(o,i,e));else{const s=la(e,i,r,a);[].push.apply(t,s.map((t=>(0,n.Z)({},t,{path:`${o}${t.path}`}))))}else t.push(ra(o,i,e))}const aa=t=>(e,i,n,o)=>{const r=[],s=Array.isArray(e)?t=>{sa(r,e[t],i[t],`[${t}]`,`${n}.${t}`,o)}:t=>{sa(r,e[t],i[t],t,`${n}.${t}`,o)};return t(e).forEach(s),Object.keys(i).filter((t=>!Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==i[t])).forEach((t=>{r.push({path:t,value:i[t],previousValue:e[t]})})),r},la=aa((t=>Object.keys(t))),ca={key:!0,ref:!0,children:!0,style:!0},ua=aa((t=>Object.keys(t).filter((t=>!ca[t])))),da=["valueChange"],ha=["componentProps","componentType","templateNames"],pa=t=>Object.keys(t).reduce(((e,i)=>(void 0!==t[i]&&(e[i]=t[i]),e)),{});class fa extends Tn{get config(){return this.context[Ho.id]?this.context[Ho.id]:Ho.defaultValue}constructor(t){super(t),this.state={},this.widgetRef={current:null},this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}createEffects(){return[new An(this.setupWidget,[]),new An(this.updateWidget,[this.props.componentProps,this.config,this.props.templateNames])]}updateEffects(){var t;null===(t=this._effects[1])||void 0===t||t.update([this.props.componentProps,this.config,this.props.templateNames])}setupWidget(){const t=new this.props.componentType(this.widgetRef.current,this.properties);return this.instance=t,()=>{t.dispose(),this.instance=null}}updateWidget(){const t=this.getInstance();if(!t)return;const e=function(t,e){return ua(t,e,"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:na)}(this.prevProps||{},this.properties);e.length&&(t.beginUpdate(),e.forEach((e=>{let{path:i,value:n}=e;t.option(i,n)})),t.endUpdate()),this.prevProps=this.properties}get properties(){var t;const e=pa(this.props.componentProps),{valueChange:i}=e,o=(0,Yn.Z)(e,da),r=(0,n.Z)({rtlEnabled:!(null===(t=this.config)||void 0===t||!t.rtlEnabled),isRenovated:!0},o);return i&&(r.onValueChanged=t=>{let{value:e}=t;return i(e)}),this.props.templateNames.forEach((t=>{((t,e,i)=>{const n=e[t];return!!n&&"string"!=typeof n})(t,r)&&(r[t]=(e,i,n)=>{var o,r;o=this.props.componentProps[t],r={item:e,index:i,container:n},setTimeout((()=>{mn(Ln(o,r),(t=>{var e,i;return(null===(e=t.container)||void 0===e?void 0:e.get(0))||(null===(i=t.item)||void 0===i?void 0:i.get(0))})(r))}),0)})})),r}get restAttributes(){const t=this.props;return(0,Yn.Z)(t,ha)}getInstance(){return this.instance}render(){const t=this.props;return(t=>{let{props:{componentProps:{className:e}},restAttributes:i,widgetRef:o}=t;return pa(ri(1,"div",e,null,1,(0,n.Z)({},i),null,o))})({props:(0,n.Z)({},t),widgetRef:this.widgetRef,config:this.config,properties:this.properties,restAttributes:this.restAttributes})}}fa.defaultProps={};const _a=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],ma=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Zo),Object.getOwnPropertyDescriptors({mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0})));class ga extends On{constructor(t){super(t),this.state={}}get componentProps(){return this.props}get restAttributes(){const t=this.props;return(0,Yn.Z)(t,_a)}render(){const t=this.props;return(t=>{let{componentProps:e,restAttributes:i}=t;return ci(si(2,fa,(0,n.Z)({componentType:Z,componentProps:e,templateNames:[]},i)))})({props:(0,n.Z)({},t),componentProps:this.componentProps,restAttributes:this.restAttributes})}}ga.defaultProps=ma;const va=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],ba=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Zo),Object.getOwnPropertyDescriptors({readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:Object.freeze({}),defaultValue:null,valueChange:()=>{}}))),ya={get readOnly(){return ba.readOnly},get name(){return ba.name},get validationError(){return ba.validationError},get validationErrors(){return ba.validationErrors},get validationMessageMode(){return ba.validationMessageMode},get validationMessagePosition(){return ba.validationMessagePosition},get validationStatus(){return ba.validationStatus},get isValid(){return ba.isValid},get isDirty(){return ba.isDirty},get inputAttr(){return ba.inputAttr},get defaultValue(){return ba.defaultValue},get valueChange(){return ba.valueChange},get className(){return ba.className},get activeStateEnabled(){return ba.activeStateEnabled},get disabled(){return ba.disabled},get focusStateEnabled(){return ba.focusStateEnabled},get hoverStateEnabled(){return ba.hoverStateEnabled},get tabIndex(){return ba.tabIndex},get visible(){return ba.visible},get aria(){return qo.aria},get classes(){return qo.classes}};class Ca extends Dn{constructor(t){super(t),this.widgetRef={current:null},this.rootElementRef={current:null},this.__getterCache={},this.state={validationMessageGuid:`dx-${new H.Z}`,isValidationMessageVisible:!1,value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new An(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),Pn()]}updateEffects(){var t;null===(t=this._effects[0])||void 0===t||t.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState((t=>({isValidationMessageVisible:this.shouldShowValidationMessage})))}onFocusIn(t){const{onFocusIn:e}=this.props;null==e||e(t)}get cssClasses(){return`${(t=>{const{classes:e,isValid:i,readOnly:n}=t;return fo({"dx-state-readonly":!!n,"dx-invalid":!i,[String(e)]:!!e})})((0,n.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}))}`}get shouldShowValidationMessage(){const{isValid:t,validationStatus:e}=this.props,i=this.validationErrors??[];return!(t&&"invalid"!==e)&&i.length>0}get aria(){const{isValid:t,readOnly:e}=this.props,i={readonly:e?"true":"false",invalid:t?"false":"true"};return this.shouldShowValidationMessage&&(i.describedBy=this.state.validationMessageGuid),(0,n.Z)({},i,this.props.aria)}get validationErrors(){return void 0!==this.__getterCache.validationErrors?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{const{validationError:t,validationErrors:e}=this.props;let i=e&&[...e];return!i&&t&&(i=[(0,n.Z)({},t)]),i})()}get validationMessageTarget(){var t;return null===(t=this.rootElementRef)||void 0===t?void 0:t.current}get restAttributes(){const t=(0,n.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,Yn.Z)(t,va)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(t,e,i){super.componentWillUpdate(),this.props.validationError===t.validationError&&this.props.validationErrors===t.validationErrors||(this.__getterCache.validationErrors=void 0)}render(){const t=this.props;return(t=>{const{aria:e,cssClasses:i,isValidationMessageVisible:o,onFocusIn:r,props:{accessKey:s,activeStateEnabled:a,children:l,className:c,disabled:u,focusStateEnabled:d,height:h,hint:p,hoverStateEnabled:f,onClick:_,onKeyDown:m,rtlEnabled:g,tabIndex:v,validationMessageMode:b,validationMessagePosition:y,visible:C,width:w},restAttributes:x,rootElementRef:S,validationErrors:I,validationMessageGuid:k,validationMessageTarget:E,widgetRef:O}=t;return ci(si(2,Uo,(0,n.Z)({rootElementRef:S,aria:e,classes:i,activeStateEnabled:a,focusStateEnabled:d,hoverStateEnabled:f,accessKey:s,className:c,rtlEnabled:g,hint:p,disabled:u,height:h,width:w,onFocusIn:r,onClick:_,onKeyDown:m,tabIndex:v,visible:C},x,{children:li([l,o&&si(2,ga,{validationErrors:I,mode:b,positionSide:y,rtlEnabled:g,target:E,boundary:E,visualContainer:E,contentId:k})],0)}),null,O))})({props:(0,n.Z)({},t,{value:void 0!==this.props.value?this.props.value:this.state.value}),validationMessageGuid:this.state.validationMessageGuid,isValidationMessageVisible:this.state.isValidationMessageVisible,rootElementRef:this.rootElementRef,widgetRef:this.widgetRef,onFocusIn:this.onFocusIn,cssClasses:this.cssClasses,shouldShowValidationMessage:this.shouldShowValidationMessage,aria:this.aria,validationErrors:this.validationErrors,validationMessageTarget:this.validationMessageTarget,restAttributes:this.restAttributes})}}Ca.defaultProps=ya;const wa=["size"];class xa extends On{constructor(t){super(t),this.state={},this.elementRef={current:null},this.__getterCache={}}get cssStyles(){return void 0!==this.__getterCache.cssStyles?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{const{size:t}=this.props;return{fontSize:(0,Fo.bh)("fontSize",t)}})()}get restAttributes(){const t=this.props;return(0,Yn.Z)(t,wa)}componentWillUpdate(t,e,i){this.props.size!==t.size&&(this.__getterCache.cssStyles=void 0)}render(){const t=this.props;return(t=>{const{cssStyles:e,elementRef:i}=t;return ri(1,"span","dx-checkbox-icon",null,1,{style:Wn(e)},null,i)})({props:(0,n.Z)({},t),elementRef:this.elementRef,cssStyles:this.cssStyles,restAttributes:this.restAttributes})}}xa.defaultProps={};const Sa=["accessKey","activeStateEnabled","aria","className","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],Ia=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(ba),Object.getOwnPropertyDescriptors({text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator()},defaultValue:!1,valueChange:()=>{}}))),ka={get text(){return Ia.text},get enableThreeStateBehavior(){return Ia.enableThreeStateBehavior},get activeStateEnabled(){return Ia.activeStateEnabled},get hoverStateEnabled(){return Ia.hoverStateEnabled},get focusStateEnabled(){return Ia.focusStateEnabled},get defaultValue(){return Ia.defaultValue},get valueChange(){return Ia.valueChange},get readOnly(){return Ia.readOnly},get name(){return Ia.name},get validationError(){return Ia.validationError},get validationErrors(){return Ia.validationErrors},get validationMessageMode(){return Ia.validationMessageMode},get validationMessagePosition(){return Ia.validationMessagePosition},get validationStatus(){return Ia.validationStatus},get isValid(){return Ia.isValid},get isDirty(){return Ia.isDirty},get inputAttr(){return Ia.inputAttr},get className(){return Ia.className},get disabled(){return Ia.disabled},get tabIndex(){return Ia.tabIndex},get visible(){return Ia.visible},get aria(){return qo.aria}};class Ea extends Dn{constructor(t){super(t),this.editorRef={current:null},this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[Pn()]}onWidgetClick(t){const{enableThreeStateBehavior:e,readOnly:i,saveValueChangeEvent:n}=this.props;if(!i)if(null==n||n(t),e){let t;this.setState((e=>(t=null===(void 0!==this.props.value?this.props.value:e.value)||!(void 0!==this.props.value?this.props.value:e.value)&&null,{value:t}))),this.props.valueChange(t)}else{let t;this.setState((e=>(t=!(void 0!==this.props.value?this.props.value:e.value),{value:t}))),this.props.valueChange(t)}}keyDown(t){const{onKeyDown:e}=this.props,{keyName:i,originalEvent:n,which:o}=t,r=null==e?void 0:e(t);if(null!=r&&r.cancel)return r;"space"!==i&&"space"!==o||(n.preventDefault(),this.onWidgetClick(n))}get cssClasses(){return(t=>{const{text:e,value:i}=t;return fo({"dx-checkbox":!0,"dx-checkbox-checked":!0===i,"dx-checkbox-has-text":!!e,"dx-checkbox-indeterminate":null===i})})((0,n.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}))}get aria(){const t=!0===(void 0!==this.props.value?this.props.value:this.state.value),e={role:"checkbox",checked:null===(void 0!==this.props.value?this.props.value:this.state.value)?"mixed":`${t}`};return(0,n.Z)({},e,this.props.aria)}get restAttributes(){const t=(0,n.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,Yn.Z)(t,Sa)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){const t=this.props;return(t=>{const{aria:e,cssClasses:i,editorRef:o,keyDown:r,onWidgetClick:s,props:{accessKey:a,activeStateEnabled:l,className:c,disabled:u,focusStateEnabled:d,height:h,hint:p,hoverStateEnabled:f,iconSize:_,isValid:m,name:g,onFocusIn:v,readOnly:b,rtlEnabled:y,tabIndex:C,text:w,validationError:x,validationErrors:S,validationMessageMode:I,validationMessagePosition:k,validationStatus:E,value:O,visible:T,width:D},restAttributes:B}=t;return ci(si(2,Ca,(0,n.Z)({aria:e,classes:i,onClick:s,onKeyDown:r,accessKey:a,activeStateEnabled:l,focusStateEnabled:d,hoverStateEnabled:f,className:c,disabled:u,readOnly:b,hint:p,height:h,width:D,rtlEnabled:y,tabIndex:C,visible:T,validationError:x,validationErrors:S,validationMessageMode:I,validationMessagePosition:k,validationStatus:E,isValid:m,onFocusIn:v},B,{children:li([ci(ri(64,"input",null,null,1,(0,n.Z)({type:"hidden",value:`${O}`},g&&{name:g}))),ri(1,"div","dx-checkbox-container",[si(2,xa,{size:_,isChecked:!0===O}),w&&ri(1,"span","dx-checkbox-text",w,0)],0)],4)}),null,o))})({props:(0,n.Z)({},t,{value:void 0!==this.props.value?this.props.value:this.state.value}),editorRef:this.editorRef,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,cssClasses:this.cssClasses,aria:this.aria,restAttributes:this.restAttributes})}}Ea.defaultProps=ka;const Oa=[];class Ta extends ia{getProps(){const t=super.getProps();return t.onKeyDown=this._wrapKeyDownHandler(t.onKeyDown),t}focus(){var t;return null===(t=this.viewRef)||void 0===t?void 0:t.focus(...arguments)}blur(){var t;return null===(t=this.viewRef)||void 0===t?void 0:t.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","isDirty","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return Ea}}(0,c.default)("dxCheckBox",Ta),Ta.defaultOptions=function(t){Oa.push(t),Ea.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Ea.defaultProps),Object.getOwnPropertyDescriptors(function(t){const e=["value"];return Object.keys(t).reduce(((i,n)=>{const o=t[n],r=e.some((t=>t===n))?"default"+n.charAt(0).toUpperCase()+n.slice(1):n;return i[r]=o,i}),{})}((0,ho.wt)(Oa)))))};const Da=Ta,Ba=U.inherit({_supportedKeys(){return(0,r.l)(this.callBase(),{space:function(t){t.preventDefault(),this._clickAction({event:t})}})},_getDefaultOptions(){return(0,r.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:()=>!0,_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon(){this._$icon=(0,o.Z)("<div>").addClass("dx-radiobutton-icon"),(0,o.Z)("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState(t){this.$element().toggleClass("dx-radiobutton-checked",t).find(".dx-radiobutton-icon").toggleClass("dx-radiobutton-icon-checked",t),this.setAria("checked",t)},_renderClick(){const t=(0,f.addNamespace)(Kt.name,this.NAME);this._clickAction=this._createAction((t=>{this._clickHandler(t.event)})),P.Z.off(this.$element(),t),P.Z.on(this.$element(),t,(t=>{this._clickAction({event:t})}))},_clickHandler(t){this._saveValueChangeEvent(t),this.option("value",!0)},_optionChanged(t){"value"===t.name?(this._renderCheckedState(t.value),this.callBase(t)):this.callBase(t)}});(0,c.default)("dxRadioButton",Ba);const Aa=Ba,Pa={},Ma="dxListEditDecorator",Ra=(0,f.addNamespace)(or,Ma),Na=(0,f.addNamespace)(rr,Ma),$a=(0,f.addNamespace)(sr,Ma),Va=m.default.inherit({ctor:function(t){this._list=t,this._init()},_init:l.noop,_shouldHandleSwipe:!1,_attachSwipeEvent:function(t){const e={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=(0,M.dz)(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};P.Z.on(t.$itemElement,Ra,e,this._itemSwipeStartHandler.bind(this)),P.Z.on(t.$itemElement,Na,this._itemSwipeUpdateHandler.bind(this)),P.Z.on(t.$itemElement,$a,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler:function(t){const e=(0,o.Z)(t.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")?t.cancel=!0:(clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(e,t))},_itemSwipeUpdateHandler:function(t){const e=(0,o.Z)(t.currentTarget);this._swipeUpdateHandler(e,t)},_itemSwipeEndHandler:function(t){const e=(0,o.Z)(t.currentTarget);this._swipeEndHandler(e,t),this._clearSwipeCache=!0},beforeBag:l.noop,afterBag:l.noop,_commonOptions:function(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},_updateButtonAttributes(t){t.attr({tabindex:-1,role:null,"aria-label":null})},modifyElement:function(t){this._shouldHandleSwipe&&(this._attachSwipeEvent(t),this._clearSwipeCache=!0)},afterRender:l.noop,handleClick:l.noop,handleKeyboardEvents:l.noop,handleEnterPressing:l.noop,handleContextMenu:l.noop,_swipeStartHandler:l.noop,_swipeUpdateHandler:l.noop,_swipeEndHandler:l.noop,visibilityChange:l.noop,getExcludedSelectors:l.noop,dispose:l.noop}),Fa="dx-list-select-decorator-enabled",Za=(0,f.addNamespace)(Kt.name,"dxListEditDecorator"),Ha=C.Z.format("dxList-selectAll");!function(t,e,i){const n=Pa,o={};o[t]=n[t]?n[t]:{},o[t].default=i,(0,r.l)(n,o)}("selection",0,Va.inherit({_init:function(){this.callBase.apply(this,arguments);const t=this._list.option("selectionMode");this._singleStrategy="single"===t,this._containerClass=this._singleStrategy?"dx-list-select-radiobutton-container":"dx-list-select-checkbox-container",this._controlClass=this._singleStrategy?"dx-list-select-radiobutton":"dx-list-select-checkbox",this._controlWidget=this._singleStrategy?Aa:Da,this._list.$element().addClass(Fa)},beforeBag:function(t){const e=t.$itemElement,i=t.$container.addClass(this._containerClass),n=(0,o.Z)("<div>").addClass(this._controlClass).appendTo(i);new this._controlWidget(n,(0,r.l)(this._commonOptions(),{value:this._isSelected(e),elementAttr:{"aria-label":"Check State"},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(t){t.event&&this._list._saveSelectionChangeEvent(t.event),this._processCheckedState(e,t.value),t.event&&t.event.stopPropagation()}.bind(this)}))},modifyElement:function(t){this.callBase.apply(this,arguments);const e=t.$itemElement,i=this._controlWidget.getInstance(e.find("."+this._controlClass));P.Z.on(e,"stateChanged",function(t,e){i.option("value",e)}.bind(this))},_updateSelectAllState:function(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender:function(){"all"===this._list.option("selectionMode")&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents:function(t,e){const i=!e,n=this._list,o=this._$selectAll,r=n._getLastItemIndex();return!(!o||!(e&&0===t||i&&t===r)||(n.option("focusedElement",o),n.scrollToItem(n.option("focusedElement")),0))},handleEnterPressing:function(t){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return t.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll(){this._$selectAll=(0,o.Z)("<div>").addClass("dx-list-select-all");const t=this._list._supportedKeys().downArrow.bind(this._list),e=(0,o.Z)("<div>").addClass("dx-list-select-all-checkbox").appendTo(this._$selectAll);this._selectAllCheckBox=this._list._createComponent(e,Da,{elementAttr:{"aria-label":Ha},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",t),(0,o.Z)("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(this._$selectAll),this._list.itemsContainer().prepend(this._$selectAll),this._updateSelectAllState(),this._updateSelectAllAriaLabel(),this._attachSelectAllHandler()},_attachSelectAllHandler:function(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),P.Z.off(this._$selectAll,Za),P.Z.on(this._$selectAll,Za,this._selectAllClickHandler.bind(this))},_updateSelectAllAriaLabel(){if(!this._$selectAll)return;const{value:t}=this._selectAllCheckBox.option(),e=`${Ha}, ${void 0===t?"half checked":t?"checked":"not checked"}`;this._$selectAll.attr({"aria-label":e})},_selectAllHandler:function(t){t.event&&t.event.stopPropagation(),t.event&&this._list._saveSelectionChangeEvent(t.event);const{value:e}=this._selectAllCheckBox.option();e?this._selectAllItems():!1===e&&this._unselectAllItems(),this._updateSelectAllAriaLabel(),this._list._createActionByOption("onSelectAllValueChanged")({value:e})},_checkSelectAllCapability:function(){const t=this._list,e=t._dataController;return!("allPages"===t.option("selectAllMode")&&t.option("grouped")&&!e.group()&&(G.Z.log("W1010"),1))},_selectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.selectAll("page"===this._list.option("selectAllMode"))},_unselectAllItems:function(){this._checkSelectAllCapability()&&this._list._selection.deselectAll("page"===this._list.option("selectAllMode"))},_selectAllClickHandler:function(t){this._list._saveSelectionChangeEvent(t),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected:function(t){return this._list.isItemSelected(t)},_processCheckedState:function(t,e){e?this._list.selectItem(t):this._list.unselectItem(t)},dispose:function(){this._disposeSelectAll(),this._list.$element().removeClass(Fa),this.callBase.apply(this,arguments)},_disposeSelectAll:function(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));var La=i(9873);class ja{constructor(t,e,i){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=e,this.name=t,this.options=i||{}}_addPlaceMarker(t){this.$placeMarker=(0,o.Z)("<div>").appendTo(t)}_addToContainer(t){const{$placeMarker:e,$container:i}=this;e?e.replaceWith(t):t.appendTo(i)}_attachEvents(){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){const{editor:t,options:e}=this;return e.visible||!t.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){const{instance:t,$placeMarker:e}=this;t&&(t.dispose?t.dispose():t.remove(),this.instance=null),e&&e.remove()}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$container;if(this.$container=t,this._isVisible()){const{instance:t,$element:e}=this._create();this.instance=t,this._attachEvents(t,e)}else this._addPlaceMarker(t)}update(){return this._shouldRender()&&this.render(),!!this.instance}}class za extends ja{constructor(t,e,i){super(t,e,i),this.currentTemplate=null}_attachEvents(t){const{editor:e}=this;t.option("onClick",(t=>{var i;(null!==(i=e._shouldCallOpenHandler)&&void 0!==i&&i.call(e)||!e.option("openOnFieldClick"))&&e._openHandler(t)})),P.Z.on(t.$element(),"mousedown",(t=>{e.$element().is(".dx-state-focused")&&t.preventDefault()}))}_create(){const{editor:t}=this,e=(0,o.Z)("<div>"),i=this._getOptions();this._addToContainer(e);const n=t._createComponent(e,nr,(0,r.l)({},i,{elementAttr:{"aria-label":C.Z.format("dxDropDownEditor-selectLabel")}}));return this._legacyRender(t.$element(),e,i.visible),{$element:e,instance:n}}_getOptions(){const{editor:t}=this,e=this._isVisible(),i={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:t.option("readOnly"),visible:e};return this._addTemplate(i),i}_isVisible(){const{editor:t}=this;return super._isVisible()&&t.option("showDropDownButton")}_legacyRender(t,e,i){t.toggleClass("dx-dropdowneditor-button-visible",i),e&&e.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(t){this._isSameTemplate()||(t.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){const{editor:t,instance:e}=this,i=t.$element(),n=this._getOptions();null==e||e.option(n),this._legacyRender(i,null==e?void 0:e.$element(),n.visible)}}}const{ios:Wa,mac:Ka}=tt.default.real(),qa=Wa||Ka;var Ua=i(3214);class Ga{constructor(t){this._value=" ",(0,r.l)(this,t)}next(t){if(!arguments.length)return this._next;this._next=t}_prepareHandlingArgs(t,e){e=e||{};const i=Object.prototype.hasOwnProperty.call(t,"value")?"value":"text";return t[i]=e.str??t[i],t.start=e.start??t.start,t.length=e.length??t.length,t.index=t.index+1,t}first(t){return t=t||0,this.next().first(t+1)}isAccepted(){return!1}adjustedCaret(t,e,i){return e?this._adjustedForward(t,0,i):this._adjustedBackward(t,0,i)}_adjustedForward(){}_adjustedBackward(){}isValid(){}reset(){}clear(){}text(){}value(){}rawValue(){}handle(){}}class Ya extends Ga{next(){}handle(){return 0}text(){return""}value(){return""}first(){return 0}rawValue(){return""}adjustedCaret(){return 0}isValid(){return!0}}class Qa extends Ga{text(){return(" "!==this._value?this._value:this.maskChar)+this.next().text()}value(){return this._value+this.next().value()}rawValue(){return this._value+this.next().rawValue()}handle(t){const e=Object.prototype.hasOwnProperty.call(t,"value")?t.value:t.text;if(!e||!e.length||!t.length)return 0;if(t.start)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start-1}));const i=e[0],n=e.substring(1);return this._tryAcceptChar(i,t),this._accepted()?this.next().handle(this._prepareHandlingArgs(t,{str:n,length:t.length-1}))+1:this.handle(this._prepareHandlingArgs(t,{str:n,length:t.length-1}))}clear(t){this._tryAcceptChar(" ",t),this.next().clear(this._prepareHandlingArgs(t))}reset(){this._accepted(!1),this.next().reset()}_tryAcceptChar(t,e){if(this._accepted(!1),!this._isAllowed(t,e))return;const i=" "===t?this.maskChar:t;e.fullText=e.fullText.substring(0,e.index)+i+e.fullText.substring(e.index+1),this._accepted(!0),this._value=t}_accepted(t){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!t}first(t){return" "===this._value?t||0:super.first(t)}_isAllowed(t,e){return" "===t||this._isValid(t,e)}_isValid(t,e){const i=this.allowedChars;return i instanceof RegExp?i.test(t):(0,s.mf)(i)?i(t,e.index,e.fullText):Array.isArray(i)?i.includes(t):i===t}isAccepted(t){return 0===t?this._accepted():this.next().isAccepted(t-1)}_adjustedForward(t,e,i){return e>=t?e:this.next()._adjustedForward(t,e+1,i)||e+1}_adjustedBackward(t,e){return e>=t-1?t:this.next()._adjustedBackward(t,e+1)||e+1}isValid(t){return this._isValid(this._value,t)&&this.next().isValid(this._prepareHandlingArgs(t))}}class Xa extends Qa{value(){return this.next().value()}handle(t){const e=Object.prototype.hasOwnProperty.call(t,"value"),i=e?t.value:t.text;if(!i.length||!t.length)return 0;if(t.start||e)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start&&t.start-1}));const n=i[0],o=i.substring(1);this._tryAcceptChar(n);const r=this._isAllowed(n)?this._prepareHandlingArgs(t,{str:o,length:t.length-1}):t;return this.next().handle(r)+1}clear(t){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(t))}_tryAcceptChar(t){this._accepted(this._isValid(t))}_isValid(t){return t===this.maskChar}first(t){return t=t||0,this.next().first(t+1)}_adjustedForward(t,e,i){return e>=t&&i===this.maskChar?e:t===e+1&&this._accepted()?t:this.next()._adjustedForward(t,e+1,i)}_adjustedBackward(t,e){return e>=t-1?0:this.next()._adjustedBackward(t,e+1)}isValid(t){return this.next().isValid(this._prepareHandlingArgs(t))}}const Ja=ft.Z.down;class tl extends ja{_create(){const t=(0,o.Z)("<span>").addClass("dx-clear-button-area").append((0,o.Z)("<span>").addClass("dx-icon").addClass("dx-icon-clear"));return this._addToContainer(t),this.update(!0),{instance:t,$element:t}}_isVisible(){const{editor:t}=this;return t._isClearButtonVisible()}_attachEvents(t,e){const{editor:i}=this,n=i.NAME;P.Z.on(e,(0,f.addNamespace)(Ja,n),(t=>{t.preventDefault(),"mouse"!==t.pointerType&&i._clearValueHandler(t)})),P.Z.on(e,(0,f.addNamespace)(Kt.name,n),(t=>i._clearValueHandler(t)))}_legacyRender(t,e){t.toggleClass("dx-show-clear-button",e)}update(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&super.update();const{editor:t,instance:e}=this,i=t.$element(),n=this._isVisible();e&&e.toggleClass("dx-state-invisible",!n),this._legacyRender(i,n)}}class el extends ja{_attachEvents(t,e){const{editor:i}=this;P.Z.on(e,oo.B,(()=>{i.$element().addClass("dx-custom-button-hovered")})),P.Z.on(e,oo.u,(()=>{i.$element().removeClass("dx-custom-button-hovered")})),P.Z.on(e,Kt.name,(t=>{t.stopPropagation()}))}_create(){const{editor:t}=this,e=(0,o.Z)("<div>");return this._addToContainer(e),{$element:e,instance:t._createComponent(e,nr,(0,r.l)({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(t)}))}}_prepareIntegrationOptions(t){return(0,r.l)({},t.option("integrationOptions"),{skipTemplates:["content"]})}update(){const t=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),t}_isVisible(){const{editor:t}=this;return t.option("visible")}_isDisabled(){return void 0!==this.options.disabled?this.instance?this.instance.option("disabled"):this.options.disabled:this.editor.option("readOnly")}}function il(t,e){if(-1!==t.indexOf(e))throw G.Z.Error("E1055",e);t.push(e)}class nl{constructor(t,e){this.buttons=[],this.defaultButtonsInfo=e,this.editor=t}_compileButtonInfo(t){const e=[];return t.map((t=>{const i="string"==typeof t;var n,o;if(i||(n=t,(()=>{if(!n||"object"!=typeof n||Array.isArray(n))throw G.Z.Error("E1053")})(),(()=>{if(!("name"in n))throw G.Z.Error("E1054")})(),(()=>{const{name:t}=n;if("string"!=typeof t)throw G.Z.Error("E1055")})(),(()=>{const{location:t}=n;"location"in n&&"after"!==t&&"before"!==t&&(n.location="after")})()),i||(o=t.name,this.defaultButtonsInfo.find((t=>t.name===o)))){const i=this.defaultButtonsInfo.find((e=>{let{name:i}=e;return i===t||i===t.name}));if(!i)throw G.Z.Error("E1056",this.editor.NAME,t);return il(e,t),i}{const{name:i}=t;return il(e,i),(0,r.l)(t,{Ctor:el})}}))}_createButton(t){const{Ctor:e,options:i,name:n}=t,o=new e(n,this.editor,i);return this.buttons.push(o),o}_renderButtons(t,e,i){let n=null;return(t?this._compileButtonInfo(t):this.defaultButtonsInfo).forEach((t=>{const{location:r="after"}=t;r===i&&this._createButton(t).render((n=n||(0,o.Z)("<div>").addClass("dx-texteditor-buttons-container"),"before"===i?e.prepend(n):e.append(n),n))})),n}clean(){this.buttons.forEach((t=>t.dispose())),this.buttons=[]}getButton(t){const e=this.buttons.find((e=>{let{name:i}=e;return i===t}));return e&&e.instance}renderAfterButtons(t,e){return this._renderButtons(t,e,"after")}renderBeforeButtons(t,e){return this._renderButtons(t,e,"before")}updateButtons(t){this.buttons.forEach((e=>{t&&-1===t.indexOf(e.name)||e.update()}))}}const ol=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],rl=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"];let sl=class{constructor(t){this.NAME="dxLabel",this._props=t,this._id=`dx-texteditor-label-${new H.Z}`,this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&"hidden"!==this._props.mode}_render(){this._$before=(0,o.Z)("<div>").addClass("dx-label-before"),this._$labelSpan=(0,o.Z)("<span>"),this._$label=(0,o.Z)("<div>").addClass("dx-label").append(this._$labelSpan),this._$after=(0,o.Z)("<div>").addClass("dx-label-after"),this._$root=(0,o.Z)("<div>").addClass("dx-texteditor-label").attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){const t=this._isVisible();this._updateEditorBeforeButtonsClass(t),this._updateEditorLabelClass(t),t?this._$root.appendTo(this._props.$editor):this._$root.detach(),this._attachEvents()}_attachEvents(){const t=(0,f.addNamespace)(Kt.name,this.NAME),e=(0,f.addNamespace)(oo.B,this.NAME),i=(0,f.addNamespace)(no.bB,this.NAME);P.Z.off(this._$labelSpan,t),P.Z.off(this._$labelSpan,e),P.Z.off(this._$labelSpan,i),this._isVisible()&&this._isOutsideMode()&&(P.Z.on(this._$labelSpan,t,(t=>{""===(0,p.getWindow)().getSelection().toString()&&(this._props.onClickHandler(),t.preventDefault())})),P.Z.on(this._$labelSpan,e,(t=>{this._props.onHoverHandler(t)})),P.Z.on(this._$labelSpan,i,(t=>{this._props.onActiveHandler(t)})))}_updateEditorLabelClass(t){if(this._props.$editor.removeClass("dx-texteditor-with-floating-label").removeClass("dx-texteditor-label-outside").removeClass("dx-texteditor-with-label"),t){const t="floating"===this._props.mode?"dx-texteditor-with-floating-label":"dx-texteditor-with-label";this._props.$editor.addClass(t),this._isOutsideMode()&&this._props.$editor.addClass("dx-texteditor-label-outside")}}_isOutsideMode(){return"outside"===this._props.mode}_updateEditorBeforeButtonsClass(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible();if(this._props.$editor.removeClass("dx-texteditor-with-before-buttons"),t){const t=this._props.containsButtonsBefore?"dx-texteditor-with-before-buttons":"";this._props.$editor.addClass(t)}}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){if(this._isVisible()){const t=this._props.beforeWidth??this._props.getBeforeWidth();this._$before.css({width:t}),this._updateLabelTransform()}}_updateLabelTransform(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._$labelSpan.css("transform",""),this._isVisible()&&this._isOutsideMode()){const e=(this._props.rtlEnabled?1:-1)*((0,M.dz)(this._$before)+t);this._$labelSpan.css("transform",`translateX(${e}px)`)}}_updateMaxWidth(){if(this._isVisible()&&!this._isOutsideMode()){const t=this._props.containerWidth??this._props.getContainerWidth();this._$label.css({maxWidth:t})}}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(t){this._props.mode=t,this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateText(t){this._props.text=t,this._updateText(),this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateMark(t){this._props.mark=t,this._updateMark()}updateContainsButtonsBefore(t){this._props.containsButtonsBefore=t,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(t){this._props.beforeWidth=t,this._updateBeforeWidth()}updateMaxWidth(t){this._props.containerWidth=t,this._updateMaxWidth()}};function al(t){if((0,s.$K)(t)&&!Array.isArray(t))throw G.Z.Error("E1053")}const ll=U.inherit({ctor:function(t,e){e&&al(e.buttons),this._buttonCollection=new nl(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:function(t){return(0,s.$K)(t)&&!1!==t?t:""},stylingMode:(0,zo.default)().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){const t=(0,At.Vk)();return(0,At.x2)(t)},options:{labelMode:"floating",stylingMode:(0,zo.default)().editorStylingMode||"filled"}},{device:function(){const t=(0,At.Vk)();return(0,At.dC)(t)},options:{labelMode:"outside"}}])},_getDefaultButtons:function(){return[{name:"clear",Ctor:tl}]},_isClearButtonVisible:function(){return this.option("showClearButton")&&!this.option("readOnly")},_input:function(){return this.$element().find(".dx-texteditor-input").first()},_isFocused:function(){return(0,Zt.si)(this._input())||this.callBase()},_inputWrapper:function(){return this.$element()},_buttonsContainer:function(){return this._inputWrapper().find(".dx-texteditor-buttons-container").eq(0)},_isControlKey:function(t){return-1!==rl.indexOf(t)},_renderStylingMode:function(){this.callBase(),this._updateButtonsStyling(this.option("stylingMode"))},_initMarkup:function(){this.$element().addClass("dx-texteditor"),this._renderInput(),this._renderButtonContainers(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),this.callBase(),this._renderValue(),this._renderLabel()},_render:function(){this.callBase(),this._refreshValueChangeEvent(),this._renderEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()},_renderInput:function(){this._$textEditorContainer=(0,o.Z)("<div>").addClass("dx-texteditor-container").appendTo(this.$element()),this._$textEditorInputContainer=(0,o.Z)("<div>").addClass("dx-texteditor-input-container").appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput())},_getInputContainer(){return this._$textEditorInputContainer},_renderPendingIndicator:function(){this.$element().addClass("dx-validation-pending");const t=this._getInputContainer(),e=(0,o.Z)("<div>").addClass("dx-pending-indicator").appendTo(t);this._pendingIndicator=this._createComponent(e,ur.Z)},_disposePendingIndicator:function(){this._pendingIndicator&&(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass("dx-validation-pending"))},_renderValidationState:function(){this.callBase(),"pending"===this.option("validationStatus")?(!this._pendingIndicator&&this._renderPendingIndicator(),this._showValidMark=!1):("invalid"===this.option("validationStatus")&&(this._showValidMark=!1),this._showValidMark||!0!==this.option("showValidationMark")||(this._showValidMark="valid"===this.option("validationStatus")&&!!this._pendingIndicator),this._disposePendingIndicator()),this._toggleValidMark()},_getButtonsContainer(){return this._$textEditorContainer},_renderButtonContainers:function(){const t=this.option("buttons"),e=this._getButtonsContainer();this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(t,e),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(t,e)},_cleanButtonContainers:function(){var t,e;null===(t=this._$beforeButtonsContainer)||void 0===t||t.remove(),null===(e=this._$afterButtonsContainer)||void 0===e||e.remove(),this._buttonCollection.clean()},_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,this.callBase()},_createInput:function(){const t=(0,o.Z)("<input>");return this._applyInputAttributes(t,this.option("inputAttr")),t},_setSubmitElementName:function(t){const e=this.option("inputAttr.name");return this.callBase(t||e||"")},_applyInputAttributes:function(t,e){const i=(0,r.l)(this._getDefaultAttributes(),e);t.attr(i).addClass("dx-texteditor-input"),this._setInputMinHeight(t)},_setInputMinHeight:function(t){t.css("minHeight",this.option("height")?"0":"")},_getPlaceholderAttr(){const{ios:t,mac:e}=tt.default.real(),{placeholder:i}=this.option();return i||(t||e?" ":null)},_getDefaultAttributes(){return{autocomplete:"off",placeholder:this._getPlaceholderAttr()}},_updateButtons:function(t){this._buttonCollection.updateButtons(t)},_updateButtonsStyling:function(t){(0,g.each)(this.option("buttons"),((e,i)=>{let{options:n,name:o}=i;if(n&&!n.stylingMode&&this.option("visible")){const e=this.getButton(o);e.option&&e.option("stylingMode","underlined"===t?"text":"contained")}}))},_renderValue:function(){return this._renderInputValue().promise()},_renderInputValue:function(t){t=t??this.option("value");let e=this.option("text");const i=this.option("displayValue"),n=this.option("displayValueFormatter");return void 0!==i&&null!==t?e=n(i):(0,s.$K)(e)||(e=n(t)),this.option("text",e),this._input().val()!==((0,s.$K)(e)?e:"")?this._renderDisplayText(e):this._toggleEmptinessEventHandler(),(new w.BH).resolve()},_renderDisplayText:function(t){this._input().val(t),this._toggleEmptinessEventHandler()},_isValueValid:function(){if(this._input().length){const t=this._input().get(0).validity;if(t)return t.valid}return!0},_toggleEmptiness:function(t){this.$element().toggleClass("dx-texteditor-empty",t),this._togglePlaceholder(t)},_togglePlaceholder:function(t){this.$element().find(".dx-placeholder").eq(0).toggleClass("dx-state-invisible",!t)},_renderProps:function(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()},_toggleDisabledState:function(t){this.callBase.apply(this,arguments),this._input().prop("disabled",t)},_toggleTabIndex:function(){const t=this._input(),e=this.option("disabled"),i=this.option("focusStateEnabled");e||!i?t.attr("tabIndex",-1):t.removeAttr("tabIndex")},_toggleReadOnlyState:function(){this._input().prop("readOnly",this._readOnlyPropValue()),this.callBase()},_readOnlyPropValue:function(){return this.option("readOnly")},_toggleSpellcheckState:function(){this._input().prop("spellcheck",this.option("spellcheck"))},_unobserveLabelContainerResize:function(){this._labelContainerElement&&(Ds.Z.unobserve(this._labelContainerElement),this._labelContainerElement=null)},_getLabelContainer:function(){return this._input()},_getLabelContainerWidth:function(){return(0,M.dz)(this._getLabelContainer())},_getLabelBeforeWidth:function(){return(this._$beforeButtonsContainer&&(0,M.dz)(this._$beforeButtonsContainer))??0},_updateLabelWidth:function(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())},_getFieldElement(){return this._getLabelContainer()},_setFieldAria(t){var e;const i=this.option("inputAttr"),n=null==i?void 0:i["aria-label"],o=null===(e=this._label)||void 0===e?void 0:e.getId(),r=n?void 0:o;if(r||t){const t={labelledby:r,label:n};this.setAria(t,this._getFieldElement())}},_renderLabel:function(){this._unobserveLabelContainerResize(),this._labelContainerElement=(0,o.Z)(this._getLabelContainer()).get(0);const{label:t,labelMode:e,labelMark:i,rtlEnabled:n}=this.option(),r={onClickHandler:()=>{this.focus()},onHoverHandler:t=>{t.stopPropagation()},onActiveHandler:t=>{t.stopPropagation()},$editor:this.$element(),text:t,mark:i,mode:e,rtlEnabled:n,containsButtonsBefore:!!this._$beforeButtonsContainer,getContainerWidth:()=>this._getLabelContainerWidth(),getBeforeWidth:()=>this._getLabelBeforeWidth()};this._label=new sl(r),this._setFieldAria(),this._labelContainerElement&&Ds.Z.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))},_renderPlaceholder:function(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()},_renderPlaceholderMarkup:function(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);const t=this._input(),e=this.option("placeholder"),i={id:e?`dx-${new H.Z}`:void 0,"data-dx_placeholder":e},n=this._$placeholder=(0,o.Z)("<div>").attr(i);n.insertAfter(t),n.addClass("dx-placeholder")},_attachPlaceholderEvents:function(){const t=(0,f.addNamespace)(ft.Z.up,this.NAME);P.Z.on(this._$placeholder,t,(()=>{P.Z.trigger(this._input(),"focus")})),this._toggleEmptinessEventHandler()},_placeholder:function(){return this._$placeholder||(0,o.Z)()},_clearValueHandler:function(t){const e=this._input();t.stopPropagation(),this._saveValueChangeEvent(t),this._clearValue(),!this._isFocused()&&P.Z.trigger(e,"focus"),P.Z.trigger(e,"input")},_clearValue:function(){this.clear()},_renderEvents:function(){const t=this._input();(0,g.each)(ol,((e,i)=>{if(this.hasActionSubscription("on"+i)){const e=this._createActionByOption("on"+i,{excludeValidators:["readOnly"]});P.Z.on(t,(0,f.addNamespace)(i.toLowerCase(),this.NAME),(t=>{this._disposed||e({event:t})}))}}))},_refreshEvents:function(){const t=this._input();(0,g.each)(ol,((e,i)=>{P.Z.off(t,(0,f.addNamespace)(i.toLowerCase(),this.NAME))})),this._renderEvents()},_keyPressHandler:function(){this.option("text",this._input().val())},_keyDownHandler:function(t){const e=this._input(),i=t.ctrlKey&&"enter"===(0,f.normalizeKeyName)(t),n=e.val()!==this.option("value");i&&n&&P.Z.trigger(e,"change")},_getValueChangeEventOptionName:function(){return"valueChangeEvent"},_renderValueChangeEvent:function(){const t=(0,f.addNamespace)(this._renderValueEventName(),`${this.NAME}TextChange`),e=(0,f.addNamespace)(this.option(this._getValueChangeEventOptionName()),`${this.NAME}ValueChange`),i=(0,f.addNamespace)("keydown",`${this.NAME}TextChange`),n=this._input();P.Z.on(n,t,this._keyPressHandler.bind(this)),P.Z.on(n,e,this._valueChangeEventHandler.bind(this)),P.Z.on(n,i,this._keyDownHandler.bind(this))},_cleanValueChangeEvent:function(){const t=`.${this.NAME}ValueChange`,e=`.${this.NAME}TextChange`;P.Z.off(this._input(),t),P.Z.off(this._input(),e)},_refreshValueChangeEvent:function(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()},_renderValueEventName:function(){return"input change keypress"},_focusTarget:function(){return this._input()},_focusEventTarget:function(){return this.element()},_isInput:function(t){return t===this._input().get(0)},_preventNestedFocusEvent:function(t){if(t.isDefaultPrevented())return!0;let e=this._isNestedTarget(t.relatedTarget);return"focusin"===t.type?e=e&&this._isNestedTarget(t.target)&&!this._isInput(t.target):e||this._toggleFocusClass(!1,this.$element()),e&&t.preventDefault(),e},_isNestedTarget:function(t){return!!this.$element().find(t).length},_focusClassTarget:function(){return this.$element()},_focusInHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_focusOutHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_toggleFocusClass:function(t,e){this.callBase(t,this._focusClassTarget(e))},_hasFocusClass:function(t){return this.callBase((0,o.Z)(t||this.$element()))},_renderEmptinessEvent:function(){const t=this._input();P.Z.on(t,"input blur",this._toggleEmptinessEventHandler.bind(this))},_toggleEmptinessEventHandler:function(){const t=this._input().val(),e=(""===t||null===t)&&this._isValueValid();this._toggleEmptiness(e)},_valueChangeEventHandler:function(t,e){this.option("readOnly")||(this._saveValueChangeEvent(t),this.option("value",arguments.length>1?e:this._input().val()),this._saveValueChangeEvent(void 0))},_renderEnterKeyAction:function(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),P.Z.off(this._input(),"keyup.onEnterKey.dxTextEditor"),P.Z.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))},_enterKeyHandlerUp:function(t){this._disposed||"enter"===(0,f.normalizeKeyName)(t)&&this._enterKeyAction({event:t})},_updateValue:function(){this._options.silent("text",null),this._renderValue()},_dispose:function(){this._enterKeyAction=void 0,this.callBase()},_getSubmitElement:function(){return this._input()},_hasActiveElement:function(){return this._input().is(Mt.Z.getActiveElement(this._input()[0]))},_optionChanged:function(t){const{name:e,fullName:i,value:n}=t,o=e.replace("on","");if(ol.includes(o))this._refreshEvents();else switch(e){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":this.callBase(t),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder(),this._setFieldAria(!0),this._input().attr({placeholder:this._getPlaceholderAttr()});break;case"label":this._label.updateText(n),this._setFieldAria(!0);break;case"labelMark":this._label.updateMark(n);break;case"labelMode":this._label.updateMode(n),this._setFieldAria();break;case"width":this.callBase(t),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),this.callBase(t);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":case"showValidationMark":break;case"value":this._updateValue(),this.callBase(t);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(e));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":i===e&&al(n),this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break;case"visible":this.callBase(t),n&&this.option("buttons")&&(this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")));break;case"displayValueFormatter":this._invalidate();break;default:this.callBase(t)}},_renderInputType:function(){this._setInputType(this.option("mode"))},_setInputType:function(t){const e=this._input();"search"===t&&(t="text");try{e.prop("type",t)}catch(t){e.prop("type","text")}},getButton(t){return this._buttonCollection.getButton(t)},focus:function(){P.Z.trigger(this._input(),"focus")},clear:function(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());const t=this._getDefaultOptions();this.option("value")===t.value?(this._options.silent("text",""),this._renderValue()):this.option("value",t.value)},_resetToInitialValue(){this.option("value")===this._initialValue?(this._options.silent("text",this._initialValue),this._renderValue()):this.callBase(),this._disposePendingIndicator(),this._showValidMark=!1,this._toggleValidMark()},_toggleValidMark(){this.$element().toggleClass("dx-valid",!!this._showValidMark)},reset:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;arguments.length?this.callBase(t):this.callBase()},on:function(t,e){const i=this.callBase(t,e),n=t.charAt(0).toUpperCase()+t.substr(1);return ol.indexOf(n)>=0&&this._refreshEvents(),i}}),cl=ll,ul=["deleteContentBackward","deleteSoftLineBackward","deleteContent","deleteHardLineBackward"],dl=["historyUndo","historyRedo"],hl=["focusIn","focusOut","input","paste","cut","drop","beforeInput"];function pl(t){return" ".repeat(t)}class fl{constructor(t){this.editor=t}_editorOption(){return this.editor.option(...arguments)}_editorInput(){return this.editor._input()}_editorCaret(t){if(!t)return this.editor._caret();this.editor._caret(t)}_attachChangeEventHandler(){if(!this._editorOption("valueChangeEvent").split(" ").includes("change"))return;const t=this._editorInput(),e=(0,f.addNamespace)("blur beforedeactivate","dxMask");P.Z.on(t,e,(t=>{this.editor._changeHandler(t)}))}_beforeInputHandler(){this._previousText=this._editorOption("text"),this._prevCaret=this._editorCaret()}_inputHandler(t){const{originalEvent:e}=t;if(!e)return;const{inputType:i}=e;if(dl.includes(i))this._handleHistoryInputEvent();else if(ul.includes(i))this._handleBackwardDeleteInputEvent();else{const t=this._editorCaret();if(!t.end)return;this._clearSelectedText(),this._autoFillHandler(e),this._editorCaret(t),this._handleInsertTextInputEvent(e.data)}this._editorOption("text")===this._previousText&&t.stopImmediatePropagation()}_handleHistoryInputEvent(){const t=this._editorCaret();this._updateEditorMask({start:t.start,length:t.end-t.start,text:""}),this._editorCaret(this._prevCaret)}_handleBackwardDeleteInputEvent(){this._clearSelectedText();const t=this._editorCaret();this.editor.setForwardDirection(),this.editor._adjustCaret(),this._editorCaret().start!==t.start&&(this.editor.setBackwardDirection(),this.editor._adjustCaret())}_clearSelectedText(){var t,e;const i=(null===(t=this._prevCaret)||void 0===t?void 0:t.end)-(null===(e=this._prevCaret)||void 0===e?void 0:e.start)||1,n=this._editorCaret();this._isAutoFill()||(this.editor.setBackwardDirection(),this._updateEditorMask({start:n.start,length:i,text:pl(i)}))}_handleInsertTextInputEvent(t){var e;const i=t??"";this.editor.setForwardDirection(),this._updateEditorMask({start:(null===(e=this._prevCaret)||void 0===e?void 0:e.start)??0,length:i.length||1,text:i})||this._editorCaret(this._prevCaret)}_updateEditorMask(t){const e=t.text.length,i=this.editor._handleChain(t);if(this.editor._displayMask(),this.editor.isForwardDirection()){const{start:t,end:n}=this._editorCaret(),o=i-e;i>1&&1===e&&this._editorCaret({start:t+o,end:n+o}),this.editor._adjustCaret()}return!!i}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor.setForwardDirection(),!this.editor._isValueEmpty()&&this._editorOption("isValid"))this.editor._adjustCaret();else{const t=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout((()=>{this._editorCaret({start:t,end:t})}),0)}}_focusOutHandler(t){this.editor._changeHandler(t),"onFocus"===this._editorOption("showMaskMode")&&this.editor._isValueEmpty()&&(this._editorOption("text",""),this.editor._renderDisplayText(""))}_delHandler(t){const{editor:e}=this;e._maskKeyHandler(t,(()=>{e._hasSelection()||e._handleKey(" ")}))}_cutHandler(t){const e=this._editorCaret(),i=this._editorInput().val().substring(e.start,e.end);this.editor._maskKeyHandler(t,(()=>(0,L.clipboardText)(t,i)))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout((()=>{const t=this.editor._convertToValue(this._editorInput().val());this._editorOption("value",t)}))}_pasteHandler(t){const{editor:e}=this;if(this._editorOption("disabled"))return;const i=this._editorCaret();e._maskKeyHandler(t,(()=>{const n=(0,L.clipboardText)(t),o=e._maskRulesChain.text().substring(i.end),r=e._handleChain({text:n,start:i.start,length:n.length}),s=i.start+r;e._handleChain({text:o,start:s,length:o.length}),e._caret({start:s,end:s})}))}_autoFillHandler(t){const{editor:e}=this,i=this._editorInput().val();this._inputHandlerTimer=setTimeout((()=>{this._isAutoFill()&&(e._maskKeyHandler(t,(()=>{e._handleChain({text:i,start:0,length:i.length})})),e._validateMask())}))}_isAutoFill(){const t=this._editorInput();if(Ur.default.webkit){const e=t.get(0);return(null==e?void 0:e.matches(":-webkit-autofill"))??!1}return!1}_clearDragTimer(){clearTimeout(this._dragTimer)}_clearTimers(){this._clearDragTimer(),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}getHandler(t){return e=>{var i;null===(i=this[`_${t}Handler`])||void 0===i||i.call(this,e)}}attachEvents(){const t=this._editorInput();hl.forEach((e=>{const i=(0,f.addNamespace)(e.toLowerCase(),"dxMask");P.Z.on(t,i,this.getHandler(e))})),this._attachChangeEventHandler()}detachEvents(){this._clearTimers(),P.Z.off(this._editorInput(),".dxMask")}clean(){this._clearTimers()}}const _l=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t=(0,o.Z)(t).get(0),!(0,s.$K)(e))return function(t){let e;try{e={start:t.selectionStart,end:t.selectionEnd}}catch(t){e={start:0,end:0}}return e}(t);!i&&qa&&Mt.Z.getActiveElement(t)!==t||function(t,e){const i=Mt.Z.getBody();if(i.contains(t)||i.contains(t.getRootNode().host))try{t.selectionStart=e.start,t.selectionEnd=e.end}catch(t){}}(t,e)},ml={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:function(t){return vl(t)},l:function(t){return vl(t)||bl(t)},C:/\S/,c:/./,A:function(t){return vl(t)||gl(t)},a:function(t){return vl(t)||gl(t)||bl(t)}};function gl(t){return/[0-9]/.test(t)}function vl(t){const e=t.charCodeAt();return 64<e&&e<91||96<e&&e<123||e>127}function bl(t){return" "===t}const yl=cl.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:C.Z.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})},_supportedKeys:function(){const t=this,e={del:t._maskStrategy.getHandler("del"),enter:t._changeHandler},i=t.callBase();return(0,g.each)(e,(function(e,n){const o=i[e];i[e]=function(e){t.option("mask")&&n.call(t,e),o&&o(e)}})),i},_getSubmitElement:function(){return this.option("mask")?this._$hiddenElement:this.callBase()},_init:function(){this.callBase(),this._initMaskStrategy()},_initMaskStrategy:function(){this._maskStrategy=new fl(this)},_initMarkup:function(){this._renderHiddenElement(),this.callBase()},_attachMouseWheelEventHandlers:function(){if(this._onMouseWheel===l.noop)return;const t=this._input(),e=(0,f.addNamespace)(Ua.u,this.NAME),i=this._createAction(function(e){const{event:i}=e;(0,Zt.si)(t)&&!(0,f.isCommandKeyPressed)(i)&&(this._onMouseWheel(i),i.preventDefault(),i.stopPropagation())}.bind(this));P.Z.off(t,e),P.Z.on(t,e,(function(t){i({event:t})}))},_onMouseWheel:l.noop,_useMaskBehavior(){return Boolean(this.option("mask"))},_attachDropEventHandler(){if(!this._useMaskBehavior())return;const t=(0,f.addNamespace)("drop",this.NAME),e=this._input();P.Z.off(e,t),P.Z.on(e,t,(t=>t.preventDefault()))},_render(){this._attachMouseWheelEventHandlers(),this._renderMask(),this.callBase(),this._attachDropEventHandler()},_renderHiddenElement:function(){this.option("mask")&&(this._$hiddenElement=(0,o.Z)("<input>").attr("type","hidden").appendTo(this._inputWrapper()))},_removeHiddenElement:function(){this._$hiddenElement&&this._$hiddenElement.remove()},_renderMask:function(){this.$element().removeClass("dx-texteditor-masked"),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass("dx-texteditor-masked"),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())},_changeHandler:function(t){const e=this._input(),i=e.val();if(i===this._changedValue)return;this._changedValue=i;const n=(0,f.createEvent)(t,{type:"change"});P.Z.trigger(e,n)},_parseMask:function(){this._maskRules=(0,r.l)({},ml,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)},_parseMaskRule:function(t){const e=this.option("mask");if(t>=e.length)return new Ya;const i=e[t],n="\\"===i,o=n?new Xa({maskChar:e[t+1]}):this._getMaskRule(i);return o.next(this._parseMaskRule(t+1+n)),o},_getMaskRule:function(t){let e;return(0,g.each)(this._maskRules,(function(i,n){if(i===t)return e={pattern:i,allowedChars:n},!1})),(0,s.$K)(e)?new Qa((0,r.l)({maskChar:this.option("maskChar")||" "},e)):new Xa({maskChar:t})},_renderMaskedValue:function(){if(!this._maskRulesChain)return;const t=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());const e={length:t.length};e[this._isMaskedValueMode()?"text":"value"]=t,this._handleChain(e),this._displayMask()},_replaceSelectedText:function(t,e,i){return void 0===i?t:t.slice(0,e.start)+i+t.slice(e.end)},_isMaskedValueMode:function(){return this.option("useMaskedValue")},_displayMask:function(t){t=t||this._caret(),this._renderValue(),this._caret(t)},_isValueEmpty:function(){return(0,N.isEmpty)(this._value)},_shouldShowMask:function(){return"onFocus"!==this.option("showMaskMode")||(0,Zt.si)(this._input())||!this._isValueEmpty()},_showMaskPlaceholder:function(){if(this._shouldShowMask()){const t=this._maskRulesChain.text();this.option("text",t),"onFocus"===this.option("showMaskMode")&&this._renderDisplayText(t)}},_renderValue:function(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){const t=this._maskRulesChain.value(),e=(0,N.isEmpty)(t)?"":this._getPreparedValue();this._$hiddenElement.val(e)}return this.callBase()},_getPreparedValue:function(){return this._convertToValue().replace(/\s+$/,"")},_valueChangeEventHandler:function(t){this._maskRulesChain?(this._saveValueChangeEvent(t),this.option("value",this._getPreparedValue())):this.callBase.apply(this,arguments)},_isControlKeyFired:function(t){return this._isControlKey((0,f.normalizeKeyName)(t))||(0,f.isCommandKeyPressed)(t)},_handleChain:function(t){const e=this._maskRulesChain.handle(this._normalizeChainArguments(t));return this._updateMaskInfo(),e},_normalizeChainArguments:function(t){return(t=t||{}).index=0,t.fullText=this._maskRulesChain.text(),t},_convertToValue:function(t){return this._isMaskedValueMode()?this._replaceMaskCharWithEmpty(t||this._textValue||""):t||this._value||""},_replaceMaskCharWithEmpty:function(t){return t.replace(new RegExp(this.option("maskChar"),"g")," ")},_maskKeyHandler:function(t,e){if(this.option("readOnly"))return;this.setForwardDirection(),t.preventDefault(),this._handleSelection();const i=this._input().val(),n=()=>{i!==this._input().val()&&P.Z.trigger(this._input(),"input")},o=e();o?o.then(n):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),n())},_handleKey:function(t,e){this._direction(e||"forward"),this._adjustCaret(t),this._handleKeyChain(t),this._moveCaret()},_handleSelection:function(){if(!this._hasSelection())return;const t=this._caret(),e=new Array(t.end-t.start+1).join(" ");this._handleKeyChain(e)},_handleKeyChain:function(t){const e=this._caret(),i=this.isForwardDirection()?e.start:e.start-1,n=this.isForwardDirection()?e.end:e.end-1,o=i===n?1:n-i;this._handleChain({text:t,start:i,length:o})},_tryMoveCaretBackward:function(){this.setBackwardDirection();const t=this._caret().start;return this._adjustCaret(),!t||t!==this._caret().start},_adjustCaret:function(t){const e=this._caret().start,i=this.isForwardDirection(),n=this._maskRulesChain.adjustedCaret(e,i,t);this._caret({start:n,end:n})},_moveCaret:function(){const t=this._caret().start,e=t+(this.isForwardDirection()?0:-1),i=this._maskRulesChain.isAccepted(e)?t+(this.isForwardDirection()?1:-1):t;this._caret({start:i,end:i})},_caret:function(t,e){const i=this._input();if(i.length)return arguments.length?void _l(i,t,e):_l(i)},_hasSelection:function(){const t=this._caret();return t.start!==t.end},_direction:function(t){if(!arguments.length)return this._typingDirection;this._typingDirection=t},setForwardDirection:function(){this._direction("forward")},setBackwardDirection:function(){this._direction("backward")},isForwardDirection:function(){return"forward"===this._direction()},_updateMaskInfo(){this._textValue=this._maskRulesChain.text(),this._value=this._maskRulesChain.value()},_clean:function(){this._maskStrategy&&this._maskStrategy.clean(),this.callBase()},_validateMask:function(){if(!this._maskRulesChain)return;const t=(0,N.isEmpty)(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:t,validationError:t?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})},_updateHiddenElement:function(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement()),this._setSubmitElementName(this.option("name"))},_updateMaskOption:function(){this._updateHiddenElement(),this._renderMask(),this._validateMask(),this._refreshValueChangeEvent()},_processEmptyMask:function(t){if(t)return;const e=this.option("value");this.option({text:e,isValid:!0,validationError:null}),this.validationRequest.fire({value:e,editor:this}),this._renderValue()},_optionChanged:function(t){switch(t.name){case"mask":this._updateMaskOption(),this._processEmptyMask(t.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),this.callBase(t),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:this.callBase(t)}},clear:function(){const{value:t}=this._getDefaultOptions();this.option("value")===t&&this._renderMaskedValue(),this.callBase()}}),Cl=yl;(0,c.default)("dxTextEditor",Cl);const wl=Cl,xl=(0,p.getWindow)(),Sl=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],Il=wl.inherit({ctor:function(t,e){e&&(this._showClearButton=e.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup:function(){this.$element().addClass("dx-textbox"),this.callBase(),this.setAria("role","textbox")},_renderInputType:function(){this.callBase(),this._renderSearchMode()},_useTemplates:function(){return!1},_renderProps:function(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp:function(){const t=this._getMaxLength();t&&t>0?this._input().attr("maxLength",t):this._input().removeAttr("maxLength")},_renderSearchMode:function(){const t=this._$element;"search"===this.option("mode")?(t.addClass("dx-searchbox"),this._renderSearchIcon(),void 0===this._showClearButton&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(t.removeClass("dx-searchbox"),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",void 0===this._showClearButton?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon:function(){const t=(0,o.Z)("<div>").addClass("dx-icon").addClass("dx-icon-search");t.prependTo(this._input().parent()),this._$searchIcon=t},_getLabelContainerWidth:function(){if(this._$searchIcon){const t=this._input().parent();return(0,M.dz)(t)-this._getLabelBeforeWidth()}return this.callBase()},_getLabelBeforeWidth:function(){let t=this.callBase();return this._$searchIcon&&(t+=(0,M.Y_)(this._$searchIcon)),t},_optionChanged:function(t){switch(t.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":this.callBase(t),this._updateLabelWidth();break;case"mask":this.callBase(t),this._toggleMaxLengthProp();break;default:this.callBase(t)}},_onKeyDownCutOffHandler:function(t){const e=this._getMaxLength();if(!e||t.ctrlKey||this._hasSelection())return!0;{const i=(0,o.Z)(t.target),n=(0,f.normalizeKeyName)(t);return this._cutOffExtraChar(i),i.val().length<e||Sl.includes(n)||""!==xl.getSelection().toString()}},_onChangeCutOffHandler:function(t){const e=(0,o.Z)(t.target);this.option("maxLength")&&this._cutOffExtraChar(e)},_cutOffExtraChar:function(t){const e=this._getMaxLength(),i=t.val();e&&i.length>e&&t.val(i.substr(0,e))},_getMaxLength:function(){return this.option("mask")?null:this.option("maxLength")}});(0,c.default)("dxTextBox",Il);const kl=Il;var El=i(7207);const Ol=function(t){if((0,p.hasWindow)())return(0,M.Y_)(t)},Tl=function(t){return null===t&&(t=void 0),"function"==typeof t&&(t=t()),t},Dl="dx-dropdowneditor-overlay",Bl="ios"===tt.default.current().platform,Al=kl.inherit({_supportedKeys:function(){return(0,r.l)({},this.callBase(),{tab:function(t){if(!this.option("opened"))return;if(!this._popup.getFocusableElements().length)return void this.close();const e=t.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();e&&(P.Z.trigger(e,"focus"),e.select()),t.preventDefault()},escape:function(t){return this.option("opened")&&t.preventDefault(),this.close(),!0},upArrow:function(t){return!(!(0,f.isCommandKeyPressed)(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)&&(this.close(),1))},downArrow:function(t){return!(!(0,f.isCommandKeyPressed)(t)&&(t.preventDefault(),t.stopPropagation(),t.altKey)&&(this._validatedOpening(),1))},enter:function(t){return this.option("opened")&&(t.preventDefault(),this._valueChangeEventHandler(t)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:za}])},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:C.Z.format("OK"),cancelButtonText:C.Z.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(t){const e=(0,$.q)(t);return{offset:{h:0,v:-1},my:e+" top",at:e+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(t){return"generic"===t.platform},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find(".dx-dropdowneditor-input-wrapper").first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(t){const{my:e,at:i}=this._getDefaultPopupPosition(t),n=this.option("popupPosition");this.option("popupPosition",(0,r.l)({},n,{my:e,at:i}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role",this._getAriaRole())},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._renderTemplateWrapper(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner((0,o.Z)("<div>").addClass("dx-dropdowneditor-input-wrapper")).children().eq(0)},_getAriaHasPopup:()=>"true",_getAriaAutocomplete:()=>"none",_getAriaRole:()=>"combobox",_setDefaultAria:function(){this.setAria({haspopup:this._getAriaHasPopup(),autocomplete:this._getAriaAutocomplete(),role:this._getAriaRole()})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){const t=this._getFieldTemplate();t&&this._renderTemplatedField(t,this._fieldRenderData())},_renderPlaceholder:function(){this._getFieldTemplate()||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_getButtonsContainer(){return this._getFieldTemplate()?this._$container:this._$textEditorContainer},_renderTemplateWrapper(){this._getFieldTemplate()&&(this._$templateWrapper||(this._$templateWrapper=(0,o.Z)("<div>").addClass("dx-dropdowneditor-field-template-wrapper").prependTo(this.$element())))},_renderTemplatedField:function(t,e){const i=(0,Zt.si)(this._input());this._detachKeyboardEvents(),this._detachFocusEvents(),this._$textEditorContainer.remove(),this._$templateWrapper.empty();const n=this._$templateWrapper;t.render({model:e,container:(0,a.u)(n),onRendered:()=>{if(!this.$element().find(n).length)return;const t=this._input();if(!t.length)throw G.Z.Error("E1010");this._integrateInput(),i&&P.Z.trigger(t,"focus")}})},_integrateInput:function(){var t;this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent(),this._setDefaultAria(),this._setFieldAria(),null===(t=this.option("_onMarkupRendered"))||void 0===t||t()},_refreshEmptinessEvent:function(){P.Z.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new El.k((function(t){const e=(0,o.Z)("<div>").addClass("dx-dropdowneditor-icon");(0,o.Z)(t.container).append(e)}))}),this.callBase()},_renderOpenHandler:function(){const t=this._inputWrapper(),e=(0,f.addNamespace)(Kt.name,this.NAME),i=this.option("openOnFieldClick");P.Z.off(t,e),P.Z.on(t,e,this._getInputClickHandler(i)),this.$element().toggleClass("dx-dropdowneditor-field-clickable",i),i&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){Bl&&(this._detachFocusOutEvents(),P.Z.on(this._inputWrapper(),(0,f.addNamespace)("focusout",this.NAME),(t=>{const e=t.relatedTarget;e&&this.option("opened")&&this._isTargetOutOfComponent(e)&&this.close()})))},_isTargetOutOfComponent:function(t){const e=this.content?(0,o.Z)(this.content()).closest(`.${Dl}`):this._$popup;return 0===(0,o.Z)(t).closest(`.${Dl}`,e).length},_detachFocusOutEvents:function(){Bl&&P.Z.off(this._inputWrapper(),(0,f.addNamespace)("focusout",this.NAME))},_getInputClickHandler:function(t){return t?t=>{this._executeOpenAction(t)}:t=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(t){this._openOnFieldClickAction({event:t})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!(0,Zt.si)(this._input())&&(this._resetCaretPosition(),P.Z.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=this._input().get(0);if(e){const{value:i}=e,n=(0,s.$K)(i)&&(t||this._isEditable())?i.length:0;this._caret({start:n,end:n},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(t){this._focusInput()&&(this.option("readOnly")||(t=arguments.length?t:!this.option("opened"),this.option("opened",t)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState:function(){const t=this.option("opened");t&&this._createPopup(),this.$element().toggleClass("dx-dropdowneditor-active",t),this._setPopupOption("visible",t);const e={expanded:t,controls:this._getControlsAria()};this.setAria(e),this.setAria("owns",t?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=(0,o.Z)("<div>").addClass(Dl).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent(),this._setPopupAriaLabel())},_setPopupAriaLabel(){const t=this._popup.$overlayContent();this.setAria("label","Dropdown",t)},_renderPopupContent:l.noop,_renderPopup:function(){const t=(0,r.l)(this._popupConfig(),this._options.cache("dropDownOptions"));delete t.closeOnOutsideClick,this._popup=this._createComponent(this._$popup,js,t),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_attachPopupKeyHandler(){P.Z.on(this._popup.$overlayContent(),(0,f.addNamespace)("keydown",this.NAME),(t=>this._popupKeyHandler(t)))},_popupKeyHandler(t){switch((0,f.normalizeKeyName)(t)){case"tab":this._popupTabHandler(t);break;case"escape":this._popupEscHandler(t)}},_popupTabHandler(t){const e=(0,o.Z)(t.target),i=t.shiftKey&&e.is(this._getFirstPopupElement());(!t.shiftKey&&e.is(this._getLastPopupElement())||i)&&(P.Z.trigger(this.field(),"focus"),t.preventDefault())},_popupEscHandler(){P.Z.trigger(this._input(),"focus"),this.close()},_setPopupContentId(t){this._popupContentId="dx-"+new H.Z,this.setAria("id",this._popupContentId,t)},_contentReadyHandler:l.noop,_popupConfig:function(){return{onInitialized:this._getPopupInitializedHandler(),position:(0,r.l)(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>Ol(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:t=>this._closeOutsideDropDownHandler(t),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:Dl,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:l.noop,_getPopupInitializedHandler:function(){const t=this.option("onPopupInitialized");return e=>{this._popupInitializedHandler(e),t&&this._popupInitializedAction({popup:e.component})}},_dimensionChanged:function(){!(0,p.hasWindow)()||this.$element().is(":visible")?this._updatePopupWidth():this.close()},_updatePopupWidth:function(){void 0===Tl(this.option("dropDownOptions.width"))&&this._setPopupOption("width",(()=>Ol(this.$element())))},_popupPositionedHandler:function(t){var e;const{labelMode:i,stylingMode:n}=this.option();if(!this._popup)return;const o=this._popup.$overlayContent(),r=null===(e=t.position)||void 0===e||null===(e=e.v)||void 0===e?void 0:e.flip,s="hidden"!==i&&"outside"!==i&&"outlined"===n;if(t.position&&o.toggleClass("dx-dropdowneditor-overlay-flipped",r),r&&s&&this._label.isVisible()){const t=this._label.$element();(0,hr.pB)(o,{top:(0,hr.jt)(o).top-parseInt(t.css("fontSize"))})}},_popupShowingHandler:l.noop,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var t;this._openAction(),null===(t=this._validationMessage)||void 0===t||t.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler:function(){var t;this._closeAction(),null===(t=this._validationMessage)||void 0===t||t.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide:function(){const t=this.option("validationMessagePosition");if("auto"!==t)return t;let e="bottom";if(this._popup&&this._popup.option("visible")){const{top:t}=La.Z.setup(this.$element()),{top:i}=La.Z.setup(this._popup.$content());e=t+this.option("popupPosition").offset.v>i?"bottom":"top"}return e},_closeOutsideDropDownHandler:function(t){let{target:e}=t;const i=(0,o.Z)(e),n=this.getButton("dropDown"),r=n&&n.$element(),s=!!i.closest(this.$element()).length,a=!!i.closest(r).length;return!s&&!a},_clean:function(){delete this._openOnFieldClickAction,delete this._$templateWrapper,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(t,e){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return"useButtons"===this.option("applyValueMode")?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return(0,o.Z)(this._popup.getFocusableElements()).first()},_getLastPopupElement:function(){return(0,o.Z)(this._popup.getFocusableElements()).last()},_popupToolbarItemsConfig:function(){const t=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(t)},_applyButtonsLocation:function(t){const e=this.option("buttonsLocation"),i=t;if("default"!==e){const t=(0,l.splitPair)(e);(0,g.each)(i,(function(e,i){(0,r.l)(i,{toolbar:t[0],location:t[1]})}))}return i},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(t){const e=_.default.getOptionsFromContainer(t);this._setPopupOption(e);const i=Object.keys(e);-1===i.indexOf("width")&&-1===i.indexOf("height")||this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=(0,o.Z)("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(t){var e;switch(t.name){case"width":case"height":this.callBase(t),null===(e=this._popup)||void 0===e||e.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(t),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":(0,p.hasWindow)()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(t.value),this.callBase(t);break;default:this.callBase(t)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return(0,a.u)(this._input())},content:function(){return this._popup?this._popup.content():null}});(0,c.default)("dxDropDownEditor",Al);const Pl=Al;var Ml=i(7985);const Rl=function(t){return(t.group<<20)+t.item},Nl=function(t){return{group:t>>20,item:1048575&t}},$l=le.inherit({_groupElements:function(){return this._collectionWidget._itemContainer().find(".dx-list-group")},_groupItemElements:function(t){return t.find(".dx-list-item")},getIndexByItemData:function(t){const e=this._collectionWidget.option("items");let i=!1;return!!t&&(t.items&&t.items.length&&(t=t.items[0]),(0,g.each)(e,(function(e,n){return!!n.items&&((0,g.each)(n.items,(function(n,o){return o!==t||(i={group:e,item:n},!1)})),!i&&void 0)})),i)},getItemDataByIndex:function(t){const e=this._collectionWidget.option("items");return(0,s.kE)(t)?this.itemsGetter()[t]:t&&e[t.group]&&e[t.group].items[t.item]||null},itemsGetter:function(){let t=[];const e=this._collectionWidget.option("items");for(let i=0;i<e.length;i++)e[i]&&e[i].items?t=t.concat(e[i].items):t.push(e[i]);return t},deleteItemAtIndex:function(t){const e=Nl(t);this._collectionWidget.option("items")[e.group].items.splice(e.item,1)},getKeysByItems:function(t){let e,i=[];for(e=0;e<t.length;e++)t[e]&&t[e].items?i=i.concat(t[e].items):i.push(t[e]);const n=[];for(e=0;e<i.length;e++)n.push(this._collectionWidget.keyOf(i[e]));return n},getIndexByKey:function(t,e){const i=e||this._collectionWidget.option("items");let n=-1;const o=this;return(0,g.each)(i,(function(e,i){if(i.items)return(0,g.each)(i.items,(function(i,r){const s=o._collectionWidget.keyOf(r);if(o._equalKeys(s,t))return n={group:e,item:i},!1})),-1===n&&void 0})),n},_getGroups:function(t){const e=this._collectionWidget._dataController.group();return e?Ml.Z.queryByOptions((0,de.Z)(t),{group:e}).toArray():this._collectionWidget.option("items")},getItemsByKeys:function(t,e){const i=[],n=this._getGroups(e),o={},r=t=>{const e=this.getIndexByKey(t,n),i=e&&n[e.group];if(i)return{groupKey:i.key,item:i.items[e.item]}};return(0,g.each)(t,(function(t,e){const n=r(e);if(!n)return;const s=n.groupKey,a=n.item;let l=o[s];l||(l={key:s,items:[]},o[s]=l,i.push(l)),l.items.push(a)})),i},moveItemAtIndexToIndex:function(t,e){const i=this._collectionWidget.option("items"),n=Nl(t),o=Nl(e),r=i[n.group].items,s=i[o.group].items,a=r[n.item];r.splice(n.item,1),s.splice(o.item,0,a)},_isItemIndex:function(t){return t&&(0,s.kE)(t.group)&&(0,s.kE)(t.item)},_getNormalizedItemIndex:function(t){const e=(0,o.Z)(t),i=e.closest(".dx-list-group");return i.length?Rl({group:this._groupElements().index(i),item:this._groupItemElements(i).index(e)}):-1},_normalizeItemIndex:function(t){return Rl(t)},_denormalizeItemIndex:function(t){return Nl(t)},_getItemByNormalizedIndex:function(t){const e=Nl(t),i=this._groupElements().eq(e.group);return this._groupItemElements(i).eq(e.item)},_itemsFromSameParent:function(t,e){return Nl(t).group===Nl(e).group}}),Vl=$l,Fl=[],Zl=function(t,e,i){Fl.push({enabled:t,decoratorType:e,decoratorSubType:i})};Zl((function(){return this.option("menuItems").length}),(function(){return"menu"}),(function(){return this.option("menuMode")})),Zl((function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")}),(function(){const t=this.option("itemDeleteMode");return"toggle"===t||"slideButton"===t||"swipe"===t||"static"===t?"delete":"menu"}),(function(){let t=this.option("itemDeleteMode");return"slideItem"===t&&(t="slide"),t})),Zl((function(){return"none"!==this.option("selectionMode")&&this.option("showSelectionControls")}),(function(){return"selection"}),(function(){return"default"})),Zl((function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")}),(function(){return"reorder"}),(function(){return"default"}));const Hl=m.default.inherit({ctor:function(t){this._list=t,this._fetchRequiredDecorators()},dispose:function(){this._decorators&&this._decorators.length&&(0,g.each)(this._decorators,(function(t,e){e.dispose()}))},_fetchRequiredDecorators:function(){this._decorators=[],(0,g.each)(Fl,function(t,e){if(e.enabled.call(this._list)){const t=e.decoratorType.call(this._list),i=e.decoratorSubType.call(this._list),n=this._createDecorator(t,i);this._decorators.push(n)}}.bind(this))},_createDecorator:function(t,e){return new(this._findDecorator(t,e))(this._list)},_findDecorator:function(t,e){var i;const n=null===(i=Pa[t])||void 0===i?void 0:i[e];if(!n)throw G.Z.Error("E1012",t,e);return n},modifyItemElement:function(t){const e=(0,o.Z)(t.itemElement),i={$itemElement:e};this._prependBeforeBags(e,i),this._appendAfterBags(e,i),this._applyDecorators("modifyElement",i)},afterItemsRendered:function(){this._applyDecorators("afterRender")},_prependBeforeBags:function(t,e){const i=this._collectDecoratorsMarkup("beforeBag",e,"dx-list-item-before-bag");t.prepend(i)},_appendAfterBags:function(t,e){const i=this._collectDecoratorsMarkup("afterBag",e,"dx-list-item-after-bag");t.append(i)},_collectDecoratorsMarkup:function(t,e,i){const n=(0,o.Z)("<div>");return(0,g.each)(this._decorators,(function(){const s=(0,o.Z)("<div>").addClass(i);this[t]((0,r.l)({$container:s},e)),s.children().length&&n.append(s)})),n.children()},_applyDecorators:function(t,e){(0,g.each)(this._decorators,(function(){this[t](e)}))},_handlerExists:function(t){if(!this._decorators)return!1;const e=this._decorators,i=e.length;for(let n=0;n<i;n++)if(e[n][t]!==l.noop)return!0;return!1},_eventHandler:function(t,e,i){if(!this._decorators)return!1;let n=!1;const o=this._decorators,r=o.length;for(let s=0;s<r&&(n=o[s][t](e,i),!n);s++);return n},handleClick:function(t,e){return this._eventHandler("handleClick",t,e)},handleKeyboardEvents:function(t,e){return this._eventHandler("handleKeyboardEvents",t,e)},handleEnterPressing:function(t){return this._eventHandler("handleEnterPressing",t)},contextMenuHandlerExists:function(){return this._handlerExists("handleContextMenu")},handleContextMenu:function(t,e){return this._eventHandler("handleContextMenu",t,e)},getExcludedItemSelectors:function(){const t=[];return this._applyDecorators("getExcludedSelectors",t),t.join(",")}}),Ll=Hl,jl=_s.inherit({_supportedKeys(){const t=this,e=this.callBase(),i=(i,n)=>{const o=this._editStrategy,r=this.option("focusedElement"),s=o.getNormalizedIndex(r);if(s!==this._getLastItemIndex()||!this._dataController.isLoading())if(i.shiftKey&&t.option("itemDragging.allowReordering")){const t=s+(n?-1:1),e=o.getItemElement(t);this.reorderItem(r,e),this.scrollToItem(r),i.preventDefault()}else this._editProvider.handleKeyboardEvents(s,n)||(n?e.upArrow(i):e.downArrow(i))};return(0,r.l)({},e,{del:e=>{t.option("allowItemDeleting")&&(e.preventDefault(),t.deleteItem(t.option("focusedElement")))},upArrow:t=>i(t,!0),downArrow:t=>i(t),enter:function(t){this._editProvider.handleEnterPressing(t)||e.enter.apply(this,arguments)},space:function(t){this._editProvider.handleEnterPressing(t)||e.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();const t=this._editProvider.getExcludedItemSelectors();t.length&&(this._itemElementsCache=this._itemElementsCache.not(t))},_isItemStrictEquals:function(t,e){const i=t&&t.__dx_key__;return!(i&&!this.key()&&this._selection.isItemSelected(i))&&this.callBase(t,e)},_getDefaultOptions(){return(0,r.l)(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:C.Z.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:t=>"ios"===t.platform,options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return"page"===this.option("selectAllMode")},_initEditProvider(){this._editProvider=new Ll(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new Vl(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(t){const e=(0,o.Z)(t.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(e,t)||(this._saveSelectionChangeEvent(t),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(t){const e=(0,o.Z)(t.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||((0,f.isTouchEvent)(t)&&this._editProvider.handleContextMenu(e,t)?t.handledByEditProvider=!0:this.callBase(...arguments))},_getItemContainer:function(t){if(this.option("grouped")){var e;const i=null===(e=this._editStrategy.getIndexByItemData(t))||void 0===e?void 0:e.group;return this._getGroupContainerByIndex(i)}return this.callBase(t)},_itemContextMenuHandler(t){const e=(0,o.Z)(t.currentTarget);e.is(".dx-state-disabled, .dx-state-disabled *")||(!t.handledByEditProvider&&this._editProvider.handleContextMenu(e,t)?t.preventDefault():this.callBase(...arguments))},_postprocessRenderItem(t){this.callBase(...arguments),this._editProvider.modifyItemElement(t)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(t){const e=this._editStrategy.getItemElement(t);this.option("focusedElement",e),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(t){switch(t.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(t);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(t)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(t){return this._itemElements().index(t)},getItemElementByFlatIndex(t){const e=this._itemElements();return t<0||t>=e.length?(0,o.Z)():e.eq(t)},getItemByIndex(t){return this._editStrategy.getItemDataByIndex(t)},deleteItem(t){const e=this._editStrategy,i=e.getNormalizedIndex(t),n=this.option("focusedElement"),o=this.option("focusStateEnabled"),r=n?e.getNormalizedIndex(n):i,s=r===this._getLastItemIndex()||i<r?r-1:r;return this.callBase(t).done((function(){o&&this.focusListItem(s)}))}});let zl=("TextBox",class{constructor(){throw new Error("Module 'TextBox' not found")}static getInstance(){}});const Wl={_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){const t=this.$element(),e=this.option("searchEnabled"),i=this._addWidgetPrefix("search"),n=this._addWidgetPrefix("with-search");if(!e)return t.removeClass(n),void this._removeSearchBox();const r=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(r):(t.addClass(n),this._$searchEditorElement=(0,o.Z)("<div>").addClass(i).prependTo(t),this._searchEditor=this._createComponent(this._$searchEditorElement,zl,r))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){const t=this,e=t.option("searchEditorOptions"),i=C.Z.format("Search");return(0,r.l)({mode:"search",placeholder:i,tabIndex:t.option("tabIndex"),value:t.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":i},onValueChanged:function(e){const i=t.option("searchTimeout");t._valueChangeDeferred=new w.BH,clearTimeout(t._valueChangeTimeout),t._valueChangeDeferred.done(function(){this.option("searchValue",e.value)}.bind(t)),e.event&&"input"===e.event.type&&i?t._valueChangeTimeout=setTimeout((function(){t._valueChangeDeferred.resolve()}),i):t._valueChangeDeferred.resolve()}},e)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(t,e){this.option("searchEnabled")&&this._toggleFocusClass(e,this.$element()),this.callBase(t,e)},getOperationBySearchMode:function(t){return"equals"===t?"=":t},_optionChanged:function(t){switch(t.name){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource)return void G.Z.log("W1009");"searchMode"===t.name?this._dataSource.searchOperation(this.getOperationBySearchMode(t.value)):this._dataSource[t.name](t.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(t)}},focus:function(){this.option("focusedElement")||!this.option("searchEnabled")?this.callBase():this._searchEditor&&this._searchEditor.focus()},_cleanAria:function(){const t=this.$element();this.setAria({role:null,activedescendant:null},t),t.attr("tabIndex",null)},_clean(){this.callBase(),this._cleanAria()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(t){zl=t}},Kl=jl.inherit(Wl).inherit({_addWidgetPrefix:function(t){return"dx-list-"+t},_getCombinedFilter:function(){const t=this._dataController,e={filter:t.filter()};return t.addSearchFilter(e),e.filter},_initDataSource:function(){const t=this.option("searchValue"),e=this.option("searchExpr"),i=this.option("searchMode");this.callBase();const n=this._dataController;t&&t.length&&n.searchValue(t),i.length&&n.searchOperation(Wl.getOperationBySearchMode(i)),e&&n.searchExpr(e)}});(0,c.default)("dxList",Kl);const ql=Kl;var Ul=i(1258),Gl=i(3677);const Yl=(0,r.l)({},Nt.Z,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new ce.o({store:new Gl.Z(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter:function(){this._displayGetter=(0,Wt.vb)(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=(0,Wt.vb)(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(t){const e=new w.BH;return t=this._unwrappedValue(t),(0,s.$K)(t)?(this._loadSingle(this._valueGetterExpr(),t).done(function(i){this._isValueEquals(this._valueGetter(i),t)?e.resolve(i):e.reject()}.bind(this)).fail((function(){e.reject()})),this._loadValueDeferred=e,e.promise()):e.reject().promise()},_rejectValueLoading:function(){var t;null===(t=this._loadValueDeferred)||void 0===t||t.reject({shouldSkipCallback:!0})},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(t){return(t=t??this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(t=this._getItemKey(t)),Ul.Z.unwrap(t)},_getItemKey:function(t){const e=this._dataSource.key();if(Array.isArray(e)){const i={};for(let n=0,o=e.length;n<o;n++)i[e[n]]=t[e[n]];return i}return e&&"object"==typeof t&&(t=t[e]),t},_isValueEquals:function(t,e){const i=this._dataSource&&this._dataSource.key();let n=this._compareValues(t,e);return!n&&i&&(0,s.$K)(t)&&(0,s.$K)(e)&&(n=Array.isArray(i)?this._compareByCompositeKey(t,e,i):this._compareByKey(t,e,i)),n},_compareByCompositeKey:function(t,e,i){const n=s.Kn;if(!n(t)||!n(e))return!1;for(let n=0,o=i.length;n<o;n++)if(t[i[n]]!==e[i[n]])return!1;return!0},_compareByKey:function(t,e,i){const n=Ul.Z.unwrap,o=(0,l.ensureDefined)(n(t[i]),t),r=(0,l.ensureDefined)(n(e[i]),e);return this._compareValues(o,r)},_compareValues:function(t,e){return(0,Wt.Ex)(t,!0)===(0,Wt.Ex)(e,!0)},_initDynamicTemplates:l.noop,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){const t=this.option("valueExpr");return(0,s.HD)(t)&&"this"!==t||(0,s.mf)(t)?t:null},_dataExpressionOptionChanged:function(t){switch(t.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}}),Ql=Yl,Xl=(0,p.getWindow)(),Jl=["startswith","contains","endwith","notcontains"],tc="android"!==tt.default.real().platform,ec=Pl.inherit({_supportedKeys:function(){const t=this.callBase();return(0,r.l)({},t,{tab:function(e){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(e);const t=(0,o.Z)(this._list.option("focusedElement"));t.length&&this._setSelectedElement(t)}t.tab.apply(this,arguments)},space:l.noop,home:l.noop,end:l.noop})},_allowSelectItemByTab:function(){return this.option("opened")&&"instantly"===this.option("applyValueMode")},_setSelectedElement:function(t){const e=this._valueGetter(this._list._getItemData(t));this._setValue(e)},_setValue:function(t){this.option("value",t)},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),(0,r.l)(Ql._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:C.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:l.noop,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),(0,r.l)(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){const t=this.option().items;t&&!t.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new gs.s("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(t){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(t,e,i){return t>i?e:t<e?i:t},_items:function(){const t=this._getPlainItems(!this._list&&this._dataSource.items());return new de.Z(t).filter("disabled","<>",!0).toArray()},_calcNextItem:function(t){const e=this._items();return e[this._fitIntoRange(this._getSelectedIndex()+t,0,e.length-1)]},_getSelectedIndex:function(){const t=this._items(),e=this.option("selectedItem");let i=-1;return(0,g.each)(t,function(t,n){if(this._isValueEquals(n,e))return i=t,!1}.bind(this)),i},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());const t=this._popup.$content();P.Z.off(t,"mouseup"),P.Z.on(t,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){const t=this.option("dropDownOptions.container"),e=t&&(0,o.Z)(t);if(e&&e.length&&!(0,s.FJ)(e.get(0))){const t=[].slice.call(e.parents());t.unshift(e.get(0)),(0,g.each)(t,function(t,e){return e!==(0,o.Z)("body").get(0)&&("hidden"===Xl.getComputedStyle(e).overflowY?(this._$customBoundaryContainer=(0,o.Z)(e),!1):void 0)}.bind(this))}},_popupWrapperClass:function(){return"dx-dropdownlist-popup-wrapper"},_renderInputValue:function(){const t=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(t,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,t))},_loadInputValue:function(t,e){return this._loadItem(t).always(e)},_getItemFromPlain:function(t,e){let i,n;return e&&"object"!=typeof t&&(e.itemByValue||(e.itemByValue={},i=this._getPlainItems(),i.forEach((function(t){e.itemByValue[this._valueGetter(t)]=t}),this)),n=e.itemByValue[t]),n||(i=this._getPlainItems(),n=(0,l.grep)(i,function(e){return this._isValueEquals(this._valueGetter(e),t)}.bind(this))[0]),n},_loadItem:function(t,e){const i=this._getItemFromPlain(t,e);return void 0!==i?(new w.BH).resolve(i).promise():this._loadValue(t)},_getPlainItems:function(t){let e=[];t=t||this.option("items")||this._dataSource.items()||[];for(let i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);return e},_updateActiveDescendant(t){var e;const i=this.option("opened"),n=null===(e=this._list)||void 0===e?void 0:e.getFocusedItemId(),r=(0,o.Z)(`#${n}`).length>0,s=i&&r&&n;this.setAria({activedescendant:s||null},t)},_setSelectedItem:function(t){const e=this._displayValue(t);this.option("selectedItem",(0,l.ensureDefined)(t,null)),this.option("displayValue",e)},_displayValue:function(t){return this._displayGetter(t)},_refreshSelected:function(){const t={};this._listItemElements().each(function(e,i){const n=(0,o.Z)(i),r=this._valueGetter(n.data("dxListItemData"));this._isSelectedValue(r,t)?this._list.selectItem(n):this._list.unselectItem(n)}.bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){this.option("focusStateEnabled")&&this._list&&this._list.option("focusedElement",null)},_isSelectedValue:function(t){return this._isValueEquals(t,this.option("value"))},_validateSearchMode:function(){const t=this.option("searchMode"),e=t.toLowerCase();if(!Jl.includes(e))throw G.Z.Error("E1019",t)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail(function(){this._isCustomValueAllowed()||this._clearSelectedItem()}.bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},clear:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(".dx-list-item"):(0,o.Z)()},_popupConfig:function(){return(0,r.l)(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){const t=this._canListHaveFocus();return this.callBase().concat([!t&&this._list])},_renderList:function(){this._listId="dx-"+(new H.Z)._value;const t=(0,o.Z)("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=t,this._list=this._createComponent(t,ql,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){const t=(0,f.addNamespace)("mousedown","dxDropDownList");P.Z.off(this._$list,t),P.Z.on(this._$list,t,(t=>t.preventDefault()))},_getControlsAria(){return this._list&&this._listId},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_getAriaHasPopup:()=>"listbox",_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return"desktop"===tt.default.real().deviceType},_listConfig:function(){const t={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&this.option("hoverStateEnabled"),focusStateEnabled:!!this._isDesktopDevice()&&this.option("focusStateEnabled")};return this._canListHaveFocus()||(t.tabIndex=null),t},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption:function(t,e){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(t){this._listItemClickHandler(t),this._itemClickAction(t)},_listItemClickHandler:l.noop,_setListDataSource:function(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()},_canKeepDataSource:function(){const t=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!t&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return(0,f.addNamespace)("input",this.NAME+"Search")},_getCompositionStartEvent:function(){return(0,f.addNamespace)("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return(0,f.addNamespace)("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return(0,f.addNamespace)("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),P.Z.on(this._input(),this._getSetFocusPolicyEvent(),(()=>{this._setFocusPolicy()})),this._shouldRenderSearchEvent()&&(P.Z.on(this._input(),this._getSearchEvent(),(t=>{this._searchHandler(t)})),tc&&(P.Z.on(this._input(),this._getCompositionStartEvent(),(()=>{this._isTextCompositionInProgress(!0)})),P.Z.on(this._input(),this._getCompositionEndEvent(),(t=>{this._isTextCompositionInProgress(void 0),this._searchHandler(t,this._searchValue())}))))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){P.Z.off(this._input(),this._getSearchEvent()),P.Z.off(this._input(),this._getSetFocusPolicyEvent()),tc&&(P.Z.off(this._input(),this._getCompositionStartEvent()),P.Z.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(t){if(!arguments.length)return this._isTextComposition;this._isTextComposition=t},_searchHandler:function(t,e){if(this._isTextCompositionInProgress())return;if(!this._isMinSearchLengthExceeded())return void this._searchCanceled();const i=this.option("searchTimeout");i?(this._clearSearchTimer(),this._searchTimer=setTimeout((()=>{this._searchDataSource(e)}),i)):this._searchDataSource(e)},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(t)},_filterDataSource:function(t){this._clearSearchTimer();const e=this._dataController;e.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),e.searchOperation(this.option("searchMode")),e.searchValue(t),e.load().done(this._dataSourceFiltered.bind(this,t))},_clearFilter:function(){const t=this._dataController;t.searchValue()&&t.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(this.option("readOnly")||!this._searchValue())return;const t=this._shouldOpenPopup();t&&!this._isFocused()||(this.option("opened",t),t&&(this._updatePopupWidth(),this._updateListDimensions()))},_dataSourceChangedHandler:function(t){0===this._dataController.pageIndex()?this.option().items=t:this.option().items=this.option().items.concat(t)},_hasItemsToShow:function(){const t=(this._dataController.items()||[]).length;return!(!this._needPassDataSourceToList()||!t)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged:function(){this.callBase(),this._updateListDimensions()},_needPopupRepaint:function(){const t=this._dataController,e=t.pageIndex(),i=(0,s.$K)(this._pageIndex)&&e<=this._pageIndex||t.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,i},_updateListDimensions:function(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight:function(){const t=this.$element(),e=this._$customBoundaryContainer,i=t.offset().top-(e?e.offset().top:0),n=(0,M.zp)(Xl),o=e?Math.min((0,M.zp)(e),n):n,r=Math.max(i,o-i-(0,M.zp)(t));return Math.min(.5*o,r)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){const t=this.option("value"),e=this._shouldUseDisplayValue(t)?this._displayGetter(t):t;this._getSubmitElement().val(e)},_shouldUseDisplayValue:function(t){return"this"===this.option("valueExpr")&&(0,s.Kn)(t)},_optionChanged:function(t){switch(this._dataExpressionOptionChanged(t),t.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(t.name,t.value),this.callBase(t);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(t.name);break;case"displayValue":this.option("text",t.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":t.previousValue!==t.value&&this._selectionChangedAction({selectedItem:t.value});break;default:this.callBase(t)}}}).include(Ql,hs);(0,c.default)("dxDropDownList",ec);const ic=ec.inherit({_supportedKeys(){const t=this,e=this.callBase(),i=function(t){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(t.preventDefault(),this.clear()),this._savedTextRemoveEvent=t,this._preventSubstitution=!0},n=function(){t.option("searchEnabled")&&t._valueSubstituted()&&t._searchHandler()};return(0,r.l)({},e,{tab(){this.option("opened")&&!this._popup.getFocusableElements().length&&this._resetCaretPosition(!0),e.tab&&e.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow(t){if(e.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(t),!0},downArrow(t){if(e.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(t),!0},leftArrow(){var t;n(),null===(t=e.leftArrow)||void 0===t||t.apply(this,arguments)},rightArrow(){n(),e.rightArrow&&e.rightArrow.apply(this,arguments)},home(){n(),e.home&&e.home.apply(this,arguments)},end(){n(),e.end&&e.end.apply(this,arguments)},escape(){const t=e.escape&&e.escape.apply(this,arguments);return this._cancelEditing(),t??!0},enter(t){const i=this.option("opened"),n=this._input().val().trim(),o=n&&this._list&&!this._list.option("focusedElement");if(!n&&(0,s.$K)(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(t),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return t.preventDefault(),o&&(i&&this._toggleOpenState(),this._valueChangeEventHandler(t)),i;if(e.enter&&e.enter.apply(this,arguments))return i}},space(t){const e=this.option("opened"),i=this.option("searchEnabled"),n=this.option("acceptCustomValue");if(e&&!i&&!n)return t.preventDefault(),this._valueChangeEventHandler(t),!0},backspace:i,del:i})},_getDefaultOptions(){return(0,r.l)(this.callBase(),{placeholder:C.Z.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating(t){(0,s.$K)(t.customItem)||(t.customItem=t.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass(){return`${this.callBase()} dx-selectbox-popup-wrapper`},_setDeprecatedOptions(){this.callBase(),(0,r.l)(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement(){if(!this._searchValue())return void this._focusListElement(null);const{items:t,selectedItem:e}=this.option(),i=this._list._itemElements(),n=(null==t?void 0:t.indexOf(e))??-1,o=-1===n||this._isCustomItemSelected()?null:i.eq(n);this._focusListElement(o)},_renderFocusedElement(){if(!this._list)return;if(!this._searchValue()||this.option("acceptCustomValue"))return void this._focusListElement(null);const t=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(t)},_focusListElement(t){this._preventInputValueRender=!0,this._list.option("focusedElement",(0,a.u)(t)),delete this._preventInputValueRender},_scrollToSelectedItem(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler(){this.callBase(),this._dataController.paginate()&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue(){return this._renderInputValue(),this._setSubmitValue(),(new w.BH).resolve()},_renderInputValue(){return this.callBase().always((()=>{this._renderInputValueAsync()}))},_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always((()=>{this._refreshSelected()}))},_renderInputValueImpl(){return this._renderField(),(new w.BH).resolve()},_setNextItem(t){const e=this._calcNextItem(t),i=this._valueGetter(e);this._setValue(i)},_setNextValue(t){(this._dataController.isLoaded()?(new w.BH).resolve():this._dataController.load()).done((()=>{const e=this._getSelectedIndex(),i=this._dataController.pageSize(),n=this._dataController.isLastPage(),o=e===this._items().length-1;this._saveValueChangeEvent(t);const r="downArrow"===(0,f.normalizeKeyName)(t)?1:-1;i&&!n&&o&&r>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,r))):this._setNextItem(r)}))},_setSelectedItem(t){const e=!this._isCustomValueAllowed()&&void 0===t;this.callBase(e?null:t),e||this._isEditable()&&!this._isCustomItemSelected()||this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed(){return this.option("acceptCustomValue")||this.callBase()},_displayValue(t){return t=!(0,s.$K)(t)&&this._isCustomValueAllowed()?this.option("value"):t,this.callBase(t)},_listConfig(){const t=(0,r.l)(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&(0,r.l)(t,{showSelectionControls:!0,selectByClick:!0}),t},_listFocusedItemChangeHandler(t){if(this._preventInputValueRender)return;const e=t.component,i=(0,o.Z)(e.option("focusedElement")),n=e._getItemData(i);this._updateField(n)},_updateField(t){if(!this._getTemplateByOption("fieldTemplate")||!this.option("fieldTemplate")){const e=this._displayGetter(t);return this.option("text",e),void this._renderDisplayText(e)}this._renderField()},_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):l.noop},_selectionChangeHandler(t){(0,g.each)(t.addedItems||[],((t,e)=>{this._setValue(this._valueGetter(e))}))},_getActualSearchValue(){return this._dataController.searchValue()},_isInlineAutocompleteEnabled(){return this.option("searchEnabled")&&!this.option("acceptCustomValue")&&"startswith"===this.option("searchMode")},_getAriaAutocomplete(){const{disabled:t,readOnly:e,searchEnabled:i}=this.option();return!i||e||t?"none":this._isInlineAutocompleteEnabled()?"both":"list"},_toggleOpenState(t){if(!this.option("disabled")){if((t=arguments.length?t:!this.option("opened"))||this._shouldClearFilter()||this._restoreInputText(!0),this._wasSearch()&&t)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;const t=this._getActualSearchValue();t&&this._wasSearch(!0),this._filterDataSource(t||null)}else this._setListOption("items",[]);t&&this._scrollToSelectedItem(),this.callBase(t)}},_renderTooltip(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText(){const t=this.option("selectedItem");if(null===t)return!1;const e=this._displayGetter(t);return(e?String(e):"")===this._searchValue()},_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText(t){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always((()=>{const{acceptCustomValue:e,text:i,selectedItem:n}=this.option();e?t||this._isValueChanging||(this._updateField(n??this._createCustomItem(i)),this._clearFilter()):this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always((t=>{const e=(0,l.ensureDefined)(t,n);this._setSelectedItem(e),this._updateField(e),this._clearFilter()}))}))},_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent(t){return this._preventNestedFocusEvent(t)||this._valueChangeEventIncludesBlur()},_focusOutHandler(t){this._isPreventedFocusOutEvent(t)||(this._isOverlayNestedTarget(t.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(t)),t.target=this._input().get(0),this.callBase(t)},_cancelSearchIfNeed(t){const{searchEnabled:e}=this.option(),i=this._isOverlayNestedTarget(null==t?void 0:t.relatedTarget);if(this._wasSearch()&&e&&!i){var n;const t=null===(n=this._popup)||void 0===n?void 0:n._hideAnimationProcessing;this._clearSearchTimer(),t?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch(t){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=t},_isOverlayNestedTarget:t=>!!(0,o.Z)(t).closest(".dx-selectbox-popup-wrapper").length,_clearTextValue(){const t=this.option("selectedItem"),e=this._displayGetter(t);t&&""!==e&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused(){const t=Mt.Z.getActiveElement(this.element());return this.callBase()&&(0,o.Z)(t).closest(this._input()).length>0},_getValueChangeEventOptionName:()=>"customItemCreateEvent",_renderValueChangeEvent(){this._isEditable()&&this.callBase()},_fieldRenderData(){const t=this._list&&this.option("opened")&&(0,o.Z)(this._list.option("focusedElement"));return t&&t.length?this._list._getItemData(t):this.option("selectedItem")},_isSelectedValue(t){return this._isValueEquals(t,this.option("value"))},_shouldCloseOnItemClick(){return!(this.option("showSelectionControls")&&"single"!==this.option("selectionMode"))},_listItemClickHandler(t){const e=this._getCurrentValue();this._focusListElement((0,o.Z)(t.itemElement)),this._saveValueChangeEvent(t.event),this._completeSelection(this._valueGetter(t.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&e===this._valueGetter(t.itemData)&&this._updateField(t.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter(){return this._wasSearch()},_completeSelection(t){this._setValue(t)},_loadItem(t,e){const i=this,n=new w.BH;return this.callBase(t,e).done((t=>{n.resolve(t)})).fail((e=>{if(null!=e&&e.shouldSkipCallback)return;const o=i.option("selectedItem");i.option("acceptCustomValue")&&t===i._valueGetter(o)?n.resolve(o):n.reject()})),n.promise()},_loadInputValue(t,e){return this._loadItemDeferred=this._loadItem(t).always(e),this._loadItemDeferred},_isCustomItemSelected(){const t=this.option("selectedItem"),e=this._searchValue(),i=this._displayGetter(t);return!i||e!==i.toString()},_valueChangeEventHandler(t){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(t))},_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem(t){const e={text:t},i=this._customItemCreatingAction(e),n=(0,l.ensureDefined)(i,e.customItem);return(0,s.$K)(i)&&b.default.log("W0015","onCustomItemCreating","customItem"),n},_customItemAddedHandler(t){const e=this._searchValue(),i=this._createCustomItem(e);if(this._saveValueChangeEvent(t),void 0===i)throw this._renderValue(),b.default.Error("E0121");(0,s.tI)(i)?(0,w.p4)(i).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(i)},_setCustomItem(t){this._disposed||(t=t||null,this.option("selectedItem",t),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(t)),this._renderDisplayText(this._displayGetter(t)),this._isValueChanging=!1)},_clearValueHandler(t){return this._preventFiltering=!0,this.callBase(t),this._searchCanceled(),!1},_wasSearch(t){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=t},_searchHandler(){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments))},_dataSourceFiltered(t){this.callBase(),null!==t&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted(){const t=this._input().get(0),e=this._searchValue().length,i=0===t.selectionStart&&t.selectionEnd===e,n=t.selectionStart!==t.selectionEnd,o=e===t.selectionEnd;return this._wasSearch()&&n&&!i&&o&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this._isInlineAutocompleteEnabled()},_renderInputSubstitution(){if(!this._shouldSubstitutionBeRendered())return void delete this._preventSubstitution;const t=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!t)return;const e=this._input(),i=e.val().length;if(0===i)return;const n=e.get(0),o=this._displayGetter(t).toString();n.value=o,this._caret({start:i,end:o.length})},_dispose(){this._renderInputValueAsync=l.noop,delete this._loadItemDeferred,this.callBase()},_optionChanged(t){switch(t.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"readOnly":case"disabled":case"searchMode":this.callBase(t),this._setDefaultAria();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(t)}}});(0,c.default)("dxSelectBox",ic);const nc=ic;var oc=i(7311);const rc=(0,p.getWindow)(),sc="dxDraggable",ac=(0,f.addNamespace)(Cs.BL,sc),lc=(0,f.addNamespace)(Cs.pB,sc),cc=(0,f.addNamespace)(Cs.ut,sc),uc=(0,f.addNamespace)(Cs.IO,sc),dc=(0,f.addNamespace)(Cs.Zu,sc),hc=(0,f.addNamespace)(ft.Z.down,sc),pc=(0,f.addNamespace)("keydown",sc);let fc,_c;const mc=t=>({x:t.pageX-(0,o.Z)(rc).scrollLeft(),y:t.pageY-(0,o.Z)(rc).scrollTop()});class gc{constructor(t,e){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=e,"vertical"===t?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(t,e){let i=!1;t.some((t=>{const n=(0,o.Z)(t),r=n.hasClass("dx-overlay-wrapper"),s=n.hasClass("dx-overlay-content");return!(!r&&!s)||(i=this._trySetScrollable(t,e),i)})),i||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(t){return("auto"===t.css(this._overFlowAttr)||t.hasClass("dx-scrollable-container"))&&t.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?(0,M.dz)(t):(0,M.Cr)(t))}_trySetScrollable(t,e){const i=this,n=(0,o.Z)(t);let r;const s=i._component.option("scrollSensitivity");let a=i.isScrollable(n);return a&&(r=i._calculateDistanceToBorders(n,e),s>r[i._limitProps.start]?i._preventScroll||(i._scrollSpeed=-i._calculateScrollSpeed(r[i._limitProps.start]),i._$scrollableAtPointer=n):s>r[i._limitProps.end]?i._preventScroll||(i._scrollSpeed=i._calculateScrollSpeed(r[i._limitProps.end]),i._$scrollableAtPointer=n):(a=!1,i._preventScroll=!1)),a}_calculateDistanceToBorders(t,e){const i=t.get(0);let n;return i?(n=(0,$.l)(i),{left:e.x-n.left,top:e.y-n.top,right:n.right-e.x,bottom:n.bottom-e.y}):{}}_calculateScrollSpeed(t){const e=this._component,i=e.option("scrollSensitivity"),n=e.option("scrollSpeed");return Math.ceil(((i-t)/i)**2*n)}scrollByStep(){const t=this;if(t._$scrollableAtPointer&&t._scrollSpeed){if(t._$scrollableAtPointer.hasClass("dx-scrollable-container")){const e=t._$scrollableAtPointer.closest(".dx-scrollable"),i=e.data("dxScrollable")||e.data("dxScrollView");if(i){const e=i.scrollOffset()[t._limitProps.start]+t._scrollSpeed;i.scrollTo({[t._limitProps.start]:e})}}else{const e=t._$scrollableAtPointer[t._scrollValue]()+t._scrollSpeed;t._$scrollableAtPointer[t._scrollValue](e)}const e=t._component._dragMoveArgs;e&&t._component._dragMoveHandler(e)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(t,e){if(!t)return!1;const i=(0,$.l)(t.get(0)),n=i[this._limitProps.start],o=i[this._sizeAttr],r=mc(e),s="width"===this._sizeAttr?r.x:r.y;return s<n||s>n+o}}const vc=Ar.inherit({ctor(t){this.callBase(),this._strategy=t},_step(){const t=this._strategy._horizontalScrollHelper,e=this._strategy._verticalScrollHelper;t&&t.scrollByStep(),e&&e.scrollByStep()}}),bc=Gn.default.inherit({reset:l.noop,dragMove:l.noop,dragEnter:l.noop,dragLeave:l.noop,dragEnd(t){return this._getSourceDraggable()._fireRemoveEvent(t),(0,w.BH)().resolve()},_fireRemoveEvent:l.noop,_getDefaultOptions(){return(0,r.l)(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),(0,r.l)(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new vc(this),this._horizontalScrollHelper=new gc("horizontal",this),this._verticalScrollHelper=new gc("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:t=>((0,s.Kn)(t)&&(t={h:t.x,v:t.y}),{left:(t=(0,l.splitPair)(t).map((t=>parseFloat(t))))[0],top:1===t.length?t[0]:t[1]}),_getNormalizedCursorOffset(t,e){return(0,s.mf)(t)&&(t=t.call(this,e)),this._normalizeCursorOffset(t)},_calculateElementOffset(t){let e,i;const{event:n}=t,r=(0,o.Z)(t.itemElement),s=(0,o.Z)(t.dragElement),a=this._dragElementIsCloned(),l=this.option("cursorOffset");let c={left:0,top:0};const u=this._initialLocate=(0,hr.jt)(s);return(a||t.initialOffset||l)&&(e=t.initialOffset||r.offset(),l&&(c=this._getNormalizedCursorOffset(l,t),isFinite(c.left)&&(e.left=n.pageX),isFinite(c.top)&&(e.top=n.pageY)),i=s.offset(),e.top-=i.top+(c.top||0)-u.top,e.left-=i.left+(c.left||0)-u.left),e},_initPosition(t){const e=(0,o.Z)(t.dragElement),i=this._calculateElementOffset(t);i&&this._move(i,e),this._startPosition=(0,hr.jt)(e)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(t){const e=this.NAME;return(0,_o.dasherize)(e)+(t?`-${t}`:"")},_getItemsSelector(){return this.option("filter")||""},_$content(){const t=this.$element(),e=t.children(".dx-template-wrapper");return e.length?e:t},_attachEventHandlers(){if(this.option("disabled"))return;let t=this._$content(),e=this._getItemsSelector();const i=this.option("allowMoveByClick"),n={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(t,e)=>{const i=this.option("group"),n=this._getSourceDraggable().option("group"),o=this._getScrollable(t);return!this._verticalScrollHelper.isOutsideScrollable(o,e)&&!this._horizontalScrollHelper.isOutsideScrollable(o,e)&&n&&n===i}};i&&(t=this._getArea(),P.Z.on(t,hc,n,this._pointerDownHandler.bind(this))),">"===e[0]&&(e=e.slice(1)),P.Z.on(t,ac,e,n,this._dragStartHandler.bind(this)),P.Z.on(t,lc,n,this._dragMoveHandler.bind(this)),P.Z.on(t,cc,n,this._dragEndHandler.bind(this)),P.Z.on(t,uc,n,this._dragEnterHandler.bind(this)),P.Z.on(t,dc,n,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&P.Z.on(t,pc,this._keydownHandler.bind(this))},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(t,e){return{container:(0,a.u)(e),model:{itemData:this.option("itemData"),itemElement:(0,a.u)(t)}}},_createDragElement(t){let e=t;const i=this.option("clone"),n=this._getContainer();let r=this.option("dragTemplate");return r?(r=this._getTemplate(r),e=(0,o.Z)("<div>").appendTo(n),r.render(this._getDragTemplateArgs(t,e))):i&&(e=(0,o.Z)("<div>").appendTo(n),t.clone().css({width:t.css("width"),height:t.css("height")}).appendTo(e)),e.toggleClass(this._addWidgetPrefix("clone"),e.get(0)!==t.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){P.Z.off(this._$content(),`.${sc}`),P.Z.off(this._getArea(),`.${sc}`)},_move(t,e){(0,hr.pB)(e||this._$dragElement,t)},_getDraggableElement(t){const e=this._getSourceElement();if(e)return e;if(this.option("allowMoveByClick"))return this.$element();let i=(0,o.Z)(t&&t.target);const n=this._getItemsSelector();if(">"===n[0]){const t=this._$content().find(n);t.is(i)||(i=i.closest(t))}return i},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(t){if((0,f.needSkipEvent)(t))return;const e={},i=this.$element(),n=this.option("dragDirection");"horizontal"!==n&&"both"!==n||(e.left=t.pageX-i.offset().left+(0,hr.jt)(i).left-(0,M.dz)(i)/2),"vertical"!==n&&"both"!==n||(e.top=t.pageY-i.offset().top+(0,hr.jt)(i).top-(0,M.Cr)(i)/2),this._move(e,i),this._getAction("onDragMove")(this._getEventArgs(t))},_isValidElement(t,e){const i=this.option("handle"),n=(0,o.Z)(t.originalEvent&&t.originalEvent.target);return!(i&&!n.closest(i).length||!e.length||e.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(t){const e=this._getDraggableElement(t);if(this.dragInProgress=!0,!this._isValidElement(t,e))return void(t.cancel=!0);if(this._$sourceElement)return;const i=this._getDragStartArgs(t,e);if(this._getAction("onDragStart")(i),i.cancel)return void(t.cancel=!0);this.option("itemData",i.itemData),this._setSourceDraggable(),this._$sourceElement=e;let o=e.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),o=this._getDraggableElementOffset(o.left,o.top));const s=this._$dragElement=this._createDragElement(e);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(s.children());const a="fixed"===s.css("position");this._initPosition((0,r.l)({},i,{dragElement:s.get(0),initialOffset:a&&o})),this._getAction("onDraggableElementShown")((0,n.Z)({},i,{dragElement:s}));const l=this._getArea(),c=this._getAreaOffset(l),u=this._getBoundOffset(),d=(0,M.Y_)(l),h=(0,M.zp)(l),p=(0,M.dz)(s),f=(0,M.Cr)(s),_=s.offset().left-c.left,m=s.offset().top-c.top;l.length&&(t.maxLeftOffset=_-u.left,t.maxRightOffset=d-_-p-u.right,t.maxTopOffset=m-u.top,t.maxBottomOffset=h-m-f-u.bottom),this.option("autoScroll")&&this._startAnimator()},_getAreaOffset:t=>t&&La.Z.offset(t)||{left:0,top:0},_toggleDraggingClass(t){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),t)},_toggleDragSourceClass(t,e){const i=e||this._$sourceElement;i&&i.toggleClass(this._addWidgetPrefix("source"),t)},_setGestureCoverCursor(t){(0,o.Z)(".dx-gesture-cover").css("cursor",t.css("cursor"))},_getBoundOffset(){let t=this.option("boundOffset");return(0,s.mf)(t)&&(t=t.call(this)),(0,N.quadToObject)(t)},_getArea(){let t=this.option("boundary");return(0,s.mf)(t)&&(t=t.call(this)),(0,o.Z)(t)},_getContainer(){let t=this.option("container");return void 0===t&&(t=(0,As.S3)()),(0,o.Z)(t)},_getDraggableElementOffset(t,e){var i,n;const r=this._initScrollTop,a=this._initScrollLeft,l=this._getScrollableScrollTop(),c=this._getScrollableScrollLeft(),u="fixed"===(0,o.Z)(this.element()).css("position"),d={left:((null===(i=this._startPosition)||void 0===i?void 0:i.left)??0)+t,top:((null===(n=this._startPosition)||void 0===n?void 0:n.top)??0)+e};return u||this._hasClonedDraggable()?d:{left:(0,s.kE)(c)?d.left+c-a:d.left,top:(0,s.kE)(l)?d.top+l-r:d.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(t){if(this._dragMoveArgs=t,!this._$dragElement)return void(t.cancel=!0);const e=this._getDraggableElementOffset(t.offset.x,t.offset.y);this._move(e),this._updateScrollable(t);const i=this._getEventArgs(t);this._getAction("onDragMove")(i),!0!==i.cancel&&this._getTargetDraggable().dragMove(t,scrollBy)},_updateScrollable(t){const e=this;if(e.option("autoScroll")){const i=mc(t),n=Mt.Z.elementsFromPoint(i.x,i.y,this.$element().get(0));e._verticalScrollHelper.updateScrollable(n,i),e._horizontalScrollHelper.updateScrollable(n,i)}},_getScrollable(t){let e;return t.parents().toArray().some((t=>{const i=(0,o.Z)(t);return!(!this._horizontalScrollHelper.isScrollable(i)&&!this._verticalScrollHelper.isScrollable(i)||(e=i,0))})),e},_getScrollableScrollTop(){var t;return(null===(t=this._getScrollable((0,o.Z)(this.element())))||void 0===t?void 0:t.scrollTop())??0},_getScrollableScrollLeft(){var t;return(null===(t=this._getScrollable((0,o.Z)(this.element())))||void 0===t?void 0:t.scrollLeft())??0},_defaultActionArgs(){const t=this.callBase.apply(this,arguments),e=this.option("component");return e&&(t.component=e,t.element=e.element()),t},_getEventArgs(t){const e=this._getSourceDraggable(),i=this._getTargetDraggable();return{event:t,itemData:e.option("itemData"),itemElement:(0,a.u)(e._$sourceElement),fromComponent:e.option("component")||e,toComponent:i.option("component")||i,fromData:e.option("data"),toData:i.option("data")}},_getDragStartArgs(t,e){const i=this._getEventArgs(t);return{event:i.event,itemData:i.itemData,itemElement:e,fromData:i.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(t){const e=(0,w.BH)(),i=this._getEventArgs(t),n=this._getEventArgs(t),o=this._getTargetDraggable();let r=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(i)}finally{(0,w.gx)((0,w.p4)(i.cancel)).done((t=>{if(!t&&(o!==this&&o._getAction("onDrop")(n),!n.cancel))return r=!1,void(0,w.gx)((0,w.p4)(o.dragEnd(i))).always(e.resolve);e.resolve()})).fail(e.resolve),e.done((()=>{r&&this._revertItemToInitialPosition(),this._resetDragOptions(o)}))}},_isTargetOverAnotherDraggable(t){const e=this._getSourceDraggable();if(this===e)return!1;const i=e._$dragElement,n=e.$element(),r=this.$element(),s=mc(t),a=Mt.Z.elementsFromPoint(s.x,s.y,this.element()).filter((t=>{const e=(0,o.Z)(t);return!!e.hasClass(this._addWidgetPrefix())&&!e.closest(i).length}))[0],l=this._getSourceElement(),c=a===n.get(0),u=(0,o.Z)(a).closest(l).length;return!a||a===r.get(0)&&!c&&!u},_dragEnterHandler(t){this._fireDragEnterEvent(t),this._isTargetOverAnotherDraggable(t)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(t)},_dragLeaveHandler(t){this._fireDragLeaveEvent(t),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(t)},_keydownHandler(t){this.dragInProgress&&"Escape"===t.key&&this._keydownEscapeHandler(t)},_keydownEscapeHandler(t){var e;if(!this._getSourceElement())return;const i=this._getEventArgs(t);if(this._getAction("onDragCancel")(i),i.cancel)return;this.dragInProgress=!1,null===(e=_c)||void 0===e||e._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();const n=this._getTargetDraggable();this._resetDragOptions(n),this._attachEventHandlers()},_getAction(t){return this[`_${t}Action`]||this._createActionByOption(t)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new u.s}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());const t=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),e=this._getTemplateByOption("contentTemplate");e&&(0,o.Z)(e.render({container:this.element(),transclude:t}))},_optionChanged(t){const{name:e}=t;switch(e){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this[`_${e}Action`]=this._createActionByOption(e);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(t)}},_getTargetDraggable(){return fc||this},_getSourceDraggable(){return _c||this},_setTargetDraggable(){const t=this.option("group"),e=this._getSourceDraggable();t&&t===e.option("group")&&(fc=this)},_setSourceDraggable(){_c=this},_resetSourceDraggable(){_c=null},_resetTargetDraggable(){fc=null},_resetDragOptions(t){this.reset(),t.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(t){const e=this._getEventArgs(t);this._getAction("onDragEnter")(e)},_fireDragLeaveEvent(t){const e=this._getEventArgs(t);this._getAction("onDragLeave")(e)}});(0,c.default)(sc,bc);const yc=bc,Cc="dxdblclick",wc=(0,f.addNamespace)(Kt.name,"dxDblClick"),xc=new(m.default.inherit({ctor(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add(){this._handlerCount<=0&&P.Z.on(Mt.Z.getDocument(),wc,this._clickHandler.bind(this)),this._handlerCount+=1},_clickHandler(t){const e=t.timeStamp||Date.now(),i=e-this._lastClickTimeStamp;!(i<0)&&i<300?((0,f.fireEvent)({type:"dxdblclick",target:(0,L.closestCommonParent)(this._firstClickTarget,t.target),originalEvent:t}),this._forgetLastClick()):(this._firstClickTarget=t.target,this._lastClickTimeStamp=e)},remove(){this._handlerCount-=1,this._handlerCount<=0&&(this._forgetLastClick(),P.Z.off(Mt.Z.getDocument(),wc,void 0),this._handlerCount=0)}}));(0,Ut.Z)(Cc,xc);const Sc=function(t){let e=0,i=0;for(let n=0;n<t.length;++n)if("'"===t[n]&&e++,"."===t[n]&&(++i,e%2==0))return{occurrence:i,index:n};return{occurrence:1,index:-1}},Ic=function(t,e,i){let n=-1;for(;i--&&n++<t.length;)n=t.indexOf(e,n);return n},kc=function(t,e){return-1===e?[t]:[t.slice(0,e),t.slice(e+1)]},Ec=function(t,e){if("string"==typeof e){const n=e.split(";"),o=y.Z.getSign(t,e);n[1]=n[1]||"-"+n[0],i=e=n[o<0?1:0],e=i.replace(/'([^']*)'/g,(t=>t.split("").map((()=>" ")).join("").substr(2)));const r=/^[^#0.,]*/.exec(e)[0].length,s=/[^#0.,]*$/.exec(e)[0].length;return{start:r,end:t.length-s}}var i;return{start:0,end:t.length}},Oc=function(t,e){const i=y.Z.getDecimalSeparator(),n=new RegExp("[^0-9"+(0,l.escapeRegExp)(i)+"]","g");return e.slice(0,t).replace(n,"").length},Tc=function(t){return t.split("").reverse().join("")},Dc=function(t,e){if(!t)return-1;const i=/[0-9]/g;let n=1,o=null,r=i.exec(e);for(;r;){if(o=r.index,n>=t)return o;n++,r=i.exec(e)}return null===o?e.length:o},Bc=function(t,e){return void 0===t.start&&(t={start:t,end:t}),{start:t.start+e,end:t.end+e}};function Ac(t,e,i){t=Bc(t,0);const n=Ec(e,i);return{start:(0,ys.n$)(t.start,n.start,n.end),end:(0,ys.n$)(t.end,n.start,n.end)}}var Pc=i(354);const Mc="dxNumberBox",Rc=(0,f.addNamespace)(ft.Z.up,Mc),Nc=(0,f.addNamespace)(ft.Z.cancel,Mc),$c=_.default.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup:function(){this.callBase();const t="dx-numberbox-spin-"+this.option("direction");this.$element().addClass("dx-numberbox-spin-button").addClass(t),this._spinIcon=(0,o.Z)("<div>").addClass(t+"-icon").appendTo(this.$element())},_render:function(){this.callBase();const t=(0,f.addNamespace)(ft.Z.down,this.NAME),e=this.$element();P.Z.off(e,t),P.Z.on(e,t,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler:function(t){t.preventDefault(),this._clearTimer(),P.Z.on(this.$element(),zt,function(){this._feedBackDeferred=new w.BH,(0,no.dR)(this._feedBackDeferred),this._spinChangeHandler({event:t}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:t})}.bind(this));const e=Mt.Z.getDocument();P.Z.on(e,Rc,this._clearTimer.bind(this)),P.Z.on(e,Nc,this._clearTimer.bind(this)),this._spinChangeHandler({event:t})},_dispose:function(){this._clearTimer(),this.callBase()},_clearTimer:function(){P.Z.off(this.$element(),zt);const t=Mt.Z.getDocument();P.Z.off(t,Rc),P.Z.off(t,Nc),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged:function(t){switch(t.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(t)}}});class Vc extends ja{_attachEvents(t,e){const{editor:i}=this,n=(0,f.addNamespace)(ft.Z.down,i.NAME),o=e.children(),r=i._createAction((t=>i._spinButtonsPointerDownHandler(t)));P.Z.off(e,n),P.Z.on(e,n,(t=>r({event:t}))),$c.getInstance(o.eq(0)).option("onChange",(t=>i._spinUpChangeHandler(t))),$c.getInstance(o.eq(1)).option("onChange",(t=>i._spinDownChangeHandler(t)))}_create(){const{editor:t}=this,e=(0,o.Z)("<div>").addClass("dx-numberbox-spin-container"),i=(0,o.Z)("<div>").appendTo(e),n=(0,o.Z)("<div>").appendTo(e),s=this._getOptions();return this._addToContainer(e),t._createComponent(i,$c,(0,r.l)({direction:"up"},s)),t._createComponent(n,$c,(0,r.l)({direction:"down"},s)),this._legacyRender(t.$element(),this._isTouchFriendly(),s.visible),{instance:e,$element:e}}_getOptions(){const{editor:t}=this;return{visible:this._isVisible(),disabled:t.option("disabled")}}_isVisible(){const{editor:t}=this;return super._isVisible()&&t.option("showSpinButtons")}_isTouchFriendly(){const{editor:t}=this;return t.option("showSpinButtons")&&t.option("useLargeSpinButtons")}_legacyRender(t,e,i){t.toggleClass("dx-numberbox-spin-touch-friendly",e),t.toggleClass("dx-numberbox-spin",i)}update(){if(super.update()){const{editor:t,instance:e}=this,i=t.$element(),n=this._isVisible(),o=this._isTouchFriendly(),r=e.children(),s=$c.getInstance(r.eq(0)),a=$c.getInstance(r.eq(1)),l=this._getOptions();s.option(l),a.option(l),this._legacyRender(i,o,n)}}}const Fc=Math,Zc=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],Hc=wl.inherit({_supportedKeys:function(){return(0,r.l)(this.callBase(),{upArrow:function(t){(0,f.isCommandKeyPressed)(t)||(t.preventDefault(),t.stopPropagation(),this._spinUpChangeHandler(t))},downArrow:function(t){(0,f.isCommandKeyPressed)(t)||(t.preventDefault(),t.stopPropagation(),this._spinDownChangeHandler(t))},enter:function(){}})},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:C.Z.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:function(){return!1},_getDefaultButtons:function(){return this.callBase().concat([{name:"spins",Ctor:Vc}])},_isSupportInputMode:function(){const t=parseFloat(Ur.default.version);return Ur.default.chrome&&t>=66||Ur.default.safari&&t>=12},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return tt.default.real().generic&&!tt.default.isSimulator()},options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==tt.default.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])},_initMarkup:function(){this._renderSubmitElement(),this.$element().addClass("dx-numberbox"),this.callBase()},_getDefaultAttributes:function(){const t=this.callBase();return t.inputmode="decimal",t},_renderContentImpl:function(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement:function(){this._$submitElement=(0,o.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(t){this._getSubmitElement().val((0,l.applyServerDecimalSeparator)(t))},_getSubmitElement:function(){return this._$submitElement},_keyPressHandler:function(t){this.callBase(t);const e=(0,f.getChar)(t);if(!/[\d.,eE\-+]/.test(e)){const e=(0,f.normalizeKeyName)(t);if((0,f.isCommandKeyPressed)(t)||e&&Zc.includes(e))return;return t.preventDefault(),!1}this._keyPressed=!0},_onMouseWheel:function(t){t.delta>0?this._spinValueChange(1,t):this._spinValueChange(-1,t)},_renderValue:function(){const t=this._input().val(),e=this.option("value");t.length&&Number(t)===e||(this._forceValueRender(),this._toggleEmptinessEventHandler());const i=(0,s.$K)(e)?null:C.Z.format("dxNumberBox-noDataText");return this.setAria({valuenow:(0,l.ensureDefined)(e,""),valuetext:i}),this.option("text",this._input().val()),this._updateButtons(),(new w.BH).resolve()},_forceValueRender:function(){const t=this.option("value"),e=Number(t),i=isNaN(e)?"":this._applyDisplayValueFormatter(t);this._renderDisplayText(i)},_applyDisplayValueFormatter:function(t){return this.option("displayValueFormatter")(t)},_renderProps:function(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:(0,l.ensureDefined)(this.option("min"),""),valuemax:(0,l.ensureDefined)(this.option("max"),"")})},_spinButtonsPointerDownHandler:function(){const t=this._input();this.option("useLargeSpinButtons")||Mt.Z.getActiveElement()===t[0]||P.Z.trigger(t,"focus")},_spinUpChangeHandler:function(t){this.option("readOnly")||this._spinValueChange(1,t.event||t)},_spinDownChangeHandler:function(t){this.option("readOnly")||this._spinValueChange(-1,t.event||t)},_spinValueChange:function(t,e){const i=parseFloat(this.option("step"));if(0===i)return;let n=parseFloat(this._normalizeInputValue())||0;n=this._correctRounding(n,i*t);const o=this.option("min"),r=this.option("max");(0,s.$K)(o)&&(n=Math.max(o,n)),(0,s.$K)(r)&&(n=Math.min(r,n)),this._saveValueChangeEvent(e),this.option("value",n)},_correctRounding:function(t,e){const i=/[,.](.*)/,n=i.test(t),o=i.test(e);if(n||o){const r=n?i.exec(t)[0].length:0,s=o?i.exec(e)[0].length:0,a=Fc.max(r,s);return this._round(t+e,a)}return t+e},_round:function(t,e){e=e||0;const i=Math.pow(10,e);return t*=i,Math.round(t)/i},_renderValueChangeEvent:function(){this.callBase();const t=(0,f.addNamespace)("focusout","NumberBoxForceValueChange");P.Z.off(this.element(),t),P.Z.on(this.element(),t,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue:function(){if("number"===this.option("mode"))return;const t=this._input(),e=this._applyDisplayValueFormatter(this.option("value"));t.val(null),t.val(e)},_valueChangeEventHandler:function(t){const e=this._input(),i=this._normalizeText(),n=this._parseValue(i),o="."!==i&&"-"!==i;!this._isValueValid()||this._validateValue(n)?(o&&this.callBase(t,isNaN(n)?null:n),this._applyValueBoundaries(i,n),this.validationRequest.fire({value:n,editor:this})):e.val(this._applyDisplayValueFormatter(n))},_applyValueBoundaries:function(t,e){const i=this._isValueIncomplete(t),n=this._isValueInRange(t);i||n||null===e||Number(t)!==e&&this._input().val(this._applyDisplayValueFormatter(e))},_replaceCommaWithPoint:function(t){return t.replace(",",".")},_inputIsInvalid:function(){const t="number"===this.option("mode"),e=this._input().get(0).validity;return t&&e&&e.badInput},_renderDisplayText:function(t){this._inputIsInvalid()||this.callBase(t)},_isValueIncomplete:function(t){return/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(t)},_isValueInRange:function(t){return(0,ys.Z2)(t,this.option("min"),this.option("max"))},_isNumber:function(t){return null!==this._parseValue(t)},_validateValue:function(t){const e=this._normalizeText(),i=this._isValueValid();let n=!0;const o=this._isNumber(e);return isNaN(Number(t))&&(n=!1),!t&&i?n=!0:o||i||(n=!1),this.option({isValid:n,validationError:n?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),n},_normalizeInputValue:function(){return this._parseValue(this._normalizeText())},_normalizeText:function(){const t=this._input().val().trim();return this._replaceCommaWithPoint(t)},_parseValue:function(t){const e=parseFloat(t);return isNaN(e)?null:(0,ys.n$)(e,this.option("min"),this.option("max"))},_clearValue:function(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},clear:function(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged:function(t){switch(t.name){case"value":this._validateValue(t.value),this._setSubmitValue(t.value),this.callBase(t),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(t)}}}),Lc=Hc.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:function(t){return"del"===t},_supportedKeys:function(){return this._useMaskBehavior()?(0,r.l)(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex:function(t){const e=y.Z.getDecimalSeparator(),i=Sc(this.option("format")).occurrence;return Ic(t,e,i)},_focusInHandler:function(t){this._preventNestedFocusEvent(t)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0;const e=this._caret();if(e.start===e.end&&this._useMaskBehavior()){const e=this._getInputVal(),i=this._getTextSeparatorIndex(e);i>=0?this._caret({start:i,end:i}):this._moveCaretToBoundaryEventHandler(-1,t)}}.bind(this),0)),this.callBase(t)},_focusOutHandler:function(t){const e=!this._preventNestedFocusEvent(t);e&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(t),e&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(t){const e=this._getFormatPattern(),i=this.option("value");return(this._format(i,e)||"")!==t},_updateFormattedValue:function(){const t=this._getInputVal();this._hasValueBeenChanged(t)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&P.Z.trigger(this._input(),"change"))},_arrowHandler:function(t,e){if(!this._useMaskBehavior())return;const i=this._getInputVal(),n=this._getFormatPattern();let o=Bc(this._caret(),t);(function(t,e,i){const n=Ac(t=Bc(t,0),e,i);return t.start>=n.start&&t.end<=n.end})(o,i,n)||(o=1===t?o.end:o.start,e.preventDefault(),this._caret(Ac(o,i,n)))},_moveCaretToBoundary:function(t){const e=Ec(this._getInputVal(),this._getFormatPattern()),i=Bc(1===t?e.start:e.end,0);this._caret(i)},_moveCaretToBoundaryEventHandler:function(t,e){!this._useMaskBehavior()||e&&e.shiftKey||(this._moveCaretToBoundary(t),e&&e.preventDefault())},_shouldMoveCaret:function(t,e){const i=y.Z.getDecimalSeparator(),n=t.charAt(e.end)===i;return(this._lastKey===i||"."===this._lastKey||","===this._lastKey)&&n},_getInputVal:function(){return y.Z.convertDigits(this._input().val(),!0)},_keyboardHandler:function(t){if(this.clearCaretTimeout(),this._lastKey=y.Z.convertDigits((0,f.getChar)(t),!0),this._lastKeyName=(0,f.normalizeKeyName)(t),!this._shouldHandleKey(t.originalEvent))return this.callBase(t);const e=this._getInputVal(),i=this._caret();let n;n="minus"===this._lastKeyName?"":110===t.which?y.Z.getDecimalSeparator():this._lastKey;const o=this._tryParse(e,i,n);return this._shouldMoveCaret(e,i)&&(this._moveCaret(1),t.originalEvent.preventDefault()),void 0===o?"minus"!==this._lastKeyName&&t.originalEvent.preventDefault():this._parsedValue=o,this.callBase(t)},_keyPressHandler:function(t){this._useMaskBehavior()||this.callBase(t)},_removeHandler:function(t){const e=this._caret(),i=this._getInputVal();let n=e.start,o=e.end;this._lastKey=(0,f.getChar)(t),this._lastKeyName=(0,f.normalizeKeyName)(t);const r=this._isDeleteKey(this._lastKeyName),s=!r;if(n===o){if(!(s&&n>0||r&&n<i.length))return void t.preventDefault();r&&o++,s&&n--}const a=i.slice(n,o);if(this._isStub(a))return this._moveCaret(r?1:-1),(this._parsedValue<0||1/this._parsedValue==-1/0)&&(this._revertSign(t),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&P.Z.trigger(this._input(),"input")),void t.preventDefault();const l=y.Z.getDecimalSeparator();if(a===l){const e=i.indexOf(l);return void(this._isNonStubAfter(e+1)&&(this._moveCaret(r?1:-1),t.preventDefault()))}if(o-n<i.length&&this._replaceSelectedText(i,{start:n,end:o},"").search(/[0-9]/)<0&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue==-1/0?-0:0);const c=this._tryParse(i,{start:n,end:o},"");void 0===c?t.preventDefault():this._parsedValue=c},_isPercentFormat:function(){return-1!==this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")},_parse:function(t,e){const i=this.option("format"),n=(0,s.mf)(i.parser),o=n?i.parser:y.Z.parse;let r=0;if(!n){const i=Sc(e).index,n=this._getTextSeparatorIndex(t),o=-1!==i?i:e.length,s=-1!==n?n:t.length;s>o&&-1===e.indexOf("#")&&(r=s-o)}return o(t=t.substr(r),e)},_format:function(t,e){const i=this.option("format"),n=(null==i?void 0:i.formatter)||i,o=(0,s.mf)(n)?n:y.Z.format;return null===t?"":o(t,e)},_getFormatPattern:function(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat:function(){const t=this.option("format"),e=(0,s.mf)(null==t?void 0:t.parser),i=(0,s.HD)(t)&&(t.indexOf("0")>=0||t.indexOf("#")>=0),n="exponential"===t||"exponential"===(null==t?void 0:t.type),o=e||i||n;this._currentFormat=o?t:(0,Pc.y)((e=>{const i=this._format(e,t);return y.Z.convertDigits(i,!0)}))},_getFormatForSign:function(t){const e=this._getFormatPattern();if((0,s.HD)(e)){const i=e.split(";"),n=y.Z.getSign(t,e);return i[1]=i[1]||"-"+i[0],n<0?i[1]:i[0]}return y.Z.getSign(t)<0?"-":""},_removeStubs:function(t,e){const i=this._getFormatForSign(t),n=y.Z.getThousandsSeparator(),o=this._getStubs(i);let r=t;if(o.length){const t=o[0],i=new RegExp("("+(0,l.escapeRegExp)(o[1]||"")+")$","g"),s=new RegExp("[-"+(0,l.escapeRegExp)(e?"":n)+"]","g");r=r.replace(t,"").replace(i,"").replace(s,"")}return r},_getStubs:function(t){const e=/[^']([#0.,]+)/g.exec(t),i=e&&e[0].trim();return t.split(i).map((function(t){return t.replace(/'/g,"")}))},_truncateToPrecision:function(t,e){if((0,s.$K)(t)){const i=t.toString(),n=i.indexOf(".");if(i&&n>-1){const o=parseFloat(i.substr(0,n+e+1));return isNaN(o)?t:o}}return t},_tryParse:function(t,e,i){const n=e.start!==e.end,o=n&&0===e.start&&e.end===t.length,r=y.Z.getDecimalSeparator();if(o&&i===r)return 0;const s=this._replaceSelectedText(t,e,i),a=this._getFormatPattern();let l=this._getParsedValue(s,a);const c=!a.parser&&this._getPrecisionLimits(s).max,u=l!==this._parsedValue,d=i===r&&0===c,h=!n&&!u&&"-"!==i&&this._isStub(i);if(d||h)return;if(""===this._removeStubs(s)&&(l=Math.abs(0*this._parsedValue)),isNaN(l))return;const p=null===l?this._parsedValue:l;return l=c?this._truncateToPrecision(p,c):l,!a.parser&&this._isPercentFormat()?(_=c,(f=l)&&(0,ys.zB)(f/100,_)):l;var f,_},_getParsedValue:function(t,e){const i=y.Z.getSign(t,(null==e?void 0:e.formatter)||e),n=this._removeStubs(t,!0),o=this._parse(n,e),r=o<0?-1:1;return(0,s.kE)(o)&&i!==r?i*o:o},_isValueIncomplete:function(t){if(!this._useMaskBehavior())return this.callBase(t);const e=this._caret(),i=y.Z.getDecimalSeparator(),n=this._getTextSeparatorIndex(t),o=n>=0&&n<e.start,r=this._removeStubs(t,!0).split(i);if(!o||2!==r.length)return!1;const s=r[1].length,a=!!this._getFormatPattern().parser,l=!a&&this._getPrecisionLimits(this._getFormatPattern(),t),c=!!a||(0,ys.Z2)(s,l.min,l.max),u="0"===r[1].charAt(s-1);return c&&(u||!s)},_isValueInRange:function(t){const e=(0,l.ensureDefined)(this.option("min"),-1/0),i=(0,l.ensureDefined)(this.option("max"),1/0);return(0,ys.Z2)(t,e,i)},_setInputText:function(t){const e=y.Z.convertDigits(t,!0),i=function(t,e,i,n){i=Bc(i,0);const o=y.Z.getDecimalSeparator(),r=function(t){return 1===t.length&&!!t.match(/^[,.][0-9]*$/g)}(t),s=Sc(n).occurrence,a=r?0:Ic(t,o,s),l=Ic(e,o,s),c=kc(t,a),u=kc(e,l);if(-1!==a&&i.start>a){const t=i.start-a-1,o=Oc(t,c[1]);return Ac(u[1]?l+1+Dc(o,u[1])+1:e.length,e,n)}{const t=function(t){return t.replace(/[^0-9e]+$/,"")}(u[0]),o=c[0].length-i.start,r=Oc(o,Tc(c[0])),s=Dc(r,Tc(t));return Ac(t.length-(s+1),e,n)}}(this._getInputVal(),e,this._caret(),this._getFormatPattern());this._input().val(t),this._toggleEmptinessEventHandler(),this._formattedValue=t,this._focusOutOccurs||this._caret(i)},_useMaskBehavior:function(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType:function(){const t="number"===this.option("mode"),e="desktop"===tt.default.real().deviceType;this._useMaskBehavior()&&t?this._setInputType(e||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:function(t){return(0,s.HD)(t)&&1===t.length},_moveCaret:function(t){if(!t)return;const e=Ac(Bc(this._caret(),t),this._getInputVal(),this._getFormatPattern());this._caret(e)},_shouldHandleKey:function(t){const e=(0,f.normalizeKeyName)(t),i=(0,f.isCommandKeyPressed)(t)||t.altKey||t.shiftKey||!this._isChar(e),n="minus"===e;return this._useMaskBehavior()&&!i&&!n},_renderInput:function(){this.callBase(),this._renderFormatter()},_renderFormatter:function(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents:function(){P.Z.off(this._input(),".dxNumberFormatter")},_isInputFromPaste:function(t){const e=t.originalEvent&&t.originalEvent.inputType;return(0,s.$K)(e)?"insertFromPaste"===e:this._isValuePasted},_attachFormatterEvents:function(){const t=this._input();P.Z.on(t,(0,f.addNamespace)("input","dxNumberFormatter"),function(t){this._formatValue(t),this._isValuePasted=!1}.bind(this)),P.Z.on(t,(0,f.addNamespace)("dxclick","dxNumberFormatter"),function(){this._caretTimeout||(this._caretTimeout=setTimeout(function(){this._caretTimeout=void 0,this._caret(Ac(this._caret(),this._getInputVal(),this._getFormatPattern()))}.bind(this),0))}.bind(this)),P.Z.on(t,Cc,function(){this.clearCaretTimeout()}.bind(this))},clearCaretTimeout:function(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue:function(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter:function(t){const e=this._getInputVal().slice(t);return e&&!this._isStub(e,!0)},_isStub:function(t,e){const i=(0,l.escapeRegExp)(y.Z.getDecimalSeparator());return new RegExp("^[^0-9"+i+"]+$","g").test(t)&&(e||this._isChar(t))},_parseValue:function(t){return this._useMaskBehavior()?this._parsedValue:this.callBase(t)},_getPrecisionLimits:function(t){const e=this._getFormatForSign(t),i=Sc(e).index,n=(kc(e,i)[1]||"").replace(/[^#0]/g,"");return{min:n.replace(/^(0*)#*/,"$1").length,max:n.length}},_revertSign:function(t){if(!this._useMaskBehavior())return;const e=this._caret();if(e.start!==e.end){if("minus"===(0,f.normalizeKeyName)(t))return void this._applyRevertedSign(t,e,!0);this._caret(Ac(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(t,e)},_applyRevertedSign:function(t,e,i){const n=-1*(0,l.ensureDefined)(this._parsedValue,null);if((this._isValueInRange(n)||0===n)&&(this._parsedValue=n,i)){const i=this._getFormatPattern(),n=this._getInputVal();this._setTextByParsedValue(),t.preventDefault();const o=this._getInputVal(),r=function(t,e,i){const n=Ec(t,i);return Ec(e,i).start-n.start}(n,o,i),s=Ac(e=Bc(e,r),o,i);this._caret(s)}},_removeMinusFromText:function(t,e){return"minus"===this._lastKeyName&&"-"===t.charAt(e.start-1)?this._replaceSelectedText(t,{start:e.start-1,end:e.start},""):t},_setTextByParsedValue:function(){const t=this._getFormatPattern(),e=this._parseValue(),i=this._format(e,t)||"";this._setInputText(i)},_formatValue:function(t){let e=this._getInputVal();const i=this._caret(),n=this._removeMinusFromText(e,i),o=n!==e;if(e=n,!this._isInputFromPaste(t)&&this._isValueIncomplete(n))return this._formattedValue=e,void(o&&this._setTextByParsedValue());if(y.Z.convertDigits(this._formattedValue,!0)!==e){const t=this._tryParse(e,i,"");(0,s.$K)(t)&&(this._parsedValue=t)}this._setTextByParsedValue()},_renderDisplayText:function(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue:function(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue:function(){const t=this._getInputVal();this._parsedValue=this._tryParse(t,this._caret())},_adjustParsedValue:function(){if(!this._useMaskBehavior())return;const t=this._removeStubs(this._getInputVal())?this._parseValue():null;(0,s.kE)(t)?this._parsedValue=(0,ys.n$)(t,this.option("min"),this.option("max")):this._parsedValue=t},_valueChangeEventHandler:function(t){if(!this._useMaskBehavior())return this.callBase(t);const e=this._caret();this._saveValueChangeEvent(t),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),e&&this._caret(e)},_optionChanged:function(t){switch(t.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(t);break;default:this.callBase(t)}},_clearCache:function(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean:function(){this._clearCache(),this.callBase()}}),jc=Lc;(0,c.default)("dxNumberBox",jc);const zc=jc,Wc="dx-colorview-container-row",Kc="dx-colorview-palette-gradient",qc="dx-colorview-palette-gradient-white",Uc="dx-colorview-palette-gradient-black",Gc="dx-colorview-color-preview",Yc="dx-colorview-color-preview-color-current",Qc="dx-colorview-color-preview-color-new",Xc=U.inherit({_supportedKeys(){const t=this.option("rtlEnabled"),e=this,i=function(t){let i=100/e._paletteWidth;return t.shiftKey&&(i*=e.option("keyStep")),i=i>1?i:1,Math.round(i)},n=function(t){let i=e._currentColor.hsv.s+t;i>100?i=100:i<0&&(i=0),e._currentColor.hsv.s=i,a()},o=function(t){let i=100/e._paletteHeight;return t.shiftKey&&(i*=e.option("keyStep")),i=i>1?i:1,Math.round(i)},s=function(t){let i=e._currentColor.hsv.v+t;i>100?i=100:i<0&&(i=0),e._currentColor.hsv.v=i,a()};function a(){e._placePaletteHandle(),e._updateColorFromHsv(e._currentColor.hsv.h,e._currentColor.hsv.s,e._currentColor.hsv.v)}const l=function(t){let i=360/(e._hueScaleWrapperHeight-e._hueScaleHandleHeight);return t.shiftKey&&(i*=e.option("keyStep")),i=i>1?i:1,i},c=function(t){e._currentColor.hsv.h+=t,e._placeHueScaleHandle();const i=(0,hr.jt)(e._$hueScaleHandle);e._updateColorHue(i.top+e._hueScaleHandleHeight/2)},u=function(i){let n=1/e._alphaChannelScaleWorkWidth;return i.shiftKey&&(n*=e.option("keyStep")),n=n>.01?n:.01,n=t?-n:n,n},d=function(t){e._currentColor.a+=t,e._placeAlphaChannelHandle();const i=(0,hr.jt)(e._$alphaChannelHandle);e._calculateColorTransparencyByScaleWidth(i.left+e._alphaChannelHandleWidth/2)};return(0,r.l)(this.callBase(),{upArrow(t){t.preventDefault(),t.stopPropagation(),(0,f.isCommandKeyPressed)(t)?this._currentColor.hsv.h<=360&&!this._isTopColorHue&&(this._saveValueChangeEvent(t),c(l(t))):this._currentColor.hsv.v<100&&(this._saveValueChangeEvent(t),s(o(t)))},downArrow(t){t.preventDefault(),t.stopPropagation(),(0,f.isCommandKeyPressed)(t)?this._currentColor.hsv.h>=0&&(this._isTopColorHue&&(this._currentColor.hsv.h=360),this._saveValueChangeEvent(t),c(-l(t))):this._currentColor.hsv.v>0&&(this._saveValueChangeEvent(t),s(-o(t)))},rightArrow(e){e.preventDefault(),e.stopPropagation(),(0,f.isCommandKeyPressed)(e)?(t?this._currentColor.a<1:this._currentColor.a>0&&this.option("editAlphaChannel"))&&(this._saveValueChangeEvent(e),d(-u(e))):this._currentColor.hsv.s<100&&(this._saveValueChangeEvent(e),n(i(e)))},leftArrow(e){e.preventDefault(),e.stopPropagation(),(0,f.isCommandKeyPressed)(e)?(t?this._currentColor.a>0:this._currentColor.a<1&&this.option("editAlphaChannel"))&&(this._saveValueChangeEvent(e),d(u(e))):this._currentColor.hsv.s>0&&(this._saveValueChangeEvent(e),n(-i(e)))},enter(t){this._fireEnterKeyPressed(t)}})},_getDefaultOptions(){return(0,r.l)(this.callBase(),{value:null,matchValue:null,onEnterKeyPressed:void 0,editAlphaChannel:!1,keyStep:1,stylingMode:void 0})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this._initColorAndOpacity(),this._initEnterKeyPressedAction()},_initEnterKeyPressedAction(){this._onEnterKeyPressedAction=this._createActionByOption("onEnterKeyPressed")},_fireEnterKeyPressed(t){this._onEnterKeyPressedAction&&this._onEnterKeyPressedAction({event:t})},_initColorAndOpacity(){this._setCurrentColor(this.option("value"))},_setCurrentColor(t){t=t||"#000000";const e=new oc.default(t);e.colorIsInvalid?(this._currentColor||(this._currentColor=new oc.default("#000000")),this.option("value",this._currentColor.baseColor)):this._currentColor&&this._makeRgba(this._currentColor)===this._makeRgba(e)||(this._currentColor=e,this._$currentColor&&this._makeTransparentBackground(this._$currentColor,e))},_setBaseColor(t){const e=t||"#000000",i=new oc.default(e);i.colorIsInvalid||this._makeRgba(this.option("matchValue")!==this._makeRgba(i))&&this._$baseColor&&this._makeTransparentBackground(this._$baseColor,i)},_initMarkup(){this.callBase(),this.$element().addClass("dx-colorview"),this._renderColorPickerContainer()},_render(){this.callBase(),this._renderPalette(),this._renderHueScale(),this._renderControlsContainer(),this._renderControls(),this._renderAlphaChannelElements()},_makeTransparentBackground(t,e){e instanceof oc.default||(e=new oc.default(e)),t.css("backgroundColor",this._makeRgba(e))},_makeRgba:t=>(t instanceof oc.default||(t=new oc.default(t)),`rgba(${[t.r,t.g,t.b,t.a].join(", ")})`),_renderValue(){this.callBase(this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this.option("value"))},_renderColorPickerContainer(){const t=this.$element();this._$colorPickerContainer=(0,o.Z)("<div>").addClass("dx-colorview-container").appendTo(t),this._renderHtmlRows()},_renderHtmlRows(t){const e=this._$colorPickerContainer.find(`.${Wc}`),i=e.length;let n=i-(this.option("editAlphaChannel")?2:1);if(n>0&&e.eq(-1).remove(),n<0){n=Math.abs(n);const t=[];let r;for(r=0;r<n;r++)t.push((0,o.Z)("<div>").addClass(Wc));if(i)for(r=0;r<t.length;r++)e.eq(0).after(t[r]);else this._$colorPickerContainer.append(t)}},_renderHtmlCellInsideRow:(t,e,i)=>(0,o.Z)("<div>").addClass("dx-colorview-container-cell").addClass(i).appendTo(e.find(`.${Wc}`).eq(t)),_renderPalette(){const t=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer,"dx-colorview-palette-cell"),e=(0,o.Z)("<div>").addClass([Kc,qc].join(" ")),i=(0,o.Z)("<div>").addClass([Kc,Uc].join(" "));this._$palette=(0,o.Z)("<div>").addClass("dx-colorview-palette").css("backgroundColor",this._currentColor.getPureColor().toHex()).appendTo(t),this._paletteHeight=(0,M.Cr)(this._$palette),this._paletteWidth=(0,M.dz)(this._$palette),this._renderPaletteHandle(),this._$palette.append([e,i])},_renderPaletteHandle(){this._$paletteHandle=(0,o.Z)("<div>").addClass("dx-colorview-palette-handle").appendTo(this._$palette);const t=`dx-${new H.Z}`,e={id:t,role:"application"};this.setAria(e,this._$paletteHandle),this.setAria("activedescendant",t,this.option("target")),this._createComponent(this._$paletteHandle,yc,{contentTemplate:null,boundary:this._$palette,allowMoveByClick:!0,boundOffset:function(){return-this._paletteHandleHeight/2}.bind(this),onDragMove:t=>{let{event:e}=t;const i=(0,hr.jt)(this._$paletteHandle);this._updateByDrag=!0,this._saveValueChangeEvent(e),this._updateColorFromHsv(this._currentColor.hsv.h,this._calculateColorSaturation(i),this._calculateColorValue(i))}}),this._paletteHandleWidth=(0,M.dz)(this._$paletteHandle),this._paletteHandleHeight=(0,M.Cr)(this._$paletteHandle),this._placePaletteHandle()},_placePaletteHandle(){(0,hr.pB)(this._$paletteHandle,{left:Math.round(this._paletteWidth*this._currentColor.hsv.s/100-this._paletteHandleWidth/2),top:Math.round(this._paletteHeight-this._paletteHeight*this._currentColor.hsv.v/100-this._paletteHandleHeight/2)})},_calculateColorValue(t){const e=Math.floor(t.top+this._paletteHandleHeight/2);return 100-Math.round(100*e/this._paletteHeight)},_calculateColorSaturation(t){const e=Math.floor(t.left+this._paletteHandleWidth/2);return Math.round(100*e/this._paletteWidth)},_updateColorFromHsv(t,e,i){const{a:n}=this._currentColor;this._currentColor=new oc.default(`hsv(${[t,e,i].join(",")})`),this._currentColor.a=n,this._updateColorParamsAndColorPreview(),this.applyColor()},_renderHueScale(){const t=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer,"dx-colorview-hue-scale-cell");this._$hueScaleWrapper=(0,o.Z)("<div>").addClass("dx-colorview-hue-scale-wrapper").appendTo(t),this._$hueScale=(0,o.Z)("<div>").addClass("dx-colorview-hue-scale").appendTo(this._$hueScaleWrapper),this._hueScaleHeight=(0,M.Cr)(this._$hueScale),this._hueScaleWrapperHeight=(0,M.zp)(this._$hueScaleWrapper),this._renderHueScaleHandle()},_renderHueScaleHandle(){this._$hueScaleHandle=(0,o.Z)("<div>").addClass("dx-colorview-hue-scale-handle").appendTo(this._$hueScaleWrapper),this._createComponent(this._$hueScaleHandle,yc,{contentTemplate:null,boundary:this._$hueScaleWrapper,allowMoveByClick:!0,dragDirection:"vertical",onDragMove:t=>{let{event:e}=t;this._updateByDrag=!0,this._saveValueChangeEvent(e),this._updateColorHue((0,hr.jt)(this._$hueScaleHandle).top+this._hueScaleHandleHeight/2)}}),this._hueScaleHandleHeight=(0,M.Cr)(this._$hueScaleHandle),this._placeHueScaleHandle()},_placeHueScaleHandle(){const t=this._hueScaleWrapperHeight,e=this._hueScaleHandleHeight;let i=(t-e)*(360-this._currentColor.hsv.h)/360;t<i+e&&(i=t-e),i<0&&(i=0),(0,hr.pB)(this._$hueScaleHandle,{top:Math.round(i)})},_updateColorHue(t){let e=360-Math.round(360*(t-this._hueScaleHandleHeight/2)/(this._hueScaleWrapperHeight-this._hueScaleHandleHeight));const i=this._currentColor.hsv.s,n=this._currentColor.hsv.v;this._isTopColorHue=!1,e=e<0?0:e,e>=360&&(this._isTopColorHue=!0,e=0),this._updateColorFromHsv(e,i,n),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex())},_renderControlsContainer(){const t=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer);this._$controlsContainer=(0,o.Z)("<div>").addClass("dx-colorview-controls-container").appendTo(t)},_renderControls(){this._renderColorsPreview(),this._renderRgbInputs(),this._renderHexInput()},_renderColorsPreview(){const t=(0,o.Z)("<div>").addClass("dx-colorview-color-preview-container").appendTo(this._$controlsContainer),e=(0,o.Z)("<div>").addClass("dx-colorview-color-preview-container-inner").appendTo(t);this._$currentColor=(0,o.Z)("<div>").addClass([Gc,Qc].join(" ")),this._$baseColor=(0,o.Z)("<div>").addClass([Gc,Yc].join(" ")),this._makeTransparentBackground(this._$baseColor,this.option("matchValue")),this._makeTransparentBackground(this._$currentColor,this._currentColor),e.append([this._$baseColor,this._$currentColor])},_renderAlphaChannelElements(){this.option("editAlphaChannel")&&(this._$colorPickerContainer.find(`.${Wc}`).eq(1).addClass("dx-colorview-alpha-channel-row"),this._renderAlphaChannelScale(),this._renderAlphaChannelInput())},_renderRgbInputs(){this._rgbInputsWithLabels=[this._renderEditorWithLabel({editorType:zc,value:this._currentColor.r,onValueChanged:this._updateColor.bind(this,!1),labelText:"R",labelAriaText:C.Z.format("dxColorView-ariaRed"),labelClass:"dx-colorview-label-red"}),this._renderEditorWithLabel({editorType:zc,value:this._currentColor.g,onValueChanged:this._updateColor.bind(this,!1),labelText:"G",labelAriaText:C.Z.format("dxColorView-ariaGreen"),labelClass:"dx-colorview-label-green"}),this._renderEditorWithLabel({editorType:zc,value:this._currentColor.b,onValueChanged:this._updateColor.bind(this,!1),labelText:"B",labelAriaText:C.Z.format("dxColorView-ariaBlue"),labelClass:"dx-colorview-label-blue"})],this._$controlsContainer.append(this._rgbInputsWithLabels),this._rgbInputs=[this._rgbInputsWithLabels[0].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[1].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[2].find(".dx-numberbox").dxNumberBox("instance")]},_renderEditorWithLabel(t){const e=(0,o.Z)("<div>"),i=(0,o.Z)("<label>").addClass(t.labelClass).text(`${t.labelText}:`).append(e);P.Z.off(i,Kt.name),P.Z.on(i,Kt.name,(t=>{t.preventDefault()}));const{editorType:n}=t,s=(0,r.l)({value:t.value,onValueChanged:t.onValueChanged,onKeyboardHandled:t=>this._keyboardHandler(t)},{stylingMode:this.option("stylingMode")});return n===zc&&(s.min=t.min||0,s.max=t.max||255,s.step=t.step||1),new n(e,s).registerKeyHandler("enter",(t=>{this._fireEnterKeyPressed(t)})),this.setAria("label",t.labelAriaText,e),i},hexInputOptions(){return{editorType:kl,value:this._currentColor.toHex().replace("#",""),onValueChanged:this._updateColor.bind(this,!0),labelClass:"dx-colorview-label-hex",labelText:"#",labelAriaText:C.Z.format("dxColorView-ariaHex")}},_renderHexInput(){this._hexInput=kl.getInstance(this._renderEditorWithLabel(this.hexInputOptions()).appendTo(this._$controlsContainer).find(".dx-textbox"));const t=`dx-${new H.Z}`,e=this._$controlsContainer.find(".dx-colorview-label-hex").find(".dx-texteditor-input");this.setAria("id",t,e),this.setAria("labelledby",t,this._$paletteHandle)},_renderAlphaChannelScale(){const t=this._renderHtmlCellInsideRow(1,this._$colorPickerContainer,"dx-colorview-alpha-channel-cell"),e=(0,o.Z)("<div>").addClass("dx-colorview-alpha-channel-border").appendTo(t),i=(0,o.Z)("<div>").addClass("dx-colorview-alpha-channel-wrapper").appendTo(e);this._$alphaChannelScale=(0,o.Z)("<div>").addClass("dx-colorview-alpha-channel-scale").appendTo(i),this._makeCSSLinearGradient(this._$alphaChannelScale),this._renderAlphaChannelHandle(t)},_makeCSSLinearGradient(t){const e=this._currentColor,i=`${e.r},${e.g},${e.b}`,n=this.option("rtlEnabled"),o=`linear-gradient(-90deg, rgba(${i}, ${n?"1":"0"}), rgba(${i}, ${n?"0":"1"}))`;t.css("backgroundImage",o)},_renderAlphaChannelInput(){const t=this,e=this._renderHtmlCellInsideRow(1,this._$colorPickerContainer);t._alphaChannelInput=this._renderEditorWithLabel({editorType:zc,value:this._currentColor.a,max:1,step:.1,onValueChanged(e){let{value:i}=e;i=t._currentColor.isValidAlpha(i)?i:t._currentColor.a,e.event&&t._saveValueChangeEvent(e.event),t._updateColorTransparency(i),t._placeAlphaChannelHandle()},labelClass:"dx-colorview-alpha-channel-label",labelText:"Alpha",labelAriaText:C.Z.format("dxColorView-ariaAlpha")}).appendTo(e).find(".dx-numberbox").dxNumberBox("instance")},_updateColorTransparency(t){this._currentColor.a=t,this.applyColor()},_renderAlphaChannelHandle(t){this._$alphaChannelHandle=(0,o.Z)("<div>").addClass("dx-colorview-alpha-channel-handle").appendTo(t),this._createComponent(this._$alphaChannelHandle,yc,{contentTemplate:null,boundary:t,allowMoveByClick:!0,dragDirection:"horizontal",onDragMove:t=>{let{event:e}=t;this._updateByDrag=!0;const i=this._$alphaChannelHandle,n=(0,hr.jt)(i).left+this._alphaChannelHandleWidth/2;this._saveValueChangeEvent(e),this._calculateColorTransparencyByScaleWidth(n)}}),this._alphaChannelHandleWidth=(0,M.dz)(this._$alphaChannelHandle),this._alphaChannelScaleWorkWidth=(0,M.dz)(t)-this._alphaChannelHandleWidth,this._placeAlphaChannelHandle()},_calculateColorTransparencyByScaleWidth(t){let e=(t-this._alphaChannelHandleWidth/2)/this._alphaChannelScaleWorkWidth;const i=this.option("rtlEnabled");e=i?e:1-e,t>=this._alphaChannelScaleWorkWidth+this._alphaChannelHandleWidth/2?e=i?1:0:e<1&&(e=e.toFixed(2));const n=this._alphaChannelInput.option("value");e=Math.max(e,0),e=Math.min(e,1),e===n?this._updateByDrag=!1:this._alphaChannelInput.option("value",e)},_placeAlphaChannelHandle(){let t=this._alphaChannelScaleWorkWidth*(1-this._currentColor.a);t<0&&(t=0),this._alphaChannelScaleWorkWidth<t&&(t=this._alphaChannelScaleWorkWidth),(0,hr.pB)(this._$alphaChannelHandle,{left:this.option("rtlEnabled")?this._alphaChannelScaleWorkWidth-t:t})},applyColor(){const t=this.option("value"),e=this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this._currentColor.toHex();this._makeTransparentBackground(this._$currentColor,this._currentColor),e===t?this._updateByDrag=!1:this.option("value",e)},cancelColor(){this._initColorAndOpacity(),this._refreshMarkup()},_updateColor(t,e){let i,n;t?n=this._validateHex(`#${this._hexInput.option("value")}`):(i=this._validateRgb(),this._alphaChannelInput?(i.push(this._alphaChannelInput.option("value")),n=`rgba(${i.join(", ")})`):n=`rgb(${i.join(", ")})`),this._suppressEditorsValueUpdating||(this._currentColor=new oc.default(n),this._saveValueChangeEvent(e.event),this.applyColor(),this._refreshMarkup())},_validateHex(t){return this._currentColor.isValidHex(t)?t:this._currentColor.toHex()},_validateRgb(){let t=this._rgbInputs[0].option("value"),e=this._rgbInputs[1].option("value"),i=this._rgbInputs[2].option("value");return this._currentColor.isValidRGB(t,e,i)||(t=this._currentColor.r,e=this._currentColor.g,i=this._currentColor.b),[t,e,i]},_refreshMarkup(){this._placeHueScaleHandle(),this._placePaletteHandle(),this._updateColorParamsAndColorPreview(),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex()),this._$alphaChannelHandle&&(this._updateColorTransparency(this._currentColor.a),this._placeAlphaChannelHandle())},_updateColorParamsAndColorPreview(){this._suppressEditorsValueUpdating=!0,this._hexInput.option("value",this._currentColor.toHex().replace("#","")),this._rgbInputs[0].option("value",this._currentColor.r),this._rgbInputs[1].option("value",this._currentColor.g),this._rgbInputs[2].option("value",this._currentColor.b),this._suppressEditorsValueUpdating=!1,this.option("editAlphaChannel")&&(this._makeCSSLinearGradient.call(this,this._$alphaChannelScale),this._alphaChannelInput.option("value",this._currentColor.a))},_optionChanged(t){const{value:e}=t;switch(t.name){case"value":this._setCurrentColor(e),this._updateByDrag||this._refreshMarkup(),this._updateByDrag=!1,this.callBase(t);break;case"matchValue":this._setBaseColor(e);break;case"onEnterKeyPressed":this._initEnterKeyPressedAction();break;case"editAlphaChannel":this._$colorPickerContainer&&(this._renderHtmlRows("editAlphaChannel"),this._renderAlphaChannelElements());break;case"keyStep":break;case"stylingMode":this._renderControls();break;default:this.callBase(t)}}});(0,c.default)("dxColorView",Xc);const Jc=Xc;class tu{constructor(){this._collection=[]}clear(){this._collection=[]}add(t,e){this._collection.push({name:t,instance:e})}remove(t){this._collection=this._collection.filter((e=>e.name!==t))}getByName(t){let e=null;return(0,g.each)(this._collection,((i,n)=>{let{name:o,instance:r}=n;if(o===t)return e=r,!1})),e}each(t){this._collection.forEach((e=>{let{name:i,instance:n}=e;return n&&t(i,n)}))}}const eu=["table","tableHeaderCell"],iu=["insertTable","insertHeaderRow","insertRowAbove","insertRowBelow","insertColumnLeft","insertColumnRight","deleteColumn","deleteRow","deleteTable","cellProperties","tableProperties"];function nu(t){const e=t.getModule("table");return null!=e&&e.tableFormats?e.tableFormats():eu}function ou(t,e){let{tableBlot:i,quill:n}=e;(i??n.scroll.find(t.get(0))).format("tableWidth","initial")}function ru(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.find("tr").eq(e).find("th, td")}function su(t){const e=[],i="horizontal"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal");return(i?ru(t):cu(t)).each(((t,n)=>{const r=(0,o.Z)(n);""===r.get(0).style[i?"width":"height"]&&e.push(r)})),e}function au(t,e){let{elements:i,property:n,value:o}=e;const r=t.quill.getModule("table").tableBlots,s=`cell${(0,_o.camelize)(n,!0)}`;(0,g.each)(i,((e,i)=>{var n;let a=t.quill.scroll.find(i);if(!r.includes(a.statics.blotName)){const t=a.descendant((t=>r.includes(t.statics.blotName)));a=t?t[0]:null}null===(n=a)||void 0===n||n.format(s,o+"px")}))}function lu(t,e){return"horizontal"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal")?cu(t,e):ru(t,e)}function cu(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.find(`th:nth-child(${1+e}), td:nth-child(${1+e})`)}function uu(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return()=>{const i=t.getModule("table");if(i)return t.focus(),i[e](...n)}}class du{constructor(){this._map={}}_findWidgetInstance(t){let e;return(0,g.each)(this._map,(function(i,n){let{widgetInstance:o,item:r}=n;if(t(r))return e=o,!1})),e}_findFieldByCondition(t,e){let i;return(0,g.each)(this._map,(function(n,o){if(t(o))return i="guid"===e?n:o[e],!1})),i}clear(){this._map={}}removeItemsByItems(t){(0,g.each)(t.getItems(),(t=>this.removeItemByKey(t)))}removeItemByKey(t){delete this._map[t]}add(t){const e=t.guid||new H.Z;return this._map[e]=t,e}addItemsOrExtendFrom(t){t.each(((t,e)=>{this._map[t]?(e.widgetInstance&&(this._map[t].widgetInstance=e.widgetInstance),this._map[t].$itemContainer=e.$itemContainer):this.add({item:e.item,widgetInstance:e.widgetInstance,guid:t,$itemContainer:e.$itemContainer})}))}extendRunTimeItemInfoByKey(t,e){this._map[t]&&(this._map[t]=(0,r.l)(this._map[t],e))}findWidgetInstanceByItem(t){return this._findWidgetInstance((e=>e===t))}findGroupOrTabLayoutManagerByPath(t){return this._findFieldByCondition((e=>{let{path:i}=e;return i===t}),"layoutManager")}findKeyByPath(t){return this._findFieldByCondition((e=>{let{path:i}=e;return i===t}),"guid")}findWidgetInstanceByName(t){return this._findWidgetInstance((e=>t===e.name))}findWidgetInstanceByDataField(t){return this._findWidgetInstance((e=>t===((0,s.HD)(e)?e:e.dataField)))}findItemContainerByItem(t){for(const e in this._map)if(this._map[e].item===t)return this._map[e].$itemContainer;return null}findItemIndexByItem(t){return this._findFieldByCondition((e=>{let{item:i}=e;return i===t}),"itemIndex")}findPreparedItemByItem(t){return this._findFieldByCondition((e=>{let{item:i}=e;return i===t}),"preparedItem")}getItems(){return this._map}each(t){(0,g.each)(this._map,(function(e,i){t(e,i)}))}removeItemsByPathStartWith(t){Object.keys(this._map).filter((e=>!!this._map[e].path&&this._map[e].path.indexOf(t,0)>-1)).forEach((t=>this.removeItemByKey(t)))}}const hu={onStart:or,onUpdated:rr,onEnd:sr,onCancel:"dxswipecancel"},pu=Gn.default.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),this.option("disabled"))return;const t=this.NAME;this._createEventData(),(0,g.each)(hu,function(e,i){const n=this._createActionByOption(e,{context:this});i=(0,f.addNamespace)(i,t),P.Z.on(this.$element(),i,this._eventData,(function(t){return n({event:t})}))}.bind(this))},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){P.Z.off(this.$element(),".dxSwipeable")},_optionChanged:function(t){switch(t.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(t)}},_useTemplates:function(){return!1}});(0,$t.u2)(pu,"dxSwipeable");const fu=pu,_u={move(t,e){(0,hr.pB)(t,{left:e})}},mu={moveTo(t,e,i,n){Se.default.animate(t,{type:"slide",to:{left:e},duration:i,complete:n})},complete(t){Se.default.stop(t,!0)}},gu=t=>+t,vu=ds.inherit({_activeStateUnit:".dx-multiview-item",_supportedKeys(){return(0,r.l)(this.callBase(),{pageUp:l.noop,pageDown:l.noop})},_getDefaultOptions(){return(0,r.l)(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator(),options:{focusStateEnabled:!0}}])},_itemClass:()=>"dx-multiview-item",_itemDataKey:()=>"dxMultiViewItemData",_itemContainer(){return this._$itemContainer},_itemElements(){return this._itemContainer().children(this._itemSelector())},_itemWidth(){return this._itemWidthValue||(this._itemWidthValue=(0,M.dz)(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache(){delete this._itemWidthValue},_itemsCount(){return this.option("items").length},_normalizeIndex(t){const e=this._itemsCount();return t<0&&(t+=e),t>=e&&(t-=e),t},_getRTLSignCorrection(){return this.option("rtlEnabled")?-1:1},_init(){this.callBase.apply(this,arguments);const t=this.$element();t.addClass("dx-multiview"),this._$wrapper=(0,o.Z)("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(t),this._$itemContainer=(0,o.Z)("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup(){this._deferredItems=[],this.callBase();const t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0]),this._setElementAria(),this._setItemsAria()},_afterItemElementDeleted(t,e){this.callBase(t,e),this._deferredItems&&this._deferredItems.splice(e.itemIndex,1)},_beforeItemElementInserted(t){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(t.index,0,null)},_executeItemRenderAction(t,e,i){t=(this.option("items")||[]).indexOf(e),this.callBase(t,e,i)},_renderItemContent(t){const e=(0,w.BH)(),i=this,{callBase:n}=this,o=(0,w.BH)();return o.done((()=>{const o=n.call(i,t);e.resolve(o)})),this._deferredItems[t.index]=o,this.option("deferRendering")||o.resolve(),e.promise()},_render(){this.callBase(),(0,l.deferRender)((()=>{const t=this._getSelectedItemIndices();this._updateItems(t[0])}))},_getElementAria:()=>({role:"group",roledescription:C.Z.format("dxMultiView-elementAriaRoleDescription"),label:C.Z.format("dxMultiView-elementAriaLabel")}),_setElementAria(){const t=this._getElementAria();this.setAria(t,this.$element())},_setItemsAria(){const t=this._itemElements(),e=this._itemsCount();t.each(((t,i)=>{const n=this._getItemAria({itemIndex:t,itemsCount:e});this.setAria(n,(0,o.Z)(i))}))},_getItemAria(t){let{itemIndex:e,itemsCount:i}=t;return{role:"group",roledescription:C.Z.format("dxMultiView-itemAriaRoleDescription"),label:C.Z.format("dxMultiView-itemAriaLabel",e+1,i)}},_updateItems(t,e){this._updateItemsPosition(t,e),this._updateItemsVisibility(t,e)},_modifyByChanges(){this.callBase.apply(this,arguments);const t=this._getSelectedItemIndices();this._updateItemsVisibility(t[0])},_updateItemsPosition(t,e){const i=this._itemElements(),n=(0,s.$K)(e)?-this._animationDirection(e,t):void 0,o=i.eq(t);_u.move(o,0),(0,s.$K)(e)&&_u.move(i.eq(e),100*n+"%")},_updateItemsVisibility(t,e){this._itemElements().each(((i,n)=>{const r=(0,o.Z)(n),s=i!==t&&i!==e;s||this._renderSpecificItem(i),r.toggleClass("dx-multiview-item-hidden",s),this.setAria("hidden",s||void 0,r)}))},_renderSpecificItem(t){const e=this._itemElements().eq(t),i=e.find(this._itemContentClass()).length>0;(0,s.$K)(t)&&!i&&(this._deferredItems[t].resolve(),(0,bs.U_)(e))},_refreshItem(t,e){this.callBase(t,e),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:l.noop,_updateSelection(t,e){const i=t[0],n=e[0];mu.complete(this._$itemContainer),this._updateItems(n,i);const o=this._animationDirection(i,n);this._animateItemContainer(o*this._itemWidth(),(()=>{_u.move(this._$itemContainer,0),this._updateItems(i),(0,M.dz)(this._$itemContainer)}))},_animateItemContainer(t,e){const i=this.option("animationEnabled")?200:0;mu.moveTo(this._$itemContainer,t,i,e)},_animationDirection(t,e){const i=(n=this._$itemContainer,(0,hr.jt)(n).left);var n;const o=(e-t)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection(),r=0!==i?i:o;return(0,ys.Xx)(r)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),fu,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:t=>this._swipeStartHandler(t.event),onUpdated:t=>this._swipeUpdateHandler(t.event),onEnd:t=>this._swipeEndHandler(t.event)})},_findBoundaryIndices(){const t=this.option("items");let e,i;t.forEach(((t,n)=>{Boolean(null==t?void 0:t.disabled)||(e??(e=n),i=n)})),this._boundaryIndices={firstAvailableIndex:e??0,lastAvailableIndex:i??t.length-1,firstTrueIndex:0,lastTrueIndex:t.length-1}},_swipeStartHandler(t){mu.complete(this._$itemContainer);const e=this.option("selectedIndex"),i=this.option("loop"),{firstAvailableIndex:n,lastAvailableIndex:o}=this._boundaryIndices,r=this.option("rtlEnabled");t.maxLeftOffset=gu(i||(r?e>n:e<o)),t.maxRightOffset=gu(i||(r?e<o:e>n)),this._swipeDirection=null},_swipeUpdateHandler(t){const{offset:e}=t,i=(0,ys.Xx)(e)*this._getRTLSignCorrection();if(_u.move(this._$itemContainer,e*this._itemWidth()),i!==this._swipeDirection){this._swipeDirection=i;const t=this.option("selectedIndex"),e=this._normalizeIndex(t-i);this._updateItems(t,e)}},_findNextAvailableIndex(t,e){const{items:i,loop:n}=this.option(),{firstAvailableIndex:o,lastAvailableIndex:r,firstTrueIndex:s,lastTrueIndex:a}=this._boundaryIndices,l=[s,o].includes(t),c=[a,r].includes(t);if(n){if(l&&e<0)return r;if(c&&e>0)return o}for(let n=t+e;n>=o&&n<=r;n+=e)if(!Boolean(i[n].disabled))return n;return t},_swipeEndHandler(t){const e=t.targetOffset*this._getRTLSignCorrection();if(e){const t=this._findNextAvailableIndex(this.option("selectedIndex"),-e);this.option("selectedIndex",t);const i=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",(0,a.u)(i))}else this._animateItemContainer(0,l.noop)},_getItemFocusLoopSignCorrection(){return this._itemFocusLooped?-1:1},_moveFocus(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem(t){const e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.last()),e},_nextItem(t){const e=this.callBase.apply(this,arguments);return this._itemFocusLooped=e.is(t.first()),e},_dimensionChanged(){this._clearItemWidthCache()},_visibilityChanged(t){t&&this._dimensionChanged()},_updateSwipeDisabledState(){const t=this._getSwipeDisabledState();fu.getInstance(this.$element()).option("disabled",t)},_dispose(){delete this._boundaryIndices,this.callBase()},_optionChanged(t){const{value:e}=t;switch(t.name){case"loop":this.option("loopItemFocus",e);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(t);break;default:this.callBase(t)}}});(0,c.default)("dxMultiView",vu);const bu=vu,yu=Ft.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge:function(t){if(this._$element.children(".dx-badge").remove(),!t)return;const e=(0,o.Z)("<div>").addClass("dx-tabs-item-badge").addClass("dx-badge").text(t);this._$element.append(e)}}),Cu="dx-tabs-expanded",wu=ns;function xu(t){return t.scrollWidth-t.clientWidth}class Su{constructor(t){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=t??Gr}get isHorizontal(){return"horizontal"===this.direction||this.direction===Yr}get isVertical(){return this.direction===Gr||this.direction===Yr}get isBoth(){return this.direction===Yr}}const Iu={top:"dx-tab-indicator-position-top",right:"dx-tab-indicator-position-right",bottom:"dx-tab-indicator-position-bottom",left:"dx-tab-indicator-position-left"},ku={top:"dx-tabs-icon-position-top",end:"dx-tabs-icon-position-end",bottom:"dx-tabs-icon-position-bottom",start:"dx-tabs-icon-position-start"},Eu={primary:"dx-tabs-styling-mode-primary",secondary:"dx-tabs-styling-mode-secondary"},Ou="vertical",Tu="bottom",Du="top",Bu=ds.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",orientation:"horizontal",iconPosition:"start",stylingMode:"primary",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:function(t){return t?t.badge:void 0},_itemAttributes:{role:"tab"},_indicatorPosition:null})},_defaultOptionsRules:function(){const t=(0,At.Vk)();return this.callBase().concat([{device:()=>"desktop"!==tt.default.real().deviceType,options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:()=>"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,At.dC)(t),options:{iconPosition:Du,stylingMode:"secondary"}},{device:()=>(0,At.x2)(t),options:{useInkRipple:!0,selectOnFocus:!1,iconPosition:Du}}])},_init(){const{orientation:t,stylingMode:e,scrollingEnabled:i}=this.option(),n=this._getIndicatorPosition();this.callBase(),this.setAria("role","tablist"),this.$element().addClass("dx-tabs"),this._toggleScrollingEnabledClass(i),this._toggleOrientationClass(t),this._toggleIndicatorPositionClass(n),this._toggleIconPositionClass(),this._toggleStylingModeClass(e),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_prepareDefaultItemTemplate(t,e){const i=(0,s.PO)(t)?null==t?void 0:t.text:t;if((0,s.$K)(i)){const t=(0,o.Z)("<span>").addClass("dx-tab-text-span");t.text(i);const n=(0,o.Z)("<span>").addClass("dx-tab-text-span-pseudo");n.text(i),n.appendTo(t),t.appendTo(e)}(0,s.$K)(t.html)&&e.html(t.html)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new ee(((t,e)=>{this._prepareDefaultItemTemplate(e,t);const i=co(e.icon);i&&i.prependTo(t);const n=(0,o.Z)("<div>").addClass("dx-tab-text");t.wrapInner(n)}).bind(this),["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(t,e){const{itemData:i,container:n,index:o}=e;return this._deferredTemplates[o]=new w.BH,t.render({model:i,container:n,index:o,onRendered:()=>this._deferredTemplates[o].resolve()})},_itemClass:function(){return"dx-tab"},_selectedItemClass:function(){return"dx-tab-selected"},_itemDataKey:function(){return"dxTabData"},_initMarkup:function(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass("dx-overflow-hidden")},_render:function(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){w.gx.apply(this,this._deferredTemplates).done((()=>this._renderScrolling()))},_renderScrolling(){const t=["dx-tabs-stretched",Cu,"dx-overflow-hidden"];if(this.$element().removeClass(t.join(" ")),this.option("scrollingEnabled")&&this._isItemsSizeExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());const t=this.getScrollable();if(t.update(),this.option("rtlEnabled")){const e=xu((0,o.Z)(this.getScrollable().container()).get(0));t.scrollTo({left:e})}this._updateNavButtonsState(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsSizeExceeded()||(this._cleanScrolling(),this._needStretchItems()&&this.$element().addClass("dx-tabs-stretched"),this.$element().removeClass("dx-tabs-nav-buttons").addClass(Cu))},_isVertical(){return this.option("orientation")===Ou},_isItemsSizeExceeded(){return this._isVertical()?this._isItemsHeightExceeded():this._isItemsWidthExceeded()},_isItemsWidthExceeded(){const t=this._getVisibleItems(),e=this._getSummaryItemsSize("width",t,!0),i=(0,M.dz)(this.$element());return![e,i].includes(0)&&e>i-1},_isItemsHeightExceeded(){const t=this._getVisibleItems();return this._getSummaryItemsSize("height",t,!0)-1>(0,M.Cr)(this.$element())},_needStretchItems(){const t=this._getVisibleItems(),e=(0,M.dz)(this.$element()),i=[];return(0,g.each)(t,((t,e)=>{i.push((0,M.Y_)(e,!0))})),Math.max.apply(null,i)>e/t.length+1},_cleanNavButtons:function(){this._leftButton&&this._rightButton&&(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling:function(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple:function(){this._inkRipple=Co()},_getPointerEvent:()=>ft.Z.up,_toggleActiveState:function(t,e,i){if(this.callBase.apply(this,arguments),!this._inkRipple)return;const n={element:t,event:i};e?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)},_renderMultiple:function(){"multiple"===this.option("selectionMode")&&this.option("selectOnFocus",!1)},_renderWrapper:function(){this._$wrapper=(0,o.Z)("<div>").addClass("dx-tabs-wrapper"),this.$element().append(this._$wrapper)},_itemContainer:function(){return this._$wrapper},_getScrollableDirection(){return this._isVertical()?"vertical":"horizontal"},_updateScrollable(){this.getScrollable()&&this._cleanScrolling(),this._renderScrolling()},_renderScrollable(){const t=this.$element().wrapInner((0,o.Z)("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(t,wu,{direction:this._getScrollableDirection(),showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsState()}}),this.$element().append(this._scrollable.$element())},_scrollToItem:function(t){if(!this._scrollable)return;const e=this._editStrategy.getItemElement(t);this._scrollable.scrollToElement(e)},_renderNavButtons:function(){const{showNavButtons:t,rtlEnabled:e}=this.option();if(this.$element().toggleClass("dx-tabs-nav-buttons",t),!t)return;this._leftButton=this._createNavButton(-30,e?"chevronnext":"chevronprev");const i=this._leftButton.$element();i.addClass("dx-tabs-nav-button-left"),this.$element().prepend(i),this._rightButton=this._createNavButton(30,e?"chevronprev":"chevronnext");const n=this._rightButton.$element();n.addClass("dx-tabs-nav-button-right"),this.$element().append(n)},_updateNavButtonsAriaDisabled(){[this._leftButton,this._rightButton].forEach((t=>{null==t||t.$element().attr({"aria-disabled":null})}))},_updateNavButtonsState(){const t=this._isVertical(),e=this.getScrollable();var i,n,r,s,a,l;t?(null===(i=this._leftButton)||void 0===i||i.option("disabled",(a=e.scrollTop(),l=1,Math.round(a)<=l)),null===(n=this._rightButton)||void 0===n||n.option("disabled",function(t,e,i,n){return Math.round(function(t){return t.scrollHeight-t.clientHeight}(t)-e-i)<=n}((0,o.Z)(e.container()).get(0),e.scrollTop(),0,1))):(null===(r=this._leftButton)||void 0===r||r.option("disabled",function(t,e){return Math.round(t)<=e}(e.scrollLeft(),1)),null===(s=this._rightButton)||void 0===s||s.option("disabled",function(t,e,i){return Math.round(xu(t)-e)<=i}((0,o.Z)(e.container()).get(0),e.scrollLeft(),1))),this._updateNavButtonsAriaDisabled()},_updateScrollPosition:function(t,e){this._scrollable.update(),this._scrollable.scrollBy(t/e)},_createNavButton:function(t,e){const i=this._createAction((()=>{this._holdInterval=setInterval((()=>{this._updateScrollPosition(t,5)}),5)})),n=(0,f.addNamespace)(zt,"dxNavButton"),r=(0,f.addNamespace)(ft.Z.up,"dxNavButton"),s=(0,f.addNamespace)(ft.Z.out,"dxNavButton"),a=this._createComponent((0,o.Z)("<div>").addClass("dx-tabs-nav-button"),nr,{focusStateEnabled:!1,icon:e,integrationOptions:{},elementAttr:{role:null,"aria-label":null,"aria-disabled":null},onClick:()=>{this._updateScrollPosition(t,1)}}),l=a.$element();return P.Z.on(l,n,{timeout:300},(t=>{i({event:t})})),P.Z.on(l,r,(()=>{this._clearInterval()})),P.Z.on(l,s,(()=>{this._clearInterval()})),a},_clearInterval:function(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection:function(t){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(t[0]))},_visibilityChanged:function(t){t&&this._dimensionChanged()},_dimensionChanged:function(){this._renderScrolling()},_itemSelectHandler:function(t){"single"===this.option("selectionMode")&&this.isItemSelected(t.currentTarget)||this.callBase(t)},_clean:function(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleTabsVerticalClass(t){this.$element().toggleClass("dx-tabs-vertical",t)},_toggleTabsHorizontalClass(t){this.$element().toggleClass("dx-tabs-horizontal",t)},_getIndicatorPositionClass:t=>Iu[t],_getIndicatorPosition(){const{_indicatorPosition:t,rtlEnabled:e}=this.option();if(t)return t;const i=this._isVertical();return e?i?"left":Tu:i?"right":Tu},_toggleIndicatorPositionClass(t){const e=this._getIndicatorPositionClass(t);this._toggleElementClasses(Iu,e)},_toggleScrollingEnabledClass(t){this.$element().toggleClass("dx-tabs-scrolling-enabled",Boolean(t))},_toggleOrientationClass(t){const e=t===Ou;this._toggleTabsVerticalClass(e),this._toggleTabsHorizontalClass(!e)},_getTabsIconPositionClass(){switch(this.option("iconPosition")){case Du:return ku.top;case"end":return ku.end;case"bottom":return ku.bottom;default:return ku.start}},_toggleIconPositionClass(){const t=this._getTabsIconPositionClass();this._toggleElementClasses(ku,t)},_toggleStylingModeClass(t){const e=Eu[t]??Eu.primary;this._toggleElementClasses(Eu,e)},_toggleElementClasses(t,e){for(const e in t)this.$element().removeClass(t[e]);this.$element().addClass(e)},_toggleFocusedDisabledNextClass(t,e){this._itemElements().eq(t).toggleClass("dx-focused-disabled-next-tab",e)},_toggleFocusedDisabledPrevClass(t,e){this._itemElements().eq(t).toggleClass("dx-focused-disabled-prev-tab",e)},_toggleFocusedDisabledClasses(t){const{selectedIndex:e}=this.option();this._itemElements().removeClass("dx-focused-disabled-next-tab").removeClass("dx-focused-disabled-prev-tab");const i=e-1,n=e+1,r=(0,o.Z)(t).index(),s=this._itemElements().eq(n).hasClass("dx-state-disabled")&&r===n,a=this._itemElements().eq(i).hasClass("dx-state-disabled")&&r===i;this._toggleFocusedDisabledNextClass(e,s),this._toggleFocusedDisabledPrevClass(e,a)},_updateFocusedElement(){const{focusStateEnabled:t,selectedIndex:e}=this.option(),i=this._itemElements();if(t&&i.length){const t=i.get(e);this.option({focusedElement:t})}},_optionChanged:function(t){switch(t.name){case"useInkRipple":case"scrollingEnabled":this._toggleScrollingEnabledClass(t.value),this._invalidate();break;case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(t.name,t.value);break;case"width":case"height":this.callBase(t),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(t);break;case"focusedElement":this._toggleFocusedDisabledClasses(t.value),this.callBase(t),this._scrollToItem(t.value);break;case"rtlEnabled":{this.callBase(t);const e=this._getIndicatorPosition();this._toggleIndicatorPositionClass(e);break}case"orientation":{this._toggleOrientationClass(t.value);const e=this._getIndicatorPosition();this._toggleIndicatorPositionClass(e),(0,p.hasWindow)()&&this._updateScrollable();break}case"iconPosition":this._toggleIconPositionClass(),(0,p.hasWindow)()&&this._dimensionChanged();break;case"stylingMode":this._toggleStylingModeClass(t.value),(0,p.hasWindow)()&&this._dimensionChanged();break;case"_indicatorPosition":this._toggleIndicatorPositionClass(t.value);break;case"selectedIndex":case"selectedItem":case"selectedItems":this.callBase(t),this._updateFocusedElement();break;default:this.callBase(t)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(t,e){this.callBase(t,e),this._renderScrolling()},getScrollable(){return this._scrollable}});Bu.ItemClass=yu,(0,c.default)("dxTabs",Bu);const Au=Bu,Pu={top:"dx-tabpanel-tabs-position-top",right:"dx-tabpanel-tabs-position-right",bottom:"dx-tabpanel-tabs-position-bottom",left:"dx-tabpanel-tabs-position-left"},Mu={top:"top",right:"right",bottom:"bottom",left:"left"},Ru={top:"bottom",right:"left",bottom:"top",left:"right"},Nu=bu.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,tabsPosition:Mu.top,iconPosition:"start",stylingMode:"primary",onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:function(t){return t?t.badge:void 0},_tabsIndicatorPosition:null})},_defaultOptionsRules:function(){const t=(0,At.Vk)();return this.callBase().concat([{device:function(){return"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return!qt.touch},options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}},{device:()=>(0,At.dC)(t),options:{stylingMode:"secondary"}},{device:()=>(0,At.yj)(t),options:{iconPosition:"top"}}])},_init:function(){this.callBase(),this.$element().addClass("dx-tabpanel"),this._toggleTabPanelTabsPositionClass()},_getElementAria:()=>({role:"tabpanel"}),_getItemAria:()=>({role:"tabpanel"}),_initMarkup:function(){this.callBase(),this._createTitleActions(),this._renderLayout()},_prepareTabsItemTemplate(t,e){const i=co(null==t?void 0:t.icon);i&&e.append(i);const n=(0,s.PO)(t)?null==t?void 0:t.title:t;if((0,s.$K)(n)&&!(0,s.PO)(n)){const t=(0,o.Z)("<span>").addClass("dx-tab-text-span");t.append(Mt.Z.createTextNode(n));const i=(0,o.Z)("<span>").addClass("dx-tab-text-span-pseudo");i.append(Mt.Z.createTextNode(n)),i.appendTo(t),t.appendTo(e)}},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new ee(((t,e)=>{this._prepareTabsItemTemplate(e,t);const i=(0,o.Z)("<div>").addClass("dx-tab-text");t.wrapInner(i)}),["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions:function(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction:function(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction:function(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction:function(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderLayout:function(){if(this._tabs)return;const t=this.$element();this._$tabContainer=(0,o.Z)("<div>").addClass("dx-tabpanel-tabs").appendTo(t);const e=(0,o.Z)("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(e,Au,this._tabConfig()),this._$container=(0,o.Z)("<div>").addClass("dx-tabpanel-container").appendTo(t),this._$container.append(this._$wrapper)},_refreshActiveDescendant:function(){if(!this._tabs)return;const t=this._tabs,e=t.itemElements(),i=(0,o.Z)(e[t.option("selectedIndex")]),n=this.getFocusedItemId();this.setAria("controls",void 0,(0,o.Z)(e)),this.setAria("controls",n,i)},_getTabsIndicatorPosition(){const{_tabsIndicatorPosition:t,tabsPosition:e}=this.option();return t??Ru[e]},_tabConfig(){const t=this._getTabsIndicatorPosition();return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(t){this.option("selectedIndex",t.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(t){if("focusedElement"===t.name)if(t.value){const e=(0,o.Z)(t.value),i=this._itemElements().eq(e.index());this.option("focusedElement",(0,a.u)(i))}else this.option("focusedElement",t.value)}.bind(this),onFocusIn:function(t){this._focusInHandler(t.event)}.bind(this),onFocusOut:function(t){this._isFocusOutHandlerExecuting||this._focusOutHandler(t.event)}.bind(this),orientation:this._getTabsOrientation(),iconPosition:this.option("iconPosition"),stylingMode:this.option("stylingMode"),_itemAttributes:{class:"dx-tabpanel-tab"},_indicatorPosition:t}},_renderFocusTarget:function(){this._focusTarget().attr("tabIndex",-1)},_getTabsOrientation(){const{tabsPosition:t}=this.option();return[Mu.right,Mu.left].includes(t)?"vertical":"horizontal"},_getTabPanelTabsPositionClass(){switch(this.option("tabsPosition")){case Mu.right:return Pu.right;case Mu.bottom:return Pu.bottom;case Mu.left:return Pu.left;case Mu.top:default:return Pu.top}},_toggleTabPanelTabsPositionClass(){for(const t in Pu)this.$element().removeClass(Pu[t]);const t=this._getTabPanelTabsPositionClass();this.$element().addClass(t)},_updateTabsOrientation(){const t=this._getTabsOrientation();this._setTabsOption("orientation",t)},_toggleWrapperFocusedClass(t){this._toggleFocusClass(t,this._$wrapper)},_toggleDisabledFocusedClass(t){this._focusTarget().toggleClass("dx-disabled-focused-tab",t)},_updateFocusState:function(t,e){this.callBase(t,e);const i=t.target===this._tabs._focusTarget().get(0),n=t.target===this._focusTarget().get(0);if(i&&this._toggleFocusClass(e,this._focusTarget()),i||n){const t=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(e&&!t),this._toggleDisabledFocusedClass(e&&t)}n&&this._toggleFocusClass(e,this._tabs.option("focusedElement"))},_focusOutHandler:function(t){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(t),this._isFocusOutHandlerExecuting=!1},_setTabsOption(t,e){this._tabs&&this._tabs.option(t,e)},_visibilityChanged:function(t){t&&this._tabs._dimensionChanged()},registerKeyHandler:function(t,e){this.callBase(t,e),this._tabs&&this._tabs.registerKeyHandler(t,e)},repaint:function(){this.callBase(),this._tabs.repaint()},_updateTabsIndicatorPosition(){const t=this._getTabsIndicatorPosition();this._setTabsOption("_indicatorPosition",t)},_optionChanged:function(t){const{name:e,value:i,fullName:n}=t;switch(e){case"dataSource":default:this.callBase(t);break;case"items":this._setTabsOption(e,this.option(e)),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(t);break;case"width":this.callBase(t),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(n,i),this.callBase(t),!0===this.option("focusStateEnabled")){const t=this.option("selectedIndex"),e=this._itemElements().eq(t);this.option("focusedElement",(0,a.u)(e))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(n,i),this.callBase(t);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(n,i);break;case"focusedElement":{const e=i?(0,o.Z)(i).index():i,n=i?this._tabs._itemElements().eq(e):i;if(this._setTabsOption("focusedElement",(0,a.u)(n)),i){const t=this._isDisabled(i);this._toggleWrapperFocusedClass(!t),this._toggleDisabledFocusedClass(t)}this.callBase(t);break}case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",i);break;case"badgeExpr":this._invalidate();break;case"tabsPosition":this._toggleTabPanelTabsPositionClass(),this._updateTabsIndicatorPosition(),this._updateTabsOrientation();break;case"iconPosition":this._setTabsOption("iconPosition",i);break;case"stylingMode":this._setTabsOption("stylingMode",i);break;case"_tabsIndicatorPosition":this._setTabsOption("_indicatorPosition",i)}}});Nu.ItemClass=class extends Ft{_renderWatchers(){return this._startWatcher("badge",l.noop),super._renderWatchers()}},(0,c.default)("dxTabPanel",Nu);const $u=Nu;class Vu{constructor(t){this._options=t,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){m.default.abstract()}}const Fu=(t,e)=>`${e?"tabs":"items"}[${t}]`,Zu=(t,e)=>(0,s.$K)(t)&&(0,s.$K)(e)?`${t}.${e}`:t||e,Hu=t=>t?t.replace(/\s/g,""):void 0,Lu=(t,e)=>`${t}.${e}`,ju=t=>{const e=t.split(".");return e[e.length-1].replace(/\[\d+]/,"")},zu=t=>t.indexOf("tabs")>-1,Wu=(t,e,i)=>{const n=t.indexOf(e);if(n>-1)return Fu(n,i);for(let n=0;n<t.length;n++){const o=t[n],r=o.tabs||o.items;if(r){const t=Wu(r,e,o.tabs);if(t)return Zu(Fu(n,i),t)}}};class Ku extends Vu{tryExecute(){const{value:t}=this._options,e=this.findInstance();return!!e&&(e.option(t),!0)}}class qu extends Vu{tryExecute(){const t=this.findInstance();if(t){const{optionName:e,item:i,value:n}=this._options,o=this._itemsRunTimeInfo.findItemIndexByItem(i);if(o>=0)return t.option(Lu(`items[${o}]`,e),n),!0}return!1}}class Uu extends Vu{tryExecute(){return!1}}class Gu extends Vu{tryExecute(){const t=this.findPreparedItem();return!(null==t||!t._prepareGroupItemTemplate||!t._renderGroupContentTemplate||(t._prepareGroupItemTemplate(this._options.item.template),t._renderGroupContentTemplate(),0))}}class Yu extends Vu{tryExecute(){const t=this.findInstance();if(t){const{value:e}=this._options;return t.option("dataSource",e),!0}return!1}}class Qu extends Vu{tryExecute(){const{item:t}=this._options,e=this.findInstance(),i=e&&(0,d.aT)(e.$element()[0],"dxValidator");if(i&&t){const e=t=>"required"===t.type,n=(i.option("validationRules")||[]).some(e),o=(t.validationRules||[]).some(e);if(!n&&!o||n&&o)return i.option("validationRules",t.validationRules),!0}return!1}}class Xu extends Vu{tryExecute(){const t=this.findItemContainer(),{previousValue:e,value:i}=this._options;return!!t&&(t.removeClass(e).addClass(i),!0)}}const Ju={row:"minWidth",col:"minHeight"},td={row:"maxWidth",col:"maxHeight"},ed={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},id={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},nd={row:"row",col:"column"},od=(t,e,i)=>{if(i=(0,Fo.bh)(e,i),t.style[(0,Fo.Hj)(e)]=i,!(0,p.hasWindow)()){if(""===i||!(0,s.$K)(i))return;const n=`${(0,_o.dasherize)(e)}: ${i};`;(0,Fo.A_)(t,n,!1)}};class rd{constructor(t,e){this._$element=t,this._option=e}renderBox(){this._$element.css({display:`${(0,Fo.gC)("flexDirection")}flex`}),od(this._$element.get(0),"flexDirection",nd[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){const t=this._option("align");return t in ed?ed[t]:t}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){const t=this._option("crossAlign");return t in id?id[t]:t}renderItems(t){const e=(0,Fo.gC)("flexDirection"),i=this._option("direction");(0,g.each)(t,(function(){const t=(0,o.Z)(this),n=t.data("dxBoxItemData");t.css({display:`${e}flex`}).css(td[i],n.maxSize||"none").css(Ju[i],n.minSize||"0"),od(t.get(0),"flexBasis",n.baseSize||0),od(t.get(0),"flexGrow",n.ratio),od(t.get(0),"flexShrink",(0,s.$K)(n.shrink)?n.shrink:1),t.children().each(((t,e)=>{(0,o.Z)(e).css({width:"auto",height:"auto",display:`${(0,Fo.gC)("flexDirection")}flex`,flexBasis:0}),od(e,"flexGrow",1),od(e,"flexDirection",(0,o.Z)(e)[0].style.flexDirection||"column")}))}))}}class sd extends we{_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return"dxBoxItemData"}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new rd(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return!this.option("_queue")&&!!this._queue.length}_pushItemToQueue(t,e){this._queue.push({$item:t,config:e})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(t){for(super._renderItems(t);this._queueIsNotEmpty();){const t=this._shiftItemFromQueue();this._createComponent(t.$item,sd,(0,r.l)({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},t.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(t){const e=t.itemData&&t.itemData.node;return e?this._renderItemContentByNode(t,e):super._renderItemContent(t)}_postprocessRenderItem(t){const e=t.itemData.box;e&&this._pushItemToQueue(t.itemContent,e)}_createItemByTemplate(t,e){return e.itemData.box?t.source?t.source():(0,o.Z)():super._createItemByTemplate(t,e)}_itemOptionChanged(t,e,i,n){"visible"===e&&this._onItemStateChanged({name:e,state:i,oldState:!1!==n}),super._itemOptionChanged(t,e,i)}_optionChanged(t){switch(t.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(t)}}_itemOptions(){const t=super._itemOptions();return t.fireItemStateChangedAction=t=>{this._onItemStateChanged(t)},t}}sd.ItemClass=class extends Ft{_renderVisible(t,e){super._renderVisible(t),(0,s.$K)(e)&&this._options.fireItemStateChangedAction({name:"visible",state:t,oldState:e})}},(0,c.default)("dxBox",sd);const ad=sd,ld="dx-responsivebox-screen-",cd=we.inherit({_getDefaultOptions(){return(0,r.l)(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init(){this.option("screenByWidth")||this._options.silent("screenByWidth",p.defaultScreenFactorFunc),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:()=>"dx-box-item",_itemDataKey:()=>"dxBoxItemData",_initMarkup(){this.callBase(),this.$element().addClass("dx-responsivebox")},_renderItems(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged(t){const e=this._findItemElementByItem(t);e.length&&(this._refreshItem(e,t),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize(){const t=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(ld+t),this.option("currentScreenFactor",t)},_removeScreenSizeClass(){const t=this.option("currentScreenFactor");t&&this.$element().removeClass(ld+t)},_prepareGrid(){const t=this._grid=[];this._prepareRowsAndCols(),(0,g.each)(this._rows,(()=>{const e=[];t.push(e),(0,g.each)(this._cols,(()=>{e.push(this._createEmptyCell())}))}))},getSingleColumnRows(){const t=this.option("rows"),e=this._screenItems.length;if(t.length){const i=this._filterByScreen(t),n=[];for(let t=0;t<e;t++){const e=this._defaultSizeConfig();t<i.length&&(0,s.$K)(i[t].shrink)&&(e.shrink=i[t].shrink),n.push(e)}return n}return this._defaultSizeConfig(e)},_prepareRowsAndCols(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems(){this._screenItems.sort(((t,e)=>t.location.row-e.location.row||t.location.col-e.location.col)),(0,g.each)(this._screenItems,((t,e)=>{(0,r.l)(e.location,{row:t,col:0,rowspan:1,colspan:1})}))},_sizesByScreen(t){return(0,g.map)(this._filterByScreen(t),(t=>(0,r.l)(this._defaultSizeConfig(),t)))},_createDefaultSizeConfig:()=>({ratio:1,baseSize:0,minSize:0,maxSize:0}),_defaultSizeConfig(t){const e=this._createDefaultSizeConfig();if(!arguments.length)return e;const i=[];for(let n=0;n<t;n++)i.push(e);return i},_filterByScreen(t){const e=this._screenRegExp();return(0,l.grep)(t,(t=>!t.screen||e.test(t.screen)))},_screenRegExp(){const t=this._getCurrentScreen();return new RegExp(`(^|\\s)${t}($|\\s)`,"i")},_getCurrentScreen(){const t=this._screenWidth();return this.option("screenByWidth")(t)},_screenWidth:()=>(0,p.hasWindow)()?(0,M.dz)((0,p.getWindow)()):1920,_createEmptyCell:()=>({item:{},location:{colspan:1,rowspan:1}}),_spreadItems(){(0,g.each)(this._screenItems,((t,e)=>{const i=e.location||{},n=i.col,o=i.row,r=this._grid[o],s=r&&r[n];this._occupyCells(s,e)}))},_itemsByScreen(){return this.option("items").reduce(((t,e)=>{let i=e.location||{};return i=(0,s.PO)(i)?[i]:i,this._filterByScreen(i).forEach((i=>{t.push({item:e,location:(0,r.l)({rowspan:1,colspan:1},i)})})),t}),[])},_occupyCells(t,e){t&&!this._isItemCellOccupied(t,e)&&((0,r.l)(t,e),this._markSpanningCell(t))},_isItemCellOccupied(t,e){if(!(0,s.Qr)(t.item))return!0;let i=!1;return this._loopOverSpanning(e.location,(t=>{i=i||!(0,s.Qr)(t.item)})),i},_loopOverSpanning(t,e){const i=t.row+t.rowspan-1,n=t.col+t.colspan-1,o=Math.min(i,this._rows.length-1),r=Math.min(n,this._cols.length-1);t.rowspan-=i-o,t.colspan-=n-r;for(let i=t.row;i<=o;i++)for(let n=t.col;n<=r;n++)i===t.row&&n===t.col||e(this._grid[i][n])},_markSpanningCell(t){this._loopOverSpanning(t.location,(e=>{(0,r.l)(e,{item:t.item,spanningCell:t})}))},_linkNodeToItem(){(0,g.each)(this._itemElements(),((t,e)=>{const i=(0,o.Z)(e),n=i.data("dxBoxItemData");n.box||(n.node=i.children())}))},_layoutItems(){const t=this._grid.length,e=t&&this._grid[0].length;if(!t&&!e)return;const i=this._layoutBlock({direction:"col",row:{start:0,end:t-1},col:{start:0,end:e-1}}),n=this._prepareBoxConfig(i.box||{direction:"row",items:[(0,r.l)(i,{ratio:1})]});(0,r.l)(n,this._rootBoxConfig(n.items)),this._$root=(0,o.Z)("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,ad,n)},_rootBoxConfig(t){const e=(0,g.each)(t,((t,e)=>{this._needApplyAutoBaseSize(e)&&(0,r.l)(e,{baseSize:"auto"})}));return{width:"100%",height:"100%",items:e,itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:t=>!(t.baseSize||t.minSize&&"auto"!==t.minSize||t.maxSize&&"auto"!==t.maxSize),_prepareBoxConfig(t){return(0,r.l)(t||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock(t){return this._isSingleItem(t)?this._itemByCell(t.row.start,t.col.start):this._layoutDirection(t)},_isSingleItem(t){const e=this._grid[t.row.start][t.col.start].location,i=t.row.end-t.row.start==e.rowspan-1,n=t.col.end-t.col.start==e.colspan-1;return i&&n},_itemByCell(t,e){const i=this._grid[t][e];return i.spanningCell?null:i.item},_layoutDirection(t){const e=[],{direction:i}=t,n=this._crossDirection(i);let o;for(;o=this._nextBlock(t);){if(this._isBlockIndivisible(t.prevBlockOptions,o))throw G.Z.Error("E1025");const i=this._layoutBlock({direction:n,row:o.row,col:o.col,prevBlockOptions:t});i&&((0,r.l)(i,this._blockSize(o,n)),e.push(i)),t[n].start=o[n].end+1}return{box:this._prepareBoxConfig({direction:i,items:e})}},_isBlockIndivisible:(t,e)=>t&&t.col.start===e.col.start&&t.col.end===e.col.end&&t.row.start===e.row.start&&t.row.end===e.row.end,_crossDirection:t=>"col"===t?"row":"col",_nextBlock(t){const{direction:e}=t,i=this._crossDirection(e),n=t[e].start,o=t[e].end,r=t[i].start;if(r>t[i].end)return null;let s=1;for(let t=r;t<r+s;t++){let a=1;for(let r=n;r<=o;r++){const n=this._cellByDirection(e,r,t);a=Math.max(a,n.location[`${i}span`])}const l=t+a,c=r+s;l>c&&(s+=l-c)}const a={};return a[e]={start:n,end:o},a[i]={start:r,end:r+s-1},a},_cellByDirection(t,e,i){return"col"===t?this._grid[i][e]:this._grid[e][i]},_blockSize(t,e){const i="row"===e?"auto":0,n="row"===e?this._rows:this._cols,o=(0,r.l)(this._createDefaultSizeConfig(),{ratio:0});for(let i=t[e].start;i<=t[e].end;i++){const t=n[i];o.ratio+=t.ratio,o.baseSize+=t.baseSize,o.minSize+=t.minSize,o.maxSize+=t.maxSize,(0,s.$K)(t.shrink)&&(o.shrink=t.shrink)}return o.minSize=o.minSize?o.minSize:i,o.maxSize=o.maxSize?o.maxSize:"auto",this._isSingleColumnScreen()&&(o.baseSize="auto"),o},_update(t){const e=this._$root;this._renderItems(),e&&(t?e.remove():(e.detach(),this._saveAssistantRoot(e))),this._layoutChangedAction()},_saveAssistantRoot(t){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(t)},_dispose(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots(){this._assistantRoots&&(0,g.each)(this._assistantRoots,((t,e)=>{(0,o.Z)(e).remove()}))},_clearItemNodeTemplates(){(0,g.each)(this.option("items"),(function(){delete this.node}))},_attachClickEvent:l.noop,_optionChanged(t){switch(t.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(t),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(t);break;case"currentScreenFactor":break;default:this.callBase(t)}},_dimensionChanged(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint(){this._update()}});(0,c.default)("dxResponsiveBox",cd);const ud=cd,dd="dx-form-group",hd="dx-col-",pd="dx-field-item",fd="dx-layout-manager-one-col",_d="dx-field-item-label-content",md="dx-field-item-label",gd="dx-field-item-content",vd="dx-root-simple-item",bd="dx-field-item-tab",yd="dx-group-colcount-",Cd="group-col-count",wd="simple";var xd=i(9217),Sd=i(3282),Id=i(8087),kd=i(7735),Ed=i(9487),Od=i(5963);const Td=class{constructor(t){this.calendar=t}dateOption(t){return this.calendar._dateOption(t)}dateValue(t,e){this.calendar._dateValue(t,e)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(t,e){this.calendar._updateAriaSelected(t,e),t[0]&&this.calendar.option("currentDate").getTime()===t[0].getTime()&&this.calendar._updateAriaId(t[0])}processValueChanged(t,e){var i,n;(0,s.$K)(t)&&!Array.isArray(t)&&(t=[t]),(0,s.$K)(e)&&!Array.isArray(e)&&(e=[e]),t=(null===(i=t)||void 0===i?void 0:i.map((t=>this._convertToDate(t))))||[],e=(null===(n=e)||void 0===n?void 0:n.map((t=>this._convertToDate(t))))||[],this._updateViewsValue(t),this.updateAriaSelected(t,e),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_isDateDisabled(t){const e=this.calendar._dateOption("min"),i=this.calendar._dateOption("max"),n=(0,s.$K)(e)&&t<e&&!Ed.default.sameDate(e,t),o=(0,s.$K)(i)&&t>i&&!Ed.default.sameDate(i,t);return this.calendar._view.isDateDisabled(t)||n||o}_getLowestDateInArray(t){if(t.length)return new Date(Math.min(...t))}_convertToDate(t){return this.calendar._convertToDate(t)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(t,e){this.calendar._updateViewsOption(t,e)}_updateViewsValue(t){this._updateViewsOption("value",t)}_updateCurrentDate(t){this.calendar.option("currentDate",t??new Date)}_shouldHandleWeekNumberClick(){const{selectionMode:t,selectWeekOnClick:e}=this.calendar.option();return e&&"single"!==t}},Dd=_.default,Bd=class extends Dd{_getDefaultOptions(){return(0,n.Z)({},super._getDefaultOptions(),{onClick:void 0,onCaptionClick:void 0,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,At.x2)(),options:{type:"default",stylingMode:"text"}},{device:()=>(0,At.dC)(),options:{type:"normal",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),(0,o.Z)(this.element()).addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()}_renderButtons(){const{rtlEnabled:t,type:e,stylingMode:i,focusStateEnabled:n}=this.option();this._prevButton=this._createComponent((0,o.Z)("<div>"),nr,{focusStateEnabled:n,icon:t?"chevronright":"chevronleft",onClick:t=>{this._clickAction({direction:-1,event:t})},type:e,stylingMode:i,integrationOptions:{}});const r=(0,o.Z)(this._prevButton.element()).addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent((0,o.Z)("<div>"),nr,{focusStateEnabled:n,icon:t?"chevronleft":"chevronright",onClick:t=>{this._clickAction({direction:1,event:t})},type:e,stylingMode:i,integrationOptions:{}});const s=(0,o.Z)(this._nextButton.element()).addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent((0,o.Z)("<div>").addClass("dx-calendar-caption-button"),nr,{focusStateEnabled:n,onClick:t=>{this._captionClickAction({event:t})},type:e,stylingMode:i,template:(t,e)=>{const{text:i}=this.option();i.split(" - ").forEach((t=>{(0,o.Z)(e).append((0,o.Z)("<span>").addClass("dx-button-text").text(t))}))},integrationOptions:{}});const a=this._caption.$element();this.$element().append(r,a,s)}_renderCaption(){var t;null===(t=this._caption)||void 0===t||t.option("text",this.option("text"))}toggleButton(t,e){const i=this[`_${t}Button`];i&&(i.option("disabled",e),i.$element().toggleClass("dx-calendar-disabled-navigator-link",e))}_optionChanged(t){"text"===t.name?this._renderCaption():super._optionChanged(t)}},{abstract:Ad}=_.default,Pd="td:not(.dx-calendar-week-number-cell)",Md=(0,f.addNamespace)(Kt.name,"dxCalendar"),Rd=(0,f.addNamespace)(oo.B,"dxCalendar"),Nd={month:C.Z.format("dxCalendar-currentDay"),year:C.Z.format("dxCalendar-currentMonth"),decade:C.Z.format("dxCalendar-currentYear"),century:C.Z.format("dxCalendar-currentYearRange")},$d="single",Vd="range",Fd=_.default.inherit({_getViewName:()=>"base",_getDefaultOptions(){return(0,r.l)(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,onWeekNumberClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup(){this.callBase(),this._renderImpl()},_renderImpl(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents(),this._updateTableAriaLabel()},_getLocalizedWidgetName:()=>C.Z.format("dxCalendar-ariaWidgetName"),_getSingleModeAriaLabel(){const{value:t}=this.option(),e=this._getLocalizedWidgetName(),i=xd.Z.format(t,"date");return`${e}. ${C.Z.format("dxCalendar-selectedDate",i)}`},_getRangeModeAriaLabel(){const{value:t}=this.option(),e=this._getLocalizedWidgetName(),[i,n]=t,o=xd.Z.format(i,"date"),r=xd.Z.format(n,"date");return`${e}. ${i&&n?C.Z.format("dxCalendar-selectedDateRange",o,r):C.Z.format("dxCalendar-selectedDate",o??r)}`},_getMultipleModeAriaLabel(){return this._getLocalizedWidgetName()},_getTableAriaLabel(){const{value:t,selectionMode:e}=this.option();if(!t||Array.isArray(t)&&!t.filter(Boolean).length)return this._getLocalizedWidgetName();switch(e){case $d:return this._getSingleModeAriaLabel();case Vd:return this._getRangeModeAriaLabel();case"multiple":return this._getMultipleModeAriaLabel()}},_updateTableAriaLabel(){const t=this._getTableAriaLabel();this.setAria({label:t},this._$table)},_createTable(){return this._$table=(0,o.Z)("<table>"),this.setAria({role:"grid"},this._$table),this._$table},_renderBody(){this.$body=(0,o.Z)("<tbody>").appendTo(this._$table);const t={cellDate:this._getFirstCellData(),prevCellDate:null};for(let e=0,i=this.option("rowCount");e<i;e++){t.row=this._createRow();for(let e=0,i=this.option("colCount");e<i;e++)this._renderCell(t,e);this._renderWeekNumberCell(t)}},_createRow(){const t=Mt.Z.createElement("tr");return this.setAria("role","row",(0,o.Z)(t)),this.$body.get(0).appendChild(t),t},_createCell(t,e){const i=Mt.Z.createElement("td"),n=(0,o.Z)(i);return i.className=this._getClassNameByDate(t,e),i.setAttribute("data-value",Od.Z.serializeDate(t,Ed.default.getShortDateFormat())),(0,d.aT)(i,"dxDateValueKey",t),this.setAria({role:"gridcell",selected:!1,label:this.getCellAriaLabel(t)},n),{cell:i,$cell:n}},_renderCell(t,e){const{cellDate:i,prevCellDate:n,row:r}=t;n&&Ed.default.fixTimezoneGap(n,i),t.prevCellDate=i;const{cell:s,$cell:a}=this._createCell(i,e),l=this.option("cellTemplate");(0,o.Z)(r).append(s),l?l.render(this._prepareCellTemplateData(i,e,a)):s.innerHTML=this._getCellText(i),t.cellDate=this._getNextCellData(i)},_getClassNameByDate(t,e){let i="dx-calendar-cell";return this._isTodayCell(t)&&(i+=" dx-calendar-today"),(this._isDateOutOfRange(t)||this.isDateDisabled(t))&&(i+=" dx-calendar-empty-cell"),this._isOtherView(t)&&(i+=" dx-calendar-other-view"),this.option("selectionMode")===Vd&&(0===e&&(i+=" dx-calendar-cell-start-in-row"),e===this.option("colCount")-1&&(i+=" dx-calendar-cell-end-in-row"),this._isStartDayOfMonth(t)&&(i+=" dx-calendar-cell-start"),this._isEndDayOfMonth(t)&&(i+=" dx-calendar-cell-end")),i},_prepareCellTemplateData(t,e,i){const n=t instanceof Date;return{model:{text:n?this._getCellText(t):t,date:n?t:void 0,view:this._getViewName()},container:(0,a.u)(i),index:e}},_renderEvents(){this._createCellClickAction(),P.Z.off(this._$table,Md),P.Z.on(this._$table,Md,Pd,(t=>{(0,o.Z)(t.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellClickAction({event:t,value:(0,o.Z)(t.currentTarget).data("dxDateValueKey")})}));const{selectionMode:t}=this.option();P.Z.off(this._$table,Rd),t===Vd&&(this._createCellHoverAction(),P.Z.on(this._$table,Rd,Pd,(t=>{(0,o.Z)(t.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellHoverAction({event:t,value:(0,o.Z)(t.currentTarget).data("dxDateValueKey")})}))),t!==$d&&(this._createWeekNumberCellClickAction(),P.Z.on(this._$table,Md,".dx-calendar-week-number-cell",(t=>{const e=(0,o.Z)(t.currentTarget).closest("tr"),i=e.find(".dx-calendar-cell").first().data("dxDateValueKey"),n=e.find(".dx-calendar-cell").last().data("dxDateValueKey"),r=[...Ed.default.getDatesOfInterval(i,n,864e5),n];this._weekNumberCellClickAction({event:t,rowDates:r})})))},_createCellClickAction(){this._cellClickAction=this._createActionByOption("onCellClick")},_createCellHoverAction(){this._cellHoverAction=this._createActionByOption("onCellHover")},_createWeekNumberCellClickAction(){this._weekNumberCellClickAction=this._createActionByOption("onWeekNumberClick")},_createDisabledDatesHandler(){const t=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(t)?this._getDefaultDisabledDatesHandler(t):t||l.noop},_getDefaultDisabledDatesHandler:()=>l.noop,_isTodayCell:Ad,_isDateOutOfRange:Ad,isDateDisabled(t){const e={date:t,view:this._getViewName()};return this._disabledDatesHandler(e)},_isOtherView:Ad,_isStartDayOfMonth:Ad,_isEndDayOfMonth:Ad,_getCellText:Ad,_getFirstCellData:Ad,_getNextCellData:Ad,_renderContouredDate(t){if(!this.option("focusStateEnabled"))return;t=t||this.option("contouredDate");const e=this._getContouredCell(),i=this._getCellByDate(t);e.removeClass("dx-calendar-contoured-date"),t&&i.addClass("dx-calendar-contoured-date")},_getContouredCell(){return this._$table.find(".dx-calendar-contoured-date")},_renderValue(){if(!this.option("allowValueSelection"))return;let t=this.option("value");Array.isArray(t)||(t=[t]),this._updateSelectedClass(t)},_updateSelectedClass(t){var e;this._isRangeMode()&&!this._isMonthView()||(null===(e=this._$selectedCells)||void 0===e||e.forEach((t=>{t.removeClass("dx-calendar-selected-date")})),this._$selectedCells=t.map((t=>this._getCellByDate(t))),this._$selectedCells.forEach((t=>{t.addClass("dx-calendar-selected-date")})))},_renderRange(){var t,e,i,n,o,r,s,a;const{allowValueSelection:l,value:c,range:u}=this.option();l&&this._isRangeMode()&&this._isMonthView()&&(null===(t=this._$rangeCells)||void 0===t||t.forEach((t=>{t.removeClass("dx-calendar-cell-in-range")})),null===(e=this._$hoveredRangeCells)||void 0===e||e.forEach((t=>{t.removeClass("dx-calendar-cell-range-hover")})),null===(i=this._$rangeStartHoverCell)||void 0===i||i.removeClass("dx-calendar-cell-range-hover-start"),null===(n=this._$rangeEndHoverCell)||void 0===n||n.removeClass("dx-calendar-cell-range-hover-end"),null===(o=this._$rangeStartDateCell)||void 0===o||o.removeClass("dx-calendar-range-start-date"),null===(r=this._$rangeEndDateCell)||void 0===r||r.removeClass("dx-calendar-range-end-date"),this._$rangeCells=u.map((t=>this._getCellByDate(t))),this._$rangeStartDateCell=this._getCellByDate(c[0]),this._$rangeEndDateCell=this._getCellByDate(c[1]),this._$rangeCells.forEach((t=>{t.addClass("dx-calendar-cell-in-range")})),null===(s=this._$rangeStartDateCell)||void 0===s||s.addClass("dx-calendar-range-start-date"),null===(a=this._$rangeEndDateCell)||void 0===a||a.addClass("dx-calendar-range-end-date"))},_renderHoveredRange(){var t,e,i,n,o;const{allowValueSelection:r,hoveredRange:s}=this.option();r&&this._isRangeMode()&&this._isMonthView()&&(null===(t=this._$hoveredRangeCells)||void 0===t||t.forEach((t=>{t.removeClass("dx-calendar-cell-range-hover")})),null===(e=this._$rangeStartHoverCell)||void 0===e||e.removeClass("dx-calendar-cell-range-hover-start"),null===(i=this._$rangeEndHoverCell)||void 0===i||i.removeClass("dx-calendar-cell-range-hover-end"),this._$hoveredRangeCells=s.map((t=>this._getCellByDate(t))),this._$rangeStartHoverCell=this._getCellByDate(s[0]),this._$rangeEndHoverCell=this._getCellByDate(s[s.length-1]),this._$hoveredRangeCells.forEach((t=>{t.addClass("dx-calendar-cell-range-hover")})),null===(n=this._$rangeStartHoverCell)||void 0===n||n.addClass("dx-calendar-cell-range-hover-start"),null===(o=this._$rangeEndHoverCell)||void 0===o||o.addClass("dx-calendar-cell-range-hover-end"))},_isMonthView(){return"month"===this.option("zoomLevel")},_isRangeMode(){return this.option("selectionMode")===Vd},_getCurrentDateFormat:()=>null,getCellAriaLabel(t){const e=this._getViewName(),i=this._isTodayCell(t),n=this._getCurrentDateFormat(),o=n?xd.Z.format(t,n):this._getCellText(t);return i?`${o}. ${Nd[e]}`:o},_getFirstAvailableDate(){let t=this.option("date");const e=this.option("min");return t=Ed.default.getViewFirstCellDate(this._getViewName(),t),new Date(e&&t<e?e:t)},_getCellByDate:Ad,isBoundary:Ad,_optionChanged(t){const{name:e,value:i}=t;switch(e){case"value":this._renderValue(),this._updateTableAriaLabel();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(i);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:this.callBase(t)}}}),Zd={month:Fd.inherit({_getViewName:()=>"month",_getCurrentDateFormat:()=>"longdate",_getDefaultOptions(){return(0,r.l)(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl(){this.callBase(),this._renderHeader()},_renderBody(){this.callBase(),this._$table.find(".dx-calendar-other-view").addClass("dx-calendar-other-month")},_renderFocusTarget:l.noop,_renderHeader(){const t=(0,o.Z)("<tr>"),e=(0,o.Z)("<thead>").append(t);this._$table.prepend(e);for(let e=0,i=this.option("colCount");e<i;e++)this._renderHeaderCell(e,t);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(t)},_renderHeaderCell(t,e){const{firstDayOfWeek:i}=this.option(),{full:n,abbreviated:r}=this._getDayCaption(i+t),s=(0,o.Z)("<th>").attr({scope:"col",abbr:n}).text(r);e.append(s)},_renderWeekHeaderCell(t){const e=(0,o.Z)("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});t.prepend(e)},_renderWeekNumberCell(t){const{showWeekNumbers:e,cellTemplate:i,selectionMode:n,selectWeekOnClick:r}=this.option();if(!e)return;const s=this._getWeekNumber(t.prevCellDate),a=Mt.Z.createElement("td"),l=(0,o.Z)(a);a.className="dx-calendar-week-number-cell","single"!==n&&r&&l.addClass("dx-calendar-week-selection"),i?i.render(this._prepareCellTemplateData(s,-1,l)):a.innerHTML=s,t.row.prepend(a),this.setAria({role:"gridcell",label:`Week ${s}`},l)},_getWeekNumber(t){const{weekNumberRule:e,firstDayOfWeek:i}=this.option();return"auto"===e?Ed.default.getWeekNumber(t,i,1===i?"firstFourDays":"firstDay"):Ed.default.getWeekNumber(t,i,e)},getNavigatorCaption(){return xd.Z.format(this.option("date"),"monthandyear")},_isTodayCell(t){const e=this.option("_todayDate")();return Ed.default.sameDate(t,e)},_isDateOutOfRange(t){const e=this.option("min"),i=this.option("max");return!Ed.default.dateInRange(t,e,i,"date")},_isOtherView(t){return t.getMonth()!==this.option("date").getMonth()},_isStartDayOfMonth(t){return Ed.default.sameDate(t,Ed.default.getFirstMonthDate(this.option("date")))},_isEndDayOfMonth(t){return Ed.default.sameDate(t,Ed.default.getLastMonthDate(this.option("date")))},_getCellText:t=>xd.Z.format(t,"d"),_getDayCaption(t){const e=t%this.option("colCount");return{full:xd.Z.getDayNames()[e],abbreviated:xd.Z.getDayNames("abbreviated")[e]}},_getFirstCellData(){const{firstDayOfWeek:t}=this.option(),e=Ed.default.getFirstMonthDate(this.option("date"));let i=t-e.getDay();const n=this.option("colCount");return i>=0&&(i-=n),e.setDate(e.getDate()+i),e},_getNextCellData:t=>((t=new Date(t)).setDate(t.getDate()+1),t),_getCellByDate(t){return this._$table.find(`td[data-value='${Od.Z.serializeDate(t,Ed.default.getShortDateFormat())}']`)},isBoundary(t){return Ed.default.sameMonthAndYear(t,this.option("min"))||Ed.default.sameMonthAndYear(t,this.option("max"))},_getDefaultDisabledDatesHandler:t=>function(e){const i=t.some((t=>Ed.default.sameDate(t,e.date)));if(i)return!0}}),year:Fd.inherit({_getViewName:()=>"year",_getCurrentDateFormat:()=>"monthandyear",_isTodayCell(t){const e=this.option("_todayDate")();return Ed.default.sameMonthAndYear(t,e)},_isDateOutOfRange(t){return!Ed.default.dateInRange(t,Ed.default.getFirstMonthDate(this.option("min")),Ed.default.getLastMonthDate(this.option("max")))},_isOtherView:()=>!1,_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:t=>xd.Z.getMonthNames("abbreviated")[t.getMonth()],_getFirstCellData(){const t=this.option("date"),e=new Date(t);return e.setDate(1),e.setMonth(0),e},_getNextCellData:t=>((t=new Date(t)).setMonth(t.getMonth()+1),t),_getCellByDate(t){const e=new Date(t);return e.setDate(1),this._$table.find(`td[data-value='${Od.Z.serializeDate(e,Ed.default.getShortDateFormat())}']`)},getNavigatorCaption(){return xd.Z.format(this.option("date"),"yyyy")},isBoundary(t){return Ed.default.sameYear(t,this.option("min"))||Ed.default.sameYear(t,this.option("max"))},_renderWeekNumberCell:l.noop}),decade:Fd.inherit({_getViewName:()=>"decade",_isTodayCell(t){const e=this.option("_todayDate")();return Ed.default.sameYear(t,e)},_isDateOutOfRange(t){const e=this.option("min"),i=this.option("max");return!Ed.default.dateInRange(t.getFullYear(),e&&e.getFullYear(),i&&i.getFullYear())},_isOtherView(t){const e=new Date(t);return e.setMonth(1),!Ed.default.sameDecade(e,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:t=>xd.Z.format(t,"yyyy"),_getFirstCellData(){const t=Ed.default.getFirstYearInDecade(this.option("date"))-1;return Ed.default.createDateWithFullYear(t,0,1)},_getNextCellData:t=>((t=new Date(t)).setFullYear(t.getFullYear()+1),t),getNavigatorCaption(){const t=this.option("date"),e=Ed.default.getFirstYearInDecade(t),i=new Date(t),n=new Date(t);return i.setFullYear(e),n.setFullYear(e+9),`${xd.Z.format(i,"yyyy")}-${xd.Z.format(n,"yyyy")}`},_isValueOnCurrentView:(t,e)=>Ed.default.sameDecade(t,e),_getCellByDate(t){const e=new Date(t);return e.setDate(1),e.setMonth(0),this._$table.find(`td[data-value='${Od.Z.serializeDate(e,Ed.default.getShortDateFormat())}']`)},isBoundary(t){return Ed.default.sameDecade(t,this.option("min"))||Ed.default.sameDecade(t,this.option("max"))},_renderWeekNumberCell:l.noop}),century:Fd.inherit({_getViewName:()=>"century",_isTodayCell(t){const e=this.option("_todayDate")();return Ed.default.sameDecade(t,e)},_isDateOutOfRange(t){const e=Ed.default.getFirstYearInDecade(t),i=Ed.default.getFirstYearInDecade(this.option("min")),n=Ed.default.getFirstYearInDecade(this.option("max"));return!Ed.default.dateInRange(e,i,n)},_isOtherView(t){const e=new Date(t);return e.setMonth(1),!Ed.default.sameCentury(e,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText(t){const e=xd.Z.format(t,"yyyy"),i=new Date(t);return i.setFullYear(i.getFullYear()+9),`${e} - ${xd.Z.format(i,"yyyy")}`},_getFirstCellData(){const t=Ed.default.getFirstDecadeInCentury(this.option("date"))-10;return Ed.default.createDateWithFullYear(t,0,1)},_getNextCellData:t=>((t=new Date(t)).setFullYear(t.getFullYear()+10),t),_getCellByDate(t){const e=new Date(t);return e.setDate(1),e.setMonth(0),e.setFullYear(Ed.default.getFirstYearInDecade(e)),this._$table.find(`td[data-value='${Od.Z.serializeDate(e,Ed.default.getShortDateFormat())}']`)},getNavigatorCaption(){const t=this.option("date"),e=Ed.default.getFirstDecadeInCentury(t),i=new Date(t),n=new Date(t);return i.setFullYear(e),n.setFullYear(e+99),`${xd.Z.format(i,"yyyy")}-${xd.Z.format(n,"yyyy")}`},isBoundary(t){return Ed.default.sameCentury(t,this.option("min"))||Ed.default.sameCentury(t,this.option("max"))},_renderWeekNumberCell:l.noop})},Hd=Zd,Ld=(0,f.addNamespace)(oo.u,"dxCalendar"),jd={month:3,year:2,decade:1,century:0},zd="month",Wd="year",Kd="decade",qd="century",Ud={SingleSelection:class extends Td{constructor(t){super(t),this.NAME="SingleSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"single"}}selectValue(t,e){this.skipNavigate(),this.dateValue(t,e)}updateAriaSelected(t,e){t??(t=[this.dateOption("value")]),e??(e=[]),super.updateAriaSelected(t,e)}getDefaultCurrentDate(){return this.dateOption("value")}restoreValue(){this.calendar.option("value",null)}_updateViewsValue(t){this._updateViewsOption("value",t[0])}},MultipleSelection:class extends Td{constructor(t){super(t),this.NAME="MultiSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"multiple",onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(t,e){const i=[...this.dateOption("value")],n=i.findIndex((e=>(null==e?void 0:e.toDateString())===t.toDateString()));n>-1?i.splice(n,1):i.push(t),this.skipNavigate(),this._updateCurrentDate(t),this._currentDateChanged=!0,this.dateValue(i,e)}updateAriaSelected(t,e){t??(t=this.dateOption("value")),e??(e=[]),super.updateAriaSelected(t,e)}getDefaultCurrentDate(){const t=this.dateOption("value").filter((t=>t));return this._getLowestDateInArray(t)}restoreValue(){this.calendar.option("value",[])}_weekNumberClickHandler(t){let{rowDates:e,event:i}=t;const n=e.filter((t=>!this._isDateDisabled(t)));this.dateValue(n,i)}},RangeSelection:class extends Td{constructor(t){super(t),this.NAME="RangeSelection"}getViewOptions(){const t=this._getValue();return{value:t,range:this._getDaysInRange(t[0],t[1]),selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this),onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(t,e){const[i,n]=this._getValue();this.skipNavigate(),this._updateCurrentDate(t),this._currentDateChanged=!0,!0===this.calendar.option("_allowChangeSelectionOrder")?(this.calendar._valueSelected=!0,"startDate"===this.calendar.option("_currentSelection")?this.calendar._convertToDate(t)>this.calendar._convertToDate(n)?this.dateValue([t,null],e):this.dateValue([t,n],e):this.calendar._convertToDate(t)>=this.calendar._convertToDate(i)?this.dateValue([i,t],e):this.dateValue([t,null],e)):!i||n?this.dateValue([t,null],e):this.dateValue(i<t?[i,t]:[t,i],e)}updateAriaSelected(t,e){t??(t=this._getValue()),e??(e=[]),super.updateAriaSelected(t,e)}processValueChanged(t,e){super.processValueChanged(t,e);const i=this._getRange();this._updateViewsOption("range",i)}getDefaultCurrentDate(){const{_allowChangeSelectionOrder:t,_currentSelection:e}=this.calendar.option(),i=this.dateOption("value");if(t){if("startDate"===e&&i[0])return i[0];if("endDate"===e&&i[1])return i[1]}const n=i.filter((t=>t));return this._getLowestDateInArray(n)}restoreValue(){this.calendar.option("value",[null,null])}_getValue(){const t=this.dateOption("value");if(!t.length)return t;let[e,i]=t;return e&&i&&e>i&&([e,i]=[i,e]),[e,i]}_getRange(){const[t,e]=this._getValue();return this._getDaysInRange(t,e)}_getDaysInRange(t,e){if(!t||!e)return[];const{currentDate:i,viewsCount:n}=this.calendar.option(),o=this.calendar._isAdditionalViewDate(i),r=Ed.default.getFirstMonthDate(Ed.default.addDateInterval(i,"month",o?-2:-1)),s=Ed.default.getLastMonthDate(Ed.default.addDateInterval(i,"month",o?1:n)),a=new Date(Math.max(r,t)),l=new Date(Math.min(s,e));return[...Ed.default.getDatesOfInterval(a,l,864e5),l]}_cellHoverHandler(t){const e=this._isMaxZoomLevel(),[i,n]=this._getValue(),{_allowChangeSelectionOrder:o,_currentSelection:r}=this.calendar.option();if(e){if(!i||n||o&&"startDate"===r){if(i||!n||o&&"endDate"===r){if(i&&n){if("startDate"===r&&t.value<i)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(t.value,i));if("endDate"===r&&t.value>n)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(n,t.value))}}else if(t.value<n)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(t.value,n))}else if(t.value>i)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(i,t.value));this._updateViewsOption("hoveredRange",[])}}_weekNumberClickHandler(t){let{rowDates:e,event:i}=t;const n=e.filter((t=>!this._isDateDisabled(t))),o=n.length?[n[0],n[n.length-1]]:[null,null];this.dateValue(o,i)}}},Gd=U.inherit({_activeStateUnit:".dx-calendar-cell",_getDefaultOptions(){return(0,r.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,viewsCount:1,zoomLevel:zd,maxZoomLevel:zd,minZoomLevel:qd,selectionMode:"single",selectWeekOnClick:!0,showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator(),options:{focusStateEnabled:!0}}])},_supportedKeys(){return(0,r.l)(this.callBase(),{rightArrow(t){t.preventDefault(),(0,f.isCommandKeyPressed)(t)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow(t){t.preventDefault(),(0,f.isCommandKeyPressed)(t)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow(t){if(t.preventDefault(),(0,f.isCommandKeyPressed)(t))this._navigateUp();else{if(Se.default.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow(t){if(t.preventDefault(),(0,f.isCommandKeyPressed)(t))this._navigateDown();else{if(Se.default.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home(t){t.preventDefault();const e=this.option("zoomLevel"),i=this.option("currentDate"),n=this._dateOption("min");if(this._view.isDateDisabled(i))return;const o=Ed.default.sameView(e,i,n)?n:Ed.default.getViewFirstCellDate(e,i);this._moveToClosestAvailableDate(o)},end(t){t.preventDefault();const e=this.option("zoomLevel"),i=this.option("currentDate"),n=this._dateOption("max");if(this._view.isDateDisabled(i))return;const o=Ed.default.sameView(e,i,n)?n:Ed.default.getViewLastCellDate(e,i);this._moveToClosestAvailableDate(o)},pageUp(t){t.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown(t){t.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:l.noop,enter:this._enterKeyHandler})},_enterKeyHandler(t){if(this._isMaxZoomLevel()){if(!this._view.isDateDisabled(this.option("currentDate"))){const e=this._updateTimeComponent(this.option("currentDate"));this._selectionStrategy.selectValue(e,t)}}else this._navigateDown()},_getSerializationFormat(t){const e=this.option(t||"value");return this.option("dateSerializationFormat")?this.option("dateSerializationFormat"):(0,s.kE)(e)?"number":(0,s.HD)(e)?Od.Z.getDateSerializationFormat(e):void 0},_convertToDate:t=>Od.Z.deserializeDate(t),_dateValue(t,e){if(e){if("keydown"===e.type){const t=this._view._getContouredCell().get(0);e.target=t}this._saveValueChangeEvent(e)}this._dateOption("value",t)},_dateOption(t,e){const i="value"===t&&!this._isSingleMode(),n=this.option("value");if(1===arguments.length)return i?(n??[]).map((t=>this._convertToDate(t))):this._convertToDate(this.option(t));const o=this._getSerializationFormat(t),r=i?(null==e?void 0:e.map((t=>Od.Z.serializeDate(t,o))))||[]:Od.Z.serializeDate(e,o);this.option(t,r)},_isSingleMode(){return"single"===this.option("selectionMode")},_shiftDate(t,e,i,n){switch(t){case zd:e.setDate(e.getDate()+i*n);break;case Wd:e.setMonth(e.getMonth()+i*n);break;case Kd:e.setFullYear(e.getFullYear()+i*n);break;case qd:e.setFullYear(e.getFullYear()+10*i*n)}},_moveCurrentDateByOffset(t){const e=this.option("currentDate");let i=new Date(e);const n=this.option("zoomLevel");this._shiftDate(n,i,t,1);const o=this._getMaxDate(),r=this._getMinDate();let s=this._areDatesInNeighborView(n,i,e),a=(0,ys.Z2)(i,r,o)&&s;const l=new Date(i);for(;a;){if(!this._view.isDateDisabled(l)){i=l;break}this._shiftDate(n,l,t,1),s=this._areDatesInNeighborView(n,l,e),a=(0,ys.Z2)(l,r,o)&&s}if(this._view.isDateDisabled(e)||this._view.isDateDisabled(i)){const e=t>0?1:-1;(1===e?this._isNextViewDisabled():this._isPrevViewDisabled())?this._moveToClosestAvailableDate(i):this._waitRenderView(e)}else this._skipNavigate=!0,this.option("currentDate",i)},_isNextViewDisabled(){return this._navigator._nextButton.option("disabled")},_isPrevViewDisabled(){return this._navigator._prevButton.option("disabled")},_areDatesInSameView(t,e,i){switch(t){case zd:return e.getMonth()===i.getMonth();case Wd:return e.getYear()===i.getYear();case Kd:return parseInt(e.getYear()/10)===parseInt(i.getYear()/10);case qd:return parseInt(e.getYear()/100)===parseInt(i.getYear()/100)}},_areDatesInNeighborView(t,e,i){switch(t){case zd:return((t,e)=>{const i=Math.abs(t-e);return Math.min(i,12-i)})(e.getMonth(),i.getMonth())<=1;case Wd:return Math.abs(e.getYear()-i.getYear())<=1;case Kd:return Math.abs(e.getYear()-i.getYear())<=10;case qd:return Math.abs(e.getYear()-i.getYear())<=100}},_moveToClosestAvailableDate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("currentDate"),e=new Date(t);const i=this.option("zoomLevel"),n=!this._isDateNotAvailable(e);let o,r,s=n,a=n;const l=new Date(e),c=new Date(e);do{if(s){e=l;break}if(a){e=c;break}this._shiftDate(i,l,1,1),this._shiftDate(i,c,1,-1),o=this._areDatesInSameView(i,l,t),r=this._areDatesInSameView(i,c,t),s=o&&!this._isDateNotAvailable(l),a=r&&!this._isDateNotAvailable(c)}while(o||r);this.option("currentDate",e)},_isDateNotAvailable(t){const e=this._getMaxDate(),i=this._getMinDate();return!(0,ys.Z2)(t,i,e)||this._view.isDateDisabled(t)},_init(){this.callBase(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_initSelectionStrategy(){const t=this._getSelectionStrategyName(),e=Ud[t];this._selectionStrategy&&this._selectionStrategy.NAME===t||(this._selectionStrategy=new e(this))},_refreshSelectionStrategy(){this._initSelectionStrategy(),this._selectionStrategy.restoreValue(),this._refresh()},_getSelectionStrategyName(){switch(this.option("selectionMode")){case"multiple":return"MultipleSelection";case"range":return"RangeSelection";default:return"SingleSelection"}},_correctZoomLevel(){const t=this.option("minZoomLevel"),e=this.option("maxZoomLevel"),i=this.option("zoomLevel");jd[e]<jd[t]||(jd[i]>jd[e]?this.option("zoomLevel",e):jd[i]<jd[t]&&this.option("zoomLevel",t))},_initCurrentDate(){const t=this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate())??this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",t)},_getNormalizedDate(t){return t=Ed.default.normalizeDate(t,this._getMinDate(),this._getMaxDate()),(0,s.$K)(t)?this._getDate(t):t},_initActions(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates(){this._templateManager.addDefaultTemplates({cell:new El.k((t=>{const e=t.model;(0,o.Z)(t.container).append((0,o.Z)("<span>").text(e&&e.text||String(e)))}))}),this.callBase()},_updateCurrentDate(t){if(Se.default.isAnimating(this._$viewsWrapper)&&Se.default.stop(this._$viewsWrapper,!0),this._getMinDate()>this._getMaxDate())return void this.option("currentDate",new Date);const e=this._getNormalizedDate(t);if(t.getTime()!==e.getTime())return void this.option("currentDate",new Date(e));let i=this._getViewsOffset(this._view.option("date"),e);0!==i&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(i=0),this._view&&0!==i&&!this._suppressNavigation?this._additionalView?i>2||i<-1?(this._refreshViews(),this._setViewContoured(e),this._updateAriaId(e),this._renderNavigator()):1===i&&this._skipNavigate?(this._setViewContoured(e),this._updateAriaId(e)):this._navigate(i,e):this._navigate(i,e):(this._renderNavigator(),this._setViewContoured(e),this._updateAriaId(e)),this._skipNavigate=!1},_isAdditionalViewDate(t){return!!this._additionalView&&t>=this._additionalView._getFirstAvailableDate()},_getActiveView(t){return this._isAdditionalViewDate(t)?this._additionalView:this._view},_setViewContoured(t){var e;(this.option("skipFocusCheck")||(0,o.Z)(this._$viewsWrapper).is(":focus"))&&(this._view.option("contouredDate",null),null===(e=this._additionalView)||void 0===e||e.option("contouredDate",null),(this._isAdditionalViewDate(t)?this._additionalView:this._view).option("contouredDate",t))},_getMinDate(){return this.option("_rangeMin")||(this.min||(this.min=this._dateOption("min")||new Date(1e3,0)),this.min)},_getMaxDate(){return this.option("_rangeMax")||(this.max||(this.max=this._dateOption("max")||new Date(3e3,0)),this.max)},_getViewsOffset(t,e){const i=this.option("zoomLevel");if(i===zd)return this._getMonthsOffset(t,e);let n;switch(i){case qd:n=100;break;case Kd:n=10;break;default:n=1}return parseInt(e.getFullYear()/n)-parseInt(t.getFullYear()/n)},_getMonthsOffset:(t,e)=>12*(e.getFullYear()-t.getFullYear())+(e.getMonth()-t.getMonth()),_waitRenderView(t){if(this._alreadyViewRender)return;this._alreadyViewRender=!0;const e=this._getDateByOffset(t*this._getRtlCorrection());this._moveToClosestAvailableDate(e),this._waitRenderViewTimeout=setTimeout((()=>{this._alreadyViewRender=!1}))},_getRtlCorrection(){return this.option("rtlEnabled")?-1:1},_getDateByOffset(t,e){const i=(e=this._getDate(e??this.option("currentDate"))).getDate(),n=Ed.default.getDifferenceInMonth(this.option("zoomLevel"))*t;e.setDate(1),e.setMonth(e.getMonth()+n);const o=Ed.default.getLastMonthDate(e).getDate();return e.setDate(i>o?o:i),e},_focusTarget(){return this._$viewsWrapper},_focusEventTarget(){return this.$element()},_initMarkup(){this._renderSubmitElement();const t=this.$element();t.addClass("dx-calendar"),t.toggleClass("dx-calendar-range","range"===this.option("selectionMode")),this._renderBody(),t.append(this.$body),this._renderViews(),this._renderNavigator(),this.callBase(),this._renderEvents(),t.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this._updateNavigatorLabels(),this.setAria("role","application"),this._moveToClosestAvailableDate()},_render(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody(){this._$viewsWrapper||(this.$body=(0,o.Z)("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=(0,o.Z)("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_setAriaReadonly:l.noop,_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews(){this.$element().addClass(`dx-calendar-view-${this.option("zoomLevel")}`);const{currentDate:t,viewsCount:e}=this.option();if(this.$element().toggleClass("dx-calendar-multiview",e>1),this._view=this._renderSpecificView(t),(0,p.hasWindow)()){const i=this._getDateByOffset(-1,t);this._beforeView=this._isViewAvailable(i)?this._renderSpecificView(i):null;const n=this._getDateByOffset(e,t);n.setDate(1),this._afterView=this._isViewAvailable(n)?this._renderSpecificView(n):null}e>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,t))),this._translateViews()},_renderSpecificView(t){const{zoomLevel:e}=this.option(),i=Hd[e],n=(0,o.Z)("<div>").appendTo(this._$viewsWrapper),r=this._viewConfig(t);return this._createComponent(n,i,r)},_viewConfig(t){let e=this.option("disabledDates");return e=(0,s.mf)(e)?this._injectComponent(e.bind(this)):e,(0,n.Z)({},this._selectionStrategy.getViewOptions(),{date:t,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:this.option("firstDayOfWeek")??xd.Z.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),selectWeekOnClick:this.option("selectWeekOnClick"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:e,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")})},_renderEvents(){P.Z.off(this._$viewsWrapper,Ld),"range"===this.option("selectionMode")&&P.Z.on(this._$viewsWrapper,Ld,null,(()=>{this._updateViewsOption("hoveredRange",[])}))},_injectComponent(t){const e=this;return function(i){return(0,r.l)(i,{component:e}),t(i)}},_isViewAvailable(t){const e=this.option("zoomLevel"),i=Ed.default.getViewMinBoundaryDate(e,this._getMinDate()),n=Ed.default.getViewMaxBoundaryDate(e,this._getMaxDate());return Ed.default.dateInRange(t,i,n)},_translateViews(){const{viewsCount:t}=this.option();(0,hr.pB)(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,t),this._moveViewElement(this._additionalView,1)},_moveViewElement(t,e){t&&(0,hr.pB)(t.$element(),{left:this._getViewPosition(e),top:0})},_getViewPosition(t){return 100*t*(this.option("rtlEnabled")?-1:1)+"%"},_cellClickHandler(t){const e=this.option("zoomLevel"),i=Ed.default.getViewDown(e),n=this._isMaxZoomLevel();if(i&&!n)this._navigateDown(t.event.currentTarget);else{const e=this._updateTimeComponent(t.value);this._selectionStrategy.selectValue(e,t.event),this._cellClickAction(t)}},_updateTimeComponent(t){const e=new Date(t),i=this._dateOption("value");return i&&this._isSingleMode()&&(e.setHours(i.getHours()),e.setMinutes(i.getMinutes()),e.setSeconds(i.getSeconds()),e.setMilliseconds(i.getMilliseconds())),e},_isMaxZoomLevel(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown(t){const e=this.option("zoomLevel");if(this._isMaxZoomLevel())return;const i=Ed.default.getViewDown(e);if(!i)return;let n=this._view.option("contouredDate")||this._view.option("date");t&&(n=(0,o.Z)(t).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",n),this.option("zoomLevel",i),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))},_renderNavigator(){this._navigator||(this._navigator=new Bd((0,o.Z)("<div>"),this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()},_navigatorConfig(){const{focusStateEnabled:t,rtlEnabled:e}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),focusStateEnabled:t,rtlEnabled:e,tabIndex:void 0}},_navigatorClickHandler(t){const{currentDate:e,viewsCount:i}=this.option();let n=t.direction;if(i>1){const t=this._isAdditionalViewDate(e);(t&&n<0||!t&&n>0)&&(n*=2)}const o=this._getDateByOffset(n,e);this._moveToClosestAvailableDate(o)},_navigateUp(){const t=this.option("zoomLevel"),e=Ed.default.getViewUp(t);e&&!this._isMinZoomLevel(t)&&(this.option("zoomLevel",e),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel(t){const e=this._getMinDate(),i=this._getMaxDate();return Ed.default.sameView(t,e,i)||this.option("minZoomLevel")===t},_updateButtonsVisibility(){this._navigator.toggleButton("next",!(0,s.$K)(this._afterView)),this._navigator.toggleButton("prev",!(0,s.$K)(this._beforeView))},_renderSwipeable(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),fu,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler(t){Se.default.stop(this._$viewsWrapper,!0);const{viewsCount:e}=this.option();this._toggleGestureCoverCursor("grabbing"),t.event.maxLeftOffset=this._getRequiredView("next")?1/e:0,t.event.maxRightOffset=this._getRequiredView("prev")?1/e:0},_toggleGestureCoverCursor(t){(0,o.Z)(".dx-gesture-cover").css("cursor",t)},_getRequiredView(t){let e;const i=this.option("rtlEnabled");return"next"===t?e=i?this._beforeView:this._afterView:"prev"===t&&(e=i?this._afterView:this._beforeView),e},_swipeUpdateHandler(t){const{offset:e}=t.event;(0,hr.pB)(this._$viewsWrapper,{left:e*this._viewWidth(),top:0}),this._updateNavigatorCaption(e)},_swipeEndHandler(t){this._toggleGestureCoverCursor("auto");const{currentDate:e,rtlEnabled:i}=this.option(),{targetOffset:n}=t.event,o=n?n/Math.abs(n):0,r=this._isAdditionalViewDate(e)&&(i?-1===o:1===o);if(0===o)return void this._animateWrapper(0,250);const s=-o*this._getRtlCorrection()*(r?2:1);let a=this._getDateByOffset(s);this._isDateInInvalidRange(a)&&(a=o>=0?new Date(this._getMinDate()):new Date(this._getMaxDate())),this.option("currentDate",a)},_viewWidth(){return this._viewWidthValue||(this._viewWidthValue=(0,M.dz)(this.$element())/this.option("viewsCount")),this._viewWidthValue},_updateNavigatorCaption(t){t*=this._getRtlCorrection();const e=this.option("viewsCount")>1;let i,n;t>.5&&this._beforeView?(i=this._beforeView,n=e&&this._view):t<-.5&&this._afterView?(i=e?this._additionalView:this._afterView,n=e?this._afterView:null):(i=this._view,n=e?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(i,n))},_getViewsCaption(t,e){let i=t.getNavigatorCaption();const{viewsCount:n}=this.option();return n>1&&e&&(i=`${i} - ${e.getNavigatorCaption()}`),i},_isDateInInvalidRange(t){if(this._view.isBoundary(t))return;const e=this._getMinDate(),i=this._getMaxDate(),n=Ed.default.normalizeDate(t,e,i);return n===e||n===i},_renderFooter(){const t=this.option("showTodayButton");if(t){const t=this._createComponent((0,o.Z)("<div>"),nr,{focusStateEnabled:this.option("focusStateEnabled"),text:C.Z.format("dxCalendar-todayButtonText"),onClick:t=>{this._toTodayView(t)},type:(0,At.dC)()?"normal":"default",stylingMode:(0,At.dC)()?"outlined":"text",integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=(0,o.Z)("<div>").addClass("dx-calendar-footer").append(t),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",t)},_renderSubmitElement(){this._$submitElement=(0,o.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(t){const e=this._convertToDate(t);this._getSubmitElement().val(Od.Z.serializeDate(e,"yyyy-MM-dd"))},_getSubmitElement(){return this._$submitElement},_animateShowView(){Se.default.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250),this.option("viewsCount")>1&&(Se.default.stop(this._additionalView.$element(),!0),this._popAnimationView(this._additionalView,.6,1,250))},_popAnimationView:(t,e,i,n)=>Se.default.animate(t.$element(),{type:"pop",from:{scale:e,opacity:e},to:{scale:i,opacity:i},duration:n}),_navigate(t,e){if(0!==t&&1!==Math.abs(t)&&this._isViewAvailable(e)){const i=this._renderSpecificView(e);t>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=i):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=i),this._translateViews()}const i=-this._getRtlCorrection()*(t>0?1:t<0?-1:0)*this._viewWidth();this._$viewsWrapper.position().left!==i&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(t,e):this._animateWrapper(i,250).done(this._wrapperAnimationEndHandler.bind(this,t,e)))},_animateWrapper(t,e){return Se.default.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:t},duration:e})},_getDate:t=>new Date(t),_toTodayView(t){const e=new Date;this._isMaxZoomLevel()?this._selectionStrategy.selectValue(e,t.event):(this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(e,t.event),this._animateShowView(),this._preventViewChangeAnimation=!1)},_wrapperAnimationEndHandler(t,e){this._rearrangeViews(t),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(e),this._updateAriaId(e),this._selectionStrategy.updateAriaSelected()},_rearrangeViews(t){var e;if(0===t)return;const{viewsCount:i}=this.option();let n,o,r,s,a;if(t<0?(n=1,o="_beforeView",r="_afterView",s="_view",a=1===i?"_view":"_additionalView"):(n=-1,o="_afterView",r="_beforeView",s=1===i?"_view":"_additionalView",a="_view"),!this[o])return;const l=this[o].option("date");null===(e=this[r])||void 0===e||e.$element().remove(),this[r]=this._renderSpecificView(this._getDateByOffset(n*i,l)),this[a].$element().remove(),1===i?this[a]=this[o]:(this[a]=this[s],this[s]=this[o]);const c=this._getDateByOffset(-n,l);this[o]=this._isViewAvailable(c)?this._renderSpecificView(c):null},_resetLocation(){(0,hr.pB)(this._$viewsWrapper,{left:0,top:0})},_clean(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache(){delete this._viewWidthValue},_disposeViews(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._additionalView&&this._additionalView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate},_dispose(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews(){this._resetActiveState(),this._disposeViews(),this._renderViews()},_visibilityChanged(){this._translateViews()},_shouldSkipFocusEvent(t){const{target:e,relatedTarget:i}=t;return(0,o.Z)(e).parents(".dx-calendar").length&&(0,o.Z)(i).parents(".dx-calendar").length},_focusInHandler(t){(0,o.Z)(t.target).is(this._$viewsWrapper)&&this._setViewContoured(this.option("currentDate")),this._shouldSkipFocusEvent(t)||(this.callBase.apply(this,arguments),this._toggleFocusClass(!0,this.$element()))},_focusOutHandler(t){var e;(0,o.Z)(t.target).is(this._$viewsWrapper)&&(this._view.option("contouredDate",null),null===(e=this._additionalView)||void 0===e||e.option("contouredDate",null)),this._shouldSkipFocusEvent(t)||(this.callBase.apply(this,arguments),this._toggleFocusClass(!1,this.$element()))},_updateViewsOption(t,e){var i,n,o;this._view.option(t,e),null===(i=this._additionalView)||void 0===i||i.option(t,e),null===(n=this._beforeView)||void 0===n||n.option(t,e),null===(o=this._afterView)||void 0===o||o.option(t,e)},_setViewsMinOption(t){this._restoreViewsMinMaxOptions(),this.option("_rangeMin",this._convertToDate(t)),this._updateViewsOption("min",this._getMinDate())},_setViewsMaxOption(t){this._restoreViewsMinMaxOptions(),this.option("_rangeMax",this._convertToDate(t)),this._updateViewsOption("max",this._getMaxDate())},_restoreViewsMinMaxOptions(){this._resetActiveState(),this.option({_rangeMin:null,_rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())},_updateNavigatorLabels(){let t=this.option("zoomLevel");t=t.charAt(0).toUpperCase()+t.slice(1);const e=this._navigator._caption.option("text"),i=C.Z.format(`dxCalendar-previous${t}ButtonLabel`),n=C.Z.format(`dxCalendar-caption${t}Label`),o=C.Z.format(`dxCalendar-next${t}ButtonLabel`);this.setAria("label",i,this._navigator._prevButton.$element()),this.setAria("label",`${e}. ${n}`,this._navigator._caption.$element()),this.setAria("label",o,this._navigator._nextButton.$element())},_updateAriaSelected(t,e){e.forEach((t=>{this.setAria("selected",!1,this._view._getCellByDate(t))})),t.forEach((t=>{this.setAria("selected",!0,this._view._getCellByDate(t))})),this.option("viewsCount")>1&&(e.forEach((t=>{this.setAria("selected",!1,this._additionalView._getCellByDate(t))})),t.forEach((t=>{this.setAria("selected",!0,this._additionalView._getCellByDate(t))})))},_updateAriaId(t){t=t??this.option("currentDate");const e=`dx-${new H.Z}`,i=this._getActiveView(t)._getCellByDate(t);this.setAria("id",e,i),this.setAria("activedescendant",e),this._onContouredChanged(e)},_suppressingNavigation(t,e){this._suppressNavigation=!0,t.apply(this,e),delete this._suppressNavigation},_optionChanged(t){const{value:e,previousValue:i}=t;switch(t.name){case"width":this.callBase(t),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"selectWeekOnClick":case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"focusStateEnabled":case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(i)),this._updateCurrentDate(e);break;case"zoomLevel":this.$element().removeClass(`dx-calendar-view-${i}`),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId(),this._updateNavigatorLabels();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":this._selectionStrategy.processValueChanged(e,i),this._setSubmitValue(e),this.callBase(t);break;case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",e);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"skipFocusCheck":break;default:this.callBase(t)}},getContouredDate(){return this._view.option("contouredDate")}});(0,c.default)("dxCalendar",Gd);const Yd=Gd,{abstract:Qd}=m.default,Xd=m.default.inherit({ctor(t){this.dateBox=t},widgetOption(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget(t){t=t||(0,o.Z)("<div>"),this._widget=this._createWidget(t),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget(t){const e=this._getWidgetName(),i=this._getWidgetOptions();return this.dateBox._createComponent(t,e,i)},_getWidgetOptions:Qd,_getWidgetName:Qd,getDefaultOptions:()=>({mode:"text"}),getDisplayFormat:Qd,supportedKeys:l.noop,getKeyboardListener:l.noop,customizeButtons:l.noop,getParsedText:(t,e)=>xd.Z.parse(t,e)||xd.Z.parse(t),renderInputMinMax:l.noop,renderOpenedState(){this._updateValue()},popupConfig:Qd,_dimensionChanged(){var t;null===(t=this._getPopup())||void 0===t||t.repaint()},renderPopupContent(){const t=this._getPopup();this._renderWidget();const e=t.$content().parent();P.Z.off(e,"mousedown"),P.Z.on(e,"mousedown",this._preventFocusOnPopup.bind(this))},_preventFocusOnPopup(t){t.preventDefault()},_getWidgetContainer(){return this._getPopup().$content()},_getPopup(){return this.dateBox._popup},popupShowingHandler:l.noop,popupHiddenHandler:l.noop,_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:l.noop,getDefaultDate:()=>new Date,textChangedHandler:l.noop,renderValue(){this.dateBox.option("opened")&&this._updateValue()},getValue(){return this._widget.option("value")},isAdaptivityChanged:()=>!1,dispose(){const t=this._getPopup();t&&t.$content().empty()},dateBoxValue(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}}),Jd=Xd,th=Jd.inherit({NAME:"Calendar",getDefaultOptions(){return(0,r.l)(this.callBase(),{todayButtonText:C.Z.format("dxCalendar-todayButtonText")})},supportedKeys(){const t=function(t){return!!this.option("opened")&&(t.preventDefault(),!0)};return{rightArrow(){if(this.option("opened"))return!0},leftArrow(){if(this.option("opened"))return!0},enter:function(t){if(this.dateBox.option("opened")){if(t.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){const e=this._getContouredValue(),i=this._lastActionElement,n=this._closeDropDownByEnter();return n&&e&&"calendar"===i&&this.dateBoxValue(e,t),n&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(t),!n}return!0}this.dateBox._valueChangeEventHandler(t)}.bind(this),home:t,end:t}},getDisplayFormat:t=>t||"shortdate",_closeDropDownByEnter:()=>!0,_getWidgetName:()=>Yd,_getContouredValue(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions(){const t=this.dateBox.option("disabledDates");return(0,r.l)(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,selectionMode:"single",dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),disabledDates:(0,s.mf)(t)?this._injectComponent(t.bind(this.dateBox)):t,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent(t){const e=this;return function(i){return(0,r.l)(i,{component:e.dateBox}),t(i)}},_refreshActiveDescendant(t){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",t.actionValue)},_getTodayButtonConfig(){const t=this.dateBox.option("buttonsLocation"),e="default"===t?["bottom","center"]:(0,l.splitPair)(t),i=(0,At.x2)()?"text":"outlined";return{widget:"dxButton",toolbar:e[0],location:"after"===e[1]?"before":e[1],options:{onClick:t=>{this._widget._toTodayView(t)},text:this.dateBox.option("todayButtonText"),elementAttr:{class:"dx-button-today"},stylingMode:i}}},_isCalendarVisible(){const{calendarOptions:t}=this.dateBox.option();return(0,s.Qr)(t)||!1!==t.visible},_getPopupToolbarItems(t){return"useButtons"===this.dateBox.option("applyValueMode")&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...t]:t},popupConfig:t=>(0,r.l)(!0,t,{position:{collision:"flipfit flip"},width:"auto"}),_valueChangedHandler(t){const{value:e}=t,i=t.previousValue;Ed.default.sameDate(e,i)&&Ed.default.sameHoursAndMinutes(e,i)||"instantly"===this.dateBox.option("applyValueMode")&&this.dateBoxValue(this.getValue(),t.event)},_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler(t){const{dateBox:e}=this;"instantly"===e.option("applyValueMode")&&(e.option("opened",!1),this.dateBoxValue(this.getValue(),t.event))}}),eh=th,ih=["year","day","month","day"],nh=["hours","minutes","seconds","milliseconds"],oh={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:864e5,ONE_YEAR:31536e6,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){const t=new Date;return new Date(t.getFullYear()+50,t.getMonth(),t.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:()=>"yyyy-MM-dd",components:ih},time:{getStandardPattern:()=>"HH:mm",components:nh},datetime:{getStandardPattern(){let t;return function(){const e=(0,o.Z)("<input>").attr("type","datetime");e.val("2000-01-01T01:01Z"),e.val()&&(t="yyyy-MM-ddTHH:mmZ")}(),t||(t="yyyy-MM-ddTHH:mm:ssZ"),oh.FORMATS_INFO.datetime.getStandardPattern=function(){return t},t},components:[...ih,...nh]},"datetime-local":{getStandardPattern:()=>"yyyy-MM-ddTHH:mm:ss",components:[...ih,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat(t,e){const i=oh.FORMATS_INFO[e].getStandardPattern();return Od.Z.serializeDate(t,i)},fromStandardDateFormat(t){const e=Od.Z.dateParser(t);return(0,s.J_)(e)?e:void 0},getMaxMonthDay:(t,e)=>new Date(t,e+1,0).getDate(),mergeDates(t,e,i){if(!e)return e||null;if(!t||isNaN(t.getTime())){const e=new Date(null);t=new Date(e.getFullYear(),e.getMonth(),e.getDate())}const n=new Date(t.valueOf()),o=oh.FORMATS_INFO[i];return(0,g.each)(o.components,(function(){const t=oh.DATE_COMPONENTS_INFO[this];n[t.setter](e[t.getter]())})),n},getLongestCaptionIndex(t){let e,i=0,n=0;for(e=0;e<t.length;++e)t[e].length>n&&(i=e,n=t[e].length);return i},formatUsesMonthName:t=>xd.Z.formatUsesMonthName(t),formatUsesDayName:t=>xd.Z.formatUsesDayName(t),getLongestDate(t,e,i){const n=function(t){const e=typeof t;return"string"===e?"format":"object"===e&&void 0!==t.type?t.type:null}(t);let o=9;n&&!oh.formatUsesMonthName(n)||(o=oh.getLongestCaptionIndex(e));const r=new Date(1888,o,21,23,59,59,999);if(!n||oh.formatUsesDayName(n)){const t=r.getDate()-r.getDay()+oh.getLongestCaptionIndex(i);r.setDate(t)}return r},normalizeTime(t){t.setSeconds(0),t.setMilliseconds(0)}};oh.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter(t,e){const i=new Date(e.getTime());return i.setFullYear(t),xd.Z.format(i,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter(t,e){const i=new Date(e.getTime());return i.setDate(t),xd.Z.format(i,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:t=>xd.Z.getMonthNames()[t],startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:t=>xd.Z.format(new Date(0,0,0,t),"hour"),startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:t=>xd.Z.format(new Date(0,0,0,0,t),"minute"),startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:t=>xd.Z.format(new Date(0,0,0,0,0,t),"second"),startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:t=>xd.Z.format(new Date(0,0,0,0,0,0,t),"millisecond"),startValue:0,endValue:999}};const rh=oh,sh=function(t,e,i){ah(t,e,i)},ah=function(t,e,i){t.css("transform",`rotate(${e}deg) translate(0,${i}px)`)},lh=U.inherit({_getDefaultOptions(){return(0,r.l)(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue(){return this.option("value")||new Date},_init(){this.callBase(),this.$element().addClass("dx-timeview")},_render(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox(){const t=(0,o.Z)("<div>").appendTo(this.$element()),e=[];this.option("_showClock")&&e.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),e.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(t,ad,{height:"100%",width:"100%",direction:"col",items:e})},_renderClock(t,e,i){this._$hourArrow=(0,o.Z)("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=(0,o.Z)("<div>").addClass("dx-timeview-minutearrow");const n=(0,o.Z)(i);n.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",n)},_updateClock(){const t=this._getValue(),e=t.getHours()/12*360+t.getMinutes()/60*30,i=t.getMinutes()/60*360;sh(this._$hourArrow,e,this.option("_arrowOffset")),sh(this._$minuteArrow,i,this.option("_arrowOffset"))},_getBoxItems(t){const e=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:(0,o.Z)("<div>").addClass("dx-timeview-time-separator").text(xd.Z.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return t&&e.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),e},_renderField(){const t=!this.option("use24HourFormat");return this._createHourBox(t),this._createMinuteBox(),t&&this._createFormat12Box(),this._createComponent((0,o.Z)("<div>").addClass("dx-timeview-field"),ad,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(t)}).$element()},_createHourBox(t){(this._hourBox=this._createComponent((0,o.Z)("<div>"),zc,(0,r.l)({min:-1,max:t?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:t=>this._keyboardHandler(t)},this._getNumberBoxConfig()))).setAria("label","hours")},_isPM(){return!this.option("use24HourFormat")&&1===this._format12.option("value")},_onHourBoxValueChanged(t){let{value:e,component:i}=t;const n=this._getValue(),o=new Date(n);let r=this._convertMaxHourToMin(e);i.option("value",r),this._isPM()&&(r+=12),o.setHours(r),rh.normalizeTime(o),this.option("value",o)},_convertMaxHourToMin(t){const e=this.option("use24HourFormat")?24:12;return(e+t)%e},_createMinuteBox(){const t=this._minuteBox=this._createComponent((0,o.Z)("<div>"),zc,(0,r.l)({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:t=>this._keyboardHandler(t),onValueChanged:t=>{let{value:e,component:i}=t;const n=(60+e)%60;i.option("value",n);const o=new Date(this._getValue());o.setMinutes(n),rh.normalizeTime(o),this.option("value",o)}},this._getNumberBoxConfig()));t.setAria("label","minutes")},_createFormat12Box(){const t=xd.Z.getPeriodNames();(this._format12=this._createComponent((0,o.Z)("<div>").addClass("dx-timeview-format12"),nc,{items:[{value:-1,text:t[0]},{value:1,text:t[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:t=>this._keyboardHandler(t),onValueChanged:t=>{let{value:e}=t;const i=this._getValue().getHours(),n=new Date(this._getValue()),o=(i+12*e)%24;n.setHours(o),this.option("value",n)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")})).setAria("label","type")},_refreshFormat12(){if(this.option("use24HourFormat"))return;const t=this._getValue().getHours()>=12?1:-1;this._silentEditorValueUpdate(this._format12,t)},_silentEditorValueUpdate(t,e){t&&(t._suppressValueChangeAction(),t.option("value",e),t._resumeValueChangeAction())},_getNumberBoxConfig(){return{showSpinButtons:!0,displayValueFormatter:t=>(t<10?"0":"")+t,stylingMode:this.option("stylingMode")}},_normalizeHours(t){return this.option("use24HourFormat")?t:t%12||12},_updateField(){const t=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,t),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged(t){t&&this._updateTime()},_optionChanged(t){switch(t.name){case"value":this._updateTime(),this.callBase(t);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(t)}}});(0,c.default)("dxTimeView",lh);const ch=lh,uh=(0,p.getWindow)(),dh="dx-datebox-datetime-time-side",hh=eh.inherit({NAME:"CalendarWithTime",getDefaultOptions(){return(0,r.l)(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter(){return Ed.default.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:t=>t||"shortdateshorttime",_is24HourFormat(){return xd.Z.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue(){const t=this.callBase();return this._updateDateTime(t)},_renderWidget(){this.callBase(),this._timeView=this.dateBox._createComponent((0,o.Z)("<div>"),ch,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")})},renderOpenedState(){this.callBase();const t=this._getPopup();t&&t.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout((()=>{this._getPopup()&&this._getPopup().repaint()}),0)},isAdaptivityChanged(){const t=this._isShrinkView(),e=this._currentAdaptiveMode;return t!==e?(this._currentAdaptiveMode=t,void 0!==e):this.callBase()},_updateValue(t){let e=this.dateBoxValue();e||t||(e=new Date,rh.normalizeTime(e)),this.callBase(),this._timeView&&(e&&this._timeView.option("value",e),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:()=>(0,M.dz)(uh)<=573,_isShrinkView(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems(){const t=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||t.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),t},renderPopupContent(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();const t=this._getPopup().$content();this._box=this.dateBox._createComponent((0,o.Z)("<div>").appendTo(t),ad,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(t,e,i){const n=(0,o.Z)("<div>");switch(t.name){case"calendar":n.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(dh),n.append(this._timeView.$element()));break;case"time":n.append(this._timeView.$element()),(0,o.Z)(i).addClass(dh)}return n}.bind(this)})},popupConfig(t){const e=this.callBase(t);return(0,r.l)(e,{width:"auto"})},_preventFocusOnPopup(t){(0,o.Z)(t.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime(t){const e=this._timeView.option("value");return t.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),t},getValue(){let t=this._widget.option("value")??this._widget.getContouredDate();return t=t?new Date(t):new Date,this._updateDateTime(t)},dispose(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}}),ph=hh;class fh extends ns{_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){P.Z.on((0,o.Z)(this.container()),"dxmousewheel",(t=>{this._isWheelScrolled=!0}))}_renderContainerClick(){if(!this.option("showOnClick"))return;const t=(0,f.addNamespace)(Kt.name,this.NAME),e=this._createActionByOption("onClick");P.Z.off((0,o.Z)(this.container()),t),P.Z.on((0,o.Z)(this.container()),t,(t=>{e({event:t})}))}_renderItems(){const t=this.option("items")||[];let e=(0,o.Z)();(0,o.Z)(this.content()).empty(),t.forEach((t=>{e=e.add((0,o.Z)("<div>").addClass("dx-dateview-item").append(t))})),(0,o.Z)(this.content()).append(e),this._$items=e,this.update()}_renderSelectedItemFrame(){(0,o.Z)("<div>").addClass("dx-dateview-item-selected-frame").append((0,o.Z)("<div>").addClass("dx-dateview-item-selected-border")).appendTo((0,o.Z)(this.container()))}_renderSelectedValue(t){const e=this._fitIndex(t??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(e)}),this._renderActiveStateItem()}_fitIndex(t){const e=(this.option("items")||[]).length;return t>=e?e-1:t<0?0:t}_getItemPosition(t){return Math.round(this._itemHeight()*t)}_renderItemsClick(){const t=this._getItemSelector(),e=(0,f.addNamespace)(Kt.name,this.NAME);P.Z.off(this.$element(),e,t),P.Z.on(this.$element(),e,t,this._itemClickHandler.bind(this))}_getItemSelector(){return".dx-dateview-item"}_itemClickHandler(t){this.option("selectedIndex",this._itemElementIndex(t.currentTarget))}_itemElementIndex(t){return this._itemElements().index(t)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){const t=this.option("selectedIndex");(0,g.each)(this._$items,(function(e){(0,o.Z)(this).toggleClass("dx-dateview-item-selected",t===e)}))}_shouldScrollToNeighborItem(){return"desktop"===tt.default.real().deviceType&&this._isWheelScrolled}_moveTo(t){const{top:e,left:i}=function(t,e){if((0,s.PO)(t)){const e=(0,l.ensureDefined)(t.left,t.x),i=(0,l.ensureDefined)(t.top,t.y);return{left:(0,s.$K)(e)?e:void 0,top:(0,s.$K)(i)?i:void 0}}const{isHorizontal:i,isVertical:n}=new Su(void 0);return{left:i&&(0,s.$K)(t)?t:void 0,top:n&&(0,s.$K)(t)?t:void 0}}(t),n=this.scrollOffset(),r={x:n.left-i,y:n.top-e};if(this._isVisible()&&(r.x||r.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){const t=this;Se.default.stop((0,o.Z)(this.content())),Se.default.animate((0,o.Z)(this.content()),{duration:200,type:"slide",to:{top:Math.floor(r.y)},complete(){(0,hr.Kx)((0,o.Z)(t.content())),t.handleMove({delta:r})}}),delete this._animation}else this.handleMove({delta:r})}_validate(t){return this._moveIsAllowed(t)}_fitSelectedIndexInRange(t){const e=this.option("items").length;return Math.max(Math.min(t,e-1),0)}_isInNullNeighborhood(t){return-.1<=t&&t<=.1}_getSelectedIndexAfterScroll(t){const e=this.scrollOffset().top-t*this._itemHeight();if(this._isInNullNeighborhood(e))return t;const i=e>0?1:-1;return this._fitSelectedIndexInRange(t+i)}_getNewSelectedIndex(t){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(t);this._animation=!0;const e=this.scrollOffset().top/this._itemHeight();return Math.round(e)}_endActionHandler(){const t=this.option("selectedIndex"),e=this._getNewSelectedIndex(t);e===t?this._renderSelectedValue(e):this.option("selectedIndex",e),this._isWheelScrolled=!1}_itemHeight(){const t=this._$items.first();return(0,M.Cr)(t)}_toggleActive(t){this.$element().toggleClass("dx-state-active",t)}_isVisible(){return(0,o.Z)(this.container()).is(":visible")}_fireSelectedIndexChanged(t,e){this._selectedIndexChanged({value:t,previousValue:e,event:void 0})}_visibilityChanged(t){super._visibilityChanged(t),this._visibilityChangedHandler(t)}_visibilityChangedHandler(t){t&&(this._visibilityTimer=setTimeout((()=>{this._renderSelectedValue(this.option("selectedIndex"))}))),this.toggleActiveState(!1)}toggleActiveState(t){this.$element().toggleClass("dx-dateviewroller-current",t)}_refreshSelectedIndex(){const t=this.option("selectedIndex"),e=this._fitIndex(t);e===t?this._renderActiveStateItem():this.option("selectedIndex",e)}_optionChanged(t){switch(t.name){case"selectedIndex":this._fireSelectedIndexChanged(t.value,t.previousValue),this._renderSelectedValue(t.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(t)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}(0,c.default)("dxDateViewRoller",fh);const _h=fh,mh="date",gh="year",vh="month",bh="day",yh="hours",Ch=U.inherit({_valueOption(){const t=this.option("value"),e=new Date(t);return!t||isNaN(e)?this._getDefaultDate():e},_getDefaultDate(){const t=new Date;return this.option("type")===mh?new Date(t.getFullYear(),t.getMonth(),t.getDate()):t},_getDefaultOptions(){return(0,r.l)(this.callBase(),{minDate:rh.MIN_DATEVIEW_DEFAULT_DATE,maxDate:rh.MAX_DATEVIEW_DEFAULT_DATE,type:mh,value:new Date,applyCompactClass:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:t=>"desktop"!==t.deviceType,options:{applyCompactClass:!0}}])},_render(){this.callBase(),this.$element().addClass("dx-dateview"),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses(t,e){this.$element().addClass(`dx-dateview-${t}`),e&&this.$element().removeClass(`dx-dateview-${e}`)},_toggleCompactClass(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper(){return this._$wrapper},_renderContentImpl(){this._$wrapper=(0,o.Z)("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers(){this._$rollersContainer||(this._$rollersContainer=(0,o.Z)("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};const t=this;(0,g.each)(t._rollerConfigs,(e=>{const i=(0,o.Z)("<div>").appendTo(t._$rollersContainer).addClass(`dx-dateviewroller-${t._rollerConfigs[e].type}`);t._rollers[t._rollerConfigs[e].type]=t._createComponent(i,_h,{items:t._rollerConfigs[e].displayItems,selectedIndex:t._rollerConfigs[e].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart(i){const n=i.component;n._toggleActive(!0),t._setActiveRoller(t._rollerConfigs[e],n.option("selectedIndex"))},onEnd(t){t.component._toggleActive(!1)},onClick(i){const n=i.component;n._toggleActive(!0),t._setActiveRoller(t._rollerConfigs[e],n.option("selectedIndex")),t._setRollerState(t._rollerConfigs[e],n.option("selectedIndex")),n._toggleActive(!1)},onSelectedIndexChanged(i){const n=i.component;t._setRollerState(t._rollerConfigs[e],n.option("selectedIndex"))}})})),t._$rollersContainer.appendTo(t._wrapper())},_createRollerConfigs(t){const e=this;t=t||e.option("type"),e._rollerConfigs={},xd.Z.getFormatParts(rh.FORMATS_MAP[t]).forEach((t=>{e._createRollerConfig(t)}))},_createRollerConfig(t){const e=rh.DATE_COMPONENTS_INFO[t],i=this._calculateRollerConfigValueRange(t),{startValue:n}=i,{endValue:o}=i,{formatter:r}=e,s=this._getCurrentDate(),a={type:t,setValue:e.setter,valueItems:[],displayItems:[],getIndex:t=>t[e.getter]()-n};for(let t=n;t<=o;t++)a.valueItems.push(t),a.displayItems.push(r(t,s));a.selectedIndex=a.getIndex(s),this._rollerConfigs[t]=a},_setActiveRoller(t){const e=t&&this._rollers[t.type];(0,g.each)(this._rollers,(function(){this.toggleActiveState(this===e)}))},_updateRollersPosition(){const t=this;(0,g.each)(this._rollers,(function(e){const i=t._rollerConfigs[e].getIndex(t._getCurrentDate());this.option("selectedIndex",i)}))},_setRollerState(t,e){if(e!==t.selectedIndex){const i=t.valueItems[e],{setValue:n}=t;let o=new Date(this._getCurrentDate()),r=o.getDate();const s=this.option("minDate"),a=this.option("maxDate");t.type===vh?r=Math.min(r,rh.getMaxMonthDay(o.getFullYear(),i)):t.type===gh&&(r=Math.min(r,rh.getMaxMonthDay(i,o.getMonth()))),o.setDate(r),o[n](i);const l=Ed.default.normalizeDate(o,s,a);o=rh.mergeDates(l,o,"time"),o=Ed.default.normalizeDate(o,s,a),this.option("value",o),t.selectedIndex=e}t.type===gh&&this._refreshRollers(),t.type===vh&&(this._refreshRoller(bh),this._refreshRoller(yh))},_refreshRoller(t){const e=this._rollers[t];if(e){this._createRollerConfig(t);const i=this._rollerConfigs[t];t!==bh&&i.displayItems.toString()===e.option("items").toString()||e.option({items:i.displayItems,selectedIndex:i.selectedIndex})}},_getCurrentDate(){const t=this._valueOption(),e=this.option("minDate"),i=this.option("maxDate");return Ed.default.normalizeDate(t,e,i)},_calculateRollerConfigValueRange(t){const e=this._getCurrentDate(),i=this.option("minDate"),n=this.option("maxDate"),o=Ed.default.sameYear(e,i),r=o&&e.getMonth()===i.getMonth(),s=Ed.default.sameYear(e,n),a=s&&e.getMonth()===n.getMonth(),l=r&&e.getDate()===i.getDate(),c=a&&e.getDate()===n.getDate(),u=rh.DATE_COMPONENTS_INFO[t];let{startValue:d}=u,{endValue:h}=u;return t===gh&&(d=i.getFullYear(),h=n.getFullYear()),t===vh&&(o&&(d=i.getMonth()),s&&(h=n.getMonth())),t===bh&&(h=rh.getMaxMonthDay(e.getFullYear(),e.getMonth()),o&&r&&(d=i.getDate()),s&&a&&(h=n.getDate())),t===yh&&(d=l?i.getHours():d,h=c?n.getHours():h),{startValue:d,endValue:h}},_refreshRollers(){this._refreshRoller(vh),this._refreshRoller(bh),this._refreshRoller(yh)},_optionChanged(t){switch(t.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(t.value,t.previousValue);break;case"visible":this.callBase(t),t.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(t)}},_clean(){this.callBase(),delete this._$rollersContainer}});(0,c.default)("dxDateView",Ch);const wh=Ch,xh=(0,p.getWindow)(),Sh=Jd.inherit({NAME:"DateView",getDefaultOptions(){return(0,r.l)(this.callBase(),{openOnFieldClick:!0,applyButtonText:C.Z.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat(t){return t||rh.FORMATS_MAP[this.dateBox.option("type")]},popupConfig(t){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:t.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device(t){const{platform:e}=t;return"generic"===e||"ios"===e},options:{width:"auto",height:"auto"}},{device(t){const{platform:e}=t,{phone:i}=t;return"generic"===e&&i},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:xh}}}]}},_renderWidget(){if((0,qt.inputType)(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly"))return void(this._widget&&(this._widget.$element().remove(),this._widget=null));const t=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{const e=(0,o.Z)("<div>").appendTo(t.$content());this._widget=this._createWidget(e)}this._widget.$element().appendTo(this._getWidgetContainer())},_getWidgetName:()=>wh,renderOpenedState(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*rh.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}}),Ih=Sh,kh=(0,p.getWindow)(),Eh={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},Oh=Jd.inherit({NAME:"List",supportedKeys:()=>({space:l.noop,home:l.noop,end:l.noop}),getDefaultOptions(){return(0,r.l)(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:t=>t||"shorttime",popupConfig:t=>t,getValue(){const t=this._widget.option("selectedIndex");if(-1===t)return this.dateBox.option("value");const e=this._widgetItems[t];return this._getDateByItemData(e)},useCurrentDateByDefault:()=>!0,getDefaultDate:()=>new Date(null),popupShowingHandler(){this.dateBox._dimensionChanged()},_renderWidget(){this.callBase(),this._refreshItems()},_getWidgetName:()=>ql,_getWidgetOptions(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant(t){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",t.actionValue)},_refreshItems(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue(){const t=this.dateBoxValue(),e=this._getDateIndex(t);-1===e?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",e)},_scrollToSelectedItem(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex(t){let e=-1;for(let i=0,n=this._widgetItems.length;i<n;i++)if(this._areDatesEqual(t,this._widgetItems[i])){e=i;break}return e},_areDatesEqual:(t,e)=>(0,s.J_)(t)&&(0,s.J_)(e)&&t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes(),_getTimeListItems(){let t=this.dateBox.dateOption("min")||this._getBoundaryDate("min");const e=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),i=this.dateBox.dateOption("value")||null;let n=e-t;const o=t.getMinutes()%this.dateBox.option("interval");return n<0?[]:(n>rh.ONE_DAY&&(n=rh.ONE_DAY),i-t<rh.ONE_DAY||(t=this._getBoundaryDate("min"),t.setMinutes(o),i&&Math.abs(i-e)<rh.ONE_DAY&&(n=(60*e.getHours()+Math.abs(e.getMinutes()-o))*rh.ONE_MINUTE)),this._getRangeItems(t,new Date(t),n))},_getRangeItems(t,e,i){const n=[],o=this.dateBox.option("interval");for(;e-t<=i;)n.push(new Date(e)),e.setMinutes(e.getMinutes()+o);return n},_getBoundaryDate(t){const e=Eh[t],i=new Date((0,l.ensureDefined)(this.dateBox.dateOption("value"),0));return new Date(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes())},_timeListItemTemplate(t){const e=this.dateBox.option("displayFormat");return xd.Z.format(t,this.getDisplayFormat(e))},_listItemClickHandler(t){if("useButtons"===this.dateBox.option("applyValueMode"))return;const e=this._getDateByItemData(t.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(e,t.event)},_getDateByItemData(t){let e=this.dateBox.option("value");const i=t.getHours(),n=t.getMinutes(),o=t.getSeconds(),r=t.getFullYear(),s=t.getMonth(),a=t.getDate();return e?(e=this.dateBox.option("dateSerializationFormat")?Od.Z.deserializeDate(e):new Date(e),e.setHours(i),e.setMinutes(n),e.setSeconds(o),e.setFullYear(r),e.setMonth(s),e.setDate(a)):e=new Date(r,s,a,i,n,0,0),e},getKeyboardListener(){return this._widget},_updatePopupHeight(){const t=Tl(this.dateBox.option("dropDownOptions.height"));if(void 0===t||"auto"===t){this.dateBox._setPopupOption("height","auto");const t=(0,M.zp)(this._widget.$element()),e=.45*(0,M.Cr)(kh);this.dateBox._setPopupOption("height",Math.min(t,e))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText(t,e){let i=this.callBase(t,e);return i&&(i=rh.mergeDates(i,new Date(null),"date")),i}}),Th=Oh,Dh=Jd.inherit({NAME:"Native",popupConfig:t=>(0,r.l)({},t,{width:"auto"}),getParsedText(t){return t?"datetime"===this.dateBox.option("type")?new Date(t.replace(/-/g,"/").replace("T"," ").split(".")[0]):rh.fromStandardDateFormat(t):null},renderPopupContent:l.noop,_getWidgetName:l.noop,_getWidgetOptions:l.noop,_getDateBoxType(){let t=this.dateBox.option("type");return rh.SUPPORTED_FORMATS.includes(t)?"datetime"!==t||(0,qt.inputType)(t)||(t="datetime-local"):t="date",t},customizeButtons(){const t=this.dateBox.getButton("dropDown");tt.default.real().android&&t&&t.on("click",(()=>{this.dateBox._input().get(0).click()}))},getDefaultOptions(){return{mode:this._getDateBoxType()}},getDisplayFormat(t){const e=this._getDateBoxType();return t||rh.FORMATS_MAP[e]},renderInputMinMax(t){t.attr({min:Od.Z.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:Od.Z.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}}),Bh=Dh,Ah=(0,p.getWindow)(),Ph={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},Mh={date:"date",datetime:"datetime",time:"time"},Rh={Calendar:eh,DateView:Ih,Native:Bh,CalendarWithTime:ph,List:Th},Nh=Pl.inherit({_supportedKeys(){return(0,r.l)(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions(){return(0,r.l)(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:Ph.calendar,invalidDateMessage:C.Z.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:C.Z.format("validation-range"),applyButtonText:C.Z.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device(){const t=tt.default.real(),{platform:e}=t;return"ios"===e||"android"===e},options:{pickerType:Ph.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions(t){this._userOptions=(0,r.l)({},t),this.callBase(t),this._updatePickerOptions()},_updatePickerOptions(){let t=this.option("pickerType");const e=this.option("type");t!==Ph.list||e!==Mh.datetime&&e!==Mh.date||(t=Ph.calendar),e===Mh.time&&t===Ph.calendar&&(t=Ph.list),this._pickerType=t,this._setShowDropDownButtonOption()},_setShowDropDownButtonOption(){const{platform:t}=tt.default.real(),e="android"===t&&Ur.default.mozilla,i=this._isNativeType();let n="generic"!==t||!i;i&&e&&(n=!1),this.option({showDropDownButton:n})},_init(){this._initStrategy(),this.option((0,r.l)({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:t=>t.charAt(0).toLowerCase()+t.substr(1),_initStrategy(){const t=this._getStrategyName(this._getFormatType()),e=Rh[t];this._strategy&&this._strategy.NAME===t||(this._strategy=new e(this))},_getFormatType(){const t=this.option("type"),e=/h|m|s/g.test(t);let i="";return/d|M|Y/g.test(t)&&(i+=Mh.date),e&&(i+=Mh.time),i},_getStrategyName(t){const e=this._pickerType;return e===Ph.rollers?"DateView":e===Ph.native?"Native":t===Mh.date?"Calendar":t===Mh.datetime?"CalendarWithTime":"List"},_initMarkup(){this.$element().addClass("dx-datebox"),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render(){this.callBase(),this._formatValidationIcon()},_renderDimensions(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight(){var t,e;this._popup&&(null===(t=(e=this._strategy)._updatePopupHeight)||void 0===t||t.call(e))},_refreshFormatClass(){const t=this.$element();(0,g.each)(Mh,((e,i)=>{t.removeClass(`dx-datebox-${i}`)})),t.addClass(`dx-datebox-${this.option("type")}`)},_refreshPickerTypeClass(){const t=this.$element();(0,g.each)(Ph,((e,i)=>{t.removeClass(`dx-datebox-${i}`)})),t.addClass(`dx-datebox-${this._pickerType}`)},_formatValidationIcon(){if(!(0,p.hasWindow)())return;const t=this._input().get(0),e=this.option("rtlEnabled"),i=this._getClearButtonWidth(),n=this._getLongestElementDimensions(),o=parseFloat(Ah.getComputedStyle(t).width)-i,r=n.width>o,{style:s}=t;this.$element().toggleClass("dx-show-invalid-badge",!r&&this.option("_showValidationIcon")),r?(void 0===this._storedPadding&&(this._storedPadding=e?n.leftPadding:n.rightPadding),e?s.paddingLeft=0:s.paddingRight=0):e?s.paddingLeft=`${this._storedPadding}px`:s.paddingRight=`${this._storedPadding}px`},_getClearButtonWidth(){let t=0;if(this._isClearButtonVisible()&&""===this._input().val()){const e=this.$element().find(".dx-clear-button-area").get(0);t=parseFloat(Ah.getComputedStyle(e).width)}return t},_getLongestElementDimensions(){const t=this._strategy.getDisplayFormat(this.option("displayFormat")),e=xd.Z.format(rh.getLongestDate(t,xd.Z.getMonthNames(),xd.Z.getDayNames()),t),i=this._input(),n=i.get(0),o=(0,L.createTextElementHiddenCopy)(i,e),r=void 0!==this._storedPadding?this._storedPadding:0;o.appendTo(this.$element());const s=parseFloat(Ah.getComputedStyle(o.get(0)).width),a=parseFloat(Ah.getComputedStyle(n).paddingRight),l=parseFloat(Ah.getComputedStyle(n).paddingLeft),c=s+l+a+r;return o.remove(),{width:c,leftPadding:l,rightPadding:a}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup(){this.callBase(),this._popup.$wrapper().addClass("dx-datebox-wrapper"),this._renderPopupWrapper()},_getPopupToolbarItems(){var t,e;const i=this.callBase();return(null===(t=(e=this._strategy)._getPopupToolbarItems)||void 0===t?void 0:t.call(e,i))??i},_popupConfig(){const t=this.callBase();return(0,r.l)(this._strategy.popupConfig(t),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper(){if(!this._popup)return;const t=this.$element(),e=(0,r.l)({},Mh,Ph);(0,g.each)(e,((e,i)=>{t.removeClass(`dx-datebox-wrapper-${i}`)})),this._popup.$wrapper().addClass(`dx-datebox-wrapper-${this.option("type")}`).addClass(`dx-datebox-wrapper-${this._pickerType}`).addClass("dx-dropdowneditor-overlay")},_renderPopupContent(){this.callBase(),this._strategy.renderPopupContent()},_popupShowingHandler(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged(t){t&&this._formatValidationIcon()},_clearValueHandler(t){this.option("text",""),this.callBase(t)},_readOnlyPropValue(){if(this._pickerType===Ph.rollers)return!0;const{platform:t}=tt.default.real();return!this._isNativeType()||"ios"!==t&&"android"!==t?this.callBase():this.option("readOnly")},_isClearButtonVisible(){return this.callBase()&&!this._isNativeType()},_renderValue(){const t=this.dateOption("value");return this.option("text",this._getDisplayedText(t)),this._strategy.renderValue(),this.callBase()},_setSubmitValue(){const t=this.dateOption("value"),e=this.option("dateSerializationFormat"),i=rh.SUBMIT_FORMATS_MAP[this.option("type")],n=e?Od.Z.serializeDate(t,e):rh.toStandardDateFormat(t,i);this._getSubmitElement().val(n)},_getDisplayedText(t){const e=this.option("mode");let i;if("text"===e){const e=this._strategy.getDisplayFormat(this.option("displayFormat"));i=xd.Z.format(t,e)}else{const n=this._getFormatByMode(e);i=n?xd.Z.format(t,n):rh.toStandardDateFormat(t,e)}return i},_getFormatByMode:t=>(0,qt.inputType)(t)?null:rh.FORMATS_MAP[t],_valueChangeEventHandler(t){const{text:e,type:i,validationError:n}=this.option(),o=this.dateOption("value");if(e===this._getDisplayedText(o))return void this._recallInternalValidation(o,n);const r=this._getParsedDate(e),s=o??this._getDateByDefault(),a=rh.mergeDates(s,r,i),l=r&&"time"===i?a:r;if(this._applyInternalValidation(l).isValid){const i=this._getDisplayedText(a);s&&a&&s.getTime()===a.getTime()&&i!==e?this._renderValue():this.dateValue(a,t)}},_recallInternalValidation(t,e){e&&!e.editorSpecific||(this._applyInternalValidation(t),this._applyCustomValidation(t))},_getDateByDefault(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate(t){const e=this._strategy.getDisplayFormat(this.option("displayFormat"));return this._strategy.getParsedText(t,e)??void 0},_applyInternalValidation(t){const e=!!this.option("text")&&null!==t,i=!!t&&(0,s.J_)(t)&&!isNaN(t.getTime()),n=i&&Ed.default.dateInRange(t,this.dateOption("min"),this.dateOption("max"),this.option("type")),o=!e&&!t||n;let r="";return i?n||(r=this.option("dateOutOfRangeMessage")):r=this.option("invalidDateMessage"),this._updateInternalValidationState(o,r),{isValid:o,isDate:i}},_updateInternalValidationState(t,e){this.option({isValid:t,validationError:t?null:{editorSpecific:!0,message:e}})},_applyCustomValidation(t){this.validationRequest.fire({editor:this,value:this._serializeDate(t)})},_isValueChanged(t){const e=this.dateOption("value");return(e&&e.getTime())!==(t&&t.getTime())},_isTextChanged(t){return this.option("text")!==(t&&this._getDisplayedText(t)||"")},_renderProps(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle(){const t=this.option("placeholder");if(t)return t;const e=this.option("type");return e===Mh.time?C.Z.format("dxDateBox-simulatedDataPickerTitleTime"):e===Mh.date||e===Mh.datetime?C.Z.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler(t){const e=this._strategy.getValue();this.dateValue(e,t.event),this.callBase()},_dispose(){var t;this.callBase(),null===(t=this._strategy)||void 0===t||t.dispose()},_isNativeType(){return this._pickerType===Ph.native},_updatePopupTitle(){var t;null===(t=this._popup)||void 0===t||t.option("title",this._getPopupTitle())},_optionChanged(t){switch(t.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:t.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:t.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":{const t=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),t||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break}case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(t.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat(){const t=this.option("value");return this.option("dateSerializationFormat")&&(0,zo.default)().forceIsoDateParsing?this.option("dateSerializationFormat"):(0,s.kE)(t)?"number":(0,s.HD)(t)?Od.Z.getDateSerializationFormat(t):void 0},_updateValue(t){this.callBase(),this._applyInternalValidation(t??this.dateOption("value"))},dateValue(t,e){const i=this._isValueChanged(t);return i&&e&&this._saveValueChangeEvent(e),i||(this._isTextChanged(t)?this._updateValue(t):""===this.option("text")&&this._applyCustomValidation(t)),this.dateOption("value",t)},dateOption(t,e){if(1===arguments.length)return Od.Z.deserializeDate(this.option(t));this.option(t,this._serializeDate(e))},_serializeDate(t){const e=this._getSerializationFormat();return Od.Z.serializeDate(t,e)},_clearValue(){const t=this.option("value");this.callBase(),null===t&&this._applyCustomValidation(null)},clear(){const t=this.option("value");this.callBase(),null===t&&this._applyInternalValidation(null)}}),$h=Nh,Vh=t=>t.getMonth()+1,Fh=(t,e)=>{const i=t.getDate(),n=jh("M",t),o=(0,ys.n$)(parseInt(e),n.min,n.max);t.setMonth(o-1,1);const{min:r,max:s}=jh("dM",t),a=(0,ys.n$)(i,r,s);t.setDate(a)},Zh={a:t=>t.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:Vh,L:Vh,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds"},Hh=(0,r.l)({},(0,kd.xe)(),{a:(t,e)=>{const i=t.getHours();i>=12!=!!parseInt(e)&&t.setHours((i+12)%24)},d:(t,e)=>{e>jh("dM",t).max&&t.setMonth(t.getMonth()+1),t.setDate(e)},h:(t,e)=>{const i=t.getHours()>=12;t.setHours(+e%12+(i?12:0))},M:Fh,L:Fh,E:(t,e)=>{e<0||t.setDate(t.getDate()-t.getDay()+parseInt(e))},y:(t,e)=>{const i=t.getFullYear(),n=String(e).length,o=String(jh("y",t).max).length,r=parseInt(String(i).substr(0,o-n)+e);t.setFullYear(r)}}),Lh=t=>Zh[t]||(()=>t),jh=(t,e,i)=>{const n={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:1,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1}};return n[i||t]||n.getAmPm},zh=$h.inherit({_supportedKeys(t){const e=this.callBase(t),i=t=>{const i=e[(0,f.normalizeKeyName)(t)];return i&&i.apply(this,[t])},n=(t,e)=>this._shouldUseOriginalHandler(t)?i.apply(this,[t]):e.apply(this,[t]);return(0,r.l)({},e,{del:t=>n(t,(t=>{this._revertPart(1),this._isAllSelected()||t.preventDefault()})),backspace:t=>n(t,(t=>{this._revertPart(-1),this._isAllSelected()||t.preventDefault()})),home:t=>n(t,(t=>{this._selectFirstPart(),t.preventDefault()})),end:t=>n(t,(t=>{this._selectLastPart(),t.preventDefault()})),escape:t=>n(t,(t=>{this._revertChanges(t)})),enter:t=>n(t,(()=>{this._enterHandler()})),leftArrow:t=>n(t,(t=>{this._selectNextPart(-1),t.preventDefault()})),rightArrow:t=>n(t,(t=>{this._selectNextPart(1),t.preventDefault()})),upArrow:t=>n(t,(t=>{this._upDownArrowHandler(1),t.preventDefault()})),downArrow:t=>n(t,(t=>{this._upDownArrowHandler(-1),t.preventDefault()}))})},_shouldUseOriginalHandler(t){const e=this.option("opened")&&t&&!["backspace","del"].includes((0,f.normalizeKeyName)(t));return!this._useMaskBehavior()||e||t&&t.altKey},_upDownArrowHandler(t){this._setNewDateIfEmpty();const e=this._getActivePartValue(this._initialMaskValue),i=this._getActivePartValue()-e;this._loadMaskValue(this._initialMaskValue),this._changePartValue(i+t,!0)},_changePartValue(t,e){const i=this._getActivePartProp("pattern");/^a{1,5}$/.test(i)?this._toggleAmPm():this._partIncrease(t,e)},_toggleAmPm(){const t=this._getActivePartProp("text"),e=1^Sd.Z.getPeriodNames().indexOf(t);this._setActivePartValue(e)},_getDefaultOptions(){return(0,r.l)(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(t){let{originalEvent:e,alt:i}=t;const n=e.data||e.key;return"string"==typeof n&&1===n.length&&!i&&!(0,f.isCommandKeyPressed)(e)},_isSingleDigitKey(t){var e;const i=null===(e=t.originalEvent)||void 0===e?void 0:e.data;return 1===(null==i?void 0:i.length)&&parseInt(i,10)},_useBeforeInputEvent:()=>tt.default.real().android,_keyInputHandler(t,e){const i=this._input().val();this._processInputKey(e),t.preventDefault(),i!==this._input().val()&&P.Z.trigger(this._input(),"input")},_keyboardHandler(t){let{key:e}=t.originalEvent;const i=this.callBase(t);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(Ur.default.chrome&&"Process"===t.key&&0===t.code.indexOf("Digit")?(e=t.code.replace("Digit",""),this._processInputKey(e),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(t)&&this._keyInputHandler(t.originalEvent,e)),i},_maskBeforeInputHandler(t){this._maskInputHandler=null;const{inputType:e}=t.originalEvent;"insertCompositionText"===e&&(this._maskInputHandler=()=>{this._renderSelectedPart()});const i="deleteContentBackward"===e;if(i||"deleteContentForward"===e){const t=i?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(t)}}if(!this._useMaskBehavior()||!this._isSingleCharKey(t))return;const n=t.originalEvent.data;return this._keyInputHandler(t,n),!0},_keyPressHandler(t){const{originalEvent:e}=t;"insertCompositionText"===(null==e?void 0:e.inputType)&&this._isSingleDigitKey(t)&&(this._processInputKey(e.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(t),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(t){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(t))?this._searchString(t):this._searchNumber(t)},_isAllSelected(){const t=this._caret();return t.end-t.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;const t=this._strategy.getDisplayFormat(this.option("displayFormat")),e=(0,s.HD)(t)&&!xd.Z._getPatternByFormat(t);return this._formatPattern=e?t:(0,Id.y)((e=>xd.Z.format(e,t))),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){const t="time"===this.option("type")?new Date(null):new Date;this._maskValue=t,this._initialMaskValue=t,this._renderDateParts()}},_partLimitsReached(t){const e=String(t).length,i=this._getActivePartProp("pattern").length,n=1===i?e:Math.min(i,e),o=this._searchValue.length===n,r=parseInt(`${this._searchValue}0`)>t;return o||r},_searchNumber(t){const{max:e}=this._getActivePartLimits(),i=String(e).length;this._searchValue=(this._searchValue+t).substr(-i),isNaN(this._searchValue)&&(this._searchValue=t),this._setActivePartValue(this._searchValue),this._partLimitsReached(e)&&this._selectNextPart(1)},_searchString(t){if(!isNaN(parseInt(this._getActivePartProp("text"))))return;const e=this._getActivePartProp("limits")(this._maskValue),i=this._searchValue+t.toLowerCase(),n=e.max-e.min;for(let t=0;t<=n;t++)if(this._loadMaskValue(this._initialMaskValue),this._changePartValue(t+1),0===this._getActivePartProp("text").toLowerCase().indexOf(i))return void(this._searchValue=i);this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(t))},_clearSearchValue(){this._searchValue=""},_revertPart(t){if(!this._isAllSelected()){const e=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(e),this._selectNextPart(t)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&"text"===this.option("mode")},_prepareRegExpInfo(){this._regExpInfo=(0,kd.oo)(this._getFormatPattern(),xd.Z);const{regexp:t}=this._regExpInfo,{source:e}=t,{flags:i}=t,n=new RegExp(/(\{[0-9]+,?[0-9]*\})/),o=e.split(n).map((t=>n.test(t)?t:y.Z.convertDigits(t,!1))).join("");this._regExpInfo.regexp=new RegExp(o,i)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(!this._useMaskBehavior())return;const t=this.option("text")||this._getDisplayedText(this._maskValue);t&&(this._dateParts=((t,e)=>{const i=e.regexp.exec(t);let n=0,o=0;const r=[];for(let t=1;t<i.length;t++){n=o,o=n+i[t].length;const s=e.patterns[t-1].replace(/^'|'$/g,""),a=Lh(s[0]);r.push({index:t-1,isStub:s===i[t],caret:{start:n,end:o},pattern:s,text:i[t],limits:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return jh(s[0],...e)},setter:Hh[s[0]]||l.noop,getter:a})}return r})(t,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())},_detachMaskEvents(){P.Z.off(this._input(),".dateBoxMask")},_attachMaskEvents(){P.Z.on(this._input(),(0,f.addNamespace)("dxclick","dateBoxMask"),this._maskClickHandler.bind(this)),P.Z.on(this._input(),(0,f.addNamespace)("paste","dateBoxMask"),this._maskPasteHandler.bind(this)),P.Z.on(this._input(),(0,f.addNamespace)("drop","dateBoxMask"),(()=>{this._renderSelectedPart()})),P.Z.on(this._input(),(0,f.addNamespace)("compositionend","dateBoxMask"),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&P.Z.on(this._input(),(0,f.addNamespace)("beforeinput","dateBoxMask"),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(t){this._useMaskBehavior()&&this._partIncrease(t.delta>0?1:-1,t)},_selectNextPart(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.option("text")||this._disposed)return;t&&(this._initialMaskValue=new Date(this._maskValue));let e=(0,ys.n$)(this._activePartIndex+t,0,this._dateParts.length-1);if(this._dateParts[e].isStub){if(!(0===e&&t<0||e===this._dateParts.length-1&&t>0))return void this._selectNextPart(t>=0?t+1:t-1);e=this._activePartIndex}this._activePartIndex!==e&&this._clearSearchValue(),this._activePartIndex=e,this._caret(this._getActivePartProp("caret"))},_getRealLimitsPattern(){if("d"===this._getActivePartProp("pattern")[0])return"dM"},_getActivePartLimits(t){return this._getActivePartProp("limits")(this._maskValue,t&&this._getRealLimitsPattern())},_getActivePartValue(t){t=t||this._maskValue;const e=this._getActivePartProp("getter");return(0,s.mf)(e)?e(t):t[e]()},_addLeadingZeroes(t){const e=this._searchValue.match(/^0+/),i=this._getActivePartLimits(),n=String(i.max).length;return((e&&e[0]||"")+String(t)).substr(-n)},_setActivePartValue(t,e){e=e||this._maskValue;const i=this._getActivePartProp("setter"),n=this._getActivePartLimits();t=(0,ys.Z2)(t,n.min,n.max)?t:t%10,t=this._addLeadingZeroes((0,ys.n$)(t,n.min,n.max)),(0,s.mf)(i)?i(e,t):e[i](t),this._renderDisplayText(this._getDisplayedText(e)),this._renderDateParts()},_getActivePartProp(t){if(this._dateParts&&this._dateParts[this._activePartIndex])return this._dateParts[this._activePartIndex][t]},_loadMaskValue(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateOption("value");this._maskValue=t&&new Date(t),this._initialMaskValue=t&&new Date(t)},_saveMaskValue(){const t=this._maskValue&&new Date(this._maskValue);t&&"date"===this.option("type")&&t.setHours(0,0,0,0),this._initialMaskValue=new Date(t),this.dateOption("value",t)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(t){this.callBase(t),this._useMaskBehavior()&&this.option("text",t)},_partIncrease(t,e){this._setNewDateIfEmpty();const{max:i,min:n}=this._getActivePartLimits(e);let o=t+this._getActivePartValue();o>i?o=this._applyLimits(o,{limitBase:n,limitClosest:i,max:i}):o<n&&(o=this._applyLimits(o,{limitBase:i,limitClosest:n,max:i})),this._setActivePartValue(o)},_applyLimits(t,e){let{limitBase:i,limitClosest:n,max:o}=e;const r=(t-n)%o;return r?i+r-1*(0,ys.Xx)(r):n},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i].caret.end>=e;if(!t[i].isStub&&n)return i}return null})(this._dateParts,this._caret().start),this._isAllSelected()||((0,s.$K)(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(t){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(t){const e=this._replaceSelectedText(this.option("text"),this._caret(),(0,L.clipboardText)(t)),i=xd.Z.parse(e,this._getFormatPattern());i&&this._isDateValid(i)&&(this._maskValue=i,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),t.preventDefault()},_isDateValid:t=>(0,s.J_)(t)&&!isNaN(t),_isValueDirty(){const t=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(t&&t.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&P.Z.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(t){this._useMaskBehavior()&&!t.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(t),this._selectFirstPart(t)):this.callBase(t)},_valueChangeEventHandler(t){const e=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(t),e?null===this._maskValue&&this._loadMaskValue(e):this._maskValue=null,this._saveMaskValue()):this.callBase(t)},_optionChanged(t){switch(t.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(t),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(t),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(t)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},clear(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}}),Wh=zh;(0,c.default)("dxDateBox",Wh);const Kh=m.default.inherit({ctor(t,e){this.editor=t,this.validator=e,this.validationRequestsCallbacks=[];const i=t=>{this.validationRequestsCallbacks.forEach((e=>e(t)))};t.validationRequest.add(i),t.on("disposing",(function(){t.validationRequest.remove(i)}))},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(t){this.editor.option({validationErrors:t.brokenRules,validationStatus:t.status})},reset(){this.editor.clear()},focus(){this.editor.focus()}}),qh=Kh,Uh=Gn.default.inherit({_initOptions:function(t){this.callBase.apply(this,arguments),this.option(A.initValidationOptions(t))},_getDefaultOptions(){return(0,r.l)(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=(0,h.Z)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){const t=this._findGroup();this._groupWasInit||this.on("disposing",(function(t){A.removeRegisteredValidator(t.component._validationGroup,t.component)})),this._groupWasInit&&this._validationGroup===t||(A.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=t,A.registerValidatorInGroup(t,this))},_setOptionsByReference(){this.callBase(),(0,r.l)(this._optionsByReference,{validationGroup:!0})},_getEditor(){const t=this.$element()[0];return(0,d.aT)(t,"dx-validation-target")},_initAdapter(){const t=this._getEditor();let e=this.option("adapter");if(!e){if(t)return e=new qh(t,this),e.validationRequestsCallbacks.push((t=>{this._validationInfo.skipValidation||this.validate(t)})),void this.option("adapter",e);throw G.Z.Error("E0120")}const i=e.validationRequestsCallbacks;i&&i.push((t=>{this.validate(t)}))},_toggleRTLDirection(t){var e;const i=(null===(e=this.option("adapter"))||void 0===e||null===(e=e.editor)||void 0===e?void 0:e.option("rtlEnabled"))??t;this.callBase(i)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){const t=this._getEditor();if(t){const e=(this.option("validationRules")||[]).some((t=>{let{type:e}=t;return"required"===e}))||null;t.isInitialized()&&t.setAria("required",e),t.option("_onMarkupRendered",(()=>{t.setAria("required",e)}))}},_visibilityChanged(t){t&&this._initGroupRegistration()},_optionChanged(t){switch(t.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(A.synchronizeValidationOptions(t,this.option()));break;default:this.callBase(t)}},_getValidationRules(){return this._validationRules||(this._validationRules=(0,g.map)(this.option("validationRules"),((t,e)=>(0,r.l)({},t,{validator:this,index:e})))),this._validationRules},_findGroup(){const t=this.$element();return this.option("validationGroup")||A.findGroup(t,this._modelByElement(t))},_resetValidationRules(){delete this._validationRules},validate(t){const e=this.option("adapter"),i=this.option("name"),n=e.bypass&&e.bypass(),o=t&&void 0!==t.value?t.value:e.getValue(),s=e.getCurrentValidationError&&e.getCurrentValidationError(),a=this._getValidationRules(),l=this._validationInfo&&this._validationInfo.result;if(l&&"pending"===l.status&&l.value===o)return(0,r.l)({},l);let c;return n?c={isValid:!0,status:"valid"}:s&&s.editorSpecific?(s.validator=this,c={isValid:!1,status:"invalid",brokenRule:s,brokenRules:[s]}):c=A.validate(o,a,i),c.id=(new H.Z).toString(),this._applyValidationResult(c,e),c.complete&&c.complete.then((t=>{t.id===this._validationInfo.result.id&&this._applyValidationResult(t,e)})),(0,r.l)({},this._validationInfo.result)},reset(){const t=this.option("adapter");this._validationInfo.skipValidation=!0,t.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult({id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null},t)},_updateValidationResult(t){if(this._validationInfo.result&&this._validationInfo.result.id===t.id)for(const e in t)"id"!==e&&"complete"!==e&&(this._validationInfo.result[e]=t[e]);else{const e=this._validationInfo.deferred&&this._validationInfo.result.complete;this._validationInfo.result=(0,r.l)({},t,{complete:e})}},_applyValidationResult(t,e){const i=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(t.validator=this,this._updateValidationResult(t),e.applyValidationResults&&e.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),"pending"===this._validationInfo.result.status)return this._validationInfo.deferred||(this._validationInfo.deferred=new w.BH,this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);"pending"!==this._validationInfo.result.status&&(i(t),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(t),this._validationInfo.deferred=null))},focus(){const t=this.option("adapter");t&&t.focus&&t.focus()},_useTemplates:function(){return!1}});(0,c.default)("dxValidator",Uh);const Gh=Uh,Yh=["dxTagBox","dxRangeSlider","dxDateRangeBox"],Qh=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function Xh(t,e){let{showRequiredMark:i,requiredMark:n,showOptionalMark:o,optionalMark:r}=t;return{showRequiredMark:i&&e,requiredMark:n,showOptionalMark:o&&!e,optionalMark:r}}const Jh="dx-field-item-required-mark",tp="dx-field-item-optional-mark";function ep(t){let e=0;const i=t.children.length;for(let n=0;n<i;n++)e+=t.children[n].offsetWidth;return e}const ip="dx-field-item-content-wrapper",np="dx-template-wrapper",op="dx-validation-target",rp="dx-invalid";function sp(t){let{$parent:e,rootElementCssClassList:i,formOrLayoutManager:n,createComponentCallback:r,labelOptions:l,labelNeedBaselineAlign:c,labelLocation:u,needRenderLabel:d,formLabelLocation:h,item:p,editorOptions:f,isSimpleItem:_,isRequired:m,template:g,helpID:v,labelID:b,name:y,helpText:C,requiredMessageTemplate:w,validationGroup:x}=t;const S=(0,o.Z)("<div>").addClass(i.join(" ")).appendTo(e);S.addClass(m?"dx-field-item-required":"dx-field-item-optional"),_&&S.addClass("dx-flex-layout"),_&&c&&S.addClass("dx-field-item-label-align");const I=(0,o.Z)("<div>");I.data("dx-form-item",p),I.addClass(gd).addClass("dx-field-item-content-location-"+{right:"left",left:"right",top:"bottom"}[h]);let k,E=null;if(d&&(l.labelTemplate&&(l.labelTemplateData=cp(p,f,n)),E=function(t){let{text:e,id:i,location:n,alignment:r,labelID:l=null,markOptions:c={},labelTemplate:u,labelTemplateData:d,onLabelTemplateRendered:h}=t;if((!(0,s.$K)(e)||e.length<=0)&&!(0,s.$K)(u))return null;const p=(0,o.Z)("<label>").addClass(md+" dx-field-item-label-location-"+n).attr("for",i).attr("id",l).css("textAlign",r),f=(0,o.Z)("<span>").addClass(_d);let _=(0,o.Z)("<span>").addClass("dx-field-item-label-text").text(e);return u&&(_=(0,o.Z)("<div>").addClass("dx-field-item-custom-label-content"),d.text=e,u.render({container:(0,a.u)(_),model:d,onRendered(){null==h||h()}})),p.append(f.append(_,function(t){const e=function(t){let{showRequiredMark:e,requiredMark:i,showOptionalMark:n,optionalMark:o}=t;return e||n?String.fromCharCode(160)+(e?i:o):""}(t);return""===e?null:(0,o.Z)("<span>").addClass(t.showRequiredMark?Jh:tp).text(e)}(c)))}(l)),E){const{editorType:t}=p;S.append(E),"top"!==u&&"left"!==u||S.append(I),"right"===u&&S.prepend(I),"top"===u?S.addClass("dx-label-v-align"):S.addClass("dx-label-h-align"),"dxCheckBox"!==t&&"dxSwitch"!==t||P.Z.on(E,Kt.name,(function(){P.Z.trigger(I.children(),Kt.name)}));const e=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(t),i=l.alignment;!g&&e&&"top"===u&&("left"===i||!i)&&I.addClass("dx-toggle-controls-paddings")}else S.append(I);if(g)g.render({container:(0,a.u)(I),model:cp(p,f,n),onRendered(){const t=function(t){var e;return(null==t?void 0:t.data(op))||(null==t||null===(e=t.parent)||void 0===e||null===(e=e.call(t))||void 0===e?void 0:e.data(op))}(ap(I));lp(t)}});else{const t=(0,o.Z)("<div>").appendTo(I);try{k=r(t,p.editorType,f),k.setAria("describedby",v),b&&k.setAria("labelledby",b),k.setAria("required",m)}catch(t){G.Z.log("E1035",t.message)}}const O=ap(I),T=O&&O.data(op);if(T){const t=p.label&&p.label.text,e=t?null:y,i=t?p.label.text:e&&(0,_o.captionize)(e);let n;if(_)if(p.validationRules)n=p.validationRules;else{const t=(0,N.format)(w,i||"");n=p.isRequired?[{type:"required",message:t}]:null}Array.isArray(n)&&n.length&&r(O,Gh,{validationRules:n,validationGroup:x,dataGetter:function(){return{formItem:p}}}),lp(T)}return C&&_&&I.parent().append((0,o.Z)("<div>").addClass(ip).append(I).append((0,o.Z)("<div>").addClass("dx-field-item-help-text").attr("id",v).text(C))),{$fieldEditorContainer:I,$rootElement:S,widgetInstance:k}}function ap(t){const e=t.children().first();return e.hasClass(np)?e.children().first():e}function lp(t){if(t&&(0,At.yj)()){const e=`.${ip}`,i=t=>{let{element:i,component:n}=t;const{isValid:r,validationMessageMode:s}=n.option();(0,o.Z)(i).parents(e).toggleClass(rp,!1===r&&(n._isFocused()||"always"===s))};t.on("optionChanged",(t=>{"isValid"===t.name&&i(t)})),t.on("focusIn",i).on("focusOut",i).on("enterKey",i)}}function cp(t,e,i){return{dataField:t.dataField,editorType:t.editorType,editorOptions:e,component:i,name:t.name}}function up(t){let{$parent:e,rootElementCssClassList:i}=t;return(0,o.Z)("<div>").addClass("dx-field-empty-item").html("&nbsp;").addClass(i.join(" ")).appendTo(e)}const dp=_.default.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:C.Z.format("dxForm-optionalMark"),requiredMessage:C.Z.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference:function(){this.callBase(),(0,r.l)(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init:function(){const t=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new du,this._updateReferencedOptions(t),this._initDataAndItems(t)},_dispose:function(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems:function(t){this._syncDataWithItems(),this._updateItems(t)},_syncDataWithItems:function(){const t=this.option("layoutData"),e=this.option("items");(0,s.$K)(e)&&e.forEach((e=>{if(e.dataField&&void 0===this._getDataByField(e.dataField)){let i;e.editorOptions&&(i=e.editorOptions.value),((0,s.$K)(i)||e.dataField in t)&&this._updateFieldValue(e.dataField,i)}}))},_getDataByField:function(t){return t?this.option("layoutData."+t):null},_isCheckboxUndefinedStateEnabled:function(t){let{allowIndeterminateState:e,editorType:i,dataField:n}=t;if(!0===e&&"dxCheckBox"===i){const t=["layoutData",...n.split(".")],e=t.pop(),i=this.option(t.join("."));return i&&e in i}return!1},_updateFieldValue:function(t,e){const i=this.option("layoutData");let n=e;!Ul.Z.isWrapped(i[t])&&(0,s.$K)(t)?this.option("layoutData."+t,n):Ul.Z.isWritableWrapped(i[t])&&(n=(0,s.mf)(n)?n():n,i[t](n)),this._triggerOnFieldDataChanged({dataField:t,value:n})},_triggerOnFieldDataChanged:function(t){this._createActionByOption("onFieldDataChanged")(t)},_updateItems:function(t){const e=this,i=this.option("items"),n=(0,s.$K)(i),o=e.option("customizeItem"),r=n?i:this._generateItemsByData(t);if((0,s.$K)(r)){const t=[];(0,g.each)(r,(function(i,n){e._isAcceptableItem(n)&&(n=e._processItem(n),o&&o(n),(0,s.Kn)(n)&&!1!==Ul.Z.unwrap(n.visible)&&t.push(n))})),e._itemWatchers.length&&n||e._updateItemWatchers(r),this._setItems(t),this._sortItems()}},_cleanItemWatchers:function(){this._itemWatchers.forEach((function(t){t()})),this._itemWatchers=[]},_updateItemWatchers:function(t){const e=this,i=e._getWatch();t.forEach((function(t){(0,s.Kn)(t)&&(0,s.$K)(t.visible)&&(0,s.mf)(i)&&e._itemWatchers.push(i((function(){return Ul.Z.unwrap(t.visible)}),(function(){e._updateItems(e.option("layoutData")),e.repaint()}),{skipImmediate:!0}))}))},_generateItemsByData:function(t){const e=[];return(0,s.$K)(t)&&(0,g.each)(t,(function(t){e.push({dataField:t})})),e},_isAcceptableItem:function(t){const e=t.dataField||t,i=this._getDataByField(e);return!((0,s.mf)(i)&&!Ul.Z.isWrapped(i))},_processItem:function(t){if("string"==typeof t&&(t={dataField:t}),"object"!=typeof t||t.itemType||(t.itemType=wd),!(0,s.$K)(t.editorType)&&(0,s.$K)(t.dataField)){const e=this._getDataByField(t.dataField);t.editorType=(0,s.$K)(e)?this._getEditorTypeByDataType((0,s.dt)(e)):"dxTextBox"}return"dxCheckBox"===t.editorType&&(t.allowIndeterminateState=t.allowIndeterminateState??!0),t},_getEditorTypeByDataType:function(t){switch(t){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems:function(){(0,fe.Sq)(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes:function(){this._items.sort((function(t,e){const i=t.visibleIndex,n=e.visibleIndex;let o;return o=i>n?1:i<n?-1:0,o}))},_initMarkup:function(){this._itemsRunTimeInfo.clear(),this.$element().addClass("dx-layout-manager"),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox:function(){const t=this,e=[];if(t._items&&t._items.length){const i=t._getColCount(),n=(0,o.Z)("<div>").appendTo(t.$element());t._prepareItemsWithMerging(i);const r=t._generateLayoutItems();t._responsiveBox=t._createComponent(n,ud,t._getResponsiveBoxConfig(r,i,e)),(0,p.hasWindow)()||t._renderTemplates(e)}},_itemStateChangedHandler:function(t){this._refresh()},_renderTemplates:function(t){const e=this;let i=0;t.forEach((t=>{var e;let{item:n}=t;null!=n&&null!==(e=n.label)&&void 0!==e&&e.template&&i++})),(0,g.each)(t,(function(t,n){switch(n.itemType){case"empty":up(n);break;case"button":e._renderButtonItem(n);break;default:e._renderFieldItem(n,i)}}))},_getResponsiveBoxConfig:function(t,e,i){const n=this,r=n.option("colCountByScreen"),a=r&&r.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged:function(){const t=n.option("onLayoutChanged"),e=n.isSingleColumnMode();t&&(n.$element().toggleClass(fd,e),t(e))},onContentReady:function(t){(0,p.hasWindow)()&&n._renderTemplates(i),n.option("onLayoutChanged")&&n.$element().toggleClass(fd,n.isSingleColumnMode(t.component))},itemTemplate:function(t,r,a){if(!t.location)return;const l=(0,o.Z)(a),c=t.location.row*e,u=n._items[t.location.col+c];if(!u)return;const d=[u.cssClass];l.toggleClass("dx-single-column-item-content",n.isSingleColumnMode(this)),0===t.location.row&&d.push("dx-first-row"),0===t.location.col&&d.push("dx-first-col"),u.itemType===wd&&n.option("isRoot")&&l.addClass(vd);const h=t.location.col===e-1||t.location.col+t.location.colspan===e,p=n._getRowsCount(),f=t.location.row===p-1;h&&d.push("dx-last-col"),f&&d.push("dx-last-row"),"empty"!==u.itemType&&(d.push(pd),d.push(n.option("cssItemClass")),(0,s.$K)(u.col)&&d.push("dx-col-"+u.col)),i.push({itemType:u.itemType,item:u,$parent:l,rootElementCssClassList:d})},cols:n._generateRatio(e),rows:n._generateRatio(n._getRowsCount(),!0),dataSource:t,screenByWidth:n.option("screenByWidth"),singleColumnScreen:!a&&"xs"}},_getColCount:function(){let t=this.option("colCount");const e=this.option("colCountByScreen");if(e){let i=this.option("form").getTargetScreenFactor();i||(i=(0,p.hasWindow)()?(0,p.getCurrentScreenFactor)(this.option("screenByWidth")):"lg"),t=e[i]||t}if("auto"===t){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=t=this._getMaxColCount()}return t<1?1:t},_getMaxColCount:function(){if(!(0,p.hasWindow)())return 1;const t=this.option("minColWidth"),e=(0,M.dz)(this.$element()),i=this._items.length,n=Math.floor(e/t)||1;return i<n?i:n},isCachedColCountObsolete:function(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging:function(t){const e=this._items.slice(0);let i,n,o,r,s=[];for(r=0;r<e.length;r++)if(i=e[r],s.push(i),(this.option("alignItemLabels")||i.alignItemLabels||i.colSpan)&&(i.col=this._getColByIndex(s.length-1,t)),i.colSpan>1&&i.col+i.colSpan<=t){for(n=[],o=0;o<i.colSpan-1;o++)n.push({merged:!0});s=s.concat(n)}else delete i.colSpan;this._setItems(s)},_getColByIndex:function(t,e){return t%e},_setItems:function(t){this._items=t,this._cashedColCount=null},_generateLayoutItems:function(){const t=this._items,e=this._getColCount(),i=[];let n,o;for(o=0;o<t.length;o++)if(n=t[o],!n.merged){const t={location:{row:parseInt(o/e),col:this._getColByIndex(o,e)}};(0,s.$K)(n.disabled)&&(t.disabled=n.disabled),(0,s.$K)(n.visible)&&(t.visible=n.visible),(0,s.$K)(n.colSpan)&&(t.location.colspan=n.colSpan),(0,s.$K)(n.rowSpan)&&(t.location.rowspan=n.rowSpan),i.push(t)}return i},_renderEmptyItem:function(t){up({$container:t})},_renderButtonItem:function(t){let{item:e,$parent:i,rootElementCssClassList:n}=t;const{$rootElement:a,buttonInstance:l}=function(t){let{item:e,$parent:i,rootElementCssClassList:n,validationGroup:a,createComponentCallback:l}=t;const c=(0,o.Z)("<div>").appendTo(i).addClass(n.join(" ")).addClass("dx-field-button-item").css("textAlign",(u=e.horizontalAlignment,(0,s.$K)(u)?u:"right"));var u;return i.css("justifyContent",function(t){switch(t){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}(e.verticalAlignment)),{$rootElement:c,buttonInstance:l((0,o.Z)("<div>").appendTo(c),"dxButton",(0,r.l)({validationGroup:a},e.buttonOptions))}}({item:e,$parent:i,rootElementCssClassList:n,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:e,widgetInstance:l,guid:e.guid,$itemContainer:a})},_renderFieldItem:function(t,e){var i,n;let{item:o,$parent:a,rootElementCssClassList:l}=t;const c=this._getDataByField(o.dataField);let u=!1;if(void 0===c){const{allowIndeterminateState:t,editorType:e,dataField:i}=o;u=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:t,editorType:e,dataField:i})}const d=o.dataField||o.name,h=this._getFormOrThis(),{$fieldEditorContainer:p,widgetInstance:f,$rootElement:_}=sp(function(t){let{$parent:e,rootElementCssClassList:i,formOrLayoutManager:n,createComponentCallback:o,item:a,template:l,labelTemplate:c,name:u,formLabelLocation:d,requiredMessageTemplate:h,validationGroup:p,editorValue:f,canAssignUndefinedValueToEditor:_,editorValidationBoundary:m,editorStylingMode:v,showColonAfterLabel:b,managerLabelLocation:y,itemId:C,managerMarkOptions:w,labelMode:x,onLabelTemplateRendered:S}=t;const I=(0,s.$K)(a.isRequired)?a.isRequired:!!function(t){let e;return t&&t.length&&(0,g.each)(t,(function(t,i){if("required"===i.type)return e=!0,!1})),e}(a.validationRules),k=a.itemType===wd,E=a.helpText?"dx-"+new H.Z:null,O=function(t){let{item:e,id:i,isRequired:n,managerMarkOptions:o,showColonAfterLabel:s,labelLocation:a,labelTemplate:l,formLabelMode:c,onLabelTemplateRendered:u}=t;const d=Qh.includes(e.editorType),h=(0,r.l)({showColon:s,location:a,id:i,visible:"outside"===c||d&&"hidden"!==c,isRequired:n},e?e.label:{},{markOptions:Xh(o,n),labelTemplate:l,onLabelTemplateRendered:u});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(e.editorType)&&(h.labelID=`dx-label-${new H.Z}`),!h.text&&e.dataField&&(h.text=(0,_o.captionize)(e.dataField)),h.text&&(h.textWithoutColon=h.text,h.text+=h.showColon?":":""),h}({item:a,id:C,isRequired:I,managerMarkOptions:w,showColonAfterLabel:b,labelLocation:y,formLabelMode:x,labelTemplate:c,onLabelTemplateRendered:S}),T=O.visible&&(O.text||O.labelTemplate&&k),{location:D,labelID:B}=O,A="top"!==D&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(a.editorType),P=function(t){let{editorType:e,defaultEditorName:i,editorValue:n,canAssignUndefinedValueToEditor:o,externalEditorOptions:a,editorInputId:l,editorValidationBoundary:c,editorStylingMode:u,formLabelMode:d,labelText:h,labelMark:p}=t;const f={};(void 0!==n||o)&&(f.value=n),-1!==Yh.indexOf(e)&&(f.value=f.value||[]);let _=null==a?void 0:a.labelMode;(0,s.$K)(_)||(_="outside"===d?"hidden":d);const m=(null==a?void 0:a.stylingMode)||u,g=(0,r.l)(!0,f,a,{inputAttr:{id:l},validationBoundary:c,stylingMode:m,label:h,labelMode:_,labelMark:p});return a&&(g.dataSource&&(g.dataSource=a.dataSource),g.items&&(g.items=a.items)),i&&!g.name&&(g.name=i),g}({editorType:a.editorType,editorValue:f,defaultEditorName:a.dataField,canAssignUndefinedValueToEditor:_,externalEditorOptions:a.editorOptions,editorInputId:C,editorValidationBoundary:m,editorStylingMode:v,formLabelMode:x,labelText:O.textWithoutColon,labelMark:O.markOptions.showRequiredMark?String.fromCharCode(160)+O.markOptions.requiredMark:""});return{$parent:e,rootElementCssClassList:i,formOrLayoutManager:n,createComponentCallback:o,labelOptions:O,labelNeedBaselineAlign:A,labelLocation:D,needRenderLabel:T,item:a,isSimpleItem:k,isRequired:I,template:l,helpID:E,labelID:B,name:u,helpText:!O.markOptions.showOptionalMark||O.visible||"hidden"===P.labelMode||(0,s.$K)(a.helpText)?a.helpText:O.markOptions.optionalMark,formLabelLocation:d,requiredMessageTemplate:h,validationGroup:p,editorOptions:P}}({$parent:a,rootElementCssClassList:l,item:o,name:d,editorValue:c,canAssignUndefinedValueToEditor:u,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:o.template?this._getTemplate(o.template):null,labelTemplate:null!==(i=o.label)&&void 0!==i&&i.template?this._getTemplate(o.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(d),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(h,e)&&h._alignLabels(this,this.isSingleColumnMode(h))}}));null===(n=this.option("onFieldItemRendered"))||void 0===n||n(),f&&o.dataField&&this._bindDataField(f,o.dataField,o.editorType,p),this._itemsRunTimeInfo.add({item:o,widgetInstance:f,guid:o.guid,$itemContainer:_})},_incTemplateRenderedCallCount(){this._labelTemplateRenderedCallCount=(this._labelTemplateRenderedCallCount??0)+1},_shouldAlignLabelsOnTemplateRendered(t,e){return t.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===e},_getMarkOptions:function(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis:function(){return this.option("form")||this},_bindDataField:function(t,e,i,n){const o=this._getFormOrThis();t.on("enterKey",(function(t){o._createActionByOption("onEditorEnterKey")((0,r.l)(t,{dataField:e}))})),this._createWatcher(t,n,e),this.linkEditorToDataField(t,e,i)},_createWatcher:function(t,e,i){const n=this,o=n._getWatch();if(!(0,s.mf)(o))return;const r=o((function(){return n._getDataByField(i)}),(function(){const e=n._getDataByField(i);if("dxTagBox"===t.NAME){const i=t.option("value");if(e!==i&&function(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(e,i))return}t.option("value",e)}),{deep:!0,skipImmediate:!0});P.Z.on(e,te.x,r)},_getWatch:function(){if(!(0,s.$K)(this._watch)){const t=this.option("form");this._watch=t&&t.option("integrationOptions.watchMethod")}return this._watch},_createComponent:function(t,e,i){const o=this.option("readOnly");let r=Object.hasOwn(i,"readOnly");const s=this.callBase(t,e,(0,n.Z)({},i,{readOnly:r?i.readOnly:o}));let a=!1;return s.on("optionChanged",(t=>{"readOnly"!==t.name||a||(r=!0)})),this.on("optionChanged",(function(t){"readOnly"!==t.name||r||(a=!0,s.option(t.name,t.value),a=!1)})),s},_generateRatio:function(t,e){const i=[];let n,o;for(o=0;o<t;o++)n={ratio:1},e&&(n.baseSize="auto"),i.push(n);return i},_getRowsCount:function(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions:function(t){const e=this.option("layoutData");(0,s.Kn)(e)&&Object.getOwnPropertyNames(e).forEach((t=>delete this._optionsByReference["layoutData."+t])),(0,s.Kn)(t)&&Object.getOwnPropertyNames(t).forEach((t=>this._optionsByReference["layoutData."+t]=!0))},_clearWidget(t){this._disableEditorValueChangedHandler=!0,t.clear(),this._disableEditorValueChangedHandler=!1,t.option("isValid",!0)},_optionChanged(t){if(0!==t.fullName.search("layoutData."))switch(t.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(t.value),this.option("items")?(0,s.Qr)(t.value)||this._itemsRunTimeInfo.each(((e,i)=>{if((0,s.$K)(i.item)){const e=i.item.dataField;if(e&&(0,s.$K)(i.widgetInstance)){const n=(0,Wt.vb)(e)(t.value),{allowIndeterminateState:o,editorType:r}=i.item;void 0!==n||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:o,editorType:r,dataField:e})?i.widgetInstance.option("value",n):this._clearWidget(i.widgetInstance)}}})):(this._initDataAndItems(t.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(t.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":"auto"===this.option("colCount")&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(t),"auto"===this.option("colCount")&&this._resetColCount();break;default:this.callBase(t)}},_resetColCount:function(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(t,e){this.on("optionChanged",(i=>{i.fullName===`layoutData.${e}`&&t._setOptionWithoutOptionChange("value",i.value)})),t.on("valueChanged",(t=>{const i=(0,s.Kn)(t.value)||Array.isArray(t.value);this._disableEditorValueChangedHandler||i&&t.value===t.previousValue||this._updateFieldValue(e,t.value)}))},_dimensionChanged:function(){"auto"===this.option("colCount")&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData:function(t,e){const i=this;(0,s.Kn)(t)?(0,g.each)(t,(function(t,e){i._updateFieldValue(t,e)})):"string"==typeof t&&i._updateFieldValue(t,e)},getEditor:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},isSingleColumnMode:function(t){const e=this._responsiveBox||t;if(e)return e.option("currentScreenFactor")===e.option("singleColumnScreen")},getItemsRunTimeInfo:function(){return this._itemsRunTimeInfo}});(0,c.default)("dxLayoutManager",dp);const hp=we.inherit({_getDefaultOptions(){return(0,r.l)(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),(0,r.l)(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){const t=this.$element(),e=this.option("validationGroup")||A.findGroup(t,this._modelByElement(t)),i=A.addGroup(e);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=e,this.groupSubscription=this._groupValidationHandler.bind(this),i.on("validated",this.groupSubscription)},_unsubscribeGroup(){const t=A.getGroupConfig(this._validationGroup);t&&t.off("validated",this.groupSubscription)},_getOrderedItems(t,e){let i=[];return(0,g.each)(t,(function(t,n){const o=(0,l.grep)(e,(function(t){if(t.validator===n)return!0}));o.length&&(i=i.concat(o))})),i},_groupValidationHandler(t){const e=this._getOrderedItems(t.validators,(0,g.map)(t.brokenRules,(function(t){return{text:t.message,validator:t.validator,index:t.index}})));this.validators=t.validators,(0,g.each)(this.validators,((t,e)=>{if(e._validationSummary!==this){let t=this._itemValidationHandler.bind(this);const i=function(){e.off("validated",t),e._validationSummary=null,t=null};e.on("validated",t),e.on("disposing",i),e._validationSummary=this}})),this.option("items",e)},_itemValidationHandler(t){let{isValid:e,validator:i,brokenRules:n}=t,o=this.option("items"),r=!1,s=0;for(;s<o.length;){const t=o[s];if(t.validator===i){const i=(0,l.grep)(n||[],(function(e){return e.index===t.index}))[0];if(e||!i){o.splice(s,1),r=!0;continue}i.message!==t.text&&(t.text=i.message,r=!0)}s++}(0,g.each)(n,(function(t,e){const n=(0,l.grep)(o,(function(t){return t.validator===i&&t.index===e.index}))[0];n||(o.push({text:e.message,validator:i,index:e.index}),r=!0)})),r&&(o=this._getOrderedItems(this.validators,o),this.option("items",o))},_initMarkup(){this.$element().addClass("dx-validationsummary"),this.callBase()},_optionChanged(t){"validationGroup"===t.name?this._initGroupRegistration():this.callBase(t)},_itemClass:()=>"dx-validationsummary-item",_itemDataKey:()=>"dx-validationsummary-item-data",_postprocessRenderItem(t){P.Z.on(t.itemElement,"click",(function(){t.itemData.validator&&t.itemData.validator.focus&&t.itemData.validator.focus()}))},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});(0,c.default)("dxValidationSummary",hp);const pp=hp;class fp extends Gn.default{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),A.addGroup(this)}_initMarkup(){const t=this.$element();t.addClass("dx-validationgroup"),t.find(".dx-validator").each((function(t,e){Gh.getInstance((0,o.Z)(e))._initGroupRegistration()})),t.find(".dx-validationsummary").each((function(t,e){pp.getInstance((0,o.Z)(e)).refreshValidationGroup()})),super._initMarkup()}validate(){return A.validateGroup(this)}reset(){return A.resetGroup(this)}_dispose(){A.removeGroup(this),this.$element().removeClass("dx-validationgroup"),super._dispose()}_useTemplates(){return!1}}(0,c.default)("dxValidationGroup",fp);const _p=["items","isRequired","validationRules","visible"],mp=_.default.inherit({_init:function(){this.callBase(),this._dirtyFields=new Set,this._cachedColCountOptions=[],this._itemsRunTimeInfo=new du,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{formID:"dx-"+new H.Z,formData:{},colCount:1,screenByWidth:p.defaultScreenFactorFunc,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:C.Z.format("dxForm-optionalMark"),requiredMessage:C.Z.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:(0,zo.default)().editorStylingMode,labelMode:"outside",isDirty:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return(0,At.yj)()},options:{labelLocation:"top"}},{device:function(){return(0,At.x2)()},options:{showColonAfterLabel:!1}}])},_setOptionsByReference:function(){this.callBase(),(0,r.l)(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:function(t){return parseInt(t.attr(Cd))},_applyLabelsWidthByCol:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e,i){const n=`${e} > .${md}:not(.dx-field-item-label-location-top) > .${_d}`,o=t.find(n),r=o.length;let s,a,l=0;for(a=0;a<r;a++)s=ep(o[a]),s>l&&(l=s);for(a=0;a<r;a++)o[a].style.width=l+"px"}(t,`.${i.inOneColumn?pd:hd+e}${i.excludeTabbed?`:not(.${bd})`:""}`)},_applyLabelsWidth:function(t,e,i,n,o){n=i?1:n||this._getGroupColCount(t);const r={excludeTabbed:e,inOneColumn:i};let s;for(s=0;s<n;s++)this._applyLabelsWidthByCol(t,s,r,o)},_getGroupElementsInColumn:function(t,e,i){const n=(0,s.$K)(i)?"."+yd+i:"",o="."+hd+e+" > ."+gd+" > ."+dd+n;return t.find(o)},_applyLabelsWidthWithGroups:function(t,e,i,n){if(!0===this.option("alignRootItemLabels")){const o=t.find(`.${vd}`);for(let t=0;t<e;t++)this._applyLabelsWidthByCol(o,t,i,n)}if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups(t,e,i,n);else{const t=this.$element().find("."+dd);let e;for(e=0;e<t.length;e++)this._applyLabelsWidth(t.eq(e),i,void 0,void 0,n)}},_applyLabelsWidthWithNestedGroups:function(t,e,i,n){const o={excludeTabbed:i};let r,s,a,l;for(r=0;r<e;r++)for(l=this._getGroupElementsInColumn(t,r),this._applyLabelsWidthByCol(l,0,o,n),s=0;s<this._groupsColCount.length;s++){l=this._getGroupElementsInColumn(t,r,this._groupsColCount[s]);const e=this._getGroupColCount(l);for(a=1;a<e;a++)this._applyLabelsWidthByCol(l,a,o,n)}},_labelLocation:function(){return this.option("labelLocation")},_alignLabelsInColumn:function(t){let{layoutManager:e,inOneColumn:i,$container:n,excludeTabbed:o,items:r}=t;if(!(0,p.hasWindow)()||"top"===this._labelLocation())return;const s=Xh(e._getMarkOptions());i?this._applyLabelsWidth(n,o,!0,void 0,s):this._checkGrouping(r)?this._applyLabelsWidthWithGroups(n,e._getColCount(),o,s):this._applyLabelsWidth(n,o,!1,e._getColCount(),s)},_prepareFormData:function(){(0,s.$K)(this.option("formData"))||this.option("formData",{})},_setStylingModeClass:function(){"underlined"===this.option("stylingMode")&&this.$element().addClass("dx-form-styling-mode-underlined")},_initMarkup:function(){A.addGroup(this._getValidationGroup()),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass("dx-form"),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription:function(){if((0,p.hasWindow)()){const t=this.$element().get(0);Ds.Z.unobserve(t),Ds.Z.observe(t,(()=>{this._resizeHandler()}))}},_resizeHandler:function(){this._cachedLayoutManagers.length&&(0,g.each)(this._cachedLayoutManagers,((t,e)=>{var i;null===(i=e.option("onLayoutChanged"))||void 0===i||i(e.isSingleColumnMode())}))},_getCurrentScreenFactor:function(){return(0,p.hasWindow)()?(0,p.getCurrentScreenFactor)(this.option("screenByWidth")):"lg"},_clearCachedInstances:function(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels:function(t,e){this._alignLabelsInColumn({$container:this.$element(),layoutManager:t,excludeTabbed:!0,items:this.option("items"),inOneColumn:e}),(0,bs.U_)(this.$element().find(`.${Ie}`))},_clean:function(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,Ds.Z.unobserve(this.$element().get(0))},_renderScrollable:function(){const t=this.option("useNativeScrolling");this._scrollable=new wu(this.$element(),{useNative:!!t,useSimulatedScrollbar:!t,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent:function(){return this.option("scrollingEnabled")?(0,o.Z)(this._scrollable.content()):this.$element()},_clearValidationSummary:function(){var t;null===(t=this._$validationSummary)||void 0===t||t.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary:function(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=(0,o.Z)("<div>").addClass("dx-form-validation-summary").appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(t,e,i,o){if(t){const r=[];for(let a=0;a<t.length;a++){let l=t[a];const c=Zu(i,Fu(a,o)),u={item:l,itemIndex:a,path:c},d=this._itemsRunTimeInfo.add(u);if((0,s.HD)(l)&&(l={dataField:l}),(0,s.Kn)(l)){const t=(0,n.Z)({},l);u.preparedItem=t,t.guid=d,this._tryPrepareGroupItemCaption(t),this._tryPrepareGroupItem(t),this._tryPrepareTabbedItem(t,c),this._tryPrepareItemTemplate(t),e&&(t.cssItemClass=bd),t.items&&(t.items=this._prepareItems(t.items,e,c)),r.push(t)}else r.push(l)}return r}},_tryPrepareGroupItemCaption:function(t){"group"===t.itemType&&(t._prepareGroupCaptionTemplate=e=>{t.captionTemplate&&(t.groupCaptionTemplate=this._getTemplate(e)),t.captionTemplate=this._itemGroupTemplate.bind(this,t)},t._prepareGroupCaptionTemplate(t.captionTemplate))},_tryPrepareGroupItem:function(t){"group"===t.itemType&&(t.alignItemLabels=(0,l.ensureDefined)(t.alignItemLabels,!0),t._prepareGroupItemTemplate=e=>{t.template&&(t.groupContentTemplate=this._getTemplate(e)),t.template=this._itemGroupTemplate.bind(this,t)},t._prepareGroupItemTemplate(t.template))},_tryPrepareTabbedItem:function(t,e){"tabbed"===t.itemType&&(t.template=this._itemTabbedTemplate.bind(this,t),t.tabs=this._prepareItems(t.tabs,!0,e,!0))},_tryPrepareItemTemplate:function(t){t.template&&(t.template=this._getTemplate(t.template))},_checkGrouping:function(t){if(t)for(let e=0;e<t.length;e++)if("group"===t[e].itemType)return!0},_renderLayout:function(){const t=this;let e=t.option("items");const i=t._getContent();e=t._prepareItems(e),t._rootLayoutManager=t._renderLayoutManager(i,this._createLayoutManagerOptions(e,{isRoot:!0,colCount:t.option("colCount"),alignItemLabels:t.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged:function(e){t._alignLabels.bind(t)(t._rootLayoutManager,e)},onContentReady:function(e){t._alignLabels(e.component,e.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:function(t){return t.items||[]},_itemTabbedTemplate:function(t,e,i){const n=(0,o.Z)("<div>").appendTo(i),s=(0,r.l)({},t.tabPanelOptions,{dataSource:t.tabs,onItemRendered:e=>{var i,n;null===(i=t.tabPanelOptions)||void 0===i||null===(n=i.onItemRendered)||void 0===n||n.call(i,e),(0,bs.Uo)(e.itemElement)},itemTemplate:(t,e,i)=>{const n=(0,o.Z)(i),r=(0,l.ensureDefined)(t.alignItemLabels,!0),s=this._renderLayoutManager(n,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(t),{colCount:t.colCount,alignItemLabels:r,screenByWidth:this.option("screenByWidth"),colCountByScreen:t.colCountByScreen,cssItemClass:t.cssItemClass,onLayoutChanged:e=>{this._alignLabelsInColumn({$container:n,layoutManager:s,items:t.items,inOneColumn:e})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(t.guid,{layoutManager:s}),r&&this._alignLabelsInColumn({$container:n,layoutManager:s,items:t.items,inOneColumn:s.isSingleColumnMode()})}}),a=(t,e)=>{Array.isArray(t)&&t.forEach((t=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(t.guid,{widgetInstance:e})))},c=this._createComponent(n,$u,s);(0,o.Z)(i).parent().addClass("dx-field-item-has-tabs"),c.on("optionChanged",(t=>{"dataSource"===t.fullName&&a(t.value,t.component)})),a([{guid:t.guid},...t.tabs??[]],c)},_itemGroupCaptionTemplate:function(t,e,i){if(t.groupCaptionTemplate){const n=(0,o.Z)("<div>").addClass("dx-form-group-custom-caption").attr("id",i).appendTo(e);return t._renderGroupCaptionTemplate=()=>{const e={component:this,caption:t.caption,name:t.name};t.groupCaptionTemplate.render({model:e,container:(0,a.u)(n)})},void t._renderGroupCaptionTemplate()}t.caption&&(0,o.Z)("<span>").addClass("dx-form-group-caption").text(t.caption).attr("id",i).appendTo(e)},_itemGroupContentTemplate:function(t,e){const i=(0,o.Z)("<div>").addClass("dx-form-group-content").appendTo(e);if(t.groupContentTemplate)t._renderGroupContentTemplate=()=>{i.empty();const e={formData:this.option("formData"),component:this};t.groupContentTemplate.render({model:e,container:(0,a.u)(i)})},t._renderGroupContentTemplate();else{const n=this._renderLayoutManager(i,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(t),{colCount:t.colCount,colCountByScreen:t.colCountByScreen,alignItemLabels:t.alignItemLabels,cssItemClass:t.cssItemClass}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(t.guid,{layoutManager:n});const o=n._getColCount();this._groupsColCount.includes(o)||this._groupsColCount.push(o),e.addClass(yd+o),e.attr(Cd,o)}},_itemGroupTemplate:function(t,e,i){const n=e.editorOptions.inputAttr.id,r=(0,o.Z)("<div>").toggleClass("dx-form-group-with-caption",(0,s.$K)(t.caption)&&t.caption.length).addClass(dd).appendTo(i),a={role:"group",labelledby:n};this.setAria(a,r),(0,o.Z)(i).parent().addClass("dx-field-item-has-group"),this._itemGroupCaptionTemplate(t,r,n),this._itemGroupContentTemplate(t,r)},_createLayoutManagerOptions:function(t,e){return function(t){let{form:e,$formElement:i,formOptions:n,items:o,validationGroup:s,extendedLayoutManagerOptions:a,onFieldDataChanged:l,onContentReady:c,onDisposing:u,onFieldItemRendered:d}=t;const h={form:e,items:o,$formElement:i,validationGroup:s,onFieldDataChanged:l,onContentReady:c,onDisposing:u,onFieldItemRendered:d,validationBoundary:n.scrollingEnabled?i:void 0,scrollingEnabled:n.scrollingEnabled,showRequiredMark:n.showRequiredMark,showOptionalMark:n.showOptionalMark,requiredMark:n.requiredMark,optionalMark:n.optionalMark,requiredMessage:n.requiredMessage,screenByWidth:n.screenByWidth,layoutData:n.formData,labelLocation:n.labelLocation,customizeItem:n.customizeItem,minColWidth:n.minColWidth,showColonAfterLabel:n.showColonAfterLabel,onEditorEnterKey:n.onEditorEnterKey,labelMode:n.labelMode};return(0,r.l)(h,{isRoot:a.isRoot,colCount:a.colCount,alignItemLabels:a.alignItemLabels,cssItemClass:a.cssItemClass,colCountByScreen:a.colCountByScreen,onLayoutChanged:a.onLayoutChanged,width:a.width})}({form:this,formOptions:this.option(),$formElement:this.$element(),items:t,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:e,onFieldDataChanged:t=>{this._isDataUpdating||this._triggerOnFieldDataChanged(t)},onContentReady:t=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(t.component._itemsRunTimeInfo),e.onContentReady&&e.onContentReady(t)},onDisposing:t=>{let{component:e}=t;const i=e.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(i)},onFieldItemRendered:()=>{var t;null===(t=this._validationSummary)||void 0===t||t.refreshValidationGroup()}})},_renderLayoutManager:function(t,e){const i={lg:e.colCount,md:e.colCount,sm:e.colCount,xs:1};this._cachedColCountOptions.push({colCountByScreen:(0,r.l)(i,e.colCountByScreen)});const n=(0,o.Z)("<div>");n.appendTo(t);const s=this._createComponent(n,"dxLayoutManager",e);return s.on("autoColCountChanged",(()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout((()=>!this._disposed&&this._refresh()),0)})),this._cachedLayoutManagers.push(s),s},_getValidationGroup:function(){return this.option("validationGroup")||this},_createComponent:function(t,e,i){return i=i||{},this._extendConfig(i,{readOnly:this.option("readOnly")}),this.callBase(t,e,i)},_attachSyncSubscriptions:function(){const t=this;t.on("optionChanged",(function(e){const i=e.fullName;"formData"===i&&((0,s.$K)(e.value)||t._options.silent("formData",e.value={}),t._triggerOnFieldDataChangedByDataSet(e.value)),t._cachedLayoutManagers.length&&(0,g.each)(t._cachedLayoutManagers,(function(n,o){"formData"===i&&(t._isDataUpdating=!0,o.option("layoutData",e.value),t._isDataUpdating=!1),"readOnly"!==e.name&&"disabled"!==e.name||o.option(i,e.value)}))}))},_optionChanged:function(t){const e=t.fullName.split(".");e.length>1&&-1!==e[0].search("items")&&this._itemsOptionChangedHandler(t)||e.length>1&&-1!==e[0].search("formData")&&this._formDataOptionChangedHandler(t)||this._defaultOptionChangedHandler(t)},_defaultOptionChangedHandler:function(t){switch(t.name){case"formData":this.option("items")?(0,s.Qr)(t.value)&&this._clear():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":case"isDirty":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":"auto"===this.option("colCount")&&this._invalidate();break;case"width":this.callBase(t),this._rootLayoutManager.option(t.name,t.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":A.removeGroup(t.previousValue||this),this._invalidate();break;default:this.callBase(t)}},_itemsOptionChangedHandler:function(t){const e=t.fullName.split("."),i=t.value,n=this._getItemPath(e),o=this.option(n),r=t.fullName.replace(n+".",""),s=r.split(".")[0].replace(/\[\d+]/,""),a=this._tryCreateItemOptionAction(s,o,o[s],t.previousValue,n);let l=this._tryExecuteItemOptionAction(a)||this._tryChangeLayoutManagerItemOption(t.fullName,i);if(!l&&o){this._changeItemOption(o,r,i);const t=this._generateItemsFromData(this.option("items"));this.option("items",t),l=!0}return l},_formDataOptionChangedHandler:function(t){const e=t.fullName.split("."),i=t.value,n=e.slice(1).join("."),o=this.getEditor(n);return o?o.option("value",i):this._triggerOnFieldDataChanged({dataField:n,value:i}),!0},_tryCreateItemOptionAction:function(t,e,i,n,o){return"tabs"===t&&(this._itemsRunTimeInfo.removeItemsByPathStartWith(`${o}.tabs`),i=this._prepareItems(i,!0,o,!0)),((t,e)=>{switch(t){case"editorOptions":case"buttonOptions":return new Ku(e);case"validationRules":return new Qu(e);case"cssClass":return new Xu(e);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new qu((0,r.l)(e,{optionName:t}));case"tabs":return new Yu(e);case"template":{var i,n;const o=(null==e||null===(i=e.item)||void 0===i?void 0:i.itemType)??(null===(n=e.itemsRunTimeInfo.findPreparedItemByItem(null==e?void 0:e.item))||void 0===n?void 0:n.itemType);return"simple"===o?new Uu(e):"group"===o?new Gu(e):new qu((0,r.l)(e,{optionName:t}))}default:return null}})(t,{item:e,value:i,previousValue:n,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:function(t){return t&&t.tryExecute()},_updateValidationGroupAndSummaryIfNeeded:function(t){const e=ju(t);var i;_p.indexOf(e)>-1&&(A.addGroup(this._getValidationGroup()),this.option("showValidationSummary")&&(null===(i=this._validationSummary)||void 0===i||i.refreshValidationGroup()))},_setLayoutManagerItemOption(t,e,i,n){if(this._updateLockCount>0){!t._updateLockCount&&t.beginUpdate();const e=this._itemsRunTimeInfo.findKeyByPath(n);this.postponedOperations.add(e,(()=>(!t._disposed&&t.endUpdate(),(new w.BH).resolve())))}const o=t=>{if(t.component.off("contentReady",o),zu(n)){const t=(t=>{const e=t.split("."),i=[...e];for(let t=e.length-1;t>=0;t--){if(zu(e[t]))return i.join(".");i.splice(t,1)}return""})(n),e=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(t);e&&this._alignLabelsInColumn({items:e.option("items"),layoutManager:e,$container:e.$element(),inOneColumn:e.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};t.on("contentReady",o),t.option(e,i),this._updateValidationGroupAndSummaryIfNeeded(e)},_tryChangeLayoutManagerItemOption(t,e){const i=t.split("."),n=ju(t);if("items"===n&&i.length>1){const t=this._getItemPath(i),o=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(t);if(o){this._itemsRunTimeInfo.removeItemsByItems(o.getItemsRunTimeInfo());const i=this._prepareItems(e,!1,t);return this._setLayoutManagerItemOption(o,n,i,t),!0}}else if(i.length>2){const t=i.length-2,o=this._getItemPath(i.slice(0,t)),r=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);if(r){const s=Lu(i[t],n);if("editorType"===n&&r.option(s)!==e)return!1;if("visible"===n){const t=this.option(Lu(o,"items"));if(t&&t.length){const e=r.option("items");t.forEach(((t,i)=>{e[i].visibleIndex=t.visibleIndex}))}}return this._setLayoutManagerItemOption(r,s,e,o),!0}}return!1},_tryChangeLayoutManagerItemOptions(t,e){let i;return this.beginUpdate(),(0,g.each)(e,((e,n)=>{if(i=this._tryChangeLayoutManagerItemOption(Lu(t,e),n),!i)return!1})),this.endUpdate(),i},_getItemPath:function(t){let e,i=t[0];for(e=1;e<t.length&&-1!==t[e].search(/items\[\d+]|tabs\[\d+]/);e++)i+="."+t[e];return i},_triggerOnFieldDataChanged:function(t){this._updateIsDirty(t.dataField),this._createActionByOption("onFieldDataChanged")(t)},_triggerOnFieldDataChangedByDataSet(t){t&&(0,s.Kn)(t)&&Object.keys(t).forEach((e=>{this._triggerOnFieldDataChanged({dataField:e,value:t[e]})}))},_updateFieldValue:function(t,e){if((0,s.$K)(this.option("formData"))){const i=this.getEditor(t);this.option("formData."+t,e),i&&i.option("value")!==e&&i.option("value",e)}},_generateItemsFromData:function(t){const e=this.option("formData"),i=[];return!t&&(0,s.$K)(e)&&(0,g.each)(e,(function(t){i.push({dataField:t})})),t&&(0,g.each)(t,(function(t,e){(0,s.Kn)(e)?i.push(e):i.push({dataField:e})})),i},_getItemByField:function(t,e){const i=this,n=(0,s.Kn)(t)?t:i._getFieldParts(t),o=n.fieldName,r=n.fieldPath;let a;return e.length&&(0,g.each)(e,(function(t,e){const n=e.itemType;if(r.length){const t=r.slice();e=i._getItemByFieldPath(t,o,e)}else if("group"===n&&!e.caption&&!e.name||"tabbed"===n&&!e.name){const t=i._getSubItemField(n);e.items=i._generateItemsFromData(e.items),e=i._getItemByField({fieldName:o,fieldPath:r},e[t])}if(((t,e)=>!!t&&(t.dataField===e||t.name===e||Hu(t.title)===e||"group"===t.itemType&&Hu(t.caption)===e))(e,o))return a=e,!1})),a},_getFieldParts:function(t){let e=t,i=e.indexOf(".");const n=[];for(;-1!==i;)n.push(e.substr(0,i)),e=e.substr(i+1),i=e.indexOf(".");return{fieldName:e,fieldPath:n.reverse()}},_getItemByFieldPath:function(t,e,i){const n=this,o=i.itemType,r=n._getSubItemField(o),a="group"===o||"tabbed"===o||i.title;let l;do{if(!a)break;{const o=i.name||i.caption||i.title,a=(0,s.$K)(o),c=Hu(o);let u;if(i[r]=n._generateItemsFromData(i[r]),a&&(u=t.pop()),!t.length&&(l=n._getItemByField(e,i[r]),l))break;(!a||a&&c===u)&&t.length&&(l=n._searchItemInEverySubItem(t,e,i[r]))}}while(t.length&&!(0,s.$K)(l));return l},_getSubItemField:function(t){return"tabbed"===t?"tabs":"items"},_searchItemInEverySubItem:function(t,e,i){const n=this;let o;return(0,g.each)(i,(function(i,r){if(o=n._getItemByFieldPath(t.slice(),e,r),o)return!1})),o||(o=!1),o},_changeItemOption:function(t,e,i){(0,s.Kn)(t)&&(t[e]=i)},_dimensionChanged:function(){const t=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==t&&(this._isColCountChanged(this._lastMarkupScreenFactor,t)&&(this._targetScreenFactor=t,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=t)},_isColCountChanged:function(t,e){let i=!1;return(0,g.each)(this._cachedColCountOptions,(function(n,o){if(o.colCountByScreen[t]!==o.colCountByScreen[e])return i=!0,!1})),i},_refresh:function(){P.Z.trigger(this.$element().find(".dx-state-focused > :not(.dx-dropdowneditor-input-wrapper) input, .dx-state-focused textarea"),"change"),this.callBase()},_updateIsDirty:function(t){const e=this.getEditor(t);e&&(e.option("isDirty")?this._dirtyFields.add(t):this._dirtyFields.delete(t),this.option("isDirty",!!this._dirtyFields.size))},updateRunTimeInfoForEachEditor:function(t){this._itemsRunTimeInfo.each((function(e,i){const n=i.widgetInstance;(0,s.$K)(n)&&U.isEditor(n)&&t(n)}))},_clear:function(){this.updateRunTimeInfoForEachEditor((t=>{t.clear(),t.option("isValid",!0)})),A.resetGroup(this._getValidationGroup())},_updateData:function(t,e,i){const n=this,o=i?e:t;(0,s.Kn)(o)?(0,g.each)(o,(function(e,o){n._updateData(i?t+"."+e:e,o,(0,s.Kn)(o))})):(0,s.HD)(t)&&n._updateFieldValue(t,e)},registerKeyHandler:function(t,e){this.callBase(t,e),this._itemsRunTimeInfo.each((function(i,n){(0,s.$K)(n.widgetInstance)&&n.widgetInstance.registerKeyHandler(t,e)}))},_focusTarget:function(){return this.$element().find("."+gd+" [tabindex]").first()},_visibilityChanged:function(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout:function(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose:function(){this._clearAutoColCountChangedTimeout(),A.removeGroup(this._getValidationGroup()),this.callBase()},clear:function(){this._clear()},resetValues:function(){this._clear()},reset:function(t){this.updateRunTimeInfoForEachEditor((e=>{const i=e.option("name");t&&i in t?e.reset(t[i]):e.reset()})),this._renderValidationSummary()},updateData:function(t,e){this._updateData(t,e)},getEditor:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(t)||this._itemsRunTimeInfo.findWidgetInstanceByName(t)},getButton:function(t){return this._itemsRunTimeInfo.findWidgetInstanceByName(t)},updateDimensions:function(){const t=this,e=new w.BH;return t._scrollable?t._scrollable.update().done((function(){e.resolveWith(t)})):e.resolveWith(t),e.promise()},itemOption:function(t,e,i){const n=this._generateItemsFromData(this.option("items")),o=this._getItemByField(t,n),r=Wu(n,o);if(o)switch(arguments.length){case 1:return o;case 3:{const t=this._tryCreateItemOptionAction(e,o,i,o[e],r);this._changeItemOption(o,e,i);const s=Lu(r,e);this._tryExecuteItemOptionAction(t)||this._tryChangeLayoutManagerItemOption(s,i)||this.option("items",n);break}default:if((0,s.Kn)(e)&&!this._tryChangeLayoutManagerItemOptions(r,e)){let t;(0,g.each)(e,((e,i)=>{const n=this._tryCreateItemOptionAction(e,o,i,o[e],r);this._changeItemOption(o,e,i),t||this._tryExecuteItemOptionAction(n)||(t=!0)})),t&&this.option("items",n)}}},validate:function(){return A.validateGroup(this._getValidationGroup())},getItemID:function(t){return"dx_"+this.option("formID")+"_"+(t||new H.Z)},getTargetScreenFactor:function(){return this._targetScreenFactor}});(0,c.default)("dxForm",mp);const gp=mp,vp="dx-buttongroup-item-has-width",bp={contained:"dx-buttongroup-mode-contained",outlined:"dx-buttongroup-mode-outlined",text:"dx-buttongroup-mode-text"},yp=we.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new ee(((t,e,i)=>{this._prepareItemStyles(t);const n=this.option("buttonTemplate");this._createComponent(t,nr,(0,r.l)({},i,e,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(n)?i:{},template:i.template||n}))}),["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions(){return(0,r.l)(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(t){return(0,s.mf)(t)||this.option("integrationOptions.templates")[t]},_selectedItemClass:()=>"dx-item-selected dx-state-selected",_prepareItemStyles(t){const e=t.data("dxItemIndex");0===e&&t.addClass("dx-buttongroup-first-item");const i=this.option("items");i&&e===i.length-1&&t.addClass("dx-buttongroup-last-item"),t.addClass("dx-shape-standard")},_renderItemContent(t){return t.container=(0,o.Z)(t.container).parent(),this.callBase(t)},_setAriaSelectionAttribute(t,e){this.setAria("pressed",e,t)},_renderItemContentByNode(t,e){return t.container=(0,o.Z)(t.container.children().first()),this.callBase(t,e)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>"dx-buttongroup-item",_itemSelectHandler(t){"single"===this.option("selectionMode")&&this.isItemSelected(t.currentTarget)||this.callBase(t)}}),Cp=_.default.inherit({_getDefaultOptions(){return(0,r.l)(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass("dx-buttongroup"),this._renderStylingMode(),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_renderStylingMode(){const{stylingMode:t}=this.option();for(const t in bp)this.$element().removeClass(bp[t]);this.$element().addClass(bp[t]??bp.contained)},_fireSelectionChangeEvent(t,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:t,removedItems:e})},_renderButtons(){const t=(0,o.Z)("<div>").addClass("dx-buttongroup-wrapper").appendTo(this.$element()),e=this.option("selectedItems"),i={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:t=>{const e=this.option("width");(0,s.$K)(e)&&(0,o.Z)(t.itemElement).addClass(vp)},onSelectionChanged:t=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(t.addedItems,t.removedItems)},onItemClick:t=>{this._itemClickAction(t)}};(0,s.$K)(e)&&e.length&&(i.selectedItems=e),this._buttonsCollection=this._createComponent(t,yp,i)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(t){switch(t.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(t.name,t.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(t),this._buttonsCollection.itemElements().toggleClass(vp,!!t.value);break;default:this.callBase(t)}}});(0,c.default)("dxButtonGroup",Cp);const wp=Cp,xp="dx-colorbox-color-is-not-defined",Sp=Jc.prototype,Ip={makeTransparentBackground:Sp._makeTransparentBackground.bind(Sp),makeRgba:Sp._makeRgba.bind(Sp)},kp=Pl.inherit({_supportedKeys(){const t=function(t){if(t.stopPropagation(),this.option("opened"))return t.preventDefault(),!0};return(0,r.l)(this.callBase(),{enter:this._enterKeyHandler,leftArrow:t,rightArrow:t,upArrow:function(t){return this.option("opened")?!t.altKey||(this.close(),!1):(t.preventDefault(),!1)},downArrow:function(t){return this.option("opened")||t.altKey?!(!this.option("opened")&&t.altKey&&(this._validatedOpening(),1)):(t.preventDefault(),!1)}})},_getDefaultOptions(){return(0,r.l)(this.callBase(),{editAlphaChannel:!1,applyValueMode:"useButtons",keyStep:1,fieldTemplate:null,buttonsLocation:"bottom after"})},_popupHidingHandler(){this.callBase(),"useButtons"===this.option("applyValueMode")&&this._updateColorViewValue(this.option("value"))},_popupConfig(){return(0,r.l)(this.callBase(),{width:""})},_contentReadyHandler(){this._createColorView(),this._addPopupBottomClasses()},_addPopupBottomClasses(){const t=this._popup.bottomToolbar();t&&(t.addClass("dx-colorview-container-cell").addClass("dx-colorview-button-cell").find(".dx-toolbar-items-container").addClass("dx-colorview-buttons-container"),t.find(".dx-popup-done").addClass("dx-colorview-apply-button"),t.find(".dx-popup-cancel").addClass("dx-colorview-cancel-button"))},_createColorView(){this._popup.$overlayContent().addClass("dx-colorbox-overlay");const t=(0,o.Z)("<div>").appendTo(this._popup.$content());this._colorView=this._createComponent(t,Jc,this._colorViewConfig())},_applyNewColor(t){this.option("value",t),t&&Ip.makeTransparentBackground(this._$colorResultPreview,t),this._colorViewEnterKeyPressed&&(this.close(),this._colorViewEnterKeyPressed=!1)},_colorViewConfig(){const t=this;return{value:t.option("value"),matchValue:t.option("value"),editAlphaChannel:t.option("editAlphaChannel"),applyValueMode:t.option("applyValueMode"),focusStateEnabled:t.option("focusStateEnabled"),stylingMode:this.option("stylingMode"),target:this._input(),onEnterKeyPressed(e){let{event:i}=e;t._colorViewEnterKeyPressed=!0,t._colorView.option("value")!==t.option("value")&&(t._saveValueChangeEvent(i),t._applyNewColor(t._colorView.option("value")),t.close())},onValueChanged(e){let{event:i,value:n,previousValue:o}=e;const r="instantly"===t.option("applyValueMode"),s=Ip.makeRgba(n)===o,a=r||t._colorViewEnterKeyPressed,l=t._shouldSaveEmptyValue;s||!a||l||(i&&t._saveValueChangeEvent(i),t._applyNewColor(n))}}},_enterKeyHandler(t){const e=this._input().val(),{value:i,editAlphaChannel:n}=this.option(),o=i&&n?Ip.makeRgba(i):i;if(!e)return!1;if(!new oc.default(e).colorIsInvalid){if(e!==o&&(this._applyColorFromInput(e),this._saveValueChangeEvent(t),this.option("value",this.option("editAlphaChannel")?Ip.makeRgba(e):e)),this._colorView){const e=this._colorView.option("value");i!==e&&(this._saveValueChangeEvent(t),this.option("value",e))}return this.close(),!1}this._input().val(o)},_applyButtonHandler(t){this._saveValueChangeEvent(t.event),this._applyNewColor(this._colorView.option("value")),this.callBase()},_cancelButtonHandler(){this._resetInputValue(),this.callBase()},_getKeyboardListeners(){return this.callBase().concat([this._colorView])},_init(){this.callBase()},_initMarkup(){this.$element().addClass("dx-colorbox"),this.callBase()},_renderInput(){this.callBase(),this._input().addClass("dx-colorbox-input"),this._renderColorPreview()},_renderColorPreview(){this.$element().wrapInner((0,o.Z)("<div>").addClass("dx-colorbox-input-container")),this._$colorBoxInputContainer=this.$element().children().eq(0),this._$colorResultPreview=(0,o.Z)("<div>").addClass("dx-colorbox-color-result-preview").appendTo(this._$textEditorInputContainer),this.option("value")?Ip.makeTransparentBackground(this._$colorResultPreview,this.option("value")):this._$colorBoxInputContainer.addClass(xp)},_renderValue(){const{value:t,editAlphaChannel:e}=this.option(),i=t&&e?Ip.makeRgba(t):t;return this.option("text",i),this.callBase()},_resetInputValue(){const t=this._input(),e=this.option("value");t.val(e),this._updateColorViewValue(e)},_updateColorViewValue(t){this._colorView&&this._colorView.option({value:t,matchValue:t})},_valueChangeEventHandler(t){let e=this._input().val();e&&(e=this._applyColorFromInput(e),this._updateColorViewValue(e)),this.callBase(t,e)},_applyColorFromInput(t){const{editAlphaChannel:e}=this.option();return new oc.default(t).colorIsInvalid?(this._resetInputValue(),this.option("value")):e?Ip.makeRgba(t):t},_clean(){this.callBase(),delete this._shouldSaveEmptyValue},_optionChanged(t){const{value:e}=t,{name:i}=t;switch(i){case"value":this._$colorBoxInputContainer.toggleClass(xp,!e),e?Ip.makeTransparentBackground(this._$colorResultPreview,e):this._$colorResultPreview.removeAttr("style"),null===e&&(this._shouldSaveEmptyValue=!0),this._updateColorViewValue(e),this._shouldSaveEmptyValue=!1,this.callBase(t);break;case"applyButtonText":case"cancelButtonText":this.callBase(t),this._popup&&this._addPopupBottomClasses();break;case"editAlphaChannel":case"keyStep":this._colorView&&this._colorView.option(i,e);break;default:this.callBase(t)}}});(0,c.default)("dxColorBox",kp);const Ep=kp;var Op=i(2051);const Tp=U.inherit({_getDefaultOptions(){return(0,r.l)(this.callBase(),{min:0,max:100,value:0})},_initMarkup(){this.$element().addClass("dx-trackbar"),this._renderWrapper(),this._renderContainer(),this._renderRange(),this._renderValue(),this._setRangeStyles(),this.callBase()},_render(){this.callBase(),this._setRangeStyles(this._rangeStylesConfig())},_renderWrapper(){this._$wrapper=(0,o.Z)("<div>").addClass("dx-trackbar-wrapper").appendTo(this.$element())},_renderContainer(){this._$bar=(0,o.Z)("<div>").addClass("dx-trackbar-container").appendTo(this._$wrapper)},_renderRange(){this._$range=(0,o.Z)("<div>").addClass("dx-trackbar-range").appendTo(this._$bar)},_renderValue(){const t=this.option("value"),e=this.option("min"),i=this.option("max");if(e>i)return;if(t<e)return this.option("value",e),void(this._currentRatio=0);if(t>i)return this.option("value",i),void(this._currentRatio=1);const n=e===i?0:(t-e)/(i-e);!this._needPreventAnimation&&this._setRangeStyles({width:100*n+"%"}),this.setAria({valuemin:this.option("min"),valuemax:i,valuenow:t}),this._currentRatio=n},_rangeStylesConfig(){return{width:100*this._currentRatio+"%"}},_setRangeStyles(t){Se.default.stop(this._$range),t?!this._needPreventAnimation&&(0,p.hasWindow)()&&Se.default.animate(this._$range,{type:"custom",duration:100,to:t}):this._$range.css({width:0})},_optionChanged(t){switch(t.name){case"value":this._renderValue(),this.callBase(t);break;case"max":case"min":this._renderValue();break;default:this.callBase(t)}},_dispose(){Se.default.stop(this._$range),this.callBase()}});(0,c.default)("dxTrackBar",Tp);const Dp=Tp.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{value:0,statusFormat:function(t){return"Progress: "+Math.round(100*t)+"%"},showStatus:!0,onComplete:null,activeStateEnabled:!1,statusPosition:"bottom left",_animatingSegmentCount:0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(t){return"android"===t.platform},options:{_animatingSegmentCount:2}}])},_initMarkup:function(){this._renderStatus(),this._createCompleteAction(),this.callBase(),this.$element().addClass("dx-progressbar"),this._$wrapper.addClass("dx-progressbar-wrapper"),this._$bar.addClass("dx-progressbar-container"),this.setAria("role","progressbar"),(0,o.Z)("<div>").addClass("dx-progressbar-range-container").appendTo(this._$wrapper).append(this._$bar),this._$range.addClass("dx-progressbar-range"),this._toggleStatus(this.option("showStatus"))},_useTemplates:function(){return!1},_createCompleteAction:function(){this._completeAction=this._createActionByOption("onComplete")},_renderStatus:function(){this._$status=(0,o.Z)("<div>").addClass("dx-progressbar-status")},_renderIndeterminateState:function(){this._$segmentContainer=(0,o.Z)("<div>").addClass("dx-progressbar-animating-container");const t=this.option("_animatingSegmentCount");for(let e=0;e<t;e++)(0,o.Z)("<div>").addClass("dx-progressbar-animating-segment").addClass("dx-progressbar-animating-segment-"+(e+1)).appendTo(this._$segmentContainer);this._$segmentContainer.appendTo(this._$wrapper)},_toggleStatus:function(t){const e=this.option("statusPosition").split(" ");t?"top"===e[0]||"left"===e[0]?this._$status.prependTo(this._$wrapper):this._$status.appendTo(this._$wrapper):this._$status.detach(),this._togglePositionClass()},_togglePositionClass:function(){const t=this.option("statusPosition").split(" ");this._$wrapper.removeClass("dx-position-top-left dx-position-top-right dx-position-bottom-left dx-position-bottom-right dx-position-left dx-position-right");let e="dx-position-"+t[0];t[1]&&(e+="-"+t[1]),this._$wrapper.addClass(e)},_toggleIndeterminateState:function(t){t?(this._renderIndeterminateState(),this._$bar.toggle(!1)):(this._$bar.toggle(!0),this._$segmentContainer.remove(),delete this._$segmentContainer)},_renderValue:function(){const t=this.option("value"),e=this.option("max");t||0===t?(this._$segmentContainer&&this._toggleIndeterminateState(!1),t===e&&this._completeAction(),this.callBase(),this._setStatus()):this._toggleIndeterminateState(!0)},_setStatus:function(){let t=this.option("statusFormat");t=(0,s.mf)(t)?t.bind(this):function(t){return t};const e=t(this._currentRatio,this.option("value"));this._$status.text(e)},_dispose:function(){this._$status.remove(),this.callBase()},_optionChanged:function(t){switch(t.name){case"statusFormat":this._setStatus();break;case"showStatus":this._toggleStatus(t.value);break;case"statusPosition":this._toggleStatus(this.option("showStatus"));break;case"onComplete":this._createCompleteAction();break;case"_animatingSegmentCount":break;default:this.callBase(t)}}});(0,c.default)("dxProgressBar",Dp);const Bp=Dp,Ap=(0,p.getWindow)(),Pp=()=>!!Ap.FormData;class Mp extends U{_supportedKeys(){const t=t=>{t.preventDefault();const e=this._selectButton.$element();P.Z.trigger(e,Kt.name)};return(0,r.l)(super._supportedKeys(),{space:t,enter:t})}_setOptionsByReference(){super._setOptionsByReference(),(0,r.l)(this._optionsByReference,{value:!0})}_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{chunkSize:0,value:[],selectButtonText:C.Z.format("dxFileUploader-selectFile"),uploadButtonText:C.Z.format("dxFileUploader-upload"),labelText:C.Z.format("dxFileUploader-dropFile"),name:"files[]",multiple:!1,accept:"",uploadUrl:"/",allowCanceling:!0,showFileList:!0,progress:0,dialogTrigger:void 0,dropZone:void 0,readyToUploadMessage:C.Z.format("dxFileUploader-readyToUpload"),uploadedMessage:C.Z.format("dxFileUploader-uploaded"),uploadFailedMessage:C.Z.format("dxFileUploader-uploadFailedMessage"),uploadAbortedMessage:C.Z.format("dxFileUploader-uploadAbortedMessage"),uploadMode:"instantly",uploadMethod:"POST",uploadHeaders:{},uploadCustomData:{},onBeforeSend:null,onUploadStarted:null,onUploaded:null,onFilesUploaded:null,onProgress:null,onUploadError:null,onUploadAborted:null,onDropZoneEnter:null,onDropZoneLeave:null,allowedFileExtensions:[],maxFileSize:0,minFileSize:0,inputAttr:{},invalidFileExtensionMessage:C.Z.format("dxFileUploader-invalidFileExtension"),invalidMaxFileSizeMessage:C.Z.format("dxFileUploader-invalidMaxFileSize"),invalidMinFileSizeMessage:C.Z.format("dxFileUploader-invalidMinFileSize"),extendSelection:!0,validationMessageMode:"always",uploadFile:null,uploadChunk:null,abortUpload:null,validationMessageOffset:{h:0,v:0},hoverStateEnabled:!0,useNativeInputClick:!1,useDragOver:!0,nativeDropSupported:!0,_uploadButtonType:"normal",_buttonStylingMode:"contained"})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator(),options:{focusStateEnabled:!0}},{device:[{platform:"android"}],options:{validationMessageOffset:{v:0}}},{device:()=>"desktop"!==tt.default.real().deviceType,options:{useDragOver:!1}},{device:()=>!Pp(),options:{uploadMode:"useForm"}},{device:()=>"desktop"!==tt.default.real().deviceType,options:{nativeDropSupported:!1}},{device:()=>(0,At.x2)(),options:{_uploadButtonType:"default"}},{device:()=>(0,At.dC)(),options:{_buttonStylingMode:"text"}}])}_initOptions(t){const e="labelText"in t;super._initOptions(t),e||this._shouldDragOverBeRendered()||this.option("labelText","")}_init(){super._init(),this._initFileInput(),this._initLabel(),this._setUploadStrategy(),this._createFiles(),this._createBeforeSendAction(),this._createUploadStartedAction(),this._createUploadedAction(),this._createFilesUploadedAction(),this._createProgressAction(),this._createUploadErrorAction(),this._createUploadAbortedAction(),this._createDropZoneEnterAction(),this._createDropZoneLeaveAction()}_setUploadStrategy(){let t=null;if(this.option("chunkSize")>0){const e=this.option("uploadChunk");t=e&&(0,s.mf)(e)?new Fp(this):new Vp(this)}else{const e=this.option("uploadFile");t=e&&(0,s.mf)(e)?new Lp(this):new Hp(this)}this._uploadStrategy=t}_initFileInput(){this._isCustomClickEvent=!1;const{multiple:t,accept:e,hint:i}=this.option();this._$fileInput||(this._$fileInput=(0,o.Z)("<input>").attr("type","file"),P.Z.on(this._$fileInput,"change",this._inputChangeHandler.bind(this)),P.Z.on(this._$fileInput,"click",(t=>(t.stopPropagation(),this._resetInputValue(),this.option("useNativeInputClick")||this._isCustomClickEvent))));const n={multiple:t,accept:e,tabIndex:-1};(0,s.$K)(i)&&(n.title=i),this._$fileInput.prop(n)}_inputChangeHandler(){if(this._doPreventInputChange)return;const t=this._$fileInput.val().replace(/^.*\\/,""),e=this._$fileInput.prop("files");if(e&&!e.length&&"useForm"!==this.option("uploadMode"))return;const i=e?this._getFiles(e):[{name:t}];this._changeValue(i),"instantly"===this.option("uploadMode")&&this._uploadFiles()}_shouldFileListBeExtended(){return"useForm"!==this.option("uploadMode")&&this.option("extendSelection")&&this.option("multiple")}_changeValue(t){const e=this._shouldFileListBeExtended()?this.option("value").slice():[];this.option("value",e.concat(t))}_getFiles(t){const e=[];return(0,g.each)(t,((t,i)=>e.push(i))),e}_getFile(t){const e=(0,s.kE)(t)?this.option("value")[t]:t;return this._files.filter((t=>t.value===e))[0]}_initLabel(){this._$inputLabel||(this._$inputLabel=(0,o.Z)("<div>")),this._updateInputLabelText()}_updateInputLabelText(){const t=this._isInteractionDisabled()?"":this.option("labelText");this._$inputLabel.text(t)}_focusTarget(){return this.$element().find(".dx-fileuploader-button")}_getSubmitElement(){return this._$fileInput}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-fileuploader"),this._renderWrapper(),this._renderInputWrapper(),this._renderSelectButton(),this._renderInputContainer(),this._renderUploadButton(),this._preventRecreatingFiles=!0,this._activeDropZone=null}_render(){this._preventRecreatingFiles=!1,this._attachDragEventHandlers(this._$inputWrapper),this._attachDragEventHandlers(this.option("dropZone")),this._renderFiles(),super._render()}_createFileProgressBar(t){t.progressBar=this._createProgressBar(t.value.size),t.progressBar.$element().appendTo(t.$file),this._initStatusMessage(t),this._ensureCancelButtonInitialized(t)}_setStatusMessage(t,e){setTimeout((()=>{this.option("showFileList")&&t.$statusMessage&&(t.$statusMessage.text(e),t.$statusMessage.css("display",""),t.progressBar.$element().remove())}),400)}_getUploadAbortedStatusMessage(){return"instantly"===this.option("uploadMode")?this.option("uploadAbortedMessage"):this.option("readyToUploadMessage")}_createFiles(){const t=this.option("value");!this._files||0!==t.length&&this._shouldFileListBeExtended()||(this._preventFilesUploading(this._files),this._files=null),this._files||(this._files=[]),(0,g.each)(t.slice(this._files.length),((t,e)=>{const i=this._createFile(e);this._validateFile(i),this._files.push(i)}))}_preventFilesUploading(t){t.forEach((t=>this._uploadStrategy.abortUpload(t)))}_validateFile(t){t.isValidFileExtension=this._validateFileExtension(t),t.isValidMinSize=this._validateMinFileSize(t),t.isValidMaxSize=this._validateMaxFileSize(t)}_validateFileExtension(t){const e=this.option("allowedFileExtensions"),i=this.option("accept"),n=this._getAllowedFileTypes(i),o=t.value.name.substring(t.value.name.lastIndexOf(".")).toLowerCase();if(0!==i.length&&!this._isFileTypeAllowed(t.value,n))return!1;if(0===e.length)return!0;for(let t=0;t<e.length;t++)if(o===e[t].toLowerCase())return!0;return!1}_validateMaxFileSize(t){const e=t.value.size,i=this.option("maxFileSize");return!(i>0)||e<=i}_validateMinFileSize(t){const e=t.value.size,i=this.option("minFileSize");return!(i>0)||e>=i}_createBeforeSendAction(){this._beforeSendAction=this._createActionByOption("onBeforeSend",{excludeValidators:["readOnly"]})}_createUploadStartedAction(){this._uploadStartedAction=this._createActionByOption("onUploadStarted",{excludeValidators:["readOnly"]})}_createUploadedAction(){this._uploadedAction=this._createActionByOption("onUploaded",{excludeValidators:["readOnly"]})}_createFilesUploadedAction(){this._filesUploadedAction=this._createActionByOption("onFilesUploaded",{excludeValidators:["readOnly"]})}_createProgressAction(){this._progressAction=this._createActionByOption("onProgress",{excludeValidators:["readOnly"]})}_createUploadAbortedAction(){this._uploadAbortedAction=this._createActionByOption("onUploadAborted",{excludeValidators:["readOnly"]})}_createUploadErrorAction(){this._uploadErrorAction=this._createActionByOption("onUploadError",{excludeValidators:["readOnly"]})}_createDropZoneEnterAction(){this._dropZoneEnterAction=this._createActionByOption("onDropZoneEnter")}_createDropZoneLeaveAction(){this._dropZoneLeaveAction=this._createActionByOption("onDropZoneLeave")}_createFile(t){return{value:t,loadedSize:0,onProgress:(0,h.Z)(),onAbort:(0,h.Z)(),onLoad:(0,h.Z)(),onError:(0,h.Z)(),onLoadStart:(0,h.Z)(),isValidFileExtension:!0,isValidMaxSize:!0,isValidMinSize:!0,isValid(){return this.isValidFileExtension&&this.isValidMaxSize&&this.isValidMinSize},isInitialized:!1}}_resetFileState(t){t.isAborted=!1,t.uploadStarted=!1,t.isStartLoad=!1,t.loadedSize=0,t.chunksData=void 0,t.request=void 0}_renderFiles(){var t;const e=this.option("value");this._$filesContainer?this._shouldFileListBeExtended()&&0!==e.length||this._$filesContainer.empty():this._$filesContainer=(0,o.Z)("<div>").addClass("dx-fileuploader-files-container").appendTo(this._$content);const i=this.option("showFileList");i&&(0,g.each)(this._files,((t,e)=>{e.$file||this._renderFile(e)})),this.$element().toggleClass("dx-fileuploader-show-file-list",i),this._toggleFileUploaderEmptyClassName(),this._updateFileNameMaxWidth(),null===(t=this._validationMessage)||void 0===t||t.repaint()}_renderFile(t){const e=t.value,i=(0,o.Z)("<div>").addClass("dx-fileuploader-file-container").appendTo(this._$filesContainer);this._renderFileButtons(t,i),t.$file=(0,o.Z)("<div>").addClass("dx-fileuploader-file").appendTo(i);const n=(0,o.Z)("<div>").addClass("dx-fileuploader-file-info").appendTo(t.$file);t.$statusMessage=(0,o.Z)("<div>").addClass("dx-fileuploader-file-status-message").appendTo(t.$file),(0,o.Z)("<div>").addClass("dx-fileuploader-file-name").text(e.name).appendTo(n),(0,s.$K)(e.size)&&(0,o.Z)("<div>").addClass("dx-fileuploader-file-size").text(this._getFileSize(e.size)).appendTo(n),t.isValid()?t.$statusMessage.text(this.option("readyToUploadMessage")):(t.isValidFileExtension||t.$statusMessage.append(this._createValidationElement("invalidFileExtensionMessage")),t.isValidMaxSize||t.$statusMessage.append(this._createValidationElement("invalidMaxFileSizeMessage")),t.isValidMinSize||t.$statusMessage.append(this._createValidationElement("invalidMinFileSizeMessage")),i.addClass("dx-fileuploader-invalid"))}_createValidationElement(t){return(0,o.Z)("<span>").text(this.option(t))}_updateFileNameMaxWidth(){const t=this.option("allowCanceling")&&"useForm"!==this.option("uploadMode")?1:0,e="useButtons"===this.option("uploadMode")?1:0,i=(0,M.dz)(this._$filesContainer.find(".dx-fileuploader-file-container").first())||(0,M.dz)(this._$filesContainer),n=this._$filesContainer.find(".dx-fileuploader-button-container").eq(0),o=(0,M.dz)(n)*(t+e),r=this._$filesContainer.find(".dx-fileuploader-file-size").eq(0),s=r.text();r.text("1000 Mb");const a=(0,M.dz)(r);r.text(s),this._$filesContainer.find(".dx-fileuploader-file-name").css("maxWidth",i-o-a)}_renderFileButtons(t,e){const i=this._getCancelButton(t);i&&e.append(i);const n=this._getUploadButton(t);n&&e.append(n)}_getCancelButton(t){if("useForm"===this.option("uploadMode"))return null;const{allowCanceling:e,readOnly:i,hoverStateEnabled:n,_buttonStylingMode:r}=this.option();return t.cancelButton=this._createComponent((0,o.Z)("<div>").addClass("dx-fileuploader-button dx-fileuploader-cancel-button"),nr,{onClick:()=>this._removeFile(t),icon:"close",visible:e,disabled:i,integrationOptions:{},hoverStateEnabled:n,stylingMode:r}),(0,o.Z)("<div>").addClass("dx-fileuploader-button-container").append(t.cancelButton.$element())}_getUploadButton(t){if(!t.isValid()||"useButtons"!==this.option("uploadMode"))return null;const{hoverStateEnabled:e,_buttonStylingMode:i}=this.option();return t.uploadButton=this._createComponent((0,o.Z)("<div>").addClass("dx-fileuploader-button dx-fileuploader-upload-button"),nr,{onClick:()=>this._uploadFile(t),icon:"upload",hoverStateEnabled:e,stylingMode:i}),t.onLoadStart.add((()=>t.uploadButton.option({visible:!1,disabled:!0}))),t.onAbort.add((()=>t.uploadButton.option({visible:!0,disabled:!1}))),(0,o.Z)("<div>").addClass("dx-fileuploader-button-container").append(t.uploadButton.$element())}_removeFile(t){var e;null===(e=t.$file)||void 0===e||e.parent().remove(),this._files.splice(this._files.indexOf(t),1);const i=this.option("value").slice();i.splice(i.indexOf(t.value),1),this._preventRecreatingFiles=!0,this.option("value",i),this._preventRecreatingFiles=!1,this._toggleFileUploaderEmptyClassName(),this._resetInputValue(!0)}removeFile(t){if("useForm"===this.option("uploadMode")||!(0,s.$K)(t))return;const e=this._getFile(t);e&&(e.uploadStarted&&this._preventFilesUploading([e]),this._removeFile(e))}_toggleFileUploaderEmptyClassName(){this.$element().toggleClass("dx-fileuploader-empty",!this._files.length||this._hasInvalidFile(this._files))}_hasInvalidFile(t){for(let e=0;e<t.length;e++)if(!t[e].isValid())return!0;return!1}_getFileSize(t){let e=0;const i=[C.Z.format("dxFileUploader-bytes"),C.Z.format("dxFileUploader-kb"),C.Z.format("dxFileUploader-Mb"),C.Z.format("dxFileUploader-Gb")],n=i.length-1;for(;e<n&&t>=1024;)t/=1024,e++;return Math.round(t)+" "+i[e]}_renderSelectButton(){const t=(0,o.Z)("<div>").addClass("dx-fileuploader-button").appendTo(this._$inputWrapper);this._selectButton=this._createComponent(t,nr,{text:this.option("selectButtonText"),focusStateEnabled:!1,integrationOptions:{},disabled:this.option("readOnly"),hoverStateEnabled:this.option("hoverStateEnabled")}),this._selectFileDialogHandler=this._selectButtonClickHandler.bind(this),"desktop"===tt.default.real().deviceType?this._selectButton.option("onClick",this._selectFileDialogHandler):this._attachSelectFileDialogHandler(this._selectButton.$element()),this._attachSelectFileDialogHandler(this.option("dialogTrigger"))}_selectButtonClickHandler(){if(!this.option("useNativeInputClick")){if(this._isInteractionDisabled())return!1;this._isCustomClickEvent=!0,P.Z.trigger(this._$fileInput,"click"),this._isCustomClickEvent=!1}}_attachSelectFileDialogHandler(t){(0,s.$K)(t)&&(this._detachSelectFileDialogHandler(t),P.Z.on((0,o.Z)(t),"click",this._selectFileDialogHandler))}_detachSelectFileDialogHandler(t){(0,s.$K)(t)&&P.Z.off((0,o.Z)(t),"click",this._selectFileDialogHandler)}_renderUploadButton(){if("useButtons"!==this.option("uploadMode"))return;const t=(0,o.Z)("<div>").addClass("dx-fileuploader-button").addClass("dx-fileuploader-upload-button").appendTo(this._$content);this._uploadButton=this._createComponent(t,nr,{text:this.option("uploadButtonText"),onClick:this._uploadButtonClickHandler.bind(this),type:this.option("_uploadButtonType"),integrationOptions:{},hoverStateEnabled:this.option("hoverStateEnabled")})}_uploadButtonClickHandler(){this._uploadFiles()}_shouldDragOverBeRendered(){return!this.option("readOnly")&&("useForm"!==this.option("uploadMode")||this.option("nativeDropSupported"))}_isInteractionDisabled(){return this.option("readOnly")||this.option("disabled")}_renderInputContainer(){this._$inputContainer=(0,o.Z)("<div>").addClass("dx-fileuploader-input-container").appendTo(this._$inputWrapper),this._$fileInput.addClass("dx-fileuploader-input"),this._renderInput();const t=`dx-fileuploader-input-label-${new H.Z}`;this._$inputLabel.attr("id",t).addClass("dx-fileuploader-input-label").appendTo(this._$inputContainer),this.setAria("labelledby",t,this._$fileInput)}_renderInput(){this.option("useNativeInputClick")?this._selectButton.option("template",this._selectButtonInputTemplate.bind(this)):(this._$fileInput.appendTo(this._$inputContainer),this._selectButton.option("template","content")),this._applyInputAttributes(this.option("inputAttr"))}_selectButtonInputTemplate(t,e){const i=(0,o.Z)(e),n=(0,o.Z)("<span>").addClass("dx-button-text").text(t.text);return i.append(n).append(this._$fileInput),i}_renderInputWrapper(){this._$inputWrapper=(0,o.Z)("<div>").addClass("dx-fileuploader-input-wrapper").appendTo(this._$content)}_detachDragEventHandlers(t){(0,s.$K)(t)&&P.Z.off((0,o.Z)(t),(0,f.addNamespace)("",this.NAME))}_attachDragEventHandlers(t){const e=t!==this._$inputWrapper;(0,s.$K)(t)&&this._shouldDragOverBeRendered()&&(this._detachDragEventHandlers(t),t=(0,o.Z)(t),P.Z.on(t,(0,f.addNamespace)("dragenter",this.NAME),this._dragEnterHandler.bind(this,e)),P.Z.on(t,(0,f.addNamespace)("dragover",this.NAME),this._dragOverHandler.bind(this,e)),P.Z.on(t,(0,f.addNamespace)("dragleave",this.NAME),this._dragLeaveHandler.bind(this,e)),P.Z.on(t,(0,f.addNamespace)("drop",this.NAME),this._dropHandler.bind(this,e)))}_applyInputAttributes(t){this._$fileInput.attr(t)}_useInputForDrop(){return this.option("nativeDropSupported")&&"useForm"===this.option("uploadMode")}_getDropZoneElement(t,e){let i=t?Array.from((0,o.Z)(this.option("dropZone"))):[this._$inputWrapper];return i=i.map((t=>(0,o.Z)(t).get(0))),i[i.indexOf(e.currentTarget)]}_dragEnterHandler(t,e){if(this.option("disabled"))return!1;this._useInputForDrop()||e.preventDefault();const i=this._getDropZoneElement(t,e);(0,s.$K)(i)&&this._shouldRaiseDragOver(e,i)&&(this._activeDropZone=i,this._tryToggleDropZoneActive(!0,t,e))}_shouldRaiseDragOver(t,e){return null===this._activeDropZone&&this.isMouseOverElement(t,e,!1)&&t.originalEvent.dataTransfer.types.find((t=>"Files"===t))}_dragOverHandler(t,e){if(this._useInputForDrop()||e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy",!t){const t=this._getDropZoneElement(!1,e);this._shouldRaiseDragOver(e,t)&&this._dragEnterHandler(!1,e),this._shouldRaiseDragLeave(e,!1)&&this._dragLeaveHandler(!1,e)}}_dragLeaveHandler(t,e){this._useInputForDrop()||e.preventDefault(),this._shouldRaiseDragLeave(e,t)&&(this._tryToggleDropZoneActive(!1,t,e),this._activeDropZone=null)}_shouldRaiseDragLeave(t,e){return null!==this._activeDropZone&&!this.isMouseOverElement(t,this._activeDropZone,!e,-1)}_tryToggleDropZoneActive(t,e,i){const n=t?"addClass":"removeClass";this[t?"_dropZoneEnterAction":"_dropZoneLeaveAction"]({event:i,dropZoneElement:this._activeDropZone}),e||this.$element()[n]("dx-fileuploader-dragover")}_dropHandler(t,e){if(this._activeDropZone=null,t||this.$element().removeClass("dx-fileuploader-dragover"),this._useInputForDrop()||t&&this._isInteractionDisabled())return;e.preventDefault();const i=e.originalEvent.dataTransfer.files,n=this._getFiles(i);!this.option("multiple")&&n.length>1||0===n.length||(this._changeValue(n),"instantly"===this.option("uploadMode")&&this._uploadFiles())}_areAllFilesLoaded(){return this._files.every((t=>!t.isValid()||t._isError||t._isLoaded||t.isAborted))}_handleAllFilesUploaded(){this._recalculateProgress(),this._areAllFilesLoaded()&&this._filesUploadedAction()}_getAllowedFileTypes(t){return t.length?t.split(",").map((t=>t.trim())):[]}_isFileTypeAllowed(t,e){for(let i=0,n=e.length;i<n;i++){let n=e[i];if("."===n[0]){if(n=n.replace(".","\\."),t.name.match(new RegExp(n+"$","i")))return!0}else if(n=n.replace(new RegExp("\\*","g"),""),t.type.match(new RegExp(n,"i")))return!0}return!1}_renderWrapper(){const t=(0,o.Z)("<div>").addClass("dx-fileuploader-wrapper").appendTo(this.$element()),e=(0,o.Z)("<div>").addClass("dx-fileuploader-container").appendTo(t);this._$content=(0,o.Z)("<div>").addClass("dx-fileuploader-content").appendTo(e)}_clean(){this._$fileInput.detach(),delete this._$filesContainer,this._detachSelectFileDialogHandler(this.option("dialogTrigger")),this._detachDragEventHandlers(this.option("dropZone")),this._files&&this._files.forEach((t=>{t.$file=null,t.$statusMessage=null})),super._clean()}abortUpload(t){if("useForm"!==this.option("uploadMode"))if((0,s.$K)(t)){const e=this._getFile(t);e&&this._preventFilesUploading([e])}else this._preventFilesUploading(this._files)}upload(t){if("useForm"!==this.option("uploadMode"))if((0,s.$K)(t)){const e=this._getFile(t);e&&Pp()&&this._uploadFile(e)}else this._uploadFiles()}_uploadFiles(){Pp()&&(0,g.each)(this._files,((t,e)=>this._uploadFile(e)))}_uploadFile(t){this._uploadStrategy.upload(t)}_updateProgressBar(t,e){t.progressBar&&t.progressBar.option({value:e.loaded,showStatus:!0}),this._progressAction({file:t.value,segmentSize:e.currentSegmentSize,bytesLoaded:e.loaded,bytesTotal:e.total,event:e.event,request:t.request})}_updateTotalProgress(t,e){let i=0;(0,s.$K)(t)&&(this._files.length>0&&this._areAllFilesLoaded()&&0===t&&0===e?i=this._getProgressValue(1):t&&(i=this._getProgressValue(e/t))),this.option("progress",i),this._setLoadedSize(e)}_getProgressValue(t){return Math.floor(100*t)}_initStatusMessage(t){t.$statusMessage.css("display","none")}_ensureCancelButtonInitialized(t){if(t.isInitialized)return;t.cancelButton.option("onClick",(()=>{this._preventFilesUploading([t]),this._removeFile(t)}));const e=()=>{setTimeout((()=>{t.cancelButton.option({visible:!1})}),400)};t.onLoad.add(e),t.onError.add(e)}_createProgressBar(t){return this._createComponent((0,o.Z)("<div>"),Bp,{value:void 0,min:0,max:t,statusFormat:t=>this._getProgressValue(t)+"%",showStatus:!1,statusPosition:"right"})}_getTotalFilesSize(){return this._totalFilesSize||(this._totalFilesSize=0,(0,g.each)(this._files,((t,e)=>{this._totalFilesSize+=e.value.size}))),this._totalFilesSize}_getTotalLoadedFilesSize(){return this._totalLoadedFilesSize||(this._totalLoadedFilesSize=0,(0,g.each)(this._files,((t,e)=>{this._totalLoadedFilesSize+=e.loadedSize}))),this._totalLoadedFilesSize}_setLoadedSize(t){this._totalLoadedFilesSize=t}_recalculateProgress(){this._totalFilesSize=0,this._totalLoadedFilesSize=0,this._updateTotalProgress(this._getTotalFilesSize(),this._getTotalLoadedFilesSize())}isMouseOverElement(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return!1;const o=i?parseFloat(Ap.getComputedStyle(e,":before").height):0,r=i?parseFloat(Ap.getComputedStyle(e,":after").height):0,s=(0,M.os)(e).left,a=(0,M.os)(e).top+o,l=e.offsetWidth,c=e.offsetHeight-o-r,u=this._getEventX(t),d=this._getEventY(t);return u+n>=s&&u-n<s+l&&d+n>=a&&d-n<a+c}_getEventX(t){return(0,f.isTouchEvent)(t)?this._getTouchEventX(t):t.clientX+this._getDocumentScrollLeft()}_getEventY(t){return(0,f.isTouchEvent)(t)?this._getTouchEventY(t):t.clientY+this._getDocumentScrollTop()}_getTouchEventX(t){let e=null;return t.changedTouches.length>0?e=t.changedTouches:t.targetTouches.length>0&&(e=t.targetTouches),e?e[0].pageX:0}_getTouchEventY(t){let e=null;return t.changedTouches.length>0?e=t.changedTouches:t.targetTouches.length>0&&(e=t.targetTouches),e?e[0].pageY:0}_getDocumentScrollTop(){const t=Mt.Z.getDocument();return t.documentElement.scrollTop||t.body.scrollTop}_getDocumentScrollLeft(){const t=Mt.Z.getDocument();return t.documentElement.scrollLeft||t.body.scrollLeft}_updateReadOnlyState(){const t=this.option("readOnly");this._selectButton.option("disabled",t),this._files.forEach((e=>{var i;return null===(i=e.cancelButton)||void 0===i?void 0:i.option("disabled",t)})),this._updateInputLabelText(),this._attachDragEventHandlers(this._$inputWrapper)}_updateHoverState(){var t,e;const i=this.option("hoverStateEnabled");null===(t=this._selectButton)||void 0===t||t.option("hoverStateEnabled",i),null===(e=this._uploadButton)||void 0===e||e.option("hoverStateEnabled",i),this._files.forEach((t=>{var e,n;null===(e=t.uploadButton)||void 0===e||e.option("hoverStateEnabled",i),null===(n=t.cancelButton)||void 0===n||n.option("hoverStateEnabled",i)}))}_optionChanged(t){const{name:e,value:i,previousValue:n}=t;switch(e){case"height":case"width":this._updateFileNameMaxWidth(),super._optionChanged(t);break;case"value":!i.length&&this._$fileInput.val(""),this._preventRecreatingFiles||(this._createFiles(),this._renderFiles()),this._recalculateProgress(),super._optionChanged(t);break;case"name":case"hint":this._initFileInput(),super._optionChanged(t);break;case"accept":this._initFileInput();break;case"multiple":this._initFileInput(),t.value||this.clear();break;case"readOnly":this._updateReadOnlyState(),super._optionChanged(t);break;case"disabled":this._updateInputLabelText(),super._optionChanged(t);break;case"selectButtonText":this._selectButton.option("text",i);break;case"uploadButtonText":this._uploadButton&&this._uploadButton.option("text",i);break;case"_uploadButtonType":this._uploadButton&&this._uploadButton.option("type",i);break;case"_buttonStylingMode":this._files.forEach((t=>{var e,n;null===(e=t.uploadButton)||void 0===e||e.option("stylingMode",i),null===(n=t.cancelButton)||void 0===n||n.option("stylingMode",i)}));break;case"dialogTrigger":this._detachSelectFileDialogHandler(n),this._attachSelectFileDialogHandler(i);break;case"dropZone":this._detachDragEventHandlers(n),this._attachDragEventHandlers(i);break;case"maxFileSize":case"minFileSize":case"allowedFileExtensions":case"invalidFileExtensionMessage":case"invalidMaxFileSizeMessage":case"invalidMinFileSizeMessage":case"readyToUploadMessage":case"uploadedMessage":case"uploadFailedMessage":case"uploadAbortedMessage":case"nativeDropSupported":this._invalidate();break;case"labelText":this._updateInputLabelText();break;case"showFileList":this._preventRecreatingFiles||this._renderFiles();break;case"uploadFile":case"uploadChunk":case"chunkSize":this._setUploadStrategy();break;case"abortUpload":case"uploadUrl":case"progress":case"uploadMethod":case"uploadHeaders":case"uploadCustomData":case"extendSelection":break;case"hoverStateEnabled":this._updateHoverState(),super._optionChanged(t);break;case"allowCanceling":case"uploadMode":this.clear(),this._invalidate();break;case"onBeforeSend":this._createBeforeSendAction();break;case"onUploadStarted":this._createUploadStartedAction();break;case"onUploaded":this._createUploadedAction();break;case"onFilesUploaded":this._createFilesUploadedAction();break;case"onProgress":this._createProgressAction();break;case"onUploadError":this._createUploadErrorAction();break;case"onUploadAborted":this._createUploadAbortedAction();break;case"onDropZoneEnter":this._createDropZoneEnterAction();break;case"onDropZoneLeave":this._createDropZoneLeaveAction();break;case"useNativeInputClick":this._renderInput();break;case"useDragOver":this._attachDragEventHandlers(this._$inputWrapper);break;case"inputAttr":this._applyInputAttributes(this.option(e));break;default:super._optionChanged(t)}}_resetInputValue(t){("useForm"!==this.option("uploadMode")||t)&&(this._doPreventInputChange=!0,this._$fileInput.val(""),this._doPreventInputChange=!1)}clear(){this.option("value",[])}}class Rp{constructor(t,e){this.file=t,this.chunkSize=e,this.index=0}read(){if(!this.file)return null;const t=this.createBlobResult(this.file,this.index,this.chunkSize);return t.isCompleted&&(this.file=null),this.index++,t}createBlobResult(t,e,i){const n=e*i;return{blob:this.sliceFile(t,n,i),index:e,isCompleted:n+i>=t.size}}sliceFile(t,e,i){return t.slice?t.slice(e,e+i):t.webkitSlice?t.webkitSlice(e,e+i):null}}class Np{constructor(t){this.fileUploader=t}upload(t){t.isInitialized&&t.isAborted&&this.fileUploader._resetFileState(t),t.isValid()&&!t.uploadStarted&&(this._prepareFileBeforeUpload(t),this._uploadCore(t))}abortUpload(t){if(!(t._isError||t._isLoaded||t.isAborted)&&t.uploadStarted&&(t.isAborted=!0,t.request&&t.request.abort(),this._isCustomCallback("abortUpload"))){const e=this.fileUploader.option("abortUpload"),i=this._createUploadArgument(t);let n=null;try{const o=e(t.value,i);n=(0,w.p4)(o)}catch(t){n=(new w.BH).reject(t).promise()}n.done((()=>t.onAbort.fire())).fail((e=>this._handleFileError(t,e)))}}_beforeSend(t,e){const i=this._createUploadArgument(e);this.fileUploader._beforeSendAction({request:t,file:e.value,uploadInfo:i}),e.request=t}_createUploadArgument(t){}_uploadCore(t){}_isCustomCallback(t){const e=this.fileUploader.option(t);return e&&(0,s.mf)(e)}_handleProgress(t,e){t._isError||(t._isProgressStarted=!0,this._handleProgressCore(t,e))}_handleProgressCore(t,e){}_handleFileError(t,e){t._isError=!0,t.onError.fire(e)}_prepareFileBeforeUpload(t){var e;t.$file&&(null===(e=t.progressBar)||void 0===e||e.dispose(),this.fileUploader._createFileProgressBar(t)),t.isInitialized||(t.onLoadStart.add(this._onUploadStarted.bind(this,t)),t.onLoad.add(this._onLoadedHandler.bind(this,t)),t.onError.add(this._onErrorHandler.bind(this,t)),t.onAbort.add(this._onAbortHandler.bind(this,t)),t.onProgress.add(this._onProgressHandler.bind(this,t)),t.isInitialized=!0)}_shouldHandleError(t,e){return(this._isStatusError(e.status)||!t._isProgressStarted)&&!t.isAborted}_isStatusError(t){return 400<=t&&t<500||500<=t&&t<600}_onUploadStarted(t,e){t.uploadStarted=!0,this.fileUploader._uploadStartedAction({file:t.value,event:e,request:t.request})}_onAbortHandler(t,e){const i={file:t.value,event:e,request:t.request,message:this.fileUploader._getUploadAbortedStatusMessage()};this.fileUploader._uploadAbortedAction(i),this.fileUploader._setStatusMessage(t,i.message),this.fileUploader._handleAllFilesUploaded()}_onErrorHandler(t,e){const i={file:t.value,event:void 0,request:t.request,error:e,message:this.fileUploader.option("uploadFailedMessage")};this.fileUploader._uploadErrorAction(i),this.fileUploader._setStatusMessage(t,i.message),this.fileUploader._handleAllFilesUploaded()}_onLoadedHandler(t,e){const i={file:t.value,event:e,request:t.request,message:this.fileUploader.option("uploadedMessage")};t._isLoaded=!0,this.fileUploader._uploadedAction(i),this.fileUploader._setStatusMessage(t,i.message),this.fileUploader._handleAllFilesUploaded()}_onProgressHandler(t,e){if(t){const i=this.fileUploader._getTotalFilesSize(),n=this.fileUploader._getTotalLoadedFilesSize(),o=Math.min(e.loaded,t.value.size),r=o-t.loadedSize;t.loadedSize=o,this.fileUploader._updateTotalProgress(i,n+r),this.fileUploader._updateProgressBar(t,this._getLoadedData(o,e.total,r,e))}}_getLoadedData(t,e,i,n){return{loaded:t,total:e,currentSegmentSize:i}}_extendFormData(t){const e=this.fileUploader.option("uploadCustomData");for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(0,s.$K)(e[i])&&t.append(i,e[i])}}class $p extends Np{constructor(t){super(t),this.chunkSize=this.fileUploader.option("chunkSize")}_uploadCore(t){const e=t.value,i={name:e.name,loadedBytes:0,type:e.type,blobReader:new Rp(e,this.chunkSize),guid:new H.Z,fileSize:e.size,count:this._getFileChunksCount(e),customData:{}};t.chunksData=i,this._sendChunk(t,i)}_getFileChunksCount(t){return 0===t.size?1:Math.ceil(t.size/this.chunkSize)}_sendChunk(t,e){const i=e.blobReader.read();e.currentChunk=i,i&&this._sendChunkCore(t,e,i).done((()=>{t.isAborted||(e.loadedBytes+=i.blob.size,t.onProgress.fire({loaded:e.loadedBytes,total:t.value.size}),i.isCompleted&&t.onLoad.fire(),setTimeout((()=>this._sendChunk(t,e))))})).fail((e=>{this._shouldHandleError(t,e)&&this._handleFileError(t,e)}))}_sendChunkCore(t,e,i){}_tryRaiseStartLoad(t){t.isStartLoad||(t.isStartLoad=!0,t.onLoadStart.fire())}_getEvent(t){return null}_createUploadArgument(t){return this._createChunksInfo(t.chunksData)}_createChunksInfo(t){return{bytesUploaded:t.loadedBytes,chunkCount:t.count,customData:t.customData,chunkBlob:t.currentChunk.blob,chunkIndex:t.currentChunk.index}}}class Vp extends $p{_sendChunkCore(t,e,i){return Op.default.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:e=>this._beforeSend(e,t),upload:{onprogress:e=>this._handleProgress(t,e),onloadstart:()=>this._tryRaiseStartLoad(t),onabort:()=>t.onAbort.fire()},data:this._createFormData({fileName:e.name,blobName:this.fileUploader.option("name"),blob:i.blob,index:i.index,count:e.count,type:e.type,guid:e.guid,size:e.fileSize})})}_createFormData(t){const e=new Ap.FormData;return e.append(t.blobName,t.blob),e.append("chunkMetadata",JSON.stringify({FileName:t.fileName,Index:t.index,TotalCount:t.count,FileSize:t.size,FileType:t.type,FileGuid:t.guid})),this._extendFormData(e),e}}class Fp extends $p{_sendChunkCore(t,e){this._tryRaiseStartLoad(t);const i=this._createChunksInfo(e),n=this.fileUploader.option("uploadChunk");try{const e=n(t.value,i);return(0,w.p4)(e)}catch(t){return(new w.BH).reject(t).promise()}}_shouldHandleError(t,e){return!0}}class Zp extends Np{_uploadCore(t){t.loadedSize=0,this._uploadFile(t).done((()=>{t.isAborted||t.onLoad.fire()})).fail((e=>{this._shouldHandleError(t,e)&&this._handleFileError(t,e)}))}_uploadFile(t){}_handleProgressCore(t,e){t.onProgress.fire(e)}_getLoadedData(t,e,i,n){const o=super._getLoadedData(t,e,i,n);return o.event=n,o}}class Hp extends Zp{_uploadFile(t){return Op.default.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:e=>this._beforeSend(e,t),upload:{onprogress:e=>this._handleProgress(t,e),onloadstart:()=>t.onLoadStart.fire(),onabort:()=>t.onAbort.fire()},data:this._createFormData(this.fileUploader.option("name"),t.value)})}_createFormData(t,e){const i=new Ap.FormData;return i.append(t,e,e.name),this._extendFormData(i),i}}class Lp extends Zp{_uploadFile(t){t.onLoadStart.fire();const e=e=>{const i={loaded:e,total:t.value.size};this._handleProgress(t,i)},i=this.fileUploader.option("uploadFile");try{const n=i(t.value,e);return(0,w.p4)(n)}catch(t){return(new w.BH).reject(t).promise()}}_shouldHandleError(t,e){return!0}}(0,c.default)("dxFileUploader",Mp);const jp=Mp,zp=["imageSrc","src"],Wp="phone"===tt.default.current().deviceType,Kp="user";class qp{constructor(t,e){this.module=t,this.config=e??{},this.quill=this.module.quill,this.editorInstance=this.module.editorInstance}render(){this.editorInstance._formDialog&&(this.editorInstance._formDialog.beforeAddButtonAction=()=>this.getCurrentTab().upload()),this.tabPanelIndex=0,this.formData=this.getFormData(),this.isUpdating=this.isImageUpdating(),this.tabsModel=this.createTabsModel(this.config.tabs),this.tabs=this.createTabs(this.formData);const t=this.getFormConfig();this.updatePopupConfig(),this.updateAddButtonState(),this.editorInstance.showFormDialog(t).done(((t,e)=>{this.tabs[this.getActiveTabIndex()].strategy.pasteImage(t,e)})).always((()=>{this.resetDialogPopupOptions(),this.quill.focus()}))}getCurrentTab(){return this.tabs[this.tabPanelIndex]}updateAddButtonState(){const t=this.getCurrentTab().isDisableButton();this.setAddButtonDisabled(t)}setAddButtonDisabled(t){this.editorInstance.formDialogOption({"toolbarItems[0].options.disabled":t})}getActiveTabIndex(){return this.isUpdating?0:this.tabPanelIndex}getFormData(){return this.getUpdateDialogFormData(this.quill.getFormat())}getUpdateDialogFormData(t){const{imageSrc:e,src:i}=t,o=(0,Yn.Z)(t,zp);return(0,n.Z)({src:e??i},o)}createUrlTab(t){return new Gp(this.module,{config:this.config,formData:t,isUpdating:this.isUpdating},(()=>this.updateAddButtonState()))}createFileTab(){return new Yp(this.module,{config:this.config},(()=>this.updateAddButtonState()))}createTabsModel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===t.length||this.isUpdating?["url"]:t.map((t=>"object"==typeof t?t.name:t))}createTabs(t){return this.tabsModel.map((e=>"url"===e?this.createUrlTab(t):this.createFileTab()))}isImageUpdating(){return Object.prototype.hasOwnProperty.call(this.module.quill.getFormat()??{},"imageSrc")}updatePopupConfig(){let t="dx-htmleditor-add-image-popup dx-formdialog";this.useTabbedItems()&&(t+=" dx-htmleditor-add-image-popup-with-tabs");const e=this.isUpdating?"dxHtmlEditor-dialogUpdateImageCaption":"dxHtmlEditor-dialogImageCaption",i=this.isUpdating?"dxHtmlEditor-dialogImageUpdateButton":"dxHtmlEditor-dialogImageAddButton";this.editorInstance.formDialogOption({title:C.Z.format(e),"toolbarItems[0].options.text":C.Z.format(i),wrapperAttr:{class:t}})}resetDialogPopupOptions(){this.editorInstance.formDialogOption({"toolbarItems[0].options.text":C.Z.format("OK"),"toolbarItems[0].options.visible":!0,"toolbarItems[0].options.disabled":!1,wrapperAttr:{class:"dx-formdialog"}})}useTabbedItems(){return this.tabsModel.length>1}getFormWidth(){return Wp?"100%":493}getFormConfig(){return{formData:this.formData,width:this.getFormWidth(),labelLocation:"top",colCount:this.useTabbedItems()?1:11,items:this.getItemsConfig()}}getItemsConfig(){return this.useTabbedItems()?[{itemType:"tabbed",tabPanelOptions:{onSelectionChanged:t=>{this.tabPanelIndex=t.component.option("selectedIndex"),this.updateAddButtonState()}},tabs:(0,g.map)(this.tabs,(t=>({title:t.getTabName(),colCount:11,items:t.getItemsConfig()})))}]:this.tabs[0].getItemsConfig()}}class Up{constructor(t,e,i){let{config:n,formData:o,isUpdating:r}=e;this.module=t,this.config=n,this.formData=o,this.isUpdating=r,this.onFileSelected=i,this.strategy=this.createStrategy()}getItemsConfig(){return this.strategy.getItemsConfig()}createStrategy(){return this.isUpdating?new Jp(this.module,this.config,this.formData):new Xp(this.module,this.config,this.onFileSelected)}isDisableButton(){return!1}upload(){return this.strategy.upload()}}class Gp extends Up{getTabName(){return C.Z.format("dxHtmlEditor-dialogImageSpecifyUrl")}}class Yp extends Up{getTabName(){return C.Z.format("dxHtmlEditor-dialogImageSelectFile")}createStrategy(){return new tf(this.module,this.config,this.onFileSelected)}isDisableButton(){return!this.strategy.isValid()}}class Qp{constructor(t,e){this.module=t,this.config=e,this.editorInstance=t.editorInstance,this.quill=t.quill,this.selection=this.getQuillSelection()}getQuillSelection(){return this.quill.getSelection()??{index:this.quill.getLength(),length:0}}pasteImage(){}isValid(){return!0}upload(){}}class Xp extends Qp{constructor(t,e,i){super(t,e,i),this.shouldKeepAspectRatio=!0}pasteImage(t,e){this.module.saveValueChangeEvent(e),ef(this.quill,this.selection.index,t)}keepAspectRatio(t,e){let{dependentEditor:i,e:n}=e;const o=parseInt(n.value),r=parseInt(n.previousValue),s=parseInt(i.option("value"));t.component.updateData(t.dataField,o),this.shouldKeepAspectRatio&&s&&r&&!this.preventRecalculating&&(this.preventRecalculating=!0,i.option("value",Math.round(o*s/parseInt(r)).toString())),this.preventRecalculating=!1}createKeepAspectRatioEditor(t,e,i){return this.editorInstance._createComponent(t,kl,(0,r.l)(!0,e.editorOptions,{value:e.component.option("formData")[e.dataField],onEnterKey:e.component.option("onEditorEnterKey").bind(this.editorInstance._formDialog,e),onValueChanged:t=>{this.keepAspectRatio(e,{dependentEditor:this[i+"Editor"],e:t})}}))}upload(){return this.editorInstance._formDialog._form.validate().isValid}getItemsConfig(){const t=(0,At.dC)()?"text":"outlined";return[{dataField:"src",colSpan:11,label:{text:C.Z.format("dxHtmlEditor-dialogImageUrlField")},validationRules:[{type:"required"},{type:"stringLength",min:1}]},{dataField:"width",colSpan:6,label:{text:C.Z.format("dxHtmlEditor-dialogImageWidthField")},template:e=>{const i=(0,o.Z)("<div>").addClass("dx-fix-ratio-container"),n=(0,o.Z)("<div>").appendTo(i);this.widthEditor=this.createKeepAspectRatioEditor(n,e,"height");const r=(0,o.Z)("<div>").appendTo(i);return this.editorInstance._createComponent(r,wp,{items:[{icon:"imgarlock",value:"keepRatio"}],hint:C.Z.format("dxHtmlEditor-dialogImageKeepAspectRatio"),focusStateEnabled:!1,keyExpr:"value",stylingMode:t,selectionMode:"multiple",selectedItemKeys:["keepRatio"],onSelectionChanged:t=>{this.shouldKeepAspectRatio=!!t.component.option("selectedItems").length}}),i}},{dataField:"height",colSpan:5,label:{text:C.Z.format("dxHtmlEditor-dialogImageHeightField")},template:t=>{const e=(0,o.Z)("<div>");return this.heightEditor=this.createKeepAspectRatioEditor(e,t,"width"),e}},{dataField:"alt",colSpan:11,label:{text:C.Z.format("dxHtmlEditor-dialogImageAltField")}}]}}class Jp extends Xp{constructor(t,e,i,n){super(t,e,n),this.formData=i,this.modifyFormData()}modifyFormData(){const{imageSrc:t}=this.quill.getFormat(this.selection.index-1,1);t&&0!==this.selection.index||(this.selection={index:this.selection.index+1,length:0},this.quill.setSelection(this.selection.index,this.selection.length,"silent"));const e=this.quill.getLeaf(this.selection.index)[0].domNode;e&&(this.formData.width=this.formData.width??(0,M.dz)((0,o.Z)(e)),this.formData.height=this.formData.height??(0,M.Cr)((0,o.Z)(e)))}pasteImage(t,e){this.quill.deleteText(this.embedFormatIndex(),1,"silent"),this.selection.index-=1,super.pasteImage(t,e)}embedFormatIndex(){const t=this.selection??this.quill.getSelection();return t?t.length?t.index:t.index-1:this.quill.getLength()}}class tf extends Qp{constructor(t,e,i){super(t,e,i),this.useBase64=!(0,s.$K)(this.config.fileUploadMode)||"base64"===this.config.fileUploadMode,this.isValidInternal=!1,this.onFileSelected=i,this.data=null}upload(){return this.useBase64?this.base64Upload(this.data):this.data.value.length&&this.data.component.upload(),!0}isValid(){return this.isValidInternal}onUploaded(t){nf(this.config.uploadDirectory,t.file.name,this.quill,this.selection.index)}base64Upload(t){this.quill.getModule("uploader").upload(this.selection,t.value,!0)}pasteImage(t,e){this.useBase64&&super.pasteImage(t,e)}isBase64Editable(){return"both"===this.config.fileUploadMode}validate(t){const e=t.component;this.isValidInternal=!e._files.some((t=>!t.isValid())),0===e._files.length&&(this.isValidInternal=!1)}getFileUploaderOptions(){const t={uploadUrl:this.config.uploadUrl,onValueChanged:t=>{this.validate(t),this.data=t,this.onFileSelected()},onUploaded:t=>this.onUploaded(t)};return(0,r.l)({},{value:[],name:"dx-htmleditor-image",accept:"image/*",uploadMode:"useButtons"},t,this.config.fileUploaderOptions)}getItemsConfig(){return[{itemType:"simple",dataField:"files",colSpan:11,label:{visible:!1},template:()=>{const t=(0,o.Z)("<div>");return this.module.editorInstance._createComponent(t,jp,this.getFileUploaderOptions()),t}},{itemType:"simple",colSpan:11,label:{visible:!1},editorType:"dxCheckBox",editorOptions:{value:this.useBase64,visible:this.isBase64Editable(),text:C.Z.format("dxHtmlEditor-dialogImageEncodeToBase64"),onValueChanged:t=>{this.isBase64Editable()&&(this.useBase64=t.value)}}}]}}function ef(t,e,i){t.insertEmbed(e,"extendedImage",i,Kp),t.setSelection(e+1,0,Kp)}function nf(t,e,i,n){if(t){const o=function(t){return"/"!==t[t.length-1]?t+"/":t}(t)+e;ef(i,n,{src:o})}}const of=400,rf=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"].map((t=>({id:t,value:C.Z.format(`dxHtmlEditor-borderStyle${(0,_o.camelize)(t,!0)}`)}))),sf="user",af="silent",lf="dxHtmlEditor-dialogColorCaption",cf="dxHtmlEditor-dialogBackgroundCaption",uf="dxHtmlEditor-dialogLinkCaption",df="dxHtmlEditor-dialogInsertTableCaption",hf="dxHtmlEditor-dialogLinkUrlField",pf="dxHtmlEditor-dialogLinkTextField",ff="dxHtmlEditor-dialogLinkTargetField",_f="dx-formdialog-field-target",mf="dxHtmlEditor-dialogInsertTableRowsField",gf="dxHtmlEditor-dialogInsertTableColumnsField",vf={insertHeaderRow:"header",clear:"clearformat"};function bf(t){return{clear:e=>{let{event:i}=e;const n=t.quill.getSelection();var o;n&&(t.saveValueChangeEvent(i),t.quill.removeFormat(n),null===(o=Tf(t))||void 0===o||o.updateFormatWidgets())},link:Sf(t),image:If(t,t.editorInstance.option("imageUpload")),color:Ef(t,"color"),background:Ef(t,"background"),orderedList:Of(t,"list","ordered"),bulletList:Of(t,"list","bullet"),alignLeft:Of(t,"align","left"),alignCenter:Of(t,"align","center"),alignRight:Of(t,"align","right"),alignJustify:Of(t,"align","justify"),codeBlock:Df(t,"code-block"),undo:e=>{let{event:i}=e;t.saveValueChangeEvent(i),t.quill.history.undo()},redo:e=>{let{event:i}=e;t.saveValueChangeEvent(i),t.quill.history.redo()},increaseIndent:e=>{let{event:i}=e;wf(t,["indent","+1",sf],i)},decreaseIndent:e=>{let{event:i}=e;wf(t,["indent","-1",sf],i)},superscript:Of(t,"script","super"),subscript:Of(t,"script","sub"),insertTable:Bf(t),insertHeaderRow:uu(t.quill,"insertHeaderRow"),insertRowAbove:uu(t.quill,"insertRowAbove"),insertRowBelow:uu(t.quill,"insertRowBelow"),insertColumnLeft:uu(t.quill,"insertColumnLeft"),insertColumnRight:uu(t.quill,"insertColumnRight"),deleteColumn:uu(t.quill,"deleteColumn"),deleteRow:uu(t.quill,"deleteRow"),deleteTable:uu(t.quill,"deleteTable"),cellProperties:Cf(t,"cell"),tableProperties:Cf(t,"table")}}function yf(t,e){let{contentTemplate:i,title:n,minHeight:o,minWidth:r,maxWidth:s}=e;t.formDialogOption({contentTemplate:i,title:n,minHeight:o??0,minWidth:r??0,maxWidth:s??"none"})}function Cf(t,e){return i=>{var n;null!==(n=i)&&void 0!==n&&n.length||(i=(0,o.Z)(function(t,e){const i=t.quill.getModule("table").getTable();return"table"===e?i[0].domNode:i[2].domNode}(t,e)));const[r,s]=t.quill.getModule("table").getTable()??[],a=t.quill.getFormat(t.editorInstance.getSelection(!0)),l=function(t){return"cell"===t?Pf:Af}(e)(t,{$element:i,formats:a,tableBlot:r,rowBlot:s}),{contentTemplate:c,title:u,minHeight:d,minWidth:h,maxWidth:f}=t.editorInstance._formDialog._popup.option(),_={contentTemplate:c,title:u,minHeight:d,minWidth:h,maxWidth:f};let m;t.editorInstance.formDialogOption({contentTemplate:e=>{const i=(0,o.Z)("<div>").appendTo(e),n=(0,o.Z)("<div>").appendTo(i);return t.editorInstance._createComponent(n,gp,l.formOptions),t.editorInstance._createComponent(i,ls,{}),m=n.dxForm("instance"),i},title:C.Z.format(`dxHtmlEditor-${e}Properties`),minHeight:of,minWidth:Math.min(800,.9*(0,M.dz)((0,p.getWindow)())-1),maxWidth:.9*(0,M.dz)((0,p.getWindow)())});const g=t.editorInstance.showFormDialog();g.done(((e,i)=>{t.saveValueChangeEvent(i),l.applyHandler(m),yf(t.editorInstance,_)})),g.fail((()=>{t.quill.focus(),yf(t.editorInstance,_)}))}}function wf(t,e,i){t.saveValueChangeEvent(i),t.quill.format(...e)}function xf(t){return Array.isArray(t)?t[0]:t}function Sf(t){return()=>{var e;t.quill.focus();let i=t.quill.getSelection();const n=i?t.quill.getFormat():{},o=void 0!==n.link&&0===(null===(e=i)||void 0===e?void 0:e.length);let r=n.link||"";if(o){const e=function(t,e){const i=gt().import("formats/link");let n,o;return[n,o]=t.quill.scroll.descendant(i,e.index),n||0!==e.length||([n,o]=t.quill.scroll.descendant(i,e.index-1),n&&(o+=1)),n?{index:e.index-o,length:n.length()}:null}(t,i);e?i=e:r=""}const s=function(t,e){return!!e&&t.quill.getText(e).length<e.length}(t,i),a={href:r,text:i&&!s?t.quill.getText(i):"",target:!Object.prototype.hasOwnProperty.call(n,"target")||!!n.target};t.editorInstance.formDialogOption("title",C.Z.format(uf));const l=t.editorInstance.showFormDialog({formData:a,items:kf(s)});l.done(((e,n)=>{if(i&&!s){const o=e.text||e.href,{index:r,length:s}=i;e.text=void 0,t.saveValueChangeEvent(n),s&&t.quill.deleteText(r,s,af),t.quill.insertText(r,o,"link",e,sf),t.quill.setSelection(r+o.length,0,sf)}else e.text=i||e.text?e.text:e.href,wf(t,["link",e,sf],n)})),l.fail((()=>{t.quill.focus()}))}}function If(t,e){const i=new qp(t,e);return()=>{i.render()}}function kf(t){return[{dataField:"href",label:{text:C.Z.format(hf)}},{dataField:"text",label:{text:C.Z.format(pf)},visible:!t},{dataField:"target",editorType:"dxCheckBox",editorOptions:{text:C.Z.format(ff)},cssClass:_f,label:{visible:!1}}]}function Ef(t,e){return()=>{const i=t.quill.getFormat(),n="color"===e?lf:cf;t.editorInstance.formDialogOption("title",C.Z.format(n));const o=t.editorInstance.showFormDialog({formData:i,items:[{dataField:e,editorType:"dxColorView",editorOptions:{focusStateEnabled:!1},label:{visible:!1}}]});o.done(((i,n)=>{wf(t,[e,i[e],sf],n)})),o.fail((()=>{t.quill.focus()}))}}function Of(t,e,i){return n=>{var o;let{event:r}=n;const s=t.quill.getFormat()[e]!==i&&i;wf(t,[e,s,sf],r),null===(o=Tf(t))||void 0===o||o.updateFormatWidgets(!0)}}function Tf(t){return t._updateFormatWidget?t:t.quill.getModule("toolbar")}function Df(t,e){return i=>{var n;let{event:o}=i;const r=t.quill.getFormat(),a=r[e],l=!((0,s.jn)(a)?a:(0,s.$K)(a));wf(t,[e,l,sf],o),null===(n=Tf(t))||void 0===n||n._updateFormatWidget(e,l,r)}}function Bf(t){return()=>{const e=t.quill.getFormat();t._tableFormats.some((t=>Object.prototype.hasOwnProperty.call(e,t)))?t.quill.focus():(t.editorInstance.formDialogOption("title",C.Z.format(df)),t.editorInstance.showFormDialog({formData:{rows:1,columns:1},items:[{dataField:"columns",editorType:"dxNumberBox",editorOptions:{min:1},label:{text:C.Z.format(mf)}},{dataField:"rows",editorType:"dxNumberBox",editorOptions:{min:1},label:{text:C.Z.format(gf)}}]}).done(((e,i)=>{t.quill.focus();const n=t.quill.getModule("table");if(n){t.saveValueChangeEvent(i);const{columns:o,rows:r}=e;n.insertTable(o,r)}})).always((()=>{t.quill.focus()})))}}function Af(t,e){let{$element:i,formats:n,tableBlot:r}=e;const a=(0,p.getWindow)();let l,c,u;const d=i,h=t.editorInstance,f=parseInt(n.tableWidth)||(0,M.Y_)(d),_=a.getComputedStyle(d.get(0)),m="start"===_.textAlign?"left":_.textAlign;return{formOptions:{colCount:2,formData:{width:f,height:(0,s.$K)(n.tableHeight)?parseInt(n.tableHeight):(0,M.zp)(d),backgroundColor:n.tableBackgroundColor||_.backgroundColor,borderStyle:n.tableBorderStyle||_.borderTopStyle,borderColor:n.tableBorderColor||_.borderTopColor,borderWidth:parseInt((0,s.$K)(n.tableBorderWidth)?n.tableBorderWidth:_.borderTopWidth),alignment:n.tableAlign||m},items:[{itemType:"group",caption:C.Z.format("dxHtmlEditor-border"),colCountByScreen:{xs:2},colCount:2,items:[{dataField:"borderStyle",label:{text:C.Z.format("dxHtmlEditor-style")},editorType:"dxSelectBox",editorOptions:{items:rf,valueExpr:"id",displayExpr:"value",placeholder:"Select style"}},{dataField:"borderWidth",label:{text:C.Z.format("dxHtmlEditor-borderWidth")},editorOptions:{placeholder:C.Z.format("dxHtmlEditor-pixels")}},{itemType:"simple",dataField:"borderColor",label:{text:C.Z.format("dxHtmlEditor-borderColor")},colSpan:2,template:t=>{const e=(0,o.Z)("<div>");return h._createComponent(e,Ep,{editAlphaChannel:!0,value:t.component.option("formData").borderColor,onInitialized:t=>{c=t.component}}),e}}]},{itemType:"group",caption:C.Z.format("dxHtmlEditor-dimensions"),colCountByScreen:{xs:2},colCount:2,items:[{dataField:"width",label:{text:C.Z.format("dxHtmlEditor-width")},editorOptions:{min:0,placeholder:C.Z.format("dxHtmlEditor-pixels")}},{dataField:"height",label:{text:C.Z.format("dxHtmlEditor-height")},editorOptions:{min:0,placeholder:C.Z.format("dxHtmlEditor-pixels")}}]},{itemType:"group",caption:C.Z.format("dxHtmlEditor-tableBackground"),items:[{itemType:"simple",dataField:"backgroundColor",label:{text:C.Z.format("dxHtmlEditor-borderColor")},template:t=>{const e=(0,o.Z)("<div>");return h._createComponent(e,Ep,{editAlphaChannel:!0,value:t.component.option("formData").backgroundColor,onInitialized:t=>{u=t.component}}),e}}]},{itemType:"group",caption:C.Z.format("dxHtmlEditor-alignment"),items:[{itemType:"simple",label:{text:C.Z.format("dxHtmlEditor-horizontal")},template:()=>{const t=(0,o.Z)("<div>");return h._createComponent(t,wp,{items:[{value:"left",icon:"alignleft"},{value:"center",icon:"aligncenter"},{value:"right",icon:"alignright"},{value:"justify",icon:"alignjustify"}],keyExpr:"value",selectedItemKeys:[m],onInitialized:t=>{l=t.component}}),t}}]}],showColonAfterLabel:!0,labelLocation:"top",minColWidth:400},applyHandler:e=>{const i=e.option("formData"),n=i.width===f?void 0:i.width,a=i.height;!function(t,e){let{$table:i,newHeight:n,newWidth:r,tableBlot:a}=e;if((0,s.$K)(r))if(su(i).length>0)t.editorInstance.format("tableWidth",r+"px");else{const e=ru(i),n=(0,M.Y_)(i);ou(i,{tableBlot:a}),(0,g.each)(e,((e,s)=>{const a=(0,o.Z)(s),l=r/n*(0,M.Y_)(a),c=lu(i,a.index(),"horizontal");au(t,{elements:c,property:"width",value:l})}))}const l=su(i,"vertical");if((null==l?void 0:l.length)>0)a.format("tableHeight",n+"px");else{const e=cu(i),r=(0,M.zp)(i);(0,g.each)(e,((e,s)=>{const a=(0,o.Z)(s),l=n/r*(0,M.zp)(a),c=lu(i,e,"vertical");au(t,{elements:c,property:"height",value:l})}))}}(t,{$table:d,newHeight:a,newWidth:n,tableBlot:r}),t.editorInstance.format("tableBorderStyle",i.borderStyle),t.editorInstance.format("tableBorderWidth",i.borderWidth+"px"),t.editorInstance.format("tableBorderColor",c.option("value")),t.editorInstance.format("tableBackgroundColor",u.option("value")),t.editorInstance.format("tableTextAlign",l.option("selectedItemKeys")[0])}}}function Pf(t,e){let{$element:i,formats:n,tableBlot:r,rowBlot:a}=e;const l=(0,p.getWindow)();let c,u,d,h;const f=i,_=(0,s.$K)(n.cellWidth)?parseInt(n.cellWidth):(0,M.Y_)(f),m=t.editorInstance,g=l.getComputedStyle(f.get(0)),v="start"===g.textAlign?"left":g.textAlign;return{formOptions:{colCount:2,formData:{width:_,height:(0,s.$K)(n.cellHeight)?parseInt(n.cellHeight):(0,M.zp)(f),backgroundColor:xf(n.cellBackgroundColor)||g.backgroundColor,borderStyle:n.cellBorderStyle||g.borderTopStyle,borderColor:xf(n.cellBorderColor)||g.borderTopColor,borderWidth:parseInt((0,s.$K)(n.cellBorderWidth)?n.cellBorderWidth:g.borderTopWidth),alignment:n.cellTextAlign||v,verticalAlignment:n.cellVerticalAlign||g.verticalAlign,verticalPadding:parseInt((0,s.$K)(n.cellPaddingTop)?n.cellPaddingTop:g.paddingTop),horizontalPadding:parseInt((0,s.$K)(n.cellPaddingLeft)?n.cellPaddingLeft:g.paddingLeft)},items:[{itemType:"group",caption:C.Z.format("dxHtmlEditor-border"),colCountByScreen:{xs:2},colCount:2,items:[{dataField:"borderStyle",label:{text:C.Z.format("dxHtmlEditor-style")},editorType:"dxSelectBox",editorOptions:{items:rf,valueExpr:"id",displayExpr:"value"}},{dataField:"borderWidth",label:{text:C.Z.format("dxHtmlEditor-borderWidth")},editorOptions:{placeholder:C.Z.format("dxHtmlEditor-pixels")}},{itemType:"simple",dataField:"borderColor",colSpan:2,label:{text:C.Z.format("dxHtmlEditor-borderColor")},template:t=>{const e=(0,o.Z)("<div>");return m._createComponent(e,Ep,{editAlphaChannel:!0,value:t.component.option("formData").borderColor,onInitialized:t=>{d=t.component}}),e}}]},{itemType:"group",caption:C.Z.format("dxHtmlEditor-dimensions"),colCount:2,colCountByScreen:{xs:2},items:[{dataField:"width",label:{text:C.Z.format("dxHtmlEditor-width")},editorOptions:{min:0,placeholder:C.Z.format("dxHtmlEditor-pixels")}},{dataField:"height",label:{text:C.Z.format("dxHtmlEditor-height")},editorOptions:{min:0,placeholder:C.Z.format("dxHtmlEditor-pixels")}},{dataField:"verticalPadding",label:{text:C.Z.format("dxHtmlEditor-paddingVertical")},editorOptions:{placeholder:C.Z.format("dxHtmlEditor-pixels")}},{label:{text:C.Z.format("dxHtmlEditor-paddingHorizontal")},dataField:"horizontalPadding",editorOptions:{placeholder:C.Z.format("dxHtmlEditor-pixels")}}]},{itemType:"group",caption:C.Z.format("dxHtmlEditor-tableBackground"),items:[{itemType:"simple",dataField:"backgroundColor",label:{text:C.Z.format("dxHtmlEditor-borderColor")},template:t=>{const e=(0,o.Z)("<div>");return m._createComponent(e,Ep,{editAlphaChannel:!0,value:t.component.option("formData").backgroundColor,onInitialized:t=>{h=t.component}}),e}}]},{itemType:"group",caption:C.Z.format("dxHtmlEditor-alignment"),colCount:2,items:[{itemType:"simple",label:{text:C.Z.format("dxHtmlEditor-horizontal")},template:()=>{const t=(0,o.Z)("<div>");return m._createComponent(t,wp,{items:[{value:"left",icon:"alignleft"},{value:"center",icon:"aligncenter"},{value:"right",icon:"alignright"},{value:"justify",icon:"alignjustify"}],keyExpr:"value",selectedItemKeys:[v],onInitialized:t=>{c=t.component}}),t}},{itemType:"simple",label:{text:C.Z.format("dxHtmlEditor-vertical")},template:()=>{const t=(0,o.Z)("<div>");return m._createComponent(t,wp,{items:[{value:"top",icon:"verticalaligntop"},{value:"middle",icon:"verticalaligncenter"},{value:"bottom",icon:"verticalalignbottom"}],keyExpr:"value",selectedItemKeys:[g.verticalAlign],onInitialized:t=>{u=t.component}}),t}}]}],showColonAfterLabel:!0,labelLocation:"top",minColWidth:400},applyHandler:e=>{const i=e.option("formData"),n=i.width===parseInt(_)?void 0:i.width,l=i.height;!function(t,e){let{$cell:i,newHeight:n,newWidth:r,tableBlot:a,rowBlot:l}=e;const c=(0,o.Z)(i.closest("table"));if((0,s.$K)(r)){const e=(0,o.Z)(i).index();let n=lu(c,e);const s=r-(0,M.Y_)(i);r>(0,M.Y_)(c)&&ou(c,{tableBlot:a}),au(t,{elements:n,property:"width",value:r});const l=i.next();if(0===su(c).length)if(ou(c,{tableBlot:a}),1===l.length){n=lu(c,e+1);const i=(0,M.Y_)(n.eq(0))-s;au(t,{elements:n,property:"width",value:Math.max(i,0)})}else if(1===i.prev().length){n=lu(c,e-1);const i=(0,M.Y_)(n.eq(0))-s;au(t,{elements:n,property:"width",value:Math.max(i,0)})}}l.children.forEach((t=>{t.format("cellHeight",n+"px")})),0===su(c,"vertical").length&&c.css("height","auto")}(t,{$cell:f,newHeight:l,newWidth:n,tableBlot:r,rowBlot:a}),t.editorInstance.format("cellBorderWidth",i.borderWidth+"px"),t.editorInstance.format("cellBorderColor",d.option("value")),t.editorInstance.format("cellBorderStyle",i.borderStyle),t.editorInstance.format("cellBackgroundColor",h.option("value")),t.editorInstance.format("cellTextAlign",c.option("selectedItemKeys")[0]),t.editorInstance.format("cellVerticalAlign",u.option("selectedItemKeys")[0]),t.editorInstance.format("cellPaddingLeft",i.horizontalPadding+"px"),t.editorInstance.format("cellPaddingRight",i.horizontalPadding+"px"),t.editorInstance.format("cellPaddingTop",i.verticalPadding+"px"),t.editorInstance.format("cellPaddingBottom",i.verticalPadding+"px")}}}let Mf=Bt;if(mt()){const t="dx-htmleditor-toolbar-wrapper",e="dx-htmleditor-toolbar",i="dx-htmleditor-toolbar-format",n="dx-htmleditor-toolbar-separator",a="dx-htmleditor-toolbar-menu-separator",l="dx-format-active",c="dx-state-selected",u="dx-icon",d="selection-change",h="user",p="silent",_={66:"bold",73:"italic",85:"underline"},m={b:66,i:73,u:85},v=t=>C.Z.format(`dxHtmlEditor-${(0,_o.camelize)(t)}`),b=(t,e)=>"header"===e?(0,s.$K)(t)&&!1!==t?`${v("heading")} ${t}`:v("normalText"):v(t)||t;Mf=class extends Bt{constructor(t,e){var i;if(super(t,e),i=this,this._toolbarWidgets=new tu,this._formatHandlers=bf(this),this._tableFormats=nu(t),(0,s.$K)(e.items)){this._addCallbacks(),this._renderToolbar();const t=this.toolbarInstance._layoutStrategy._menu;if(t){const e=t._renderPopup;t._renderPopup=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.apply(t,...o),t._popup.on("showing",(()=>{i._updateToolbar(!0)}))}}this.quill.on("editor-change",((t,e,i,n)=>{if(n!==p||!(0,s.Qr)(this.quill.getFormat())){const e=t===d;this._updateToolbar(e)}}))}}_addCallbacks(){this.addCleanCallback(this.clean.bind(this)),this.editorInstance.addContentInitializedCallback(this.updateHistoryWidgets.bind(this))}_updateToolbar(t){this.updateFormatWidgets(t),this.updateHistoryWidgets(),this.updateTableWidgets()}_updateFormatWidget(t,e,i){const n=this._toolbarWidgets.getByName(t);n&&(e?this._markActiveFormatWidget(t,n,i):(this._resetFormatWidget(t,n),Object.prototype.hasOwnProperty.call(t)&&delete i[t]),this._toggleClearFormatting(e||!(0,s.Qr)(i)))}_renderToolbar(){const i=this.options.container||this._getContainer();this._$toolbar=(0,o.Z)("<div>").addClass(e).appendTo(i),this._$toolbarContainer=(0,o.Z)(i).addClass(t),P.Z.on(this._$toolbarContainer,(0,f.addNamespace)("mousedown",this.editorInstance.NAME),(t=>{t.target.focus(),t.preventDefault()})),this._subscribeFormatHotKeys(),this.toolbarInstance=this.editorInstance._createComponent(this._$toolbar,Ys,this.toolbarConfig),this.editorInstance.on("optionChanged",(t=>{let{name:e}=t;"readOnly"!==e&&"disabled"!==e||this.toolbarInstance.option("disabled",this.isInteractionDisabled)}))}get toolbarConfig(){return{dataSource:this._prepareToolbarItems(),disabled:this.isInteractionDisabled,menuContainer:this._$toolbarContainer,multiline:this.isMultilineMode()}}get isInteractionDisabled(){return this.editorInstance.option("readOnly")||this.editorInstance.option("disabled")}isMultilineMode(){return this.options.multiline??!0}clean(){this._toolbarWidgets.clear(),this._$toolbarContainer&&this._$toolbarContainer.empty().removeClass(t)}repaint(){this.toolbarInstance&&this.toolbarInstance.repaint()}_getContainer(){const t=(0,o.Z)("<div>");return this.editorInstance.$element().prepend(t),t}_detectRenamedOptions(t){(0,s.Kn)(t)&&(0,g.each)([{newName:"name",oldName:"formatName"},{newName:"acceptedValues",oldName:"formatValues"}],((e,i)=>{Object.prototype.hasOwnProperty.call(t,i.oldName)&&G.Z.log("W1016",i.oldName,i.newName)}))}_subscribeFormatHotKeys(){this.quill.keyboard.addBinding({which:m.b,shortKey:!0},this._handleFormatHotKey.bind(this)),this.quill.keyboard.addBinding({which:m.i,shortKey:!0},this._handleFormatHotKey.bind(this)),this.quill.keyboard.addBinding({which:m.u,shortKey:!0},this._handleFormatHotKey.bind(this))}_handleFormatHotKey(t,e,i){let{which:n}=i;const o=_[n];this._updateButtonState(o)}_updateButtonState(t){const e=this._toolbarWidgets.getByName(t),i=this.quill.getFormat();i[t]?this._markActiveFormatWidget(t,e,i):this._resetFormatWidget(t,e)}_prepareToolbarItems(){const t=[];return(0,g.each)(this.options.items,((e,i)=>{let n;if(this._detectRenamedOptions(i),(0,s.Kn)(i))n=this._handleObjectItem(i);else if((0,s.HD)(i)){const t=this._prepareButtonItemConfig(i);n=this._getToolbarItem(t)}n&&t.push(n)})),t}_handleObjectItem(t){if(t.name&&t.acceptedValues&&this._isAcceptableItem(t.widget,"dxSelectBox")){const e=this._prepareSelectItemConfig(t);return this._getToolbarItem(e)}if(t.name&&this._isAcceptableItem(t.widget,"dxButton")){const e=this._prepareButtonItemConfig(t.name),i=(0,r.l)(!0,e,t);return this._getToolbarItem(i)}return this._getToolbarItem(t)}_isAcceptableItem(t,e){return!t||t===e}_prepareButtonItemConfig(t){const e=vf[t]??t,i=(0,_o.titleize)(t);return{widget:"dxButton",name:t,options:{hint:v(i),text:v(i),icon:e.toLowerCase(),onClick:this._formatHandlers[t]||Df(this,t),stylingMode:"text"},showText:"inMenu"}}_prepareSelectItemConfig(t){const{name:e,acceptedValues:i}=t;return(0,r.l)(!0,{widget:"dxSelectBox",name:e,options:{stylingMode:"filled",dataSource:i,displayExpr:t=>b(t,e),placeholder:v(e),onValueChanged:t=>{this._isReset||(this._hideAdaptiveMenu(),wf(this,[e,t.value,h],t.event),this._setValueSilent(t.component,t.value))}}},t)}_hideAdaptiveMenu(){this.toolbarInstance.option("overflowMenuVisible")&&this.toolbarInstance.option("overflowMenuVisible",!1)}_getToolbarItem(t){const e={options:{onInitialized:e=>{t.name&&(e.component.$element().addClass(i),e.component.$element().toggleClass(`dx-${t.name.toLowerCase()}-format`,!!t.name),this._toolbarWidgets.add(t.name,e.component))},onDisposing:()=>{this._toolbarWidgets.remove(t.name)}}};return(0,r.l)(!0,{location:"before",locateInMenu:"auto"},this._getDefaultConfig(t.name),t,e)}_getDefaultItemsConfig(){return{clear:{options:{disabled:!0}},undo:{options:{disabled:!0}},redo:{options:{disabled:!0}},insertRowAbove:{options:{disabled:!0}},insertRowBelow:{options:{disabled:!0}},insertHeaderRow:{options:{disabled:!0}},insertColumnLeft:{options:{disabled:!0}},insertColumnRight:{options:{disabled:!0}},deleteRow:{options:{disabled:!0}},deleteColumn:{options:{disabled:!0}},deleteTable:{options:{disabled:!0}},cellProperties:{options:{disabled:!0}},tableProperties:{options:{disabled:!0}},separator:{template:(t,e,i)=>{(0,o.Z)(i).addClass(n)},menuItemTemplate:(t,e,i)=>{(0,o.Z)(i).addClass(a)}}}}_getDefaultConfig(t){return this._getDefaultItemsConfig()[t]}updateHistoryWidgets(){const t=this.quill.history;if(!t)return;const{undo:e,redo:i}=t.stack;this._updateManipulationWidget(this._toolbarWidgets.getByName("undo"),Boolean(e.length)),this._updateManipulationWidget(this._toolbarWidgets.getByName("redo"),Boolean(i.length))}updateTableWidgets(){if(!this.quill.getModule("table"))return;const t=this.quill.getSelection(),e=t&&this.quill.getFormat(t)||{},i=this._tableFormats.some((t=>Boolean(e[t])));iu.forEach((t=>{const e="insertTable"===t,n=this._toolbarWidgets.getByName(t);this._updateManipulationWidget(n,e?!i:i)}))}_updateManipulationWidget(t,e){t&&t.option("disabled",!e)}updateFormatWidgets(t){const e=this.quill.getSelection();if(!e)return;const i=this.quill.getFormat(e),n=!(0,s.Qr)(i);n&&!t||this._resetFormatWidgets();for(const t in i){const e=this._getFormatWidgetName(t,i),n=this._toolbarWidgets.getByName(e)||this._toolbarWidgets.getByName(t);n&&this._markActiveFormatWidget(t,n,i)}this._toggleClearFormatting(n||e.length>1)}_markActiveFormatWidget(t,e,i){this._isColorFormat(t)&&this._updateColorWidget(t,i[t]),"value"in e.option()?this._setValueSilent(e,i[t]):(e.$element().addClass(l),e.$element().addClass(c))}_toggleClearFormatting(t){const e=this._toolbarWidgets.getByName("clear");e&&e.option("disabled",!t)}_isColorFormat(t){return"color"===t||"background"===t}_updateColorWidget(t,e){const i=this._toolbarWidgets.getByName(t);i&&i.$element().find(`.${u}`).css("borderBottomColor",e||"transparent")}_getFormatWidgetName(t,e){let i;switch(t){case"align":i=t+(0,_o.titleize)(e[t]);break;case"list":i=e[t]+(0,_o.titleize)(t);break;case"code-block":i="codeBlock";break;case"script":i=e[t]+t;break;case"imageSrc":i="image";break;default:i=t}return i}_setValueSilent(t,e){this._isReset=!0,t.option("value",e),this._isReset=!1}_resetFormatWidgets(){this._toolbarWidgets.each(((t,e)=>{this._resetFormatWidget(t,e)}))}_resetFormatWidget(t,e){e.$element().removeClass(l),e.$element().removeClass(c),this._isColorFormat(t)&&this._updateColorWidget(t),"clear"===t&&e.option("disabled",!0),"dxSelectBox"===e.NAME&&this._setValueSilent(e,null)}addClickHandler(t,e){this._formatHandlers[t]=e;const i=this._toolbarWidgets.getByName(t);i&&"dxButton"===i.NAME&&i.option("onClick",e)}}}const Rf=Mf;let Nf=Bt;mt()&&(Nf=class extends Bt{constructor(t,e){super(t,e);const i=this.editorInstance.NAME;P.Z.on(this.quill.root,(0,f.addNamespace)("drop",i),this._dropHandler.bind(this)),P.Z.on(this.quill.root,(0,f.addNamespace)("paste",i),this._pasteHandler.bind(this))}_dropHandler(t){var e;const i=t.originalEvent.dataTransfer,n=null==i||null===(e=i.files)||void 0===e?void 0:e.length;this.saveValueChangeEvent(t),t.preventDefault(),n&&this._getImage(i.files,this._addImage.bind(this))}_pasteHandler(t){var e;const{clipboardData:i}=t.originalEvent;if(this.saveValueChangeEvent(t),!i)return;const n=null===(e=i.items)||void 0===e?void 0:e.length;!i.getData("text/html")&&n&&this._getImage(i.items,(t=>{Ur.default.mozilla||this._addImage(t)}))}_isImage(t){return!!t.type.match(/^image\/(a?png|bmp|gif|p?jpe?g|svg|vnd\.microsoft\.icon|webp)/i)}_getImage(t,e){const i=(0,p.getWindow)();(0,g.each)(t,((t,n)=>{if(!this._isImage(n))return;const o=new i.FileReader;o.onload=t=>{let{target:i}=t;e(i.result)};const r=n.getAsFile?n.getAsFile():n;r instanceof i.Blob&&o.readAsDataURL(r)}))}_addImage(t){const e=this.quill.getSelection(),i=e?e.index:this.quill.getLength();this.quill.insertEmbed(i,"extendedImage",t,"user")}});const $f=Nf;let Vf=Bt;if(mt()){const t="dx-suggestion-list",e="dx-suggestion-list-wrapper",i="dx-dropdowneditor-overlay",n=100;Vf=class extends Bt{_getDefaultOptions(){return{dataSource:null}}constructor(t,n){super(t,n),this.options=(0,r.l)({},this._getDefaultOptions(),n),this._popup=this.renderPopup(),this._popup.$wrapper().addClass(`${e} ${i}`),this._renderPreventFocusOut()}renderList(e,i){const n=(0,o.Z)("<div>").addClass(t).appendTo(e);this._list=this.options.editorInstance._createComponent(n,ql,i)}renderPopup(){const t=this.options.editorInstance,e=(0,o.Z)("<div>").appendTo(t.$element()),i=this._getPopupConfig();return t._createComponent(e,Ws,i)}_getPopupConfig(){return{contentTemplate:t=>{const e=this._getListConfig(this.options);this.renderList((0,o.Z)(t),e)},deferRendering:!1,onShown:()=>{this._list.focus()},onHidden:()=>{this._list.unselectAll(),this._list.option("focusedElement",null)},showTitle:!1,width:"auto",height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:!0,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},fullScreen:!1,maxHeight:this.maxHeight}}_getListConfig(t){return{dataSource:t.dataSource,onSelectionChanged:this.selectionChangedHandler.bind(this),selectionMode:"single",pageLoadMode:"scrollBottom"}}get maxHeight(){const t=(0,p.getWindow)(),e=t&&(0,M.Cr)(t)||0;return Math.max(n,.5*e)}selectionChangedHandler(t){this._popup.option("visible")&&(this._popup.hide(),this.insertEmbedContent(t))}_renderPreventFocusOut(){const t=(0,f.addNamespace)("mousedown","dxHtmlEditorPopupModule");P.Z.on(this._popup.$wrapper(),t,(t=>{t.preventDefault()}))}insertEmbedContent(t){}showPopup(){this._popup&&this._popup.show()}savePosition(t){this.caretPosition=t}getPosition(){return this.caretPosition}}}const Ff=Vf;let Zf={};if(mt()){const t=mt().import("blots/embed"),e="dx-variable";Zf=class extends t{static create(t){const e=super.create();let i,n;const o=t.value;return Array.isArray(t.escapeChar)?(i=(0,l.ensureDefined)(t.escapeChar[0],""),n=(0,l.ensureDefined)(t.escapeChar[1],"")):i=n=t.escapeChar,e.innerText=i+o+n,e.dataset.varStartEscChar=i,e.dataset.varEndEscChar=n,e.dataset.varValue=t.value,e}static value(t){return(0,r.l)({},{value:t.dataset.varValue,escapeChar:[t.dataset.varStartEscChar||"",t.dataset.varEndEscChar||""]})}},Zf.blotName="variable",Zf.tagName="span",Zf.className=e}const Hf=Zf;let Lf=Bt;if(mt()){const t="dx-variable-format",e="dx-format-active",i="dx-state-selected";mt().register({"formats/variable":Hf},!0),Lf=class extends Ff{_getDefaultOptions(){const t=super._getDefaultOptions();return(0,r.l)(t,{escapeChar:""})}constructor(n,r){super(n,r);const s=n.getModule("toolbar");s&&s.addClickHandler("variable",this.showPopup.bind(this)),n.keyboard.addBinding({key:"P",altKey:!0},this.showPopup.bind(this)),this._popup.on("shown",(n=>{const r=(0,o.Z)(n.component.option("position").of);r.hasClass(t)&&(r.addClass(e),r.addClass(i))}))}showPopup(t){const e=this.quill.getSelection(!0),i=e?e.index:this.quill.getLength();this.savePosition(i),this._resetPopupPosition(t,i),super.showPopup()}_resetPopupPosition(t,e){if(t&&t.element)this._popup.option("position",{of:t.element,offset:{h:0,v:0},my:"top center",at:"bottom center",collision:"fit"});else{const t=this.quill.getBounds(e),i=(0,$.l)(this.quill.root);this._popup.option("position",{of:this.quill.root,offset:{h:t.left,v:t.bottom-i.height},my:"top center",at:"bottom left",collision:"fit flip"})}}insertEmbedContent(t){const e=this.getPosition(),i=t.component.option("selectedItem"),n=(0,r.l)({},{value:i,escapeChar:this.options.escapeChar});setTimeout(function(){this.quill.insertEmbed(e,"variable",n),this.quill.setSelection(e+1)}.bind(this))}}}const jf=Lf,zf="dxHtmlResizingModule",Wf=(0,f.addNamespace)("keydown",zf),Kf=(0,f.addNamespace)("scroll",zf),qf=(0,f.addNamespace)("mousedown",zf);class Uf extends Bt{constructor(t,e){super(t,e),this.allowedTargets=e.allowedTargets||["image"],this.enabled=!!e.enabled,this._hideFrameWithContext=this.hideFrame.bind(this),this._framePositionChangedHandler=this._prepareFramePositionChangedHandler(),this.enabled&&(this._attachEvents(),this._createResizeFrame())}_attachEvents(){P.Z.on(this.quill.root,(0,f.addNamespace)(Kt.name,zf),this._clickHandler.bind(this)),P.Z.on(this.quill.root,Kf,this._framePositionChangedHandler),this.editorInstance.on("focusOut",this._hideFrameWithContext),this.quill.on("text-change",this._framePositionChangedHandler)}_detachEvents(){P.Z.off(this.quill.root,zf),this.editorInstance.off("focusOut",this._hideFrameWithContext),this.quill.off("text-change",this._framePositionChangedHandler)}_clickHandler(t){if(this._isAllowedTarget(t.target)){if(this._$target===t.target)return;this._$target=t.target;const e=(0,o.Z)(this._$target),i=Math.max((0,M.Y_)(e)-(0,M.dz)(e),this.resizable.option("minWidth")),n=Math.max((0,M.zp)(e)-(0,M.Cr)(e),this.resizable.option("minHeight"));this.resizable.option({minWidth:i,minHeight:n}),this.updateFramePosition(),this.showFrame(),this._adjustSelection()}else this._$target&&this.hideFrame()}_prepareFramePositionChangedHandler(t){return()=>{this._$target&&this.updateFramePosition()}}_adjustSelection(){this.quill.getSelection()||this.quill.setSelection(0,0)}_isAllowedTarget(t){return this._isImage(t)}_isImage(t){return-1!==this.allowedTargets.indexOf("image")&&"IMG"===t.tagName.toUpperCase()}showFrame(){this._$resizeFrame.show(),P.Z.on(this.quill.root,Wf,this._handleFrameKeyDown.bind(this))}_handleFrameKeyDown(t){const e=(0,f.normalizeKeyName)(t);"del"!==e&&"backspace"!==e||this._deleteImage(),this.hideFrame()}hideFrame(){this._$target=null,this._$resizeFrame.hide(),P.Z.off(this.quill.root,Wf)}updateFramePosition(){const{height:t,width:e,top:i,left:n}=(0,$.l)(this._$target),{top:o,left:r}=(0,$.l)(this.quill.root),s=this._getBorderWidth();this._$resizeFrame.css({height:t,width:e,padding:1,top:i-o-s-1,left:n-r-s-1}),(0,hr.pB)(this._$resizeFrame,{left:0,top:0})}_getBorderWidth(){return parseInt(this._$resizeFrame.css("borderTopWidth"))}_createResizeFrame(){if(this._$resizeFrame)return;const{deviceType:t}=tt.default.current();this._$resizeFrame=(0,o.Z)("<div>").addClass("dx-resize-frame").toggleClass("dx-touch-device","desktop"!==t).appendTo(this.editorInstance._getQuillContainer()).hide(),P.Z.on(this._$resizeFrame,qf,(t=>{t.preventDefault()})),this.resizable=this.editorInstance._createComponent(this._$resizeFrame,Ts,{onResize:t=>{this._$target&&((0,o.Z)(this._$target).attr({height:t.height,width:t.width}),this.updateFramePosition())}})}_deleteImage(){var t;this._isAllowedTarget(this._$target)&&(null===(t=mt().find(this._$target))||void 0===t||t.deleteAt(0))}option(t,e){"mediaResizing"!==t?"enabled"===t?(this.enabled=e,e?this._attachEvents():this._detachEvents()):"allowedTargets"===t&&Array.isArray(e)&&(this.allowedTargets=e):this.handleOptionChangeValue(e)}clean(){this._detachEvents(),this._$resizeFrame.remove(),this._$resizeFrame=void 0}}const Gf="dx-htmleditor-column-resizer",Yf="dx-htmleditor-row-resizer",Qf={minColumnWidth:40,minRowHeight:24},Xf="dxHtmlTableResizingModule",Jf=(0,f.addNamespace)("dxpointerdown",Xf),t_=(0,f.addNamespace)("scroll",Xf);class e_ extends Bt{constructor(t,e){super(t,e),this.enabled=!!e.enabled,this._tableResizeFrames=[],this._minColumnWidth=this._minSizeLimit("minColumnWidth",e.minColumnWidth),this._minRowHeight=this._minSizeLimit("minRowHeight",e.minRowHeight),this._quillContainer=this.editorInstance._getQuillContainer(),this._tableData=[],this.enabled&&this._applyResizing()}_applyResizing(t){t?this._applyResizingImpl():this.editorInstance.addContentInitializedCallback(this._applyResizingImpl.bind(this)),this.addCleanCallback(this.clean.bind(this)),this._resizeHandlerWithContext=Wo.default.add(this._resizeHandler.bind(this))}_minSizeLimit(t,e){return(0,s.$K)(e)?Math.max(e,0):Qf[t]}_applyResizingImpl(){const t=this._findTables();t.length&&(this._fixTablesWidths(t),this._createResizeFrames(t),this._updateFramesPositions(),this._updateFramesSeparators()),this._attachEvents()}_attachEvents(){P.Z.on(this.editorInstance._getContent(),t_,this._updateFramesPositions.bind(this)),this.quill.on("text-change",this._getQuillTextChangeHandler())}_detachEvents(){P.Z.off(this.editorInstance._getContent(),Xf),this.quill.off("text-change",this._quillTextChangeHandler)}_getQuillTextChangeHandler(t,e,i){return(t,e,i)=>{if(this._isTableChanging()){const t=this._findTables();this._removeResizeFrames(),"api"===i&&this._fixTablesWidths(t),this._updateTablesColumnsWidth(t),this._createResizeFrames(t),this._updateFramesPositions(),this._updateFramesSeparators()}else this._updateFramesPositions(),this._isDragging||this._updateFramesSeparators()}}_getFrameForTable(t){var e;return null===(e=this._framesForTables)||void 0===e?void 0:e.get(t.get(0))}_resizeHandler(){this._windowResizeTimeout=setTimeout((()=>{const t=this._findTables();(0,g.each)(t,((t,e)=>{const i=(0,o.Z)(e),n=this._tableResizeFrames[t],r=(0,M.Y_)(i),s=this._tableLastWidth(n);Math.abs(r-s)>1&&(this._tableLastWidth(n,r),this._updateColumnsWidth(i,t))})),this._updateFramesPositions(),this._updateFramesSeparators()}))}_findTables(){return(0,o.Z)(this._quillContainer).find("table")}_getWidthStyleValue(t){const e=t[0].style.width;return""!==e?parseInt(e):void 0}_tableLastWidth(t,e){if(!(0,s.$K)(e))return null==t?void 0:t.lastWidth;t.lastWidth=e}_fixTablesWidths(t){(0,g.each)(t,((t,e)=>{const i=(0,o.Z)(e),n=this._getTableDeterminantElements(i,"horizontal");this._tableResizeFrames[t]||(this._tableResizeFrames[t]={lastWidth:void 0});const r=this._getFrameForTable(i);if(r||this._tableResizeFrames.push({$table:i}),0===su(i).length){const{columnsSum:t}=this._getColumnElementsSum(n);ou(i,{quill:this.quill});const e=this._tableLastWidth(r)??(0,M.Y_)(i);r&&this._tableLastWidth(r,Math.max(t,e))}}))}_createResizeFrames(t){this._framesForTables=new Map,t.each(((t,e)=>{var i;const n=(0,o.Z)(e),r=null===(i=this._tableResizeFrames[t])||void 0===i?void 0:i.$table,s=this._tableResizeFrames[t].lastWidth;this._tableResizeFrames[t]={$frame:this._createTableResizeFrame(e),$table:n,index:t,lastWidth:r&&e===r.get(0)?s:void 0,columnsCount:this._getTableDeterminantElements(n,"horizontal").length,rowsCount:this._getTableDeterminantElements(n,"vertical").length},this._framesForTables.set(e,this._tableResizeFrames[t])})),this._tableResizeFrames.length=t.length}_isTableChanging(){const t=this._findTables();let e=!1;return t.length!==this._tableResizeFrames.length?e=!0:(0,g.each)(t,((t,i)=>{const n=(0,o.Z)(i),r=this._tableResizeFrames[t],s=(null==r?void 0:r.columnsCount)!==this._getTableDeterminantElements(n,"horizontal").length,a=(null==r?void 0:r.rowsCount)!==this._getTableDeterminantElements(n,"vertical").length;if(s||a)return e=!0,!1})),e}_removeResizeFrames(t){var e;(0,g.each)(this._tableResizeFrames,((t,e)=>{if(e.$frame){var i;const t=`.${Gf}, .${Yf}`;this._detachSeparatorEvents(null===(i=e.$frame)||void 0===i?void 0:i.find(t)),e.$frame.remove()}})),null===(e=this._framesForTables)||void 0===e||e.clear(),t&&(this._tableResizeFrames=[])}_detachSeparatorEvents(t){t.each(((t,e)=>{P.Z.off(e,Jf)}))}_createTableResizeFrame(){return(0,o.Z)("<div>").addClass("dx-table-resize-frame").appendTo(this._quillContainer)}_updateFramesPositions(){(0,g.each)(this._tableResizeFrames,((t,e)=>{this._updateFramePosition(e.$table,e.$frame)}))}_updateFramePosition(t,e){const{height:i,width:n,top:o,left:r}=(0,$.l)(t.get(0)),{top:s,left:a}=(0,$.l)(this.quill.root);e.css({height:i,width:n,top:o-s,left:r-a}),(0,hr.pB)(e,{left:0,top:0})}_updateFramesSeparators(t){(0,g.each)(this._tableResizeFrames,((e,i)=>{t?this._updateFrameSeparators(i,t):(this._updateFrameSeparators(i,"vertical"),this._updateFrameSeparators(i,"horizontal"))}))}_isDraggable(t){return t.hasClass("dx-draggable")&&t.is(":visible")}_removeDraggable(t,e){this._isDraggable(t)&&((0,o.Z)(t).dxDraggable("instance").dispose(),(0,o.Z)(t).addClass(e))}_getDirectionInfo(t){return"vertical"===t?{lineResizerClass:Yf,sizeFunction:t=>(0,M.zp)(t),positionCoordinate:"top",positionStyleProperty:"height",positionCoordinateName:"y"}:{lineResizerClass:Gf,sizeFunction:t=>(0,M.Y_)(t),positionCoordinate:this.editorInstance.option("rtlEnabled")?"right":"left",positionStyleProperty:"width",positionCoordinateName:"x"}}_getSize(t,e){return e.sizeFunction(t)}_updateFrameSeparators(t,e){const i=this._getTableDeterminantElements(t.$table,e),n=i.length-1,r=this._getDirectionInfo(e),a=t.$frame.find(`.${r.lineResizerClass}`),l={transform:"none"};let c=0;for(let u=0;u<=n;u++){c+=this._getSize(i.eq(u),r),(0,s.$K)(a[u])||(a[u]=(0,o.Z)("<div>").addClass(r.lineResizerClass).appendTo(t.$frame).get(0));const n=(0,o.Z)(a[u]);this._removeDraggable(n,r.lineResizerClass),l[r.positionCoordinate]=c-2,(0,o.Z)(n).css(l);const d={lineSeparator:a[u],index:u,$determinantElements:i,frame:t,direction:e};this._attachColumnSeparatorEvents(d)}}_getTableDeterminantElements(t,e){return"vertical"===e?t.find("th:first-child, td:first-child"):ru(t)}_attachColumnSeparatorEvents(t){P.Z.on(t.lineSeparator,Jf,(()=>{this._createDraggableElement(t)}))}_dragStartHandler(t){let{$determinantElements:e,index:i,frame:n,direction:r,lineSeparator:s}=t;const a=this._getDirectionInfo(r);this._isDragging=!0,this._fixColumnsWidth(n.$table),this._startLineSize=parseInt(this._getSize((0,o.Z)(e[i]),a)),this._startTableWidth=(0,M.Y_)(n.$table),this._startLineSeparatorPosition=parseInt((0,o.Z)(s).css(a.positionCoordinate)),this._nextLineSize=0,e[i+1]?this._nextLineSize=parseInt(this._getSize((0,o.Z)(e[i+1]),a)):"horizontal"===r&&ou(n.$table,{quill:this.quill})}_shouldRevertOffset(t){return"horizontal"===t&&this.editorInstance.option("rtlEnabled")}_isNextColumnWidthEnough(t,e,i){if(!this._nextLineSize)return!0;if(t>=this._minColumnWidth){const t=this._nextColumnOffsetLimit?i<this._nextColumnOffsetLimit:i<0,n=Math.abs(this._getWidthStyleValue(e)-(0,M.Y_)(e))>3;return t||!n}return!1}_shouldSetNextColumnWidth(t){return this._nextLineSize&&t>0}_horizontalDragHandler(t){let{currentLineNewSize:e,directionInfo:i,eventOffset:n,$determinantElements:o,index:r,frame:s}=t,a=this._nextLineSize&&this._nextLineSize-n;const l=e>=this._minColumnWidth,c=lu(s.$table,r),u=lu(s.$table,r+1),d=(0,M.Y_)(c.eq(0))-e;if(l)if(this._isNextColumnWidthEnough(a,o.eq(r+1),n)){au(this,{elements:c,property:i.positionStyleProperty,value:e}),this._shouldSetNextColumnWidth(a)&&au(this,{elements:u,property:i.positionStyleProperty,value:a});const t=Math.abs(this._startTableWidth-(0,M.Y_)(s.$table))<3;(Math.abs(d)>3||!this._nextLineSize&&t)&&(au(this,{elements:c,property:i.positionStyleProperty,value:(0,M.Y_)(c.eq(0))}),a+=e-(0,M.Y_)(c.eq(0)),this._shouldSetNextColumnWidth(a)&&au(this,{elements:u,property:i.positionStyleProperty,value:a}))}else this._nextColumnOffsetLimit=this._nextColumnOffsetLimit||n;this._$highlightedElement.css(i.positionCoordinate,this._startLineSeparatorPosition+n+d+"px")}_verticalDragHandler(t){let{currentLineNewSize:e,directionInfo:i,eventOffset:n,$determinantElements:o,index:r,frame:s}=t;const a=Math.max(e,this._minRowHeight);au(this,{elements:lu(s.$table,r,"vertical"),property:i.positionStyleProperty,value:a});const l=(0,M.zp)(o.eq(r))-e;this._$highlightedElement.css(i.positionCoordinate,this._startLineSeparatorPosition+n+l+"px")}_dragMoveHandler(t,e){let{$determinantElements:i,index:n,frame:o,direction:r}=e;const s=this._getDirectionInfo(r);let a=t.offset[s.positionCoordinateName];this.editorInstance._saveValueChangeEvent(t),this._shouldRevertOffset(r)&&(a=-a);const l=this._startLineSize+a;"horizontal"===r?this._horizontalDragHandler({currentLineNewSize:l,directionInfo:s,eventOffset:a,$determinantElements:i,index:n,frame:o}):this._verticalDragHandler({currentLineNewSize:l,directionInfo:s,eventOffset:a,$determinantElements:i,index:n,frame:o}),this._updateFramePosition(o.$table,o.$frame)}_dragEndHandler(t){var e;null===(e=this._$highlightedElement)||void 0===e||e.remove(),this._isDragging=void 0,this._nextColumnOffsetLimit=void 0,this._tableLastWidth(t.frame,(0,M.Y_)(t.frame.$table)),this._updateFramesPositions(),this._updateFramesSeparators()}_isLastColumnResizing(t){let{$determinantElements:e,index:i}=t;return!(0,s.$K)(e[i+1])}_getBoundaryConfig(t){const e={};if("vertical"===t.direction)e.boundary=t.frame.$table,e.boundOffset={bottom:(0,p.hasWindow)()?-(0,M.Cr)((0,p.getWindow)()):-(0,M.zp)(this._quillContainer),top:0,left:0,right:0};else if(this._isLastColumnResizing(t)){const t=this.editorInstance._getContent();e.boundary=t,e.boundOffset={bottom:0,top:0,left:t.css("paddingLeft"),right:t.css("paddingRight")}}else e.boundary=t.frame.$table;return e}_createDraggableElement(t){var e;const i=this._getBoundaryConfig(t),n="vertical"===t.direction?"dx-htmleditor-highlighted-row":"dx-htmleditor-highlighted-column";null===(e=this._$highlightedElement)||void 0===e||e.remove(),this._$highlightedElement=(0,o.Z)("<div>").addClass(`${n}`).insertAfter((0,o.Z)(t.lineSeparator));const s={contentTemplate:null,allowMoveByClick:!1,dragDirection:t.direction,onDragMove:e=>{let{component:i,event:n}=e;this._dragMoveHandler(n,t)},onDragStart:()=>{this._dragStartHandler(t)},onDragEnd:()=>{this._dragEndHandler(t)}};(0,r.l)(s,i),this._currentDraggableElement=this.editorInstance._createComponent(t.lineSeparator,yc,s)}_fixColumnsWidth(t){const e=this._getTableDeterminantElements(t);(0,g.each)(e,((e,i)=>{const n=(0,M.Y_)(i);au(this,{elements:lu(t,e),property:"width",value:Math.max(n,this._minColumnWidth)})}))}_getColumnElementsSum(t){const e=[];let i=0;return(0,g.each)(t,((t,n)=>{const r=(0,o.Z)(n),s=this._getWidthStyleValue(r)||(0,M.Y_)(r);e[t]=Math.max(s,this._minColumnWidth),i+=e[t]})),{columnsWidths:e,columnsSum:i}}_setColumnsRatioWidth(t,e,i,n){(0,g.each)(t,(t=>{const o=lu(n,t);let r;r=e>0?this._minColumnWidth+Math.round((i[t]-this._minColumnWidth)*e):this._minColumnWidth,au(this,{elements:o,property:"width",value:r})}))}_updateColumnsWidth(t,e){const i=this._getTableDeterminantElements(t);let n=this._tableResizeFrames[e];n||(this._tableResizeFrames[e]={}),n=this._tableResizeFrames[e];const o=this._tableLastWidth(n)||(0,M.Y_)(t);let r;const{columnsWidths:s,columnsSum:a}=this._getColumnElementsSum(i),l=i.length*this._minColumnWidth;r=a>l?(o-l)/(a-l):-1,this._tableLastWidth(n,r>0?o:l),this._setColumnsRatioWidth(i,r,s,t)}_updateTablesColumnsWidth(t){(0,g.each)(t,((t,e)=>{this._updateColumnsWidth((0,o.Z)(e),t)}))}option(t,e){"tableResizing"!==t?"enabled"===t?(this.enabled=e,e?this._applyResizing(!0):this.clean()):["minColumnWidth","minRowHeight"].includes(t)&&(this[`_${t}`]=this._minSizeLimit(t,e)):this.handleOptionChangeValue(e)}clean(){this._removeResizeFrames(!0),this._detachEvents(),Wo.default.remove(this._resizeHandlerWithContext),clearTimeout(this._windowResizeTimeout),this._resizeHandlerWithContext=void 0,this._isDragging=void 0,this._startTableWidth=void 0,clearTimeout(this._attachResizerTimeout)}}const i_=m.default.inherit({ctor:function(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes:function(t,e){const i=this;(0,g.each)(t,(function(t,n){const o=(0,s.$K)(e)?e:i._getParentId(n),r=i._convertItemToNode(n,o);i._dataStructure.push(r),i._checkForDuplicateId(r.internalFields.key),i._indexByKey[r.internalFields.key]=i._dataStructure.length-1,i._itemHasChildren(n)&&i._convertItemsToNodes(i._dataAccessors.getters.items(n),r.internalFields.key)}))},_checkForDuplicateId:function(t){if((0,s.$K)(this._indexByKey[t]))throw G.Z.Error("E1040",t)},_getParentId:function(t){return"plain"===this._dataType?this._dataAccessors.getters.parentKey(t):void 0},_itemHasChildren:function(t){if("plain"===this._dataType)return;const e=this._dataAccessors.getters.items(t);return e&&e.length},_getUniqueKey:function(t){const e=this._dataAccessors.getters.key,i=e(t);return e&&(i||0===i)&&(0,s.pt)(i)?i:this.getItemsCount()},_convertItemToNode:function(t,e){this._itemsCount++,!1!==t.visible&&this._visibleItemsCount++;const i={internalFields:{disabled:this._dataAccessors.getters.disabled(t,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(t,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(t,{defaultValue:!1}),key:this._getUniqueKey(t),parentKey:(0,s.$K)(e)?e:this._rootValue,item:this._makeObjectFromPrimitive(t),childrenKeys:[]}};return(0,r.l)(i,t),delete i.items,i},setChildrenKeys:function(){const t=this;(0,g.each)(this._dataStructure,(function(e,i){if(i.internalFields.parentKey===t._rootValue)return;const n=t.getParentNode(i);n&&n.internalFields.childrenKeys.push(i.internalFields.key)}))},_makeObjectFromPrimitive:function(t){if((0,s.pt)(t)){const e=t;t={},this._dataAccessors.setters.key(t,e)}return t},_convertToPublicNode:function(t,e){if(!t)return null;const i={text:this._dataAccessors.getters.display(t),key:t.internalFields.key,selected:t.internalFields.selected,expanded:t.internalFields.expanded,disabled:t.internalFields.disabled,parent:e||null,itemData:t.internalFields.item,children:[],items:[]};return i.parent&&(i.parent.children.push(i),i.parent.items.push(i)),i},convertToPublicNodes:function(t,e){if(!t.length)return[];const i=this,n=[];return(0,g.each)(t,(function(t,o){o=(0,s.pt)(o)?i._getByKey(o):o;const r=i._convertToPublicNode(o,e);r.children=i.convertToPublicNodes(o.internalFields.childrenKeys,r),n.push(r),o.internalFields.publicNode=r})),n},setDataAccessors:function(t){this._dataAccessors=t},_getByKey:function(t){return this._dataStructure[this.getIndexByKey(t)]||null},getParentNode:function(t){return this._getByKey(t.internalFields.parentKey)},getByKey:function(t,e){if(null==e)return null;let i=null;const n=this;return function(t,e){return(0,g.each)(t,(function(t,o){if((o.internalFields&&o.internalFields.key||n._dataAccessors.getters.key(o)).toString()===e.toString())return i=o,!1})),i}(t,e)},getItemsCount:function(){return this._itemsCount},getVisibleItemsCount:function(){return this._visibleItemsCount},updateIndexByKey:function(){const t=this;this._indexByKey={},(0,g.each)(this._dataStructure,(function(e,i){t._checkForDuplicateId(i.internalFields.key),t._indexByKey[i.internalFields.key]=e}))},updateChildrenKeys:function(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys:function(){this._indexByKey={},(0,g.each)(this._dataStructure,(function(t,e){e.internalFields.childrenKeys=[]}))},getIndexByKey:function(t){return this._indexByKey[t]},createPlainStructure:function(t,e,i){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=e,this._dataType=i,this._indexByKey={},this._convertItemsToNodes(t),this.setChildrenKeys(),this._dataStructure}}),n_=i_,o_="expanded",r_="selected";Wl.setEditorClass(kl);const s_=m.default.inherit({ctor:function(t){this.options={},(0,r.l)(this.options,this._defaultOptions(),t),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption:function(t,e){this.options[t]=e,"recursiveSelection"===t&&this._updateSelection()},_defaultOptions:function(){return{dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new n_,onNodeChanged:l.noop,sort:null}},_createInternalDataStructure:function(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection:function(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(r_)},_updateExpansion:function(t){this.options.recursiveExpansion&&(t?this._updateOneBranch(t):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(o_)},_updateNodesKeysArray:function(t){const e=this;let i=[];return(0,g.each)(e._getDataBySelectionMode(),(function(n,o){e._isNodeVisible(o)&&o.internalFields[t]&&(t===o_||e.options.multipleSelection?i.push(o.internalFields.key):(i.length&&e.toggleSelection(i[0],!1,!0),i=[o.internalFields.key]))})),i},_getDataBySelectionMode:function(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:function(t){return!1!==t.internalFields.item.visible},_getByKey:function(t,e){return t===this._dataStructure?this.options.dataConverter._getByKey(e):this.options.dataConverter.getByKey(t,e)},_setChildrenSelection:function(){const t=this;(0,g.each)(this._dataStructure,(function(e,i){if(!i.internalFields.childrenKeys.length)return;const n=i.internalFields.selected;!0===n&&t._toggleChildrenSelection(i,n)}))},_setParentSelection:function(){const t=this;(0,g.each)(this._dataStructure,(function(e,i){t.options.dataConverter.getParentNode(i)&&i.internalFields.parentKey!==t.options.rootValue&&t._iterateParents(i,(function(e){const i=t._calculateSelectedState(e);t._setFieldState(e,r_,i)}))}))},_setParentExpansion:function(){const t=this;(0,g.each)(this._dataStructure,(function(e,i){i.internalFields.expanded&&t._updateOneBranch(i.internalFields.key)}))},_updateOneBranch:function(t){const e=this,i=this.getNodeByKey(t);e._iterateParents(i,(function(t){e._setFieldState(t,o_,!0)}))},_iterateChildren:function(t,e,i,n){if(!(0,s.mf)(i))return;const o=this,r=t.internalFields.key;-1===(n=n||[]).indexOf(r)&&(n.push(r),(0,g.each)(t.internalFields.childrenKeys,(function(t,r){const s=o.getNodeByKey(r);i(s),s.internalFields.childrenKeys.length&&e&&o._iterateChildren(s,e,i,n)})))},_iterateParents:function(t,e,i){if(t.internalFields.parentKey===this.options.rootValue||!(0,s.mf)(e))return;i=i||[];const n=t.internalFields.key;if(-1===i.indexOf(n)){i.push(n);const o=this.options.dataConverter.getParentNode(t);o&&(e(o),o.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(o,e,i))}},_calculateSelectedState:function(t){const e=t.internalFields.childrenKeys.length;let i=0,n=0,o=!1;for(let o=0;o<=e-1;o++){const e=this.getNodeByKey(t.internalFields.childrenKeys[o]),r=!1===e.internalFields.item.visible,s=e.internalFields.selected;r?n++:s?i++:void 0===s&&(i+=.5)}return i&&(o=i===e-n||void 0),o},_toggleChildrenSelection:function(t,e){const i=this;this._iterateChildren(t,!0,(function(t){i._isNodeVisible(t)&&i._setFieldState(t,r_,e)}))},_setFieldState:function(t,e,i){t.internalFields[e]!==i&&(t.internalFields[e]=i,t.internalFields.publicNode&&(t.internalFields.publicNode[e]=i),this.options.dataAccessors.setters[e](t.internalFields.item,i),this.options.onNodeChanged(t))},_markChildren:function(t){const e=this;(0,g.each)(t,(function(t,i){const n=e.getIndexByKey(i),o=e.getNodeByKey(i);e._dataStructure[n]=0,o.internalFields.childrenKeys.length&&e._markChildren(o.internalFields.childrenKeys)}))},_removeNode:function(t){const e=this.getNodeByKey(t);this._dataStructure[this.getIndexByKey(t)]=0,this._markChildren(e.internalFields.childrenKeys);const i=this;let n=0;const o=(0,r.l)([],this._dataStructure);(0,g.each)(o,(function(t,e){e||(i._dataStructure.splice(t-n,1),n++)}))},_addNode:function(t){const e=this.options.dataConverter,i=e._convertItemToNode(t,this.options.dataAccessors.getters.parentKey(t));this._dataStructure=this._dataStructure.concat(i),this._initialDataStructure=this._initialDataStructure.concat(i),e._dataStructure=e._dataStructure.concat(i)},_updateFields:function(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys:function(){return this._selectedNodesKeys},getExpandedNodesKeys:function(){return this._expandedNodesKeys},getData:function(){return this._dataStructure},getFullData:function(){return this._initialDataStructure},getNodeByItem:function(t){let e=null;return(0,g.each)(this._dataStructure,(function(i,n){if(n.internalFields.item===t)return e=n,!1})),e},getNodesByItems:function(t){const e=this,i=[];return(0,g.each)(t,(function(t,n){const o=e.getNodeByItem(n);o&&i.push(o)})),i},getNodeByKey:function(t,e){return this._getByKey(e||this._getDataBySelectionMode(),t)},getTreeNodes:function(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount:function(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount:function(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:function(t){return t.internalFields.publicNode},getRootNodes:function(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes:function(t){return(0,de.Z)(this._dataStructure,{langParams:this.options.langParams}).filter(["internalFields.parentKey",t]).toArray()},getIndexByKey:function(t){return this.options.dataConverter.getIndexByKey(t)},addItem:function(t){this._addNode(t),this._updateFields()},removeItem:function(t){this._removeNode(t),this._updateFields()},toggleSelection:function(t,e,i){const n=this._isSingleModeUnselect(e),o=this._getByKey(i||n?this._initialDataStructure:this._dataStructure,t);this._setFieldState(o,r_,e),this.options.recursiveSelection&&!i&&(e?this._setChildrenSelection():this._toggleChildrenSelection(o,e),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(r_)},_isSingleModeUnselect:function(t){return!this.options.multipleSelection&&!t},toggleNodeDisabledState:function(t,e){const i=this.getNodeByKey(t);this._setFieldState(i,"disabled",e)},toggleSelectAll:function(t){if(!(0,s.$K)(t))return;const e=this,i=e._selectedNodesKeys[e._selectedNodesKeys.length-1],n=e._isSingleModeUnselect(t)?this._initialDataStructure:this._dataStructure;(0,g.each)(n,(function(i,n){e._isNodeVisible(n)&&e._setFieldState(n,r_,t)})),e._selectedNodesKeys=e._updateNodesKeysArray(r_),!t&&e.options.selectionRequired&&e.toggleSelection(i,!0)},isAllSelected:function(){return!!this.getSelectedNodesKeys().length&&(this.getSelectedNodesKeys().length===this.getVisibleItemsCount()||void 0)},toggleExpansion:function(t,e){const i=this.getNodeByKey(t);this._setFieldState(i,o_,e),e&&this._updateExpansion(t),this._expandedNodesKeys=this._updateNodesKeysArray(o_)},isFiltered:function(t){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[t]).length},_createCriteria:function(t,e,i){const n=[];return Array.isArray(t)?((0,g.each)(t,(function(t,o){n.push([o,i,e],"or")})),n.pop(),n):[t,i,e]},_filterDataStructure:function(t,e){const i=this.options.searchExpr||this.options.dataAccessors.getters.display,n=Wl.getOperationBySearchMode(this.options.searchMode),o=this._createCriteria(i,t,n);return e=e||this._initialDataStructure,(0,de.Z)(e,{langParams:this.options.langParams}).filter(o).toArray()},search:function(t){const e=this;let i=this._filterDataStructure(t);const n=this.options.dataConverter;return function t(i,o){const r=i.length;for(;o<r;){const r=i[o];if(r.internalFields.parentKey===e.options.rootValue){o++;continue}const s=n.getParentNode(r);s?(s.internalFields.expanded||e._setFieldState(s,o_,!0),i.includes(s)?o++:(i.splice(o,0,s),t(i,o))):(G.Z.log("W1007",r.internalFields.parentKey,r.internalFields.key),o++)}}(i,0),this.options.sort&&(i=Ml.Z.queryByOptions((0,de.Z)(i),{sort:this.options.sort,langParams:this.options.langParams}).toArray()),n._indexByKey={},(0,g.each)(i,(function(t,e){e.internalFields.childrenKeys=[],n._indexByKey[e.internalFields.key]=t})),n._dataStructure=i,n.setChildrenKeys(),n._dataStructure}}),a_=s_,l_=we.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===tt.default.real().deviceType&&!tt.default.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource:function(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter:function(){const t=this._createDataAdapterAccessors();this._dataAdapter=new a_((0,r.l)({dataAccessors:{getters:t.getters,setters:t.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:l.noop,_getItemExtraPropNames:l.noop,_initDynamicTemplates:function(){const t=["text","html","items","icon"].concat(this._getItemExtraPropNames());this._templateManager.addDefaultTemplates({item:new ee(this._addContent.bind(this),t,this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_addContent:function(t,e){t.html(e.html).append(this._getIconContainer(e)).append(this._getTextContainer(e))},_getLinkContainer:function(t,e,i){let{linkAttr:r,url:a}=i;const l=(0,s.Kn)(r)?r:{};return(0,o.Z)("<a>").addClass("dx-item-url").attr((0,n.Z)({},l,{href:a})).append(t).append(e)},_getIconContainer:function(t){if(!t.icon)return;const e=co(t.icon);if(e.is("img")){const t=this.NAME.startsWith("dxPrivateComponent")?"":`${this.NAME} `;e.attr("alt",`${t}item icon`)}return e},_getTextContainer:function(t){return(0,o.Z)("<span>").text(t.text)},_initAccessors:function(){const t=this;(0,g.each)(this._getAccessors(),(function(e,i){t._compileAccessor(i)})),this._compileDisplayGetter()},_getAccessors:function(){return["key","selected","items","disabled","parentId","expanded"]},_getChildNodes:function(t){const e=this,i=[];return(0,g.each)(t.internalFields.childrenKeys,(function(t,n){const o=e._dataAdapter.getNodeByKey(n);i.push(o)})),i},_hasChildren:function(t){return t&&t.internalFields.childrenKeys.length},_compileAccessor:function(t){const e="_"+t+"Getter",i="_"+t+"Setter",n=this.option(t+"Expr");return n?(0,s.mf)(n)?(this[i]=function(t,e){t[n()]=e},void(this[e]=function(t){return t[n()]})):(this[e]=(0,Wt.vb)(n),void(this[i]=(0,Wt.OM)(n))):(this[e]=l.noop,void(this[i]=l.noop))},_createDataAdapterAccessors:function(){const t=this,e={getters:{},setters:{}};return(0,g.each)(this._getAccessors(),(function(i,n){const o="_"+n+"Getter",r="_"+n+"Setter",s="parentId"===n?"parentKey":n;e.getters[s]=t[o],e.setters[s]=t[r]})),e.getters.display=this._displayGetter?this._displayGetter:t=>t.text,e},_initMarkup:function(){this.callBase(),this._addWidgetClass()},_addWidgetClass:function(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:l.noop,_renderItemFrame:function(t,e){const i=this.callBase.apply(this,arguments);return i.toggleClass("dx-state-disabled",!!this._disabledGetter(e)),i},_optionChanged:function(t){switch(t.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(t);break;default:this.callBase(t)}}}),c_=l_,u_=class extends le{_getPlainItems(){return(0,g.map)(this._collectionWidget.option("items"),(function t(e){return e.items?[e].concat((0,g.map)(e.items,t)):e}))}_stringifyItem(t){return JSON.stringify(t,((t,e)=>"template"===t?this._getTemplateString(e):e))}_getTemplateString(t){let e;return e="object"==typeof t?(0,o.Z)(t).text():t.toString(),e}},d_="dx-menu-item",h_=d_+"-content",p_=d_+"-selected",f_=d_+"-wrapper",__=d_+"-expanded",m_=d_+"-has-text",g_=d_+"-has-icon",v_=d_+"-has-submenu",b_=d_+"-popout",y_=d_+"-text",C_={show:50,hide:300};class w_ extends c_{_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return d_}_setAriaSelectionAttribute(){}_selectedItemClass(){return p_}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return(0,r.l)(super._supportedKeys(),{space:()=>{const t=(0,o.Z)(this.option("focusedElement"));t.length&&this._isSelectionEnabled()&&this.selectItem(t[0])},pageUp:l.noop,pageDown:l.noop})}_isSelectionEnabled(){return"single"===this.option("selectionMode")}_init(){this._activeStateUnit=`.${d_}`,super._init(),this._renderSelectedItem(),this._initActions()}_getLinkContainer(t,e,i){let{linkAttr:n,url:o}=i;return null==t||t.addClass("dx-icon-with-url"),null==e||e.addClass("dx-menu-item-text-with-url"),super._getLinkContainer(t,e,{linkAttr:n,url:o})}_addContent(t,e){const{html:i,url:n}=e;if(n){t.html(i);const n=this._getLinkContainer(this._getIconContainer(e),this._getTextContainer(e),e);t.append(n)}else super._addContent(t,e);t.append(this._getPopoutContainer(e)),this._addContentClasses(e,t.parent())}_getTextContainer(t){const{text:e}=t;if(!e)return;const i=(0,o.Z)("<span>").addClass(y_),n=(0,s.PO)(t)?e:String(t);return i.text(n)}_getItemExtraPropNames(){return["url","linkAttr"]}_getPopoutContainer(t){const e=t.items;let i;if(e&&e.length){const t=(0,o.Z)("<div>").addClass(b_);i=(0,o.Z)("<span>").addClass("dx-menu-item-popout-container").append(t)}return i}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(t){if(!t)return;const e=this._dataAdapter.getNodeByItem(t);this._dataAdapter.toggleSelection(e.internalFields.key,!0)}_renderSelectedItem(){const t=this._dataAdapter.getSelectedNodesKeys(),e=t.length&&t[0],i=this.option("selectedItem");if(!e)return void this._selectByItem(i);const n=this._dataAdapter.getNodeByKey(e);!1!==n.selectable&&(i?i!==n.internalFields.item&&(this._dataAdapter.toggleSelection(e,!1),this._selectByItem(i)):this.option("selectedItem",n.internalFields.item))}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=Co()}_toggleActiveState(t,e,i){if(super._toggleActiveState.apply(this,arguments),!this._inkRipple)return;const n={element:t,event:i};e?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)}_getShowSubmenuMode(){let t=this.option("showSubmenuMode");return t=(0,s.Kn)(t)?t.name:t,this._isDesktopDevice()?t:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return"desktop"===tt.default.real().deviceType}_initEditStrategy(){const t=u_;this._editStrategy=new t(this)}_addCustomCssClass(t){t.addClass(this.option("cssClass"))}_itemWrapperSelector(){return".dx-menu-item-wrapper"}_hoverStartHandler(t){const e=this._getItemElementByEventArgs(t);e&&!this._isItemDisabled(e)&&(t.stopPropagation(),"onHover"===this._getShowSubmenuMode()&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,e),this._getSubmenuDelay("show"))))}_getAvailableItems(t){return super._getAvailableItems(t).filter((function(){return"hidden"!==(0,o.Z)(this).css("visibility")}))}_isItemDisabled(t){return this._disabledGetter(t.data(this._itemDataKey()))}_showSubmenu(t){this._addExpandedClass(t)}_addExpandedClass(t){(0,o.Z)(t).addClass(__)}_getSubmenuDelay(t){const{delay:e}=this.option("showSubmenuMode");return(0,s.$K)(e)?(0,s.Kn)(e)?e[t]:e:C_[t]}_getItemElementByEventArgs(t){let e=(0,o.Z)(t.target);if(e.hasClass(this._itemClass())||e.get(0)===t.currentTarget)return e;for(;!e.hasClass(this._itemClass());)if(e=e.parent(),e.hasClass("dx-submenu"))return null;return e}_hoverEndHandler(){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(t){return t&&t.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(t,e){if(!t.length)return;this.hasIcons=!1;const i=this._renderContainer(this.$element(),e);let n=-1,o=-1;(0,g.each)(t,((t,e)=>{const r=!1!==e.visible;r&&n<0&&(n=t),n<t&&(e.beginGroup||t===o)&&(o=r?t:t+1),t===o&&n<t&&this._renderSeparator(i),this._renderItem(t,e,i)})),this.hasIcons||i.addClass("dx-menu-no-icons")}_renderContainer(t){const e=(0,o.Z)("<ul>");return this.setAria("role","none",e),e.appendTo(t).addClass("dx-menu-items-container")}_createDOMElement(t){const e=(0,o.Z)("<li>");return this.setAria("role","none",e),e.appendTo(t).addClass(f_)}_renderItem(t,e,i,n){const o=this.option("items"),r=n||this._createDOMElement(i);o[t+1]&&o[t+1].beginGroup&&r.addClass("dx-menu-last-group-item");const s=super._renderItem(t,e.internalFields.item,r);e.internalFields.item===this.option("selectedItem")&&s.addClass(p_),s.attr("tabIndex",-1),this._hasSubmenu(e)&&this.setAria("haspopup","true",s)}_renderItemFrame(t,e,i){const n=i.children(`.${d_}`);return n.length?n:super._renderItemFrame.apply(this,arguments)}_refreshItem(t,e){const i=this._dataAdapter.getNodeByItem(e),n=t.data(this._itemIndexKey()),o=t.closest("ul"),r=t.closest("li");this._renderItem(n,i,o,r)}_addContentClasses(t,e){const i=!!t.text&&!!t.text.length,n=!!t.icon,o=!!t.items&&!!t.items.length;e.toggleClass(m_,i),e.toggleClass(g_,n),this.hasIcons||(this.hasIcons=n),e.toggleClass(v_,o)}_getItemContent(t){let e=super._getItemContent(t);return e.length||(e=t.children(`.${h_}`)),e}_postprocessRenderItem(t){const e=(0,o.Z)(t.itemElement),i=this._dataAdapter.getSelectedNodesKeys();i.length&&this._selectedGetter(t.itemData)&&this._isItemSelectable(t.itemData)&&this._dataAdapter.getNodeByItem(t.itemData).internalFields.key===i[0]?(e.addClass(this._selectedItemClass()),this._setAriaSelectionAttribute(e,"true")):this._setAriaSelectionAttribute(e,"false")}_isItemSelectable(t){return!1!==t.selectable}_renderSeparator(t){(0,o.Z)("<li>").appendTo(t).addClass("dx-menu-separator")}_itemClickHandler(t){if(t._skipHandling)return;const e=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(t,"onItemClick",{},{beforeExecute:this._itemClick,afterExecute:e.bind(this)}),t._skipHandling=!0}_itemClick(t){const{event:e,itemData:i}=t.args[0],n=this._getItemElementByEventArgs(e),o=n&&n.find(".dx-item-url").get(0);i.url&&o&&o.click()}_updateSubmenuVisibilityOnClick(t){this._updateSelectedItemOnClick(t),"onClick"===this._getShowSubmenuMode()&&this._addExpandedClass(t.args[0].itemElement)}_updateSelectedItemOnClick(t){const e=t.args?t.args[0]:t;if(!this._isItemSelectAllowed(e.itemData))return;const i=this._dataAdapter.getSelectedNodesKeys(),n=i.length&&this._dataAdapter.getNodeByKey(i[0]);n&&this._toggleItemSelection(n,!1),n&&n.internalFields.item===e.itemData?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(e.itemData)}_isItemSelectAllowed(t){const e=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&e&&this._isItemSelectable(t)&&!this._itemsGetter(t)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(0,l.asyncNoop)()}_optionChanged(t){switch(t.name){case"showSubmenuMode":break;case"selectedItem":{const e=this._dataAdapter.getNodeByItem(t.value),i=this._dataAdapter.getSelectedNodesKeys()[0];if(e&&e.internalFields.key!==i){if(!1===e.selectable)break;i&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(i),!1),this._toggleItemSelection(e,!0),this._updateSelectedItems()}break}case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(t)}}_toggleItemSelection(t,e){const i=this._getElementByItem(t.internalFields.item);i&&(0,o.Z)(i).toggleClass(p_),this._dataAdapter.toggleSelection(t.internalFields.key,e)}_getElementByItem(t){let e;return(0,g.each)(this._itemElements(),((i,n)=>(0,o.Z)(n).data(this._itemDataKey())!==t||(e=n,!1))),e}_updateSelectedItems(t,e){(t||e)&&this._fireSelectionChangeEvent(e,t)}_fireSelectionChangeEvent(t,e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[t],removedItems:[e]})}selectItem(t){const e=t.nodeType?this._getItemData(t):t,i=this._dataAdapter.getSelectedNodesKeys()[0],n=this.option("selectedItem"),o=this._dataAdapter.getNodeByItem(e);o.internalFields.key!==i&&(i&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(i),!1),this._toggleItemSelection(o,!0),this._updateSelectedItems(n,e),this._setOptionWithoutOptionChange("selectedItem",e))}unselectItem(t){const e=t.nodeType?this._getItemData(t):t,i=this._dataAdapter.getNodeByItem(e),n=this.option("selectedItem");i.internalFields.selected&&(this._toggleItemSelection(i,!1),this._updateSelectedItems(n,null),this._setOptionWithoutOptionChange("selectedItem",null))}}w_.ItemClass=Ft;const x_=w_,S_=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],I_=["up","down","first","last"],k_=(0,p.getWindow)();class E_ extends x_{getShowEvent(t){let e=null;return(0,s.Kn)(t)?null!==t.name&&(e=t.name||"dxcontextmenu"):e=t,e}getShowDelay(t){return(0,s.Kn)(t)&&t.delay}_getDefaultOptions(){return(0,r.l)(super._getDefaultOptions(),{showEvent:"dxcontextmenu",hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!(0,p.hasWindow)(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,r.l)(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},(0,g.each)(S_,((t,e)=>{this._actions[e]=this._createActionByOption(e)||l.noop}))}_setOptionsByReference(){super._setOptionsByReference(),(0,r.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():(0,o.Z)()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return(0,r.l)(super._supportedKeys(),{space:()=>{const t=(0,o.Z)(this.option("focusedElement"));this.hide(),t.length&&this._isSelectionEnabled()&&this.selectItem(t[0])},escape:this.hide})}_getActiveItem(){const t=this._getAvailableItems(),e=t.filter(".dx-state-focused"),i=t.filter(".dx-state-hover");return i.closest(".dx-menu-items-container").find(".dx-menu-item").index(e)>=0?e:i.length?i:super._getActiveItem()}_moveFocus(t){const e=this._getItemsByLocation(t),i=this._getActiveItem(!0),n=this.itemsContainer().find(".dx-state-hover"),r=!(!(0,o.Z)(this.option("focusedElement")).length&&!n.length);let s;switch(t){case"up":s=r?this._prevItem(e):i,this._setFocusedElement(s),i.is(e.first())&&this._actions.onLeftFirstItem(i);break;case"down":s=r?this._nextItem(e):i,this._setFocusedElement(s),i.is(e.last())&&this._actions.onLeftLastItem(i);break;case"right":s=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(e,t),this._setFocusedElement(s);break;case"left":s=this.option("rtlEnabled")?this._expandSubmenuHandler(e,t):this._hideSubmenuHandler(),this._setFocusedElement(s);break;case"first":s=e.first(),this._setFocusedElement(s);break;case"last":s=e.last(),this._setFocusedElement(s);break;default:return super._moveFocus(t)}}_setFocusedElement(t){t&&0!==t.length&&(this.option("focusedElement",(0,a.u)(t)),this._scrollToElement(t))}_scrollToElement(t){const e=t.closest(".dx-scrollable").dxScrollable("instance");null==e||e.scrollToElement(t)}_getItemsByLocation(t){const e=this._getActiveItem(!0);let i;return I_.includes(t)&&(i=e.closest(".dx-menu-items-container").children().children()),i=this._getAvailableItems(i),i}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if((0,s.$K)(this._overlay)){const t=this._overlay.$content();super._refreshActiveDescendant(t)}}_hideSubmenuHandler(){const t=this._getActiveItem(!0),e=t.parents(".dx-menu-item-expanded").first();if(e.length)return this._hideSubmenusOnSameLevel(e),this._hideSubmenu(t.closest(".dx-submenu")),e;this._actions.onCloseRootSubmenu(t)}_expandSubmenuHandler(t,e){const i=this._getActiveItem(!0),n=this._getItemData(i),o=this._dataAdapter.getNodeByItem(n),r=this._hasSubmenu(o),s=i.children(".dx-submenu");if(r&&!i.hasClass("dx-state-disabled"))return s.length&&"hidden"!==s.css("visibility")||this._showSubmenu(i),this._nextItem(this._getItemsByLocation(e));this._actions.onExpandLastSubmenu(i)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_isTargetOutOfComponent(t){return!(0!==(0,o.Z)(t).closest(".dx-context-menu").length)}_focusOutHandler(t){const{relatedTarget:e}=t;e&&this._isTargetOutOfComponent(e)&&this.hide(),super._focusOutHandler(t)}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(this._overlay)return;const t=this._getOverlayOptions();this._overlay=this._createComponent((0,o.Z)("<div>").appendTo(this._$element),R.Z,t);const e=this._overlay.$content();e.addClass("dx-context-menu"),this._addCustomCssClass(e),this._addPlatformDependentClass(e),this._attachContextMenuEvent()}preventShowingDefaultContextMenuAboveOverlay(){const t=this._itemContainer(),e=(0,f.addNamespace)(Xt,this.NAME);P.Z.off(t,e,".dx-submenu"),P.Z.on(t,e,".dx-submenu",(i=>{i.stopPropagation(),i.preventDefault(),P.Z.off(t,e,".dx-submenu")}).bind(this))}_itemContextMenuHandler(t){super._itemContextMenuHandler(t),t.stopPropagation()}_addPlatformDependentClass(t){tt.default.current().phone&&t.addClass("dx-menu-phone-overlay")}_detachShowContextMenuEvents(t){const e=this.getShowEvent(this.option("showEvent"));if(!e)return;const i=(0,f.addNamespace)(e,this.NAME);this._showContextMenuEventHandler?P.Z.off(Mt.Z.getDocument(),i,t,this._showContextMenuEventHandler):P.Z.off((0,o.Z)(t),i)}_attachShowContextMenuEvents(){const t=this._getTarget(),e=this.getShowEvent(this.option("showEvent"));if(!e)return;const i=(0,f.addNamespace)(e,this.NAME);let n=this._createAction((t=>{const e=this.getShowDelay(this.option("showEvent"));e?setTimeout((()=>this._show(t.event)),e):this._show(t.event)}),{validatingTargetName:"target"});const r=t=>n({event:t,target:(0,o.Z)(t.currentTarget)});n=this._createAction(n),(0,s.ZU)(t)||t.nodeType||(0,s.FJ)(t)?(this._showContextMenuEventHandler=void 0,P.Z.on(t,i,r)):(this._showContextMenuEventHandler=r,P.Z.on(Mt.Z.getDocument(),i,t,this._showContextMenuEventHandler))}_hoverEndHandler(t){super._hoverEndHandler(t),t.stopPropagation()}_renderDimensions(){}_renderContainer(t,e){const i=e||this._itemContainer();(t=(0,o.Z)("<div>")).appendTo(i).addClass("dx-submenu").css("visibility",e?"hidden":"visible"),t.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(t);const n=super._renderContainer(t);return e?n:this.option("width")?n.css("minWidth",this.option("width")):this.option("height")?n.css("minHeight",this.option("height")):n}_renderSubmenuItems(t,e){this._renderItems(this._getChildNodes(t),e);const i=e.children(".dx-submenu");this._actions.onSubmenuCreated({itemElement:(0,a.u)(e),itemData:t.internalFields.item,submenuElement:(0,a.u)(i)}),this._initScrollable(i),this.setAria({role:"menu"},i)}_getOverlayOptions(){const t=this.option("position");return{focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:t=>this._hideOnOutsideClickHandler(t),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:t.at,my:t.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:k_}}_overlayShownActionHandler(t){this._actions.onShown(t)}_overlayHidingActionHandler(t){this._actions.onHiding(t),t.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(t){this._actions.onHidden(t)}_shouldHideOnOutsideClick(t){const{closeOnOutsideClick:e,hideOnOutsideClick:i}=this.option();return(0,s.mf)(i)?i(t):(0,s.mf)(e)?e(t):i||e}_hideOnOutsideClickHandler(t){if(!this._shouldHideOnOutsideClick(t))return!1;if(Mt.Z.isDocument(t.target))return!0;const e=this._getActiveItemsContainer(t.target),i=this._getItemsContainers(),n=this._searchActiveItem(t.target),o=this.$element().parents(".dx-menu-item"),r=n[0]===o[0]&&n.length&&o.length;return!(this._isIncludeOverlay(e,i)&&n.length)&&!r||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus(n),!1)}_getActiveItemsContainer(t){return(0,o.Z)(t).closest(".dx-menu-items-container")}_getItemsContainers(){return this._overlay.$content().find(".dx-menu-items-container")}_searchActiveItem(t){return(0,o.Z)(t).closest(".dx-menu-item").eq(0)}_isIncludeOverlay(t,e){let i=!1;return(0,g.each)(e,((e,n)=>{t.is(n)&&!i&&(i=!0)})),i}_hideAllShownChildSubmenus(t){const e=t.find(".dx-submenu"),i=(0,r.l)([],this._shownSubmenus);e.length>0&&(0,g.each)(i,((e,i)=>{const n=this._searchActiveItem(i.context).parent();n.parent().is(t.parent().parent())&&!n.is(t.parent())&&this._hideSubmenu(i)}))}_initScrollable(t){this._createComponent(t,wu,{useKeyboard:!1,_onVisibilityChanged:t=>{t.scrollTo(0)}})}_setSubMenuHeight(t,e,i){const n=t.find(".dx-menu-items-container"),o=(0,M.zp)(n),r=this._getMaxHeight(e,!i),s=Math.min(o,r);t.css("height",i?s:"100%")}_getMaxHeight(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=(0,M.zp)(k_),n=(0,s.ZU)(t),o=Mt.Z.getDocument(),r=t.length&&t[0]===o;if(!n||r)return i;const a=t[0].getBoundingClientRect().top,l=(0,M.zp)(t);return(e?Math.max(a,i-a-l):Math.max(a+l,i-a))-10}_dimensionChanged(){this._shownSubmenus&&this._shownSubmenus.forEach((t=>{const e=t.closest(".dx-menu-item");this._setSubMenuHeight(t,e,!0),this._scrollToElement(e);const i=this._getSubmenuPosition(e);La.Z.setup(t,i)}))}_getSubmenuBorderWidth(){return(0,At.yj)((0,At.Vk)())?0:1}_showSubmenu(t){const e=this._dataAdapter.getNodeByItem(this._getItemData(t));if(this._hideSubmenusOnSameLevel(t),!this._hasSubmenu(e))return;let i=t.children(".dx-submenu");const n=i.length;super._showSubmenu(t),n||(this._renderSubmenuItems(e,t),i=t.children(".dx-submenu")),this._setSubMenuHeight(i,t,!0),this._isSubmenuVisible(i)||this._drawSubmenu(t)}_hideSubmenusOnSameLevel(t){const e=t.parent(".dx-menu-item-wrapper").siblings().find(".dx-menu-item-expanded");e.length&&(e.removeClass("dx-menu-item-expanded"),this._hideSubmenu(e.find(".dx-submenu")))}_hideSubmenuGroup(t){this._isSubmenuVisible(t)&&this._hideSubmenuCore(t)}_isSubmenuVisible(t){return"visible"===t.css("visibility")}_drawSubmenu(t){const e=this.option("animation")?this.option("animation").show:{},i=t.children(".dx-submenu"),n=this._getSubmenuPosition(t);this._overlay&&this._overlay.option("visible")&&((0,s.$K)(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(i)||this._shownSubmenus.push(i),e&&Se.default.stop(i),La.Z.setup(i,n),e&&((0,s.PO)(e.to)&&(e.to.position=n),this._animate(i,e)),i.css("visibility","visible"))}_animate(t,e){Se.default.animate(t,e)}_getSubmenuPosition(t){const e=this.option("submenuDirection").toLowerCase(),i={collision:"flip",of:t.parent(".dx-menu-item-wrapper"),offset:{h:0,v:-1}};switch(e){case"left":i.at="left top",i.my="right top";break;case"right":i.at="right top",i.my="left top";break;default:this.option("rtlEnabled")?(i.at="left top",i.my="right top"):(i.at="right top",i.my="left top")}return i}_updateSubmenuVisibilityOnClick(t){if(!t.args.length)return;const e=t.args[0].itemData,i=this._dataAdapter.getNodeByItem(e);if(!i)return;const n=(0,o.Z)(t.args[0].itemElement);let r=n.find(".dx-submenu");if(this._hasSubmenu(i)&&!r.length&&(this._renderSubmenuItems(i,n),r=n.find(".dx-submenu")),n.context===r.context&&"visible"===r.css("visibility"))return;this._updateSelectedItemOnClick(t);const s=e&&!1===e.closeMenuOnClick;if(e&&!e.disabled&&!s)if(0===r.length){const e=(0,o.Z)(n.parents(".dx-submenu")[0]);this._hideSubmenu(e),!t.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(r)&&this._hideSubmenu(r),this._showSubmenu(n)}_hideSubmenu(t){const e=(0,r.l)([],this._shownSubmenus);(0,g.each)(e,((e,i)=>{(t.is(i)||(0,L.contains)(t[0],i[0]))&&(i.parent().removeClass("dx-menu-item-expanded"),this._hideSubmenuCore(i))}))}_hideSubmenuCore(t){const e=this._shownSubmenus.indexOf(t),i=this.option("animation")?this.option("animation").hide:null;e>=0&&this._shownSubmenus.splice(e,1),this._stopAnimate(t),i&&this._animate(t,i),t.css("visibility","hidden"),t.dxScrollable("instance").scrollTo(0),this.option("focusedElement",null)}_stopAnimate(t){Se.default.stop(t,!0)}_hideAllShownSubmenus(){const t=(0,r.l)([],this._shownSubmenus);this._overlay.$content().find(".dx-menu-item-expanded").removeClass("dx-menu-item-expanded"),(0,g.each)(t,((t,e)=>{this._hideSubmenu(e)}))}_visibilityChanged(t){t&&this._renderContentImpl()}_optionChanged(t){if(S_.includes(t.name))this._initActions();else switch(t.name){case"visible":this._renderVisibility(t.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":t.previousValue&&this._detachShowContextMenuEvents(t.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(t)}}_renderVisibility(t){return t?this._show():this._hide()}_toggleVisibility(){}_show(t){const e={jQEvent:t};let i=(new w.BH).reject().promise();if(this._actions.onShowing(e),e.cancel)return i;const n=this._positionContextMenu(t);if(n){var r;this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes()));const e=(0,o.Z)(this._overlay.content()).children(".dx-submenu");this._setOptionWithoutOptionChange("visible",!0),this._overlay.option({height:()=>this._getMaxHeight(n.of),maxHeight:()=>{const t=e.find(".dx-menu-items-container"),i=this._getSubmenuBorderWidth();return(0,M.zp)(t)+2*i},position:n}),e.length&&this._setSubMenuHeight(e,n.of,!1),i=this._overlay.show(),t&&t.stopPropagation(),this._setAriaAttributes(),(null==t||null===(r=t.originalEvent)||void 0===r?void 0:r.type)===zt&&this.preventShowingDefaultContextMenuAboveOverlay()}return i}_renderItems(t,e){super._renderItems(t,e);const i=(0,o.Z)(this._overlay.content()).children(".dx-submenu");i.length&&this._initScrollable(i)}_setAriaAttributes(){this._overlayContentId=`dx-${new H.Z}`,this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||(0,o.Z)(Mt.Z.getDocument())}_getContextMenuPosition(){return(0,r.l)({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(t){let e=this._getContextMenuPosition();const i=this._isInitialOptionValue("position"),n=this._createActionByOption("onPositioning");t&&t.preventDefault&&i&&(e.of=t);const o={position:e,event:t};return n(o),o.cancel?e=null:o.event&&(o.event.cancel=!0,t.preventDefault()),e}_refresh(){if((0,p.hasWindow)())if(this._overlay){const t=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",t)}else super._refresh();else super._refresh()}_hide(){let t;return this._overlay&&(t=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),t||(new w.BH).reject().promise()}toggle(t){const e=this.option("visible");return t=void 0===t?!e:t,this._renderVisibility(t)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}(0,c.default)("dxContextMenu",E_);const O_=E_,T_=(0,f.addNamespace)("dxcontextmenu","dxHtmlEditorTableContextMenu");let D_=Bt;const B_=t=>C.Z.format(`dxHtmlEditor-${(0,_o.camelize)(t)}`);mt()&&(D_=class extends Bt{constructor(t,e){super(t,e),this.enabled=!!e.enabled,this._quillContainer=this.editorInstance._getQuillContainer(),this.addCleanCallback(this.prepareCleanCallback()),this._formatHandlers=bf(this),this._tableFormats=nu(t),this.enabled&&this._enableContextMenu(e.items)}_enableContextMenu(t){var e;null===(e=this._contextMenu)||void 0===e||e.dispose(),this._contextMenu=this._createContextMenu(t),this._attachEvents()}_attachEvents(){P.Z.on(this.editorInstance._getContent(),T_,this._prepareContextMenuHandler())}_detachEvents(){P.Z.off(this.editorInstance._getContent(),T_)}_createContextMenu(t){const e=(0,o.Z)("<div>").appendTo(this.editorInstance.$element()),i=this._getMenuConfig(t);return this.editorInstance._createComponent(e,O_,i)}showPropertiesForm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cell";const e=(0,o.Z)(this._targetElement).closest("cell"===t?"th, td":"table");this._contextMenu.hide(),this._formatHandlers[`${t}Properties`](e),this._targetElement=null}_isAcceptableItem(t,e){return!t||t===e}_handleObjectItem(t){if(t.name&&this._isAcceptableItem(t.widget,"dxButton")){const e=this._prepareMenuItemConfig(t.name);return(0,r.l)(!0,e,t)}return t.items?(t.items=this._prepareMenuItems(t.items),t):t}_prepareMenuItemConfig(t){const e=vf[t]??t,i=(0,_o.titleize)(t);return{text:B_(i),icon:e.toLowerCase(),onClick:this._formatHandlers[t]??Df(this,t)}}_prepareMenuItems(t){const e=[];return(0,g.each)(t,((t,i)=>{let n;(0,s.Kn)(i)?n=this._handleObjectItem(i):(0,s.HD)(i)&&(n=this._prepareMenuItemConfig(i)),n&&e.push(n)})),e}_getMenuConfig(t){const e=[{text:B_("insert"),items:["insertHeaderRow","insertRowAbove","insertRowBelow",(0,r.l)(this._prepareMenuItemConfig("insertColumnLeft"),{beginGroup:!0}),"insertColumnRight"]},{text:B_("delete"),items:["deleteColumn","deleteRow","deleteTable"]},(0,r.l)(this._prepareMenuItemConfig("cellProperties"),{onClick:t=>{this.showPropertiesForm("cell")}}),(0,r.l)(this._prepareMenuItemConfig("tableProperties"),{onClick:t=>{this.showPropertiesForm("table")}})],i=this._prepareMenuItems(null!=t&&t.length?t:e);return{target:this._quillContainer,showEvent:null,hideOnParentScroll:!1,items:i}}_prepareContextMenuHandler(){return t=>{this._isTableTarget(t.target)&&(this._targetElement=t.target,this._setContextMenuPosition(t),this._contextMenu.show(),t.preventDefault())}}_setContextMenuPosition(t){const e=this._quillContainer.get(0).getBoundingClientRect();this._contextMenu.option({position:{my:"left top",at:"left top",collision:"fit fit",offset:{x:t.clientX-e.left,y:t.clientY-e.top}}})}_isTableTarget(t){return!!(0,o.Z)(t).closest(".dx-htmleditor-content td, .dx-htmleditor-content th").length}clean(){this._detachEvents()}option(t,e){if("tableContextMenu"!==t){if("enabled"===t)this.enabled=e,e?this._enableContextMenu():this.clean();else if("items"===t){var i;null===(i=this._contextMenu)||void 0===i||i.dispose(),this._contextMenu=this._createContextMenu(e)}}else this.handleOptionChangeValue(e)}prepareCleanCallback(){return()=>{this.clean()}}});const A_=D_,P_="dxHtmlEditorImageUpload";let M_=Bt;mt()&&(M_=class extends Bt{constructor(t,e){super(t,e),this.options=e,this._quillContainer=this.editorInstance._getQuillContainer(),this.addCleanCallback(this.prepareCleanCallback()),this._handleServerUpload()}_handleServerUpload(){(0,s.$K)(this.options.fileUploadMode)&&"base64"!==this.options.fileUploadMode?this._enableDragAndDropUploading():this._disableDragAndDropUploading()}_getUploaderModule(){return this._uploaderModule||(this._uploaderModule=this.quill.getModule("uploader")),this._uploaderModule}_disableDragAndDropUploading(){var t;this._getUploaderModule().preventImageUploading(!1),this._detachEvents(),null===(t=this._fileUploader)||void 0===t||t.dispose()}_enableDragAndDropUploading(){this._initFileUploader(),this._getUploaderModule().preventImageUploading(!0),this._attachEvents()}_initFileUploader(){const t=(0,o.Z)("<div>").addClass("dx-htmleditor-hidden-content").appendTo(this._quillContainer),e=(0,r.l)({},{value:[],name:"dx-htmleditor-image",accept:"image/*",uploadMode:"useButtons"},{uploadUrl:this.options.uploadUrl,onUploaded:this._onUploaded.bind(this)},this.options.fileUploaderOptions);return this._fileUploader=this.editorInstance._createComponent(t,jp,e),t}_onUploaded(t){const{index:e}=this.quill.getSelection()??{index:this.quill.getLength()};nf(this.options.uploadDirectory,t.file.name,this.quill,e)}_attachEvents(){P.Z.on(this.quill.root,(0,f.addNamespace)("drop",P_),this._dropHandler.bind(this)),P.Z.on(this.quill.root,(0,f.addNamespace)("paste",P_),this._pasteHandler.bind(this))}_detachEvents(){P.Z.off(this.quill.root,P_)}_dropHandler(t){this._handleInsertImages(t,"dataTransfer")}_pasteHandler(t){this._handleInsertImages(t,"clipboardData")}_handleInsertImages(t,e){this.saveValueChangeEvent(t);const i=Array.from(t.originalEvent[e].files||[]);i.length&&(t.preventDefault(),t.stopPropagation(),this._fileUploader.option("value",i),this._fileUploader.upload())}clean(){this._disableDragAndDropUploading()}prepareCleanCallback(){return()=>{this.clean()}}option(t,e){switch(t){case"imageUpload":this.handleOptionChangeValue(e);break;case"fileUploadMode":this.options.fileUploadMode=e,this._handleServerUpload();break;case"fileUploaderOptions":this._fileUploader.option(e)}}});const R_=M_,N_=(0,f.addNamespace)("dxclick","dxHtmlEditorImageCursor");let $_=Bt;mt()&&($_=class extends Bt{constructor(t,e){super(t,e),this.addCleanCallback(this.clean.bind(this)),this._attachEvents()}_attachEvents(){P.Z.on(this.quill.root,N_,this._clickHandler.bind(this))}_detachEvents(){P.Z.off(this.quill.root,N_)}_clickHandler(t){this._isAllowedTarget(t.target)&&this._adjustSelection(t)}_isAllowedTarget(t){return this._isImage(t)}_isImage(t){return"IMG"===t.tagName.toUpperCase()}_adjustSelection(t){const e=this.quill.scroll.find(t.target);if(e){const t=e.offset(this.quill.scroll);this.quill.setSelection(t+1,0)}else this.quill.setSelection(0,0)}clean(){this._detachEvents()}});const V_=$_;class F_{constructor(){this._storage={}}set(t,e){var i;let{editorKey:n,marker:o}=t;(i=this._storage)[n]??(i[n]={}),this._storage[n][o]=e}get(t){var e,i;let{editorKey:n,marker:o}=t;return(0,s.$K)(n)?null===(i=this._storage[n])||void 0===i?void 0:i[o]:null===(e=Object.values(this._storage).at(-1))||void 0===e?void 0:e[o]}delete(t){let{editorKey:e,marker:i}=t;this._storage[e]&&(delete this._storage[e][i],(0,s.Qr)(this._storage[e])&&delete this._storage[e])}}let Z_={};if(mt()){const t=mt().import("blots/embed"),e="dx-mention";Z_=class e extends t{constructor(t,i){super(t,i),this.renderContent(this.contentNode,e.value(i))}static create(t){const e=super.create();return e.setAttribute("spellcheck",!1),e.dataset.marker=t.marker,e.dataset.mentionValue=t.value,e.dataset.id=t.id,e}static value(t){return{marker:t.dataset.marker,id:t.dataset.id,value:t.dataset.mentionValue}}renderContent(t,i){const n=e._templatesStorage.get({editorKey:i.keyInTemplateStorage,marker:i.marker});n?n.render({model:i,container:t}):this.baseContentRender(t,i)}baseContentRender(t,e){const i=(0,o.Z)("<span>").text(e.marker);(0,o.Z)(t).append(i).append(e.value)}static addTemplate(t,e){this._templatesStorage.set(t,e)}static removeTemplate(t){this._templatesStorage.delete(t)}},Z_.blotName="mention",Z_.tagName="span",Z_.className=e,Z_._templatesStorage=new F_}const H_=Z_;let L_=Bt;if(mt()){const t="user",e="@",i={ARROW_UP:"upArrow",ARROW_DOWN:"downArrow",ARROW_LEFT:"leftArrow",ARROW_RIGHT:"rightArrow",ENTER:"enter",ESCAPE:"escape",SPACE:"space",PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",END:"end",HOME:"home"},n=[i.ARROW_LEFT,i.ARROW_RIGHT,i.PAGE_UP,i.PAGE_DOWN,i.END,i.HOME],l=[" ","\n"],c="dx-state-disabled";mt().register({"formats/mention":H_},!0),L_=class extends Ff{_getDefaultOptions(){const t=super._getDefaultOptions();return(0,r.l)(t,{itemTemplate:"item",valueExpr:"this",displayExpr:"this",template:null,searchExpr:null,searchTimeout:500,minSearchLength:0})}constructor(t,i){super(t,i),this._mentions={},i.mentions.forEach((t=>{let i=t.marker;i||(t.marker=i=e);const n=t.template;if(n){const t=this.editorInstance._getTemplate(n);t&&H_.addTemplate({marker:i,editorKey:this.editorInstance.getMentionKeyInTemplateStorage()},t)}this._mentions[i]=(0,r.l)({},this._getDefaultOptions(),t)})),this._attachKeyboardHandlers(),this.addCleanCallback(this.clean.bind(this)),this.quill.on("text-change",this.onTextChange.bind(this))}_attachKeyboardHandlers(){this.quill.keyboard.addBinding({key:i.ARROW_UP},this._moveToItem.bind(this,"prev")),this.quill.keyboard.addBinding({key:i.ARROW_DOWN},this._moveToItem.bind(this,"next")),this.quill.keyboard.addBinding({key:[i.ENTER,i.SPACE]},this._selectItemHandler.bind(this));const t=this.quill.keyboard.bindings[i.ENTER];t.unshift(t.pop()),this.quill.keyboard.addBinding({key:i.ESCAPE},this._escapeKeyHandler.bind(this)),this.quill.keyboard.addBinding({key:[i.ARROW_LEFT,i.ARROW_RIGHT],shiftKey:!0},this._ignoreKeyHandler.bind(this)),this.quill.keyboard.addBinding({key:n},this._ignoreKeyHandler.bind(this))}_moveToItem(t){const e=this._list.getDataSource();if(this._isMentionActive&&!e.isLoading()){const e="next"===t?"first":"last";let i=(0,o.Z)(this._list.option("focusedElement"))[t]();i=i.length?i:this._activeListItems[e](),this._list.option("focusedElement",(0,a.u)(i)),this._list.scrollToItem(i)}return!this._isMentionActive}_ignoreKeyHandler(){return!this._isMentionActive}_fitIntoRange(t,e,i){return t>i?e:t<e?i:t}_selectItemHandler(){return this._isMentionActive&&(this._list.option("items").length?this._list.selectItem(this._list.option("focusedElement")):this._popup.hide()),!this._isMentionActive}_escapeKeyHandler(){return this._isMentionActive&&this._popup.hide(),!this._isMentionActive}renderList(t,e){this.compileGetters(this.options),super.renderList(t,e)}compileGetters(t){let{displayExpr:e,valueExpr:i}=t;this._valueGetter=(0,Wt.vb)(e),this._idGetter=(0,Wt.vb)(i)}_getListConfig(t){const e=super._getListConfig(t);return(0,r.l)(e,{itemTemplate:this.options.itemTemplate,onContentReady:()=>{this._hasSearch&&(this._popup.repaint(),this._focusFirstElement(),this._hasSearch=!1)}})}insertEmbedContent(){const t=this._activeMentionConfig.marker.length,e=t+this._searchValue.length,i=this.getPosition(),n=this._list.option("selectedItem"),o={value:this._valueGetter(n),id:this._idGetter(n),marker:this._activeMentionConfig.marker,keyInTemplateStorage:this.editorInstance.getMentionKeyInTemplateStorage()},r=mt().import("delta"),s=Math.max(0,i-t),a=(new r).retain(s).delete(e).insert({mention:o}).insert(" ");this.quill.updateContents(a),this.quill.setSelection(s+2)}_getLastInsertOperation(t){const e=t[t.length-1];if("insert"in e)return e;const i="delete"in e;if(i&&t.length>=2){const e=t[t.length-2];if(i&&"insert"in e)return e}return null}onTextChange(e,i,n){if(n===t){const t=e.ops[e.ops.length-1];if(this._isMentionActive&&this._isPopupVisible)this._processSearchValue(t)&&this._filterList(this._searchValue);else{const{ops:t}=e,i=this._getLastInsertOperation(t);i&&this.checkMentionRequest(i,t)}}}get _isPopupVisible(){var t;return null===(t=this._popup)||void 0===t?void 0:t.option("visible")}_processSearchValue(t){if("insert"in t)this._searchValue+=t.insert;else{if(!this._searchValue.length||t.delete>1)return this._popup.hide(),!1;this._searchValue=this._searchValue.slice(0,-1)}return!0}checkMentionRequest(t,e){let{insert:i}=t;const n=this.quill.getSelection();if(i&&(0,s.HD)(i)&&n&&!this._isMarkerPartOfText(e[0].retain)&&(this._activeMentionConfig=this._mentions[i],this._activeMentionConfig)){this._updateList(this._activeMentionConfig);const t=n.index&&"\n"===this._getCharByIndex(n.index-1);this.savePosition(n.index+t),this._popup.option("position",this._popupPosition),this._searchValue="",this._popup.show()}}_isMarkerPartOfText(t){return!(!t||-1!==l.indexOf(this._getCharByIndex(t-1)))}_getCharByIndex(t){return this.quill.getContents(t,1).ops[0].insert}_updateList(t){let{dataSource:e,displayExpr:i,valueExpr:n,itemTemplate:o,searchExpr:r}=t;this.compileGetters({displayExpr:i,valueExpr:n}),this._list.unselectAll(),this._list.option({dataSource:e,displayExpr:i,itemTemplate:o,searchExpr:r})}_filterList(t){if(!this._isMinSearchLengthExceeded(t))return void this._resetFilter();const e=this._activeMentionConfig.searchTimeout;e?(clearTimeout(this._searchTimer),this._searchTimer=setTimeout((()=>{this._search(t)}),e)):this._search(t)}_isMinSearchLengthExceeded(t){return t.length>=this._activeMentionConfig.minSearchLength}_resetFilter(){clearTimeout(this._searchTimer),this._search(null)}_search(t){this._hasSearch=!0,this._list.option("searchValue",t)}_focusFirstElement(){if(!this._list)return;const t=this._activeListItems.first();this._list.option("focusedElement",(0,a.u)(t)),this._list.scrollToItem(t)}_toggleActiveDescendant(t){if(t){const t=this._list.getFocusedItemId();this.quill.root.setAttribute("aria-activedescendant",t)}else this.quill.root.removeAttribute("aria-activedescendant")}get _popupPosition(){const t=this.getPosition(),{left:e,top:i,height:n}=this.quill.getBounds(t?t-1:t),{left:r,top:s}=(0,o.Z)(this.quill.root).offset();return{of:P.Z.Event("positionEvent",{pageX:r+e,pageY:s+i}),offset:{v:n},my:"top left",at:"top left",collision:{y:"flip",x:"flipfit"}}}_getPopupConfig(){return(0,r.l)(super._getPopupConfig(),{hideOnParentScroll:!1,onShown:()=>{this._toggleActiveDescendant(!0),this._isMentionActive=!0,this._hasSearch=!1,this._focusFirstElement()},onHidden:()=>{this._toggleActiveDescendant(!1),this._list.unselectAll(),this._list.option("focusedElement",null),this._isMentionActive=!1,this._search(null)},focusStateEnabled:!1})}get _activeListItems(){return this._list.itemElements().filter(`:not(.${c})`)}clean(){Object.keys(this._mentions).forEach((t=>{this._mentions[t].template&&H_.removeTemplate({marker:t,editorKey:this.editorInstance.getMentionKeyInTemplateStorage()})}))}}}const j_=L_;class z_{constructor(){if(z_.initialized)return;const t=this.getQuill(),e=t.import("attributors/style/direction");t.register({"formats/align":Tt,"formats/direction":e,"formats/font":It,"formats/size":Et,"formats/extendedImage":Ct,"formats/link":xt,"modules/toolbar":Rf,"modules/dropImage":$f,"modules/variables":jf,"modules/resizing":Uf,"modules/tableResizing":e_,"modules/tableContextMenu":A_,"modules/imageUpload":R_,"modules/imageCursor":V_,"modules/mentions":j_,"themes/basic":bt},!0),this._customModules=[],z_._initialized=!0}createEditor(t,e){return new(this.getQuill())(t,e)}registerModules(t){const e=RegExp("modules/*"),i=this.getQuill(),n=t=>!!i.imports[t];for(const i in t)e.test(i)&&!n(i)&&this._customModules.push(i.slice(8));i.register(t,!0)}getRegisteredModuleNames(){return this._customModules}getQuill(){return gt()}}const W_=z_;var K_=i(6239);K_.Z.addConverter("delta",class{setQuillInstance(t){this.quillInstance=t}toHtml(){if(this.quillInstance)return this._isQuillEmpty()?"":this.quillInstance.getSemanticHTML(0,this.quillInstance.getLength()+1)}_isQuillEmpty(){const t=this.quillInstance.getContents();return 1===t.length()&&this._isDeltaEmpty(t)}_isDeltaEmpty(t){return t.reduce(((t,e)=>{let{insert:i}=e;return-1!==i.indexOf("\n")}))}});const q_="dx-formdialog",U_=class{constructor(t,e){this._editorInstance=t,this._popupUserConfig=e,this._renderPopup(),this._attachOptionChangedHandler()}_renderPopup(){const t=this._editorInstance,e=(0,o.Z)("<div>").addClass(q_).appendTo(t.$element()),i=this._getPopupConfig();return t._createComponent(e,Ws,i)}_attachOptionChangedHandler(){var t;null===(t=this._popup)||void 0===t||t.on("optionChanged",(t=>{let{name:e,value:i}=t;"title"===e&&this._updateFormLabel(i)}))}_escKeyHandler(){this._popup.hide()}_addEscapeHandler(t){t.component.registerKeyHandler("escape",this._escKeyHandler.bind(this))}_isSmallScreen(){const t=(0,p.hasWindow)()?(0,p.getCurrentScreenFactor)():null;return"phone"===tt.default.real().deviceType||"xs"===t}_getPopupConfig(){return(0,r.l)({onInitialized:t=>{this._popup=t.component,this._popup.on("hiding",(()=>this.onHiding())),this._popup.on("shown",(()=>{this._form.focus()}))},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,fullScreen:this._isSmallScreen(),contentTemplate:t=>{const e=(0,o.Z)("<div>").appendTo(t);this._renderForm(e,{onEditorEnterKey:t=>this.callAddButtonAction(t.event),customizeItem:t=>{"simple"===t.itemType&&(t.editorOptions=(0,r.l)(!0,{},t.editorOptions,{onInitialized:this._addEscapeHandler.bind(this)}))}})},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:(0,n.Z)({onInitialized:this._addEscapeHandler.bind(this),text:C.Z.format("OK"),onClick:t=>this.callAddButtonAction(t.event)},(0,At.dC)()?{stylingMode:"contained",type:"default"}:{})},{toolbar:"bottom",location:"after",widget:"dxButton",options:(0,n.Z)({onInitialized:this._addEscapeHandler.bind(this),text:C.Z.format("Cancel"),onClick:()=>{this._popup.hide()}},(0,At.dC)()?{stylingMode:"outlined",type:"normal"}:{})}],_wrapperClassExternal:`${q_} dx-dropdowneditor-overlay`},this._popupUserConfig)}onHiding(){this.beforeAddButtonAction=void 0,this.deferred.reject()}callAddButtonAction(t){this.beforeAddButtonAction&&!this.beforeAddButtonAction()||this.hide(this._form.option("formData"),t)}_renderForm(t,e){t.addClass("dx-formdialog-form"),this._form=this._editorInstance._createComponent(t,gp,e),this._updateFormLabel()}_updateFormLabel(t){var e;const i=t??this.popupOption("title");null===(e=this._form)||void 0===e||e.$element().attr("aria-label",i)}_getDefaultFormOptions(){return{colCount:1,width:"auto",labelLocation:(0,At.yj)()?"top":"left"}}formOption(t,e){return this._form.option.apply(this._form,arguments)}show(t){if(this._popup.option("visible"))return;this.deferred=new w.BH;const e=(0,r.l)(this._getDefaultFormOptions(),t);return this._form.option(e),this._popup.show(),this.deferred.promise()}hide(t,e){this.deferred.resolve(t,e),this._popup.hide()}popupOption(t,e){return this._popup.option.apply(this._popup,arguments)}},G_="ios"===tt.default.current().platform;let Y_=0;const Q_=U.inherit({_getDefaultOptions:function(){return(0,r.l)(this.callBase(),{focusStateEnabled:!0,valueType:"html",placeholder:"",toolbar:null,variables:null,mediaResizing:null,tableResizing:null,mentions:null,customizeModules:null,tableContextMenu:null,allowSoftLineBreak:!1,formDialogOptions:null,imageUpload:null,stylingMode:(0,zo.default)().editorStylingMode||"outlined"})},_init:function(){this._mentionKeyInTemplateStorage=Y_++,this.callBase(),this._cleanCallback=(0,h.Z)(),this._contentInitializedCallback=(0,h.Z)()},_getAnonymousTemplateName:function(){return"htmlContent"},_initTemplates:function(){this._templateManager.addDefaultTemplates({htmlContent:new u.s}),this.callBase()},_focusTarget:function(){return this._getContent()},_getContent:function(){return this.$element().find(".dx-htmleditor-content")},_focusInHandler:function(t){let{relatedTarget:e}=t;this._shouldSkipFocusEvent(e)||(this._toggleFocusClass(!0,this.$element()),this.callBase.apply(this,arguments))},_focusOutHandler:function(t){let{relatedTarget:e}=t;this._shouldSkipFocusEvent(e)||(this._toggleFocusClass(!1,this.$element()),this.callBase.apply(this,arguments))},_shouldSkipFocusEvent:function(t){return(0,o.Z)(t).hasClass("ql-clipboard")},_initMarkup:function(){this._$htmlContainer=(0,o.Z)("<div>").addClass("dx-quill-container"),this.$element().attr("role","application").addClass("dx-htmleditor").wrapInner(this._$htmlContainer),this._renderStylingMode();const t=this._getTemplate("htmlContent");this._$templateResult=t&&t.render({container:(0,a.u)(this._$htmlContainer),noModel:!0,transclude:!0}),this._renderSubmitElement(),this.callBase(),this._updateContainerMarkup()},_renderValidationState(){1===this._getContent().length&&this.callBase()},_renderSubmitElement:function(){this._$submitElement=(0,o.Z)("<textarea>").addClass("dx-htmleditor-submit-element").attr("hidden",!0).appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(t){this._getSubmitElement().val(t)},_getSubmitElement:function(){return this._$submitElement},_createNoScriptFrame:function(){return(0,o.Z)("<iframe>").css("display","none").attr({srcdoc:"",id:"xss-frame",sandbox:"allow-same-origin"})},_removeXSSVulnerableHtml:function(t){const e=this._createNoScriptFrame().appendTo("body"),i=e.get(0).contentWindow.document.body,n=gt().replaceStyleAttribute(t);i.innerHTML=n;const o=t=>{if(t.attributes)for(let e=0;e<t.attributes.length;e++){const i=t.attributes[e].name;i.startsWith("on")&&t.removeAttribute(i)}if(t.childNodes)for(let e=0;e<t.childNodes.length;e++)o(t.childNodes[e])};o(i),i.querySelectorAll("script").forEach((t=>{t.remove()}));const r=i.innerHTML;return e.remove(),r},_updateContainerMarkup:function(){let t=this.option("value");if(this._isMarkdownValue()&&(this._prepareMarkdownConverter(),t=this._markdownConverter.toHtml(t)),t){const e=this._removeXSSVulnerableHtml(t);this._$htmlContainer.html(e)}},_prepareMarkdownConverter:function(){const t=K_.Z.getConverter("markdown");if(!t)throw G.Z.Error("E1051","markdown");this._markdownConverter=new t},_render:function(){this._prepareConverters(),this.callBase()},_prepareQuillRegistrator:function(){this._quillRegistrator||(this._quillRegistrator=new W_)},_getRegistrator:function(){return this._prepareQuillRegistrator(),this._quillRegistrator},_prepareConverters:function(){if(!this._deltaConverter){const t=K_.Z.getConverter("delta");t&&(this._deltaConverter=new t)}"markdown"!==this.option("valueType")||this._markdownConverter||this._prepareMarkdownConverter()},_renderContentImpl:function(){this._contentRenderedDeferred=new w.BH;const t=this._contentRenderedDeferred.promise();return this.callBase(),this._renderHtmlEditor(),this._renderFormDialog(),this._addKeyPressHandler(),t},_pointerMoveHandler:function(t){G_&&t.stopPropagation()},_attachFocusEvents:function(){(0,l.deferRender)(this.callBase.bind(this))},_addKeyPressHandler:function(){const t=(0,f.addNamespace)("keydown",`${this.NAME}TextChange`);P.Z.on(this._$htmlContainer,t,this._keyDownHandler.bind(this))},_keyDownHandler:function(t){this._saveValueChangeEvent(t)},_renderHtmlEditor:function(){const t=this.option("customizeModules"),e=this._getModulesConfig();(0,s.mf)(t)&&t(e),this._quillInstance=this._getRegistrator().createEditor(this._$htmlContainer[0],{placeholder:this.option("placeholder"),readOnly:this.option("readOnly")||this.option("disabled"),modules:e,theme:"basic"}),this._renderValidationState(),this._deltaConverter.setQuillInstance(this._quillInstance),this._textChangeHandlerWithContext=this._textChangeHandler.bind(this),this._quillInstance.on("text-change",this._textChangeHandlerWithContext),this._renderScrollHandler(),this._hasTranscludedContent()?this._updateContentTask=(0,l.executeAsync)((()=>{this._applyTranscludedContent()})):this._finalizeContentRendering()},_renderScrollHandler:function(){const t=this._getContent(),e=function(t,e){const i=(0,o.Z)(t);return{validate:function(n){if((0,f.isDxMouseWheelEvent)(n)&&(r=n.target,!e||(0,o.Z)(r).is(t)))return!!function(t,e,i){const n=(0,o.Z)(t),r=i?n.scrollLeft():n.scrollTop(),s=i?"Width":"Height",a=n.prop(`scroll${s}`)-n.prop(`client${s}`)-r|0;return(0!==r||0!==a)&&(!!(0===r&&e>=0||0===a&&e<=0||r>0&&a>0)||void 0)}(i,-n.delta,n.shiftKey)&&(n._needSkipEvent=!0,!0);var r}}}(t);P.Z.on(t,(0,f.addNamespace)(lt,this.NAME),e,l.noop),P.Z.on(t,(0,f.addNamespace)(ft.Z.move,this.NAME),this._pointerMoveHandler.bind(this))},_applyTranscludedContent:function(){const t=this.option("value");if(!(0,s.$K)(t)){const t=this._deltaConverter.toHtml(),e=this._quillInstance.clipboard.convert({html:t});if(e.ops.length)return void this._quillInstance.setContents(e)}this._finalizeContentRendering()},_hasTranscludedContent:function(){return this._$templateResult&&this._$templateResult.length},_getModulesConfig:function(){const t=(t=>{const e=t.import("delta"),i=t.MS_LIST_DATA_KEY;return(t,n)=>{const o=n.ops.slice(),r=o[0];r.insert=r.insert.replace(/^\s+/,"");const s=r.insert.match(/^(\S+)\s+/),a=s&&function(t,e){const i=t.getAttribute(e);if(i){const t=i.replace(/\n+/g,"").match(/level(\d+)/);return t?t[1]-1:0}return!1}(t,i);return s&&!1!==a?(r.insert=r.insert.substring(s[0].length,r.insert.length),function(t){const e=t[t.length-1];e.insert=e.insert.trim()}(o),o.push({insert:"\n",attributes:{list:(l=s,l[1].match(/\S+\./)?"ordered":"bullet"),indent:a}}),new e(o)):n;var l}})(this._getRegistrator().getQuill());return(0,r.l)({},{table:!0,toolbar:this._getModuleConfigByOption("toolbar"),variables:this._getModuleConfigByOption("variables"),resizing:this._getModuleConfigByOption("mediaResizing"),tableResizing:this._getModuleConfigByOption("tableResizing"),tableContextMenu:this._getModuleConfigByOption("tableContextMenu"),imageUpload:this._getModuleConfigByOption("imageUpload"),imageCursor:this._getBaseModuleConfig(),mentions:this._getModuleConfigByOption("mentions"),uploader:{onDrop:t=>this._saveValueChangeEvent((0,Y.Event)(t)),imageBlot:"extendedImage"},keyboard:{onKeydown:t=>this._saveValueChangeEvent((0,Y.Event)(t))},clipboard:{onPaste:t=>this._saveValueChangeEvent((0,Y.Event)(t)),onCut:t=>this._saveValueChangeEvent((0,Y.Event)(t)),matchers:[["p.MsoListParagraphCxSpFirst",t],["p.MsoListParagraphCxSpMiddle",t],["p.MsoListParagraphCxSpLast",t]]},multiline:Boolean(this.option("allowSoftLineBreak"))},this._getCustomModules())},_getModuleConfigByOption:function(t){const e=this.option(t);let i={};if((0,s.$K)(e))return Array.isArray(e)?i[t]=e:i=e,(0,r.l)(this._getBaseModuleConfig(),i)},_getBaseModuleConfig:function(){return{editorInstance:this}},_getCustomModules:function(){const t={};return this._getRegistrator().getRegisteredModuleNames().forEach((e=>{t[e]=this._getBaseModuleConfig()})),t},_textChangeHandler:function(t,e,i){const n=this._deltaConverter.toHtml(),o=this._isMarkdownValue()?this._updateValueByType("markdown",n):n,r=this.option("value");r===o||this._isNullValueConverted(r,o)||(this._isEditorUpdating=!0,this.option("value",o)),this._finalizeContentRendering()},_isNullValueConverted:function(t,e){return null===t&&""===e},_finalizeContentRendering:function(){this._contentRenderedDeferred&&(this.clearHistory(),this._contentInitializedCallback.fire(),this._contentRenderedDeferred.resolve(),this._contentRenderedDeferred=void 0)},_updateValueByType:function(t,e){const i=this._markdownConverter;if(!(0,s.$K)(i))return;const n=(0,l.ensureDefined)(e,this.option("value"));return"markdown"===t?i.toMarkdown(n):i.toHtml(n)},_isMarkdownValue:function(){return"markdown"===this.option("valueType")},_resetEnabledState:function(){if(this._quillInstance){const t=!(this.option("readOnly")||this.option("disabled"));this._quillInstance.enable(t)}},_renderFormDialog:function(){const t=(0,r.l)(!0,{width:"auto",height:"auto",hideOnOutsideClick:!0},this.option("formDialogOptions"));this._formDialog=new U_(this,t)},_getStylingModePrefix:function(){return"dx-htmleditor-"},_getQuillContainer:function(){return this._$htmlContainer},_prepareModuleOptions(t){var e;const i=null===(e=t.fullName)||void 0===e?void 0:e.split(".");let n=t.value;const o=i.length>=2?i[1]:t.name;return 3===i.length&&(n={[i[2]]:n}),[o,n]},_moduleOptionChanged:function(t,e){const i=this.getModule(t);Boolean(i)?i.option(...this._prepareModuleOptions(e)):this._invalidate()},_optionChanged:function(t){switch(t.name){case"value":{if(this._quillInstance)if(this._isEditorUpdating)this._isEditorUpdating=!1;else{const e=this._isMarkdownValue()?this._updateValueByType("HTML",t.value):t.value;this._suppressValueChangeAction(),this._updateHtmlContent(e),this._resumeValueChangeAction()}else this._$htmlContainer.html(t.value);const e=this.option("value");e!==t.previousValue&&(this._setSubmitValue(e),this.callBase((0,n.Z)({},t,{value:e})));break}case"placeholder":case"variables":case"toolbar":case"mentions":case"customizeModules":case"allowSoftLineBreak":this._invalidate();break;case"tableResizing":this._moduleOptionChanged("tableResizing",t);break;case"valueType":{this._prepareConverters();const e=this._updateValueByType(t.value);"html"===t.value&&this._quillInstance?this._updateHtmlContent(e):this.option("value",e);break}case"stylingMode":this._renderStylingMode();break;case"readOnly":case"disabled":this.callBase(t),this._resetEnabledState();break;case"formDialogOptions":this._renderFormDialog();break;case"tableContextMenu":this._moduleOptionChanged("tableContextMenu",t);break;case"mediaResizing":t.previousValue&&t.value?this.getModule("resizing").option(t.name,t.value):this._invalidate();break;case"width":this.callBase(t),this._repaintToolbar();break;case"imageUpload":this._moduleOptionChanged("imageUpload",t);break;default:this.callBase(t)}},_repaintToolbar:function(){this._applyToolbarMethod("repaint")},_updateHtmlContent:function(t){const e=this._quillInstance.clipboard.convert({html:t});this._quillInstance.setContents(e)},_clean:function(){this._quillInstance&&(P.Z.off(this._getContent(),`.${this.NAME}`),this._quillInstance.off("text-change",this._textChangeHandlerWithContext),this._cleanCallback.fire()),this._abortUpdateContentTask(),this._cleanCallback.empty(),this._contentInitializedCallback.empty(),this.callBase()},_abortUpdateContentTask:function(){this._updateContentTask&&(this._updateContentTask.abort(),this._updateContentTask=void 0)},_applyQuillMethod(t,e){if(this._quillInstance)return this._quillInstance[t].apply(this._quillInstance,e)},_applyQuillHistoryMethod(t){this._quillInstance&&this._quillInstance.history&&this._quillInstance.history[t]()},_applyToolbarMethod(t){var e;null===(e=this.getModule("toolbar"))||void 0===e||e[t]()},addCleanCallback(t){this._cleanCallback.add(t)},addContentInitializedCallback(t){this._contentInitializedCallback.add(t)},register:function(t){this._getRegistrator().registerModules(t),this._quillInstance&&this.repaint()},get:function(t){return this._getRegistrator().getQuill().import(t)},getModule:function(t){return this._applyQuillMethod("getModule",arguments)},getQuillInstance:function(){return this._quillInstance},getSelection:function(t){return this._applyQuillMethod("getSelection",arguments)},setSelection:function(t,e){this._applyQuillMethod("setSelection",arguments)},getText:function(t,e){return this._applyQuillMethod("getText",arguments)},format:function(t,e){this._applyQuillMethod("format",arguments)},formatText:function(t,e,i,n){this._applyQuillMethod("formatText",arguments)},formatLine:function(t,e,i,n){this._applyQuillMethod("formatLine",arguments)},getFormat:function(t,e){return this._applyQuillMethod("getFormat",arguments)},removeFormat:function(t,e){return this._applyQuillMethod("removeFormat",arguments)},clearHistory:function(){this._applyQuillHistoryMethod("clear"),this._applyToolbarMethod("updateHistoryWidgets")},undo:function(){this._applyQuillHistoryMethod("undo")},redo:function(){this._applyQuillHistoryMethod("redo")},getLength:function(){return this._applyQuillMethod("getLength")},getBounds:function(t,e){return this._applyQuillMethod("getBounds",arguments)},delete:function(t,e){this._applyQuillMethod("deleteText",arguments)},insertText:function(t,e,i){this._applyQuillMethod("insertText",arguments)},insertEmbed:function(t,e,i){this._applyQuillMethod("insertEmbed",arguments)},showFormDialog:function(t){return this._formDialog.show(t)},formDialogOption:function(t,e){return this._formDialog.popupOption.apply(this._formDialog,arguments)},focus:function(){this.callBase(),this._applyQuillMethod("focus")},blur:function(){this._applyQuillMethod("blur")},getMentionKeyInTemplateStorage(){return this._mentionKeyInTemplateStorage}});(0,c.default)("dxHtmlEditor",Q_);const X_=Q_},6239:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=new class{constructor(){this._converters={}}addConverter(t,e){this._converters[t]=e}getConverter(t){return this._converters[t]}}},3106:(t,e,i)=>{"use strict";function n(t,e){return Array(e+1).join(t)}i.r(e),i.d(e,{default:()=>Z});var o=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function r(t){return c(t,o)}var s=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function a(t){return c(t,s)}var l=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function c(t,e){return e.indexOf(t.nodeName)>=0}function u(t,e){return t.getElementsByTagName&&e.some((function(e){return t.getElementsByTagName(e).length}))}var d={};function h(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function p(t){for(var e in this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[],t.rules)this.array.push(t.rules[e])}function f(t,e,i){for(var n=0;n<t.length;n++){var o=t[n];if(_(o,e,i))return o}}function _(t,e,i){var n=t.filter;if("string"==typeof n){if(n===e.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(e.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof n)throw new TypeError("`filter` needs to be a string, array, or function");if(n.call(t,e,i))return!0}}function m(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function g(t,e,i){return t&&t.parentNode===e||i(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}d.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}},d.lineBreak={filter:"br",replacement:function(t,e,i){return i.br+"\n"}},d.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,i){var o=Number(e.nodeName.charAt(1));return"setext"===i.headingStyle&&o<3?"\n\n"+t+"\n"+n(1===o?"=":"-",t.length)+"\n\n":"\n\n"+n("#",o)+" "+t+"\n\n"}},d.blockquote={filter:"blockquote",replacement:function(t){return"\n\n"+(t=(t=t.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},d.list={filter:["ul","ol"],replacement:function(t,e){var i=e.parentNode;return"LI"===i.nodeName&&i.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}},d.listItem={filter:"li",replacement:function(t,e,i){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var n=i.bulletListMarker+"   ",o=e.parentNode;if("OL"===o.nodeName){var r=o.getAttribute("start"),s=Array.prototype.indexOf.call(o.children,e);n=(r?Number(r)+s:s+1)+".  "}return n+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}},d.indentedCodeBlock={filter:function(t,e){return"indented"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,i){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},d.fencedCodeBlock={filter:function(t,e){return"fenced"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,i){for(var o,r=((e.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],s=e.firstChild.textContent,a=i.fence.charAt(0),l=3,c=new RegExp("^"+a+"{3,}","gm");o=c.exec(s);)o[0].length>=l&&(l=o[0].length+1);var u=n(a,l);return"\n\n"+u+r+"\n"+s.replace(/\n$/,"")+"\n"+u+"\n\n"}},d.horizontalRule={filter:"hr",replacement:function(t,e,i){return"\n\n"+i.hr+"\n\n"}},d.inlineLink={filter:function(t,e){return"inlined"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e){var i=e.getAttribute("href"),n=h(e.getAttribute("title"));return n&&(n=' "'+n+'"'),"["+t+"]("+i+n+")"}},d.referenceLink={filter:function(t,e){return"referenced"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e,i){var n,o,r=e.getAttribute("href"),s=h(e.getAttribute("title"));switch(s&&(s=' "'+s+'"'),i.linkReferenceStyle){case"collapsed":n="["+t+"][]",o="["+t+"]: "+r+s;break;case"shortcut":n="["+t+"]",o="["+t+"]: "+r+s;break;default:var a=this.references.length+1;n="["+t+"]["+a+"]",o="["+a+"]: "+r+s}return this.references.push(o),n},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}},d.emphasis={filter:["em","i"],replacement:function(t,e,i){return t.trim()?i.emDelimiter+t+i.emDelimiter:""}},d.strong={filter:["strong","b"],replacement:function(t,e,i){return t.trim()?i.strongDelimiter+t+i.strongDelimiter:""}},d.code={filter:function(t){var e=t.previousSibling||t.nextSibling,i="PRE"===t.parentNode.nodeName&&!e;return"CODE"===t.nodeName&&!i},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",i="`",n=t.match(/`+/gm)||[];-1!==n.indexOf(i);)i+="`";return i+e+t+e+i}},d.image={filter:"img",replacement:function(t,e){var i=h(e.getAttribute("alt")),n=e.getAttribute("src")||"",o=h(e.getAttribute("title"));return n?"!["+i+"]("+n+(o?' "'+o+'"':"")+")":""}},p.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){return t.isBlank?this.blankRule:(e=f(this.array,t,this.options))||(e=f(this._keep,t,this.options))||(e=f(this._remove,t,this.options))?e:this.defaultRule;var e},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};var v,b,y="undefined"!=typeof window?window:{},C=function(){var t=y.DOMParser,e=!1;try{(new t).parseFromString("","text/html")&&(e=!0)}catch(t){}return e}()?y.DOMParser:(v=function(){},function(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){window.ActiveXObject&&(t=!0)}return t}()?v.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e}:v.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e},v);function w(t,e){var i;return function(t){var e=t.element,i=t.isBlock,n=t.isVoid,o=t.isPre||function(t){return"PRE"===t.nodeName};if(e.firstChild&&!o(e)){for(var r=null,s=!1,a=null,l=g(a,e,o);l!==e;){if(3===l.nodeType||4===l.nodeType){var c=l.data.replace(/[ \r\n\t]+/g," ");if(r&&!/ $/.test(r.data)||s||" "!==c[0]||(c=c.substr(1)),!c){l=m(l);continue}l.data=c,r=l}else{if(1!==l.nodeType){l=m(l);continue}i(l)||"BR"===l.nodeName?(r&&(r.data=r.data.replace(/ $/,"")),r=null,s=!1):n(l)||o(l)?(r=null,s=!0):r&&(s=!1)}var u=g(a,l,o);a=l,l=u}r&&(r.data=r.data.replace(/ $/,""),r.data||m(r))}}({element:i="string"==typeof t?(b=b||new C).parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html").getElementById("turndown-root"):t.cloneNode(!0),isBlock:r,isVoid:a,isPre:e.preformattedCode?x:null}),i}function x(t){return"PRE"===t.nodeName||"CODE"===t.nodeName}function S(t,e){return t.isBlock=r(t),t.isCode="CODE"===t.nodeName||t.parentNode.isCode,t.isBlank=function(t){return!a(t)&&!function(t){return c(t,l)}(t)&&/^\s*$/i.test(t.textContent)&&!function(t){return u(t,s)}(t)&&!function(t){return u(t,l)}(t)}(t),t.flankingWhitespace=function(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var i,n={leading:(i=t.textContent.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/))[1],leadingAscii:i[2],leadingNonAscii:i[3],trailing:i[4],trailingNonAscii:i[5],trailingAscii:i[6]};return n.leadingAscii&&I("left",t,e)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&I("right",t,e)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}(t,e),t}function I(t,e,i){var n,o,s;return"left"===t?(n=e.previousSibling,o=/ $/):(n=e.nextSibling,o=/^ /),n&&(3===n.nodeType?s=o.test(n.nodeValue):i.preformattedCode&&"CODE"===n.nodeName?s=!1:1!==n.nodeType||r(n)||(s=o.test(n.textContent))),s}var k=Array.prototype.reduce,E=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function O(t){if(!(this instanceof O))return new O(t);var e={rules:d,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,e){return e.isBlock?"\n\n":""},keepReplacement:function(t,e){return e.isBlock?"\n\n"+e.outerHTML+"\n\n":e.outerHTML},defaultReplacement:function(t,e){return e.isBlock?"\n\n"+t+"\n\n":t}};this.options=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}return t}({},e,t),this.rules=new p(this.options)}function T(t){var e=this;return k.call(t.childNodes,(function(t,i){var n="";return 3===(i=new S(i,e.options)).nodeType?n=i.isCode?i.nodeValue:e.escape(i.nodeValue):1===i.nodeType&&(n=B.call(e,i)),A(t,n)}),"")}function D(t){var e=this;return this.rules.forEach((function(i){"function"==typeof i.append&&(t=A(t,i.append(e.options)))})),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function B(t){var e=this.rules.forNode(t),i=T.call(this,t),n=t.flankingWhitespace;return(n.leading||n.trailing)&&(i=i.trim()),n.leading+e.replacement(i,t,this.options)+n.trailing}function A(t,e){var i=function(t){for(var e=t.length;e>0&&"\n"===t[e-1];)e--;return t.substring(0,e)}(t),n=e.replace(/^\n*/,""),o=Math.max(t.length-i.length,e.length-n.length);return i+"\n\n".substring(0,o)+n}O.prototype={turndown:function(t){if(!function(t){return null!=t&&("string"==typeof t||t.nodeType&&(1===t.nodeType||9===t.nodeType||11===t.nodeType))}(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(""===t)return"";var e=T.call(this,new w(t,this.options));return D.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else{if("function"!=typeof t)throw new TypeError("plugin must be a Function or an Array of Functions");t(this)}return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return E.reduce((function(t,e){return t.replace(e[0],e[1])}),t)}};const P=O;var M=i(3787),R=i.n(M),N=i(9186),$=i(1898),V=i(6239);class F{constructor(){var t;const e=(0,N.getWindow)(),i=e&&e.TurndownService||P,n=e&&e.showdown||R();if(!i)throw $.Z.Error("E1041","Turndown");if(!n)throw $.Z.Error("E1041","Showdown");this._html2Markdown=new i,null!==(t=this._html2Markdown)&&void 0!==t&&t.addRule&&(this._html2Markdown.addRule("emptyLine",{filter:t=>"p"===t.nodeName.toLowerCase()&&"<br>"===t.innerHTML,replacement:function(){return"<br>"}}),this._html2Markdown.keep(["table"])),this._markdown2Html=new n.Converter({simpleLineBreaks:!0,strikethrough:!0,tables:!0})}toMarkdown(t){return this._html2Markdown.turndown(t||"")}toHtml(t){let e=this._markdown2Html.makeHtml(t);return e&&(e=e.replace(new RegExp("\\r?\\n","g"),"")),e}}V.Z.addConverter("markdown",F);const Z=F},1853:function(t){var e;e=()=>(()=>{var t={1674:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(1233),o=i(3866),r=i(3398);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},l.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,t);var e,i,n,d,h,p=(d=f,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(d);if(h){var i=u(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(t,e){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{allowedTags:[]};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(n=p.call(this,t,e,o)).allowedTags=null!==(i=o.allowedTags)&&void 0!==i?i:[],n}return e=f,n=[{key:"keys",value:function(t){return(0,o.dj)(l(u(f),"keys",this),t,r.WT.attribute)}}],(i=[{key:"add",value:function(t,e){return o.Mx.call(this,l(u(f.prototype),"add",this),t,e)}},{key:"remove",value:function(t){return o.Mx.call(this,l(u(f.prototype),"remove",this),t)}},{key:"value",value:function(t){return o.Mx.call(this,l(u(f.prototype),"value",this),t)}},{key:"canAdd",value:function(t,e){return o.ud.call(this,l(u(f.prototype),"canAdd",this),t,e)}}])&&a(e.prototype,i),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}(n.Attributor)},3866:(t,e,i)=>{"use strict";i.d(e,{Mx:()=>o,dj:()=>s,ud:()=>r});var n=i(3398);function o(t){var e=this.keyName;this.keyName=(0,n.mQ)(this.keyName);for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];var s=t.call.apply(t,[this].concat(o));return this.keyName=e,s}function r(t,e,i){return this.allowedTags.indexOf(e.tagName)>-1&&t.call(this,e,i)}function s(t,e,i){return t(e).map((function(t){return(0,n.jf)(e.tagName,t,i)}))}},4569:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(1233),o=i(3866),r=i(3398);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},l.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(f,t);var e,i,n,d,h,p=(d=f,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(d);if(h){var i=u(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(t,e){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{allowedTags:[]};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(n=p.call(this,t,e,o)).allowedTags=null!==(i=o.allowedTags)&&void 0!==i?i:[],n}return e=f,n=[{key:"keys",value:function(t){return(0,o.dj)(l(u(f),"keys",this),t,r.WT.style)}}],(i=[{key:"add",value:function(t,e){return o.Mx.call(this,l(u(f.prototype),"add",this),t,e)}},{key:"remove",value:function(t){return o.Mx.call(this,l(u(f.prototype),"remove",this),t)}},{key:"value",value:function(t){return o.Mx.call(this,l(u(f.prototype),"value",this),t)}},{key:"canAdd",value:function(t,e){return o.ud.call(this,l(u(f.prototype),"canAdd",this),t,e)}}])&&a(e.prototype,i),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),f}(n.StyleAttributor)},3398:(t,e,i)=>{"use strict";i.d(e,{WT:()=>l,jf:()=>u,mQ:()=>d});var n=i(19),o=i(8252);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){var n,o,s;n=t,o=e,s=i[e],(o=function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===r(e)?e:String(e)}(o))in n?Object.defineProperty(n,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[o]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var l={attribute:"attr",style:"style"},c=a(a({},n.Sp.allowedTags.reduce((function(t,e){return t[e]={name:n.Sp.name,keyNamesSet:n.bc},t}),{})),o.Pw.allowedTags.reduce((function(t,e){return t[e]={name:o.Pw.name,keyNamesSet:o.fU},t}),{}));function u(t,e,i){var n=c[t];return n&&n.keyNamesSet.has(e)?"".concat(i).concat(n.name,"_").concat(e):e}function d(t){return t.replace(/([^]*_)/,"")}},6446:(t,e,i)=>{"use strict";i.d(e,{i2:()=>S,qz:()=>I,E2:()=>k,ZP:()=>x});var n=i(9098),o=i.n(n),r=i(1233),s=i(4122),a=i(6603),l=i(8222),c=i(3398);function u(t,e,i,n){return i.map((i=>{const o=n?(0,c.jf)(t,i,n):i;return e.scroll.query(o,r.Scope.ATTRIBUTE)})).filter((t=>t instanceof r.Attributor)).reduce(((t,e)=>(t[e.attrName]=e,t)),{})}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){var n,o,r;n=t,o=e,r=i[e],(o=g(o))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function m(t,e,i){return e&&_(t.prototype,e),i&&_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function g(t){var e=function(t,e){if("object"!==d(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===d(e)?e:String(e)}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},v.apply(this,arguments)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w(t);if(e){var o=w(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}r.AttributorStore.prototype.build=function(){const{tagName:t}=this.domNode,e=r.Registry.find(this.domNode);if(null==e)return;const i=r.Attributor.keys(this.domNode),n=r.ClassAttributor.keys(this.domNode),o=r.StyleAttributor.keys(this.domNode);this.attributes={...u(t,e,i,c.WT.attribute),...u(t,e,n),...u(t,e,o,c.WT.style)}};var x=function(t){b(i,t);var e=C(i);function i(t,n){var o;return f(this,i),(o=e.call(this,t,n)).cache={},o}return m(i,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=I(this)),this.cache.delta}},{key:"deleteAt",value:function(t,e){v(w(i.prototype),"deleteAt",this).call(this,t,e),this.cache={}}},{key:"formatAt",value:function(t,e,n,o){e<=0||(this.scroll.query(n,r.Scope.BLOCK)?t+e===this.length()&&this.format(n,o):v(w(i.prototype),"formatAt",this).call(this,t,Math.min(e,this.length()-t-1),n,o),this.cache={})}},{key:"insertAt",value:function(t,e,n){if(null!=n)return v(w(i.prototype),"insertAt",this).call(this,t,e,n),void(this.cache={});if(0!==e.length){var o=e.split("\n"),r=o.shift();r.length>0&&(t<this.length()-1||null==this.children.tail?v(w(i.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});var s=this;o.reduce((function(t,e){return(s=s.split(t,!0)).insertAt(0,e),e.length}),t+r.length)}}},{key:"insertBefore",value:function(t,e){var n=this.children.head;e&&!this.domNode.contains(e.domNode)||v(w(i.prototype),"insertBefore",this).call(this,t,e),n instanceof s.Z&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=v(w(i.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,e){v(w(i.prototype),"moveChildren",this).call(this,t,e),this.cache={}}},{key:"optimize",value:function(t){v(w(i.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return v(w(i.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){v(w(i.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){var n=this.clone();return 0===t?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var o=v(w(i.prototype),"split",this).call(this,t,e);return this.cache={},o}}]),i}(r.BlockBlot);x.blotName="block",x.tagName="P",x.defaultChild=s.Z,x.allowedChildren=[s.Z,a.Z,r.EmbedBlot,l.Z];var S=function(t){b(i,t);var e=C(i);function i(){return f(this,i),e.apply(this,arguments)}return m(i,[{key:"attach",value:function(){v(w(i.prototype),"attach",this).call(this),this.attributes=new r.AttributorStore(this.domNode)}},{key:"delta",value:function(){return(new(o())).insert(this.value(),p(p({},this.formats()),this.attributes.values()))}},{key:"format",value:function(t,e){var i=this.scroll.query(t,r.Scope.BLOCK_ATTRIBUTE);null!=i&&this.attributes.attribute(i,e)}},{key:"formatAt",value:function(t,e,i,n){this.format(i,n)}},{key:"insertAt",value:function(t,e,n){if("string"==typeof e&&e.endsWith("\n")){var o=this.scroll.create(x.blotName);this.parent.insertBefore(o,0===t?this:this.next),o.insertAt(0,e.slice(0,-1))}else v(w(i.prototype),"insertAt",this).call(this,t,e,n)}}]),i}(r.EmbedBlot);function I(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(r.LeafBlot).reduce((function(t,i){return 0===i.length()?t:t.insert(i.value(),k(i,{},e))}),new(o())).insert("\n",k(t))}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("function"==typeof t.formats&&(e=p(p({},e),t.formats()),i&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:k(t.parent,e,i))}S.scope=r.Scope.BLOCK_BLOT},4122:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}i.d(e,{Z:()=>l});var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}(d,t);var e,i,a,l,c,u=(l=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(l);if(c){var i=s(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function d(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),u.apply(this,arguments)}return e=d,a=[{key:"value",value:function(){}}],(i=[{key:"optimize",value:function(){(this.prev||this.next)&&this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}])&&o(e.prototype,i),a&&o(e,a),Object.defineProperty(e,"prototype",{writable:!1}),d}(i(1233).EmbedBlot);a.blotName="break",a.tagName="BR";const l=a},3553:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}i.d(e,{Z:()=>a});var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(l,t);var e,i,s,a=(i=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=r(i);if(s){var o=r(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return e=l,Object.defineProperty(e,"prototype",{writable:!1}),e}(i(1233).ContainerBlot);const a=s},3657:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(1233),o=i(8222);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(o)?o:String(o)),n)}var o}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},a.apply(this,arguments)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(f,t);var e,i,u,d,h,p=(d=f,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(d);if(h){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(t,e,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(n=p.call(this,t,e)).selection=i,n.textNode=document.createTextNode(f.CONTENTS),n.domNode.appendChild(n.textNode),n.savedLength=0,n}return e=f,u=[{key:"value",value:function(){}}],(i=[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,e){if(0===this.savedLength){for(var i=this,o=0;null!=i&&i.statics.scope!==n.Scope.BLOCK_BLOT;)o+=i.offset(i.parent),i=i.parent;null!=i&&(this.savedLength=f.CONTENTS.length,i.optimize(),i.formatAt(o,f.CONTENTS.length,t,e),this.savedLength=0)}else a(c(f.prototype),"format",this).call(this,t,e)}},{key:"index",value:function(t,e){return t===this.textNode?0:a(c(f.prototype),"index",this).call(this,t,e)}},{key:"length",value:function(){return this.savedLength}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(c(f.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(this.selection.composing||null==this.parent)return null;for(var t=this.selection.getNativeRange();null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);var e,i=this.prev instanceof o.Z?this.prev:null,n=i?i.length():0,r=this.next instanceof o.Z?this.next:null,s=r?r.text:"",a=this.textNode,l=a.data.split(f.CONTENTS).join("");if(a.data=f.CONTENTS,i)e=i,(l||r)&&(i.insertAt(i.length(),l+s),r&&r.remove());else if(r)e=r,r.insertAt(0,l);else{var c=document.createTextNode(l);e=this.scroll.create(c),this.parent.insertBefore(e,this)}if(this.remove(),t){var u=function(t,e){return i&&t===i.domNode?e:t===a?n+e-1:r&&t===r.domNode?n+l.length+e:null},d=u(t.start.node,t.start.offset),h=u(t.end.node,t.end.offset);if(null!==d&&null!==h)return{startNode:e.domNode,startOffset:d,endNode:e.domNode,endOffset:h}}return null}},{key:"update",value:function(t,e){var i=this;if(t.some((function(t){return"characterData"===t.type&&t.target===i.textNode}))){var n=this.restore();n&&(e.range=n)}}},{key:"value",value:function(){return""}}])&&s(e.prototype,i),u&&s(e,u),Object.defineProperty(e,"prototype",{writable:!1}),f}(n.EmbedBlot);u.blotName="cursor",u.className="ql-cursor",u.tagName="span",u.CONTENTS="\ufeff";const d=u},7452:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(1233),o=i(8222);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(o)?o:String(o)),n)}var o}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},a.apply(this,arguments)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}var u="\ufeff";const d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(p,t);var e,i,n,d,h=(n=p,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=c(n);if(d){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function p(t,e){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(i=h.call(this,t,e)).contentNode=document.createElement("span"),i.contentNode.setAttribute("contenteditable",!1),Array.from(i.domNode.childNodes).forEach((function(t){i.contentNode.appendChild(t)})),i.leftGuard=document.createTextNode(u),i.rightGuard=document.createTextNode(u),i.domNode.appendChild(i.leftGuard),i.domNode.appendChild(i.contentNode),i.domNode.appendChild(i.rightGuard),i}return e=p,(i=[{key:"index",value:function(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:a(c(p.prototype),"index",this).call(this,t,e)}},{key:"restore",value:function(t){var e,i,n=t.data.split(u).join("");if(t===this.leftGuard)if(this.prev instanceof o.Z){var r=this.prev.length();this.prev.insertAt(r,n),e={startNode:this.prev.domNode,startOffset:r+n.length}}else i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this),e={startNode:i,startOffset:n.length};else t===this.rightGuard&&(this.next instanceof o.Z?(this.next.insertAt(0,n),e={startNode:this.next.domNode,startOffset:n.length}):(i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this.next),e={startNode:i,startOffset:n.length}));return t.data=u,e}},{key:"update",value:function(t,e){var i=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===i.leftGuard||t.target===i.rightGuard)){var n=i.restore(t.target);n&&(e.range=n)}}))}}])&&s(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),p}(n.EmbedBlot)},6603:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(1233),o=i(4122),r=i(8222);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},l.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(p,t);var e,i,o,r,d,h=(r=p,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(r);if(d){var i=u(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),h.apply(this,arguments)}return e=p,o=[{key:"compare",value:function(t,e){var i=p.order.indexOf(t),n=p.order.indexOf(e);return i>=0||n>=0?i-n:t===e?0:t<e?-1:1}}],(i=[{key:"formatAt",value:function(t,e,i,o){if(p.compare(this.statics.blotName,i)<0&&this.scroll.query(i,n.Scope.BLOT)){var r=this.isolate(t,e);o&&r.wrap(i,o)}else l(u(p.prototype),"formatAt",this).call(this,t,e,i,o)}},{key:"optimize",value:function(t){if(l(u(p.prototype),"optimize",this).call(this,t),this.parent instanceof p&&p.compare(this.statics.blotName,this.parent.statics.blotName)>0){var e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}])&&a(e.prototype,i),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),p}(n.InlineBlot);d.allowedChildren=[d,o.Z,n.EmbedBlot,r.Z],d.order=["cursor","inline","link","underline","strike","italic","bold","script","code"];const h=d},3272:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(1233),o=i(2069),r=i(6446),s=i(4122),a=i(3553),l=i(1969);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},p.apply(this,arguments)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}function m(t){return t instanceof r.ZP||t instanceof r.i2}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(v,t);var e,i,a,d,g=(a=v,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_(a);if(d){var i=_(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function v(t,e,i){var n,o=i.emitter,r=i.toggleBlankClass;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),(n=g.call(this,t,e)).emitter=o,n.toggleBlankClass=r,n.batch=!1,n.optimize(),n.enable(),n.domNode.addEventListener("dragstart",(function(t){return n.handleDragStart(t)})),n}return e=v,i=[{key:"batchStart",value:function(){Array.isArray(this.batch)||(this.batch=[])}},{key:"batchEnd",value:function(){var t=this.batch;this.batch=!1,this.update(t)}},{key:"emitMount",value:function(t){this.emitter.emit(o.Z.events.SCROLL_BLOT_MOUNT,t)}},{key:"emitUnmount",value:function(t){this.emitter.emit(o.Z.events.SCROLL_BLOT_UNMOUNT,t)}},{key:"deleteAt",value:function(t,e){var i=u(this.line(t),2),n=i[0],o=i[1],a=u(this.line(t+e),1)[0];if(p(_(v.prototype),"deleteAt",this).call(this,t,e),null!=a&&n!==a&&o>0){var c=(n instanceof l.zW||a instanceof l.zW)&&n.parent!==a.parent;if(!(n instanceof r.i2||a instanceof r.i2||c)){var d=a.children.head instanceof s.Z?null:a.children.head;n.moveChildren(a,d),n.remove()}}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,e,i,n){p(_(v.prototype),"formatAt",this).call(this,t,e,i,n),this.optimize()}},{key:"handleDragStart",value:function(t){t.preventDefault()}},{key:"insertAt",value:function(t,e,i){if(t>=this.length())if(null==i||null==this.scroll.query(e,n.Scope.BLOCK)){var o=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(o),null==i&&e.endsWith("\n")?o.insertAt(0,e.slice(0,-1),i):o.insertAt(0,e,i)}else{var r=this.scroll.create(e,i);this.appendChild(r)}else p(_(v.prototype),"insertAt",this).call(this,t,e,i);this.optimize()}},{key:"insertBefore",value:function(t,e){if(t.statics.scope===n.Scope.INLINE_BLOT){var i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(t),p(_(v.prototype),"insertBefore",this).call(this,i,e)}else p(_(v.prototype),"insertBefore",this).call(this,t,e)}},{key:"isEnabled",value:function(){return"true"===this.domNode.getAttribute("contenteditable")}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(m,t)}},{key:"lines",value:function(){return function t(e,i,o){var r=[],s=o;return e.children.forEachAt(i,o,(function(e,i,o){m(e)?r.push(e):e instanceof n.ContainerBlot&&(r=r.concat(t(e,i,s))),s-=o})),r}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(p(_(v.prototype),"optimize",this).call(this,t,e),t.length>0&&this.emitter.emit(o.Z.events.SCROLL_OPTIMIZE,t,e))}},{key:"path",value:function(t){return p(_(v.prototype),"path",this).call(this,t).slice(1)}},{key:"remove",value:function(){}},{key:"update",value:function(t){var e=this;if(this.batch)Array.isArray(t)&&(this.batch=this.batch.concat(t),this.toggleBlankClass());else{var i=o.Z.sources.USER;"string"==typeof t&&(i=t),Array.isArray(t)||(t=this.observer.takeRecords()),(t=t.filter((function(t){var i=t.target,n=e.find(i,!0);return n&&n.scroll===e}))).length>0&&this.emitter.emit(o.Z.events.SCROLL_BEFORE_UPDATE,i,t),p(_(v.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(o.Z.events.SCROLL_UPDATE,i,t)}}}],i&&h(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),v}(n.ScrollBlot);g.blotName="scroll",g.className="ql-editor",g.tagName="DIV",g.defaultChild=r.ZP,g.allowedChildren=[r.ZP,r.i2,a.Z];const v=g},8222:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}i.d(e,{Z:()=>s,b:()=>a});var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(l,t);var e,i,s,a=(i=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=r(i);if(s){var o=r(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return e=l,Object.defineProperty(e,"prototype",{writable:!1}),e}(i(1233).TextBlot);function a(t){return t.replace(/[&<>"']/g,(function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t]}))}},2432:(t,e,i)=>{"use strict";i.d(e,{default:()=>g});var n=i(281),o=i(6446),r=i(4122),s=i(3553),a=i(3657),l=i(7452),c=i(6603),u=i(3272),d=i(8222),h=i(5635),p=i(2613),f=i(3071),_=i(3859),m=i(990);n.ZP.register({"blots/block":o.ZP,"blots/block/embed":o.i2,"blots/break":r.Z,"blots/container":s.Z,"blots/cursor":a.Z,"blots/embed":l.Z,"blots/inline":c.Z,"blots/scroll":u.Z,"blots/text":d.Z,"modules/clipboard":h.ZP,"modules/history":p.Z,"modules/keyboard":f.ZP,"modules/uploader":_.Z,"modules/input":m.Z});const g=n.ZP},6229:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(7452),o=i(2069);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(o)?o:String(o)),n)}var o}const a=function(){function t(e,i){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scroll=e,this.emitter=i,this.isComposing=!1,e.domNode.addEventListener("compositionstart",(function(t){n.isComposing||n.handleCompositionStart(t)})),e.domNode.addEventListener("compositionend",(function(t){n.isComposing&&n.handleCompositionEnd(t)}))}var e,i;return e=t,(i=[{key:"isCompositionInProgress",value:function(){return this.isComposing}},{key:"handleCompositionStart",value:function(t){var e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof n.Z||(this.emitter.emit(o.Z.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(o.Z.events.COMPOSITION_START,t),this.isComposing=!0)}},{key:"handleCompositionEnd",value:function(t){this.emitter.emit(o.Z.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(o.Z.events.COMPOSITION_END,t),this.isComposing=!1}}])&&s(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},2861:(t,e,i)=>{"use strict";i.d(e,{Z:()=>N});var n=i(8805),o=i.n(n),r=i(2722),s=i.n(r),a=i(732),l=i.n(a),c=i(9098),u=i.n(c),d=i(1233),h=i(7800),p=i(3657),f=i(6446),_=i(4122),m=i(8222),g=i(5874);function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){y(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function y(t,e,i){return(e=O(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function w(t,e){return k(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||S(t,e)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(t,e){if(t){if("string"==typeof t)return I(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(t,e):void 0}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function k(t){if(Array.isArray(t))return t}function E(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O(n.key),n)}}function O(t){var e=function(t,e){if("object"!==C(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===C(e)?e:String(e)}var T=/^[ -~]*$/,D=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scroll=e,this.delta=this.getDelta(),this.immediateFormats=new Set}var e,i;return e=t,i=[{key:"addImmediateFormat",value:function(t){this.immediateFormats.add(t)}},{key:"applyDelta",value:function(t){var e=this;this.scroll.update();var i=this.scroll.length();this.scroll.batchStart();var n=function(t){return t.reduce((function(t,e){if("string"==typeof e.insert){var i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(i,e.attributes)}return t.push(e)}),new(u()))}(t),o=new(u());return n.reduce((function(t,n){var r=c.Op.length(n),s=n.attributes||{},a=!1;if(null!=n.insert){if(o.retain(r),"string"==typeof n.insert){var u=n.insert;a=!u.endsWith("\n")&&(i<=t||e.scroll.descendant(f.i2,t)[0]),e.scroll.insertAt(t,u);var h=w(e.scroll.line(t),2),p=h[0],_=h[1],m=l()({},(0,f.E2)(p));if(p instanceof f.ZP){var g=w(p.descendant(d.LeafBlot,_),1)[0];m=l()(m,(0,f.E2)(g))}s=c.AttributeMap.diff(m,s)||{}}else if("object"===C(n.insert)){var v=Object.keys(n.insert)[0];if(null==v)return t;a=null!=e.scroll.query(v,d.Scope.INLINE)&&(i<=t||e.scroll.descendant(f.i2,t)[0]),e.scroll.insertAt(t,v,n.insert[v])}i+=r}else o.push(n);var b=Object.keys(s);e.immediateFormats.forEach((function(i){b.indexOf(i)>-1&&(e.scroll.formatAt(t,r,i,s[i]),delete s[i])})),Object.keys(s).forEach((function(i){e.scroll.formatAt(t,r,i,s[i])}));var y=a?1:0;return i+=y,o.delete(y),t+r+y}),0),o.reduce((function(t,i){return"number"==typeof i.delete?(e.scroll.deleteAt(t,i.delete),t):t+c.Op.length(i)}),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new(u())).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach((function(o){i.scroll.lines(t,Math.max(e,1)).forEach((function(t){t.format(o,n[o])}))})),this.scroll.optimize();var r=(new(u())).retain(t).retain(e,o()(n));return this.update(r)}},{key:"formatText",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(n).forEach((function(o){i.scroll.formatAt(t,e,o,n[o])}));var r=(new(u())).retain(t).retain(e,o()(n));return this.update(r)}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new(u()))}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],n=[];0===e?this.scroll.path(t).forEach((function(t){var e=w(t,1)[0];e instanceof f.ZP?i.push(e):e instanceof d.LeafBlot&&n.push(e)})):(i=this.scroll.lines(t,e),n=this.scroll.descendants(d.LeafBlot,t,e));var o=w([i,n].map((function(t){if(0===t.length)return{};for(var e=(0,f.E2)(t.shift());Object.keys(e).length>0;){var i=t.shift();if(null==i)return e;e=P((0,f.E2)(i),e)}return e})),2);return i=o[0],n=o[1],b(b({},i),n)}},{key:"getHTML",value:function(t,e){var i=w(this.scroll.line(t),2),n=i[0],o=i[1];return n.length()>o+e?A(n,o,e,!0):A(this.scroll,t,e,!0)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertEmbed",value:function(t,e,i){return this.scroll.insertAt(t,e,i),this.update((new(u())).retain(t).insert(y({},e,i)))}},{key:"insertText",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(n).forEach((function(o){i.scroll.formatAt(t,e.length,o,n[o])})),this.update((new(u())).retain(t).insert(e,o()(n)))}},{key:"isBlank",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.scroll.children.length)return!0;if(t)return!1;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===f.ZP.blotName&&!(e.children.length>1)&&e.children.head instanceof _.Z}},{key:"removeFormat",value:function(t,e){var i=this.getText(t,e),n=w(this.scroll.line(t+e),2),o=n[0],r=n[1],s=0,a=new(u());null!=o&&(s=o.length()-r,a=o.delta().slice(r,r+s-1).insert("\n"));var l=this.getContents(t,e+s).diff((new(u())).insert(i).concat(a)),c=(new(u())).retain(t).concat(l);return this.applyDelta(c)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(T)&&this.scroll.find(e[0].target)){var o=this.scroll.find(e[0].target),r=(0,f.E2)(o),a=o.offset(this.scroll),l=e[0].oldValue.replace(p.Z.CONTENTS,""),c=(new(u())).insert(l),d=(new(u())).insert(o.value()),h=i&&{oldRange:R(i.oldRange,-a),newRange:R(i.newRange,-a)};t=(new(u())).retain(a).concat(c.diff(d,h)).reduce((function(t,e){return e.insert?t.insert(e.insert,r):t.push(e)}),new(u())),this.delta=n.compose(t)}else this.delta=this.getDelta(),t&&s()(n.compose(t),this.delta)||this.deltaContainsRetain(n)||(t=n.diff(this.delta,i));return t}},{key:"deltaContainsRetain",value:function(t){return t.ops.some((function(t){return(0,g.Z)(t.retain)}))}}],i&&E(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function B(t,e,i){if(0===t.length){var n=w(M(i.pop()),1)[0];return e<=0?"</li></".concat(n,">"):"</li></".concat(n,">").concat(B([],e-1,i))}var o,r=k(o=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||S(o)||x(),s=r[0],a=s.child,l=s.offset,c=s.length,u=s.indent,d=s.type,h=r.slice(1),p=w(M(d,a),2),f=p[0],_=p[1];if(u>e)return i.push(d),u===e+1?"<".concat(f,"><li").concat(_,">").concat(A(a,l,c)).concat(B(h,u,i)):"<".concat(f,"><li>").concat(B(t,e+1,i));var m=i[i.length-1];if(u===e&&d===m)return"</li><li".concat(_,">").concat(A(a,l,c)).concat(B(h,u,i));var g=w(M(i.pop()),1)[0];return"</li></".concat(g,">").concat(B(t,e-1,i))}function A(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"==typeof t.html)return t.html(e,i);if(t instanceof m.Z)return(0,m.b)(t.value().slice(e,e+i));if(t.children){if("list-container"===t.statics.blotName){var o=[];return t.children.forEachAt(e,i,(function(t,e,i){var n=t.formats();o.push({child:t,offset:e,length:i,indent:n.indent||0,type:n.list})})),B(o,-1,[])}var r=[];if(t.children.forEachAt(e,i,(function(t,e,i){r.push(A(t,e,i))})),function(t,e){1===t.length&&t.head instanceof _.Z&&e.push("<br>")}(t.children,r),n||"list"===t.statics.blotName)return r.join("");var s=function(t){var e=t.domNode.cloneNode(!0);return function(t,e){var i,n;return["tableCellLine","tableHeaderCellLine","tableCell","tableHeaderCell"].includes(t.statics.blotName)&&(i=e,n=t.statics.className,i.classList.remove(n),0===i.classList.length&&i.removeAttribute("class")),e}(t,e)}(t),a=s.outerHTML,l=s.innerHTML,c=w(a.split(">".concat(l,"<")),2),u=c[0],d=c[1];return 0===u.indexOf("<table")?"".concat(u.replace(/(\sdata-.+?=["'].*?["'])/g,""),">").concat(r.join("").replace(/(\sdata-table.+?=["'].*?["'])/g,""),"<").concat(d):"".concat(u,">").concat(r.join(""),"<").concat(d)}return t.domNode.outerHTML}function P(t,e){return Object.keys(e).reduce((function(i,n){return null==t[n]||(e[n]===t[n]?i[n]=e[n]:Array.isArray(e[n])?e[n].indexOf(t[n])<0&&(i[n]=e[n].concat([t[n]])):i[n]=[e[n],t[n]]),i}),{})}function M(t,e){var i="ordered"===t?"ol":"ul",n=e?"".concat(function(t){var e=t.domNode;if(!e.hasAttributes())return"";for(var i=e.attributes,n=" ",o=0;o<i.length;o+=1){var r=i[o].name,s=i[o].value;"class"===r&&(s=s.replace(/ql-indent-\d/g,"").trim()),s.length&&-1===r.indexOf("data-")&&(n+="".concat(r,'="').concat(s,'"'))}return n.length>1?n:""}(e)):"";switch(t){case"checked":return[i,"".concat(n,' data-list="checked"')];case"unchecked":return[i,"".concat(n,' data-list="unchecked"')];default:return[i,n]}}function R(t,e){var i=t.index,n=t.length;return new h.e(i+e,n)}const N=D},2069:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n=i(3034),o=i.n(n),r=i(8034),s=i(2598);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},c.apply(this,arguments)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var h=(0,i(3122).Z)("quill:events");(0,r.Z)()&&["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach((function(t){var i,n=s.Z.get(t);n&&n.emitter&&(i=n.emitter).handleDOM.apply(i,e)}))}))}));var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(s,t);var e,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(o){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this)).listeners={},t.on("error",h.error),t}return e=s,i=[{key:"emit",value:function(){for(var t,e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];(t=h.log).call.apply(t,[h].concat(n)),(e=c(d(s.prototype),"emit",this)).call.apply(e,[this].concat(n))}},{key:"handleDOM",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];(this.listeners[t.type]||[]).forEach((function(e){var n=e.node,o=e.handler;(t.target===n||n.contains(t.target))&&o.apply(void 0,[t].concat(i))}))}},{key:"listenDOM",value:function(t,e,i){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:i})}}],i&&l(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(o());p.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",CONTENT_SETTED:"content-setted",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"},p.sources={API:"api",SILENT:"silent",USER:"user"};const f=p},2598:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=new WeakMap},3122:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=["error","warn","log","info"],o="warn";function r(t){if(n.indexOf(t)<=n.indexOf(o)){for(var e,i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];(e=console)[t].apply(e,r)}}function s(t){return n.reduce((function(e,i){return e[i]=r.bind(console,i,t),e}),{})}s.level=function(t){o=t},r.level=s.level;const a=s},7094:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}function r(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}i.d(e,{Z:()=>a});var s=r((function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quill=e,this.options=i}));s.DEFAULTS={};const a=s},281:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>O});var n=i(9098),o=i.n(n),r=i(8805),s=i.n(r),a=i(732),l=i.n(a),c=i(1233),u=i(2861),d=i(2069),h=i(7094),p=i(7800),f=i(2598),_=i(3122),m=i(1690),g=i(5874),v=i(6229);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function y(t,e,i){return(e=S(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?w(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function x(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S(n.key),n)}}function S(t){var e=function(t,e){if("object"!==b(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===b(e)?e:String(e)}var I=(0,_.Z)("quill"),k="style-data-key",E=new c.Registry;c.ParentBlot.uiClass="ql-ui";var O=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=T(e,n),this.container=this.options.container,null==this.container)return I.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var o=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",f.Z.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.Z;var r=this.options.registry.query(c.ScrollBlot.blotName);this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter,toggleBlankClass:this.toggleBlankClass.bind(this)}),this.editor=new u.Z(this.scroll),this.composition=new v.Z(this.scroll,this.emitter),this.selection=new p.Z(this.scroll,this.emitter,this.composition),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.init(),this.emitter.on(d.Z.events.EDITOR_CHANGE,(function(t){t===d.Z.events.TEXT_CHANGE&&i.toggleBlankClass()})),this.emitter.on(d.Z.events.SCROLL_UPDATE,(function(t,e){var n=i.selection.lastRange,o=C(i.selection.getRange(),1)[0],r=n&&o?{oldRange:n,newRange:o}:void 0;D.call(i,(function(){return i.editor.update(null,e,r)}),t)})),this.setContents(this.getInitialContent(o)),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}var e,i,n;return e=t,i=[{key:"getInitialContent",value:function(t){return this.clipboard.convert({html:"".concat(t,"<p><br></p>"),text:"\n"})}},{key:"toggleBlankClass",value:function(){var t=this.composition.isCompositionInProgress();this.root.classList.toggle("ql-blank",this.editor.isBlank(t))}},{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var i=t;(t=document.createElement("div")).classList.add(i)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,i){var n=this,o=C(B(t,e,i),4);return t=o[0],e=o[1],i=o[3],D.call(this,(function(){return n.editor.deleteText(t,e)}),i,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"editReadOnly",value:function(t){this.allowReadOnlyEdits=!0;var e=t();return this.allowReadOnlyEdits=!1,e}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.Z.sources.API;return this.applyCompositionChanges(),D.call(this,(function(){var n=i.getSelection(!0),r=new(o());if(null==n)return r;if(i.scroll.query(t,c.Scope.BLOCK))r=i.editor.formatLine(n.index,n.length,y({},t,e));else{if(0===n.length)return i.selection.format(t,e),r;r=i.editor.formatText(n.index,n.length,y({},t,e))}return i.setSelection(n,d.Z.sources.SILENT),r}),n)}},{key:"formatLine",value:function(t,e,i,n,o){var r,s=this,a=C(B(t,e,i,n,o),4);return t=a[0],e=a[1],r=a[2],o=a[3],D.call(this,(function(){return s.editor.formatLine(t,e,r)}),o,t,0)}},{key:"formatText",value:function(t,e,i,n,o){var r,s=this,a=C(B(t,e,i,n,o),4);return t=a[0],e=a[1],r=a[2],o=a[3],D.call(this,(function(){return s.editor.formatText(t,e,r)}),o,t,0)}},{key:"getBounds",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e="number"==typeof t?this.selection.getBounds(t,i):this.selection.getBounds(t.index,t.length);var n=this.container.getBoundingClientRect();return{bottom:e.bottom-n.top,height:e.height,left:e.left-n.left,right:e.right-n.left,top:e.top-n.top,width:e.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,i=C(B(t,e),2);return t=i[0],e=i[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,g.Z)(t)?"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length):{}}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getSemanticHTML",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,i=C(B(t,e),2);return t=i[0],e=i[1],this.editor.getHTML(t,e)}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,i=C(B(t,e),2);return t=i[0],e=i[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,i,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return D.call(this,(function(){return o.editor.insertEmbed(e,i,n)}),r,e)}},{key:"insertText",value:function(t,e,i,n,o){var r,s=this,a=C(B(t,0,i,n,o),4);return t=a[0],r=a[2],o=a[3],D.call(this,(function(){return s.editor.insertText(t,e,r)}),o,t,e.length)}},{key:"isEnabled",value:function(){return this.scroll.isEnabled()}},{key:"off",value:function(){var t;return(t=this.emitter).off.apply(t,arguments)}},{key:"on",value:function(){var t;return(t=this.emitter).on.apply(t,arguments)}},{key:"once",value:function(){var t;return(t=this.emitter).once.apply(t,arguments)}},{key:"removeFormat",value:function(t,e,i){var n=this,o=C(B(t,e,i),4);return t=o[0],e=o[1],i=o[3],D.call(this,(function(){return n.editor.removeFormat(t,e)}),i,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.Z.sources.API;return D.call(this,(function(){e=new(o())(e);var n=i.getLength(),r=i.editor.deleteText(0,n),s=i.editor.applyDelta(e),a=i.editor.deleteText(i.getLength()-1,1);return i.emitter.emit(t.events.CONTENT_SETTED),r.compose(s).compose(a)}),n)}},{key:"setSelection",value:function(e,i,n){if(null==e)this.selection.setRange(null,i||t.sources.API);else{var o=C(B(e,i,n),4);e=o[0],i=o[1],n=o[3],this.selection.setRange(new p.e(Math.max(0,e),i),n),n!==d.Z.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.Z.sources.API,i=(new(o())).insert(t);return this.setContents(i,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.Z.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.Z.sources.API;return D.call(this,(function(){return t=new(o())(t),e.editor.applyDelta(t,i)}),i,!0)}},{key:"applyCompositionChanges",value:function(){this.composition.handleCompositionEnd({})}}],n=[{key:"debug",value:function(t){!0===t&&(t="log"),_.Z.level(t)}},{key:"find",value:function(t){return f.Z.get(t)||E.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&I.error("Cannot import ".concat(t,". Are you sure it was registered?")),this.imports[t]}},{key:"register",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var o=t.attrName||t.blotName;"string"==typeof o?this.register("formats/".concat(o),t,e):Object.keys(t).forEach((function(n){i.register(n,t[n],e)}))}else null==this.imports[t]||n||I.warn("Overwriting ".concat(t," with"),e),this.imports[t]=e,0!==t.indexOf("blots/")&&0!==t.indexOf("formats/")||"abstract"===e.blotName||E.register(e),"function"==typeof e.register&&e.register(E)}}],i&&x(e.prototype,i),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t,e){if((e=l()({container:t,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0}},e)).theme&&e.theme!==O.DEFAULTS.theme){if(e.theme=O.import("themes/".concat(e.theme)),null==e.theme)throw new Error("Invalid theme ".concat(e.theme,". Did you register it?"))}else e.theme=m.Z;var i=s()(e.theme.DEFAULTS);[i,e].forEach((function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach((function(e){!0===t.modules[e]&&(t.modules[e]={})}))}));var n=Object.keys(i.modules).concat(Object.keys(e.modules)).reduce((function(t,e){var i=O.import("modules/".concat(e));return null==i?I.error("Cannot load ".concat(e," module. Are you sure you registered it?")):t[e]=i.DEFAULTS||{},t}),{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=l()({},O.DEFAULTS,{modules:n},i,e),["bounds","container","scrollingContainer"].forEach((function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),e.modules=Object.keys(e.modules).reduce((function(t,i){return e.modules[i]&&(t[i]=e.modules[i]),t}),{}),e}function D(t,e,i,n){if(!this.isEnabled()&&e===d.Z.sources.USER&&!this.allowReadOnlyEdits)return new(o());var r=null==i?null:this.getSelection(),s=this.editor.delta,a=t();if(null!=r&&(!0===i&&(i=r.index),null==n?r=A(r,a,e):0!==n&&(r=A(r,i,n,e)),this.setSelection(r,d.Z.sources.SILENT)),a.length()>0){var l,c,u=[d.Z.events.TEXT_CHANGE,a,s,e];(l=this.emitter).emit.apply(l,[d.Z.events.EDITOR_CHANGE].concat(u)),e!==d.Z.sources.SILENT&&(c=this.emitter).emit.apply(c,u)}return a}function B(t,e,i,n,o){var r={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(o=n,n=i,i=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(o=n,n=i,i=e,e=0),"object"===b(i)?(r=i,o=n):"string"==typeof i&&(null!=n?r[i]=n:o=i),[t,e,r,o=o||d.Z.sources.API]}function A(t,e,i,n){if(null==t)return null;var r,s;if(e instanceof o()){var a=C([t.index,t.index+t.length].map((function(t){return e.transformPosition(t,n!==d.Z.sources.USER)})),2);r=a[0],s=a[1]}else{var l=C([t.index,t.index+t.length].map((function(t){return t<e||t===e&&n===d.Z.sources.USER?t:i>=0?t+i:Math.max(e,t+i)})),2);r=l[0],s=l[1]}return new p.e(r,s-r)}O.DEFAULTS={bounds:null,modules:{},placeholder:"",readOnly:!1,registry:E,scrollingContainer:null,theme:"default"},O.events=d.Z.events,O.sources=d.Z.sources,O.version="1.7.0",O.MS_LIST_DATA_KEY="mso-list-data",O.replaceStyleAttribute=function(t){return t.replace(/(?:(<[a-z0-9]+\s*))([\s\S]*?)(>|\/>)/gi,(function(t,e,i,n){return e+i.replace(/style\s*=/gi,"".concat(k,"="))+n}))},O.restoreStyleAttribute=function(t){t.querySelectorAll("[".concat(k,"]")).forEach((function(t){var e=t.getAttribute(k);t.style=e,t.setAttribute(O.MS_LIST_DATA_KEY,e),t.removeAttribute(k)}))},O.imports={delta:o(),parchment:c,"core/module":h.Z,"core/theme":m.Z}},7800:(t,e,i)=>{"use strict";i.d(e,{Z:()=>y,e:()=>b});var n=i(1233),o=i(8805),r=i.n(o),s=i(2722),a=i.n(s),l=i(2069);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}function _(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g=(0,i(3122).Z)("quill:selection");function v(t){return t<0?0:t}var b=_((function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;m(this,t),this.index=e,this.length=i})),y=function(){function t(e,i,n){var o=this;m(this,t),this.emitter=i,this.scroll=e,this.composition=n,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new b(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){o.mouseDown||o.composition.isCompositionInProgress()||setTimeout(o.update.bind(o,l.Z.sources.USER),1)})),this.emitter.on(l.Z.events.SCROLL_BEFORE_UPDATE,(function(){if(o.hasFocus()){var t=o.getNativeRange();null!=t&&t.start.node!==o.cursor.textNode&&o.emitter.once(l.Z.events.SCROLL_UPDATE,(function(){try{o.root.contains(t.start.node)&&o.root.contains(t.end.node)&&o.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset),o.update(l.Z.sources.SILENT)}catch(t){}}))}})),this.emitter.on(l.Z.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var i=e.range,n=i.startNode,r=i.startOffset,s=i.endNode,a=i.endOffset;o.setNativeRange(n,r,s,a),o.update(l.Z.sources.SILENT)}})),this.update(l.Z.sources.SILENT)}return _(t,[{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(l.Z.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){this.scroll.update();var i=this.getNativeRange();if(null!=i&&i.native.collapsed&&!this.scroll.query(t,n.Scope.BLOCK)){if(i.start.node!==this.cursor.textNode){var o=this.scroll.find(i.start.node,!1);if(null==o)return;if(o instanceof n.LeafBlot){var r=o.split(i.start.offset);o.parent.insertBefore(this.cursor,r)}else o.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}},{key:"getBounds",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();t=Math.min(t,n-1),i=Math.min(t+i,n-1)-t;var o=d(this.scroll.leaf(t),2),r=o[0],s=o[1];if(null==r)return null;var a=d(this.getPositionData(r,s,!0),2);e=a[0],s=a[1];var l=document.createRange();if(i>0){l.setStart(e,s);var c=d(this.scroll.leaf(t+i),2);if(r=c[0],s=c[1],null==r)return null;var u=d(this.getPositionData(r,s,!0),2);return e=u[0],s=u[1],l.setEnd(e,s),l.getBoundingClientRect()}var h,p="left";if(e instanceof Text){if(s<e.data.length)l.setStart(e,s),l.setEnd(e,s+1);else{var f=v(s-1);l.setStart(e,f),l.setEnd(e,s),p="right"}h=l.getBoundingClientRect()}else h=r.domNode.getBoundingClientRect(),s>0&&(p="right");return{bottom:h.top+h.height,height:h.height,left:h[p],right:h[p],top:h.top,width:0}}},{key:"getNativeRange",value:function(){var t,e,i=this.root.getRootNode(),n=null!==(t=null===(e=i.getSelection)||void 0===e?void 0:e.call(i))&&void 0!==t?t:document.getSelection();if(null==n||n.rangeCount<=0)return null;var o=n.getRangeAt(0);if(null==o)return null;var r=this.normalizeNative(o);return g.info("getNativeRange",r),r}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){var t=this.root.getRootNode();return t.activeElement===this.root||C(this.root,t.activeElement)}},{key:"normalizedToRange",value:function(t){var e=this,i=[[t.start.node,t.start.offset]];t.native.collapsed||i.push([t.end.node,t.end.offset]);var o=i.map((function(t){var i=d(t,2),o=i[0],r=i[1],s=e.scroll.find(o,!0),a=s.offset(e.scroll);return 0===r?a:s instanceof n.LeafBlot?a+s.index(o,r):a+s.length()})),r=Math.min(Math.max.apply(Math,u(o)),this.scroll.length()-1),s=Math.min.apply(Math,[r].concat(u(o)));return new b(s,r-s)}},{key:"normalizeNative",value:function(t){if(!C(this.root,t.startContainer)||!t.collapsed&&!C(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,i=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>i)e=e.childNodes[i],i=0;else{if(e.childNodes.length!==i)break;i=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=i})),e}},{key:"rangeToNative",value:function(t){var e=this,i=t.collapsed?[t.index]:[t.index,t.index+t.length],n=[],o=this.scroll.length();return i.forEach((function(t,i){t=Math.min(o-1,t);var r=d(e.scroll.leaf(t),2),s=r[0],a=r[1],l=d(e.getPositionData(s,a,0!==i),2),c=l[0],u=l[1];n.push(c,u)})),n.length<2?n.concat(n):n}},{key:"getPositionData",value:function(t,e,i){return t instanceof n.LeafBlot?t.position(e,i):[t.domNode,e]}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var i=this.getBounds(e.index,e.length);if(null!=i){var n=this.scroll.length()-1,o=d(this.scroll.line(Math.min(e.index,n)),1)[0],r=o;if(e.length>0&&(r=d(this.scroll.line(Math.min(e.index+e.length,n)),1)[0]),null!=o&&null!=r){var s=t.getBoundingClientRect();i.top<s.top?t.scrollTop-=s.top-i.top:i.bottom>s.bottom&&(t.scrollTop+=i.bottom-s.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(g.info("setNativeRange",t,e,i,n),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=i.parentNode){var r=document.getSelection();if(null!=r)if(null!=t){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||o||t!==s.startContainer||e!==s.startOffset||i!==s.endContainer||n!==s.endOffset){"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),"BR"===i.tagName&&(n=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);var a=document.createRange();e=v(e),n=v(n),a.setStart(t,e),a.setEnd(i,n),r.removeAllRanges(),r.addRange(a)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.Z.sources.API;if("string"==typeof e&&(i=e,e=!1),g.info("setRange",t),null!=t){var n=this.rangeToNative(t);this.setNativeRange.apply(this,u(n).concat([e]))}else this.setNativeRange(null);this.update(i)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.Z.sources.USER,e=this.lastRange,i=d(this.getRange(),2),n=i[0],o=i[1];if(this.lastRange=n,this.lastNative=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!a()(e,this.lastRange)){var s;if(!this.composition.isCompositionInProgress()&&null!=o&&o.native.collapsed&&o.start.node!==this.cursor.textNode){var c=this.cursor.restore();c&&this.setNativeRange(c.startNode,c.startOffset,c.endNode,c.endOffset)}var u,h=[l.Z.events.SELECTION_CHANGE,r()(this.lastRange),r()(e),t];(s=this.emitter).emit.apply(s,[l.Z.events.EDITOR_CHANGE].concat(h)),t!==l.Z.sources.SILENT&&(u=this.emitter).emit.apply(u,h)}}}]),t}();function C(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}},1690:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}i.d(e,{Z:()=>s});var r=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.quill=e,this.options=i,this.modules={}}var e,i;return e=t,(i=[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/".concat(t));return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}])&&o(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();r.DEFAULTS={modules:{}},r.themes={default:r};const s=r},715:(t,e,i)=>{"use strict";i.d(e,{HE:()=>a,dk:()=>s,if:()=>r});var n=i(1233),o={scope:n.Scope.BLOCK,whitelist:["right","center","justify"]},r=new n.Attributor("align","align",o),s=new n.ClassAttributor("align","ql-align",o),a=new n.StyleAttributor("align","text-align",o)},7898:(t,e,i)=>{"use strict";i.d(e,{Y:()=>r,w:()=>s});var n=i(1233),o=i(6039),r=new n.ClassAttributor("background","ql-bg",{scope:n.Scope.INLINE}),s=new o.OO("background","background-color",{scope:n.Scope.INLINE})},3991:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},r.apply(this,arguments)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}i.d(e,{Z:()=>c});var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(h,t);var e,i,l,c,u,d=(c=h,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(c);if(u){var i=a(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function h(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),d.apply(this,arguments)}return e=h,l=[{key:"create",value:function(){return r(a(h),"create",this).call(this)}},{key:"formats",value:function(){return!0}}],(i=[{key:"optimize",value:function(t){r(a(h.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}])&&o(e.prototype,i),l&&o(e,l),Object.defineProperty(e,"prototype",{writable:!1}),h}(i(6603).Z);l.blotName="bold",l.tagName=["STRONG","B"];const c=l},7309:(t,e,i)=>{"use strict";i.d(e,{EK:()=>C,ZP:()=>y,se:()=>b});var n=i(6446),o=i(4122),r=i(3657),s=i(6603),a=i(8222),l=i(3553),c=i(281);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==u(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===u(o)?o:String(o)),n)}var o}function p(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},f.apply(this,arguments)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=v(t);if(e){var o=v(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}var b=function(t){_(i,t);var e=g(i);function i(){return d(this,i),e.apply(this,arguments)}return p(i,[{key:"code",value:function(t,e){var i=this.children.map((function(t){return t.length()<=1?"":t.domNode.textContent})).join("\n").slice(t,t+e);return(0,a.b)(i)}},{key:"html",value:function(t,e){return"<pre>\n".concat(this.code(t,e),"\n</pre>")}}],[{key:"create",value:function(t){var e=f(v(i),"create",this).call(this,t);return e.setAttribute("spellcheck",!1),e}}]),i}(l.Z),y=function(t){_(i,t);var e=g(i);function i(){return d(this,i),e.apply(this,arguments)}return p(i,null,[{key:"register",value:function(){c.ZP.register(b)}}]),i}(n.ZP),C=function(t){_(i,t);var e=g(i);function i(){return d(this,i),e.apply(this,arguments)}return p(i)}(s.Z);C.blotName="code",C.tagName="CODE",y.blotName="code-block",y.className="ql-code-block",y.tagName="DIV",b.blotName="code-block-container",b.className="ql-code-block-container",b.tagName="DIV",b.allowedChildren=[y],y.allowedChildren=[a.Z,o.Z,r.Z],y.requiredContainer=b,y.TAB="  "},6039:(t,e,i)=>{"use strict";i.d(e,{HQ:()=>d,Hn:()=>u,OO:()=>c});var n=i(1233);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==o(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===o(r)?r:String(r)),n)}var r}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},s.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(d,t);var e,i,n,c,u=(n=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(c){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function d(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),u.apply(this,arguments)}return e=d,(i=[{key:"value",value:function(t){var e=s(l(d.prototype),"value",this).call(this,t);if(0!==e.indexOf("rgb("))return e;var i=(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map((function(t){return"00".concat(parseInt(t,10).toString(16)).slice(-2)})).join("");return"#".concat(i)}}])&&r(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),d}(n.StyleAttributor),u=new n.ClassAttributor("color","ql-color",{scope:n.Scope.INLINE}),d=new c("color","color",{scope:n.Scope.INLINE})},4048:(t,e,i)=>{"use strict";i.d(e,{H8:()=>a,IF:()=>r,hY:()=>s});var n=i(1233),o={scope:n.Scope.BLOCK,whitelist:["rtl"]},r=new n.Attributor("direction","dir",o),s=new n.ClassAttributor("direction","ql-direction",o),a=new n.StyleAttributor("direction","direction",o)},5832:(t,e,i)=>{"use strict";i.d(e,{H:()=>h,_:()=>u});var n=i(1233);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==o(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===o(r)?r:String(r)),n)}var r}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},s.apply(this,arguments)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var c={scope:n.Scope.INLINE,whitelist:["serif","monospace"]},u=new n.ClassAttributor("font","ql-font",c),d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(d,t);var e,i,n,c,u=(n=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(n);if(c){var i=l(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function d(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),u.apply(this,arguments)}return e=d,(i=[{key:"value",value:function(t){return s(l(d.prototype),"value",this).call(this,t).replace(/["']/g,"")}}])&&r(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),d}(n.StyleAttributor),h=new d("font","font-family",c)},7256:(t,e,i)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==n(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},r.apply(this,arguments)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}i.d(e,{N:()=>c,Z:()=>l});var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,t);var e,i,l,u,d,h=(u=p,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=a(u);if(d){var i=a(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),h.apply(this,arguments)}return e=p,l=[{key:"create",value:function(t){var e=r(a(p),"create",this).call(this,t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return c(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}],(i=[{key:"format",value:function(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("href",this.constructor.sanitize(e)):r(a(p.prototype),"format",this).call(this,t,e)}}])&&o(e.prototype,i),l&&o(e,l),Object.defineProperty(e,"prototype",{writable:!1}),p}(i(6603).Z);function c(t,e){var i=document.createElement("a");i.href=t;var n=i.href.slice(0,i.href.indexOf(":"));return e.indexOf(n)>-1}l.blotName="link",l.tagName="A",l.SANITIZED_URL="about:blank",l.PROTOCOL_WHITELIST=["http","https","mailto","tel"]},1629:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r,m:()=>o});var n=i(1233),o=new n.ClassAttributor("size","ql-size",{scope:n.Scope.INLINE,whitelist:["small","large","huge"]}),r=new n.StyleAttributor("size","font-size",{scope:n.Scope.INLINE,whitelist:["10px","18px","32px"]})},1342:(t,e,i)=>{"use strict";i.d(e,{Du:()=>u,h6:()=>d,kk:()=>c,yA:()=>l});var n=i(6062),o=i(1801),r=i(8252);function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l=r.F1.map((function(t){return(0,n.Z)(r.Pw,t)})),c=r.Mu.map((function(t){return(0,o.Z)(r.Pw,t)})),u=c.reduce((function(t,e){return t[e.attrName]=e,t}),{}),d=[].concat(s(l),s(c)).reduce((function(t,e){return t[e.keyName]=e,t}),{})},8252:(t,e,i)=>{"use strict";i.d(e,{F1:()=>o,Mu:()=>r,Pw:()=>n,fU:()=>s});var n={name:"cell",allowedTags:["TH","TD","TR"]},o=["height","width"],r=["height","width","vertical-align","text-align","background-color","border","border-style","border-width","border-color","padding","padding-top","padding-right","padding-bottom","padding-left"],s=new Set([].concat(o,r))},6062:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(1674),o=i(2141),r=i(3398),s=["name"];function a(t,e){var i=t.name,a=function(t,e){if(null==t)return{};var i,n,o=function(t,e){if(null==t)return{};var i,n,o={},r=Object.keys(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||(o[i]=t[i]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o}(t,s),l="".concat(i).concat((0,o.Z)(e)),c="".concat(r.WT.attribute).concat(i,"_").concat(e);return new n.Z(l,c,a)}},1801:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(4569),o=i(2141),r=i(3398),s=["name","formatName"];function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function l(t,e){var i,l,c=t.name,u=t.formatName,d=function(t,e){if(null==t)return{};var i,n,o=function(t,e){if(null==t)return{};var i,n,o={},r=Object.keys(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||(o[i]=t[i]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o}(t,s),h=(i=e.split("-"),l=2,function(t){if(Array.isArray(t))return t}(i)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(i,l)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}(i,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=h[0],f=h[1],_="".concat(c).concat((0,o.Z)(null!=u?u:p)).concat(f?(0,o.Z)(f):""),m="".concat(r.WT.style).concat(c,"_").concat(e);return new n.Z(_,m,d)}},319:(t,e,i)=>{"use strict";i.d(e,{Qu:()=>l,VT:()=>c,Zt:()=>d,li:()=>u});var n=i(6062),o=i(1801),r=i(19);function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l=r.N2.map((function(t){return(0,n.Z)(r.Sp,t)})),c=r.GX.map((function(t){return(0,o.Z)(r.Sp,t)})),u=c.reduce((function(t,e){return t[e.attrName]=e,t}),{}),d=[].concat(s(l),s(c)).reduce((function(t,e){return t[e.keyName]=e,t}),{})},19:(t,e,i)=>{"use strict";i.d(e,{GX:()=>r,N2:()=>o,Sp:()=>n,bc:()=>s});var n={name:"table",allowedTags:["TABLE"]},o=["height","width"],r=["height","width","text-align","background-color","border","border-style","border-width","border-color"],s=new Set([].concat(o,r))},8536:(t,e,i)=>{"use strict";function n(){return Math.random().toString(36).slice(2,6)}i.d(e,{Z:()=>n})},1969:(t,e,i)=>{"use strict";i.d(e,{KA:()=>P,Lv:()=>V,RM:()=>R,SC:()=>A,iD:()=>E,pj:()=>T,xD:()=>N,xJ:()=>$,xs:()=>D,zW:()=>k});var n=i(6446),o=i(4122),r=i(3553),s=i(5874),a=i(1342),l=i(319),c=i(8536),u=i(2795);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return f(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===d(o)?o:String(o)),n)}var o}function g(t,e,i){return e&&m(t.prototype,e),i&&m(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},v.apply(this,arguments)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=w(t);if(e){var o=w(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var x=["row","cell"],S="data-table-";function I(t,e,i){t.forEachAt(e,i,(function(t,e,i){t.deleteAt(e,i)}))}var k=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i,[{key:"optimize",value:function(){var t,e=this.domNode.getAttribute("".concat(S,"row"));if(this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)){var n=this.domNode,o={row:e};Object.keys(a.Du).forEach((function(t){var e=n.dataset[t.toLowerCase()];e&&(o[t]=e)})),this.wrap(this.statics.requiredContainer.blotName,o)}for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];(t=v(w(i.prototype),"optimize",this)).call.apply(t,[this].concat(s))}},{key:"format",value:function(t,e){"tableCellLine"===t&&null===e&&(e=this.formats().tableCellLine);var n=x.indexOf(t)>-1;if(n||l.li[t]||a.Du[t]){var o,r,s="data-".concat(n?"table-":"").concat(t.toLowerCase());(0,u.Z)(this.domNode,s,e),a.Du[t]&&(null===(o=this.cell())||void 0===o||o.format(t,e)),l.li[t]&&(null===(r=this.cell())||void 0===r||null===(r=r.table())||void 0===r||r.format(t,e))}else v(w(i.prototype),"format",this).call(this,t,e)}},{key:"cell",value:function(){return"row"in this.parent?this.parent:null}}],[{key:"create",value:function(t){var e=v(w(i),"create",this).call(this,t);return x.forEach((function(i){var n,o="row"===i?V:F;e.setAttribute("".concat(S).concat(i),null!==(n=null==t?void 0:t[i])&&void 0!==n?n:o())})),e}},{key:"formats",value:function(t){return x.reduce((function(e,i){var n="".concat(S).concat(i);return t.hasAttribute(n)&&(e[i]=t.getAttribute(n)||void 0),e}),{})}}]),i}(n.ZP);k.blotName="tableCellLine",k.className="ql-table-cell-line",k.tagName="P";var E=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i)}(k);E.blotName="tableHeaderCellLine",E.className="ql-table-header-cell-line";var O=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i,[{key:"format",value:function(t,e){var i;null===(i=a.Du[t])||void 0===i||i.add(this.domNode,e)}},{key:"checkMerge",value:function(){if(v(w(i.prototype),"checkMerge",this).call(this)&&null!=this.next.children.head){var t=this.children.head.formats()[this.children.head.statics.blotName],e=this.children.tail.formats()[this.children.tail.statics.blotName],n=this.next.children.head.formats()[this.next.children.head.statics.blotName],o=this.next.children.tail.formats()[this.next.children.tail.statics.blotName];return t.cell===e.cell&&t.cell===n.cell&&t.cell===o.cell}return!1}},{key:"formats",value:function(){return i.cellFormats(this.domNode)}},{key:"cellOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"row",value:function(){return"table"in this.parent?this.parent:null}},{key:"rowOffset",value:function(){return this.row()?this.row().rowOffset():-1}},{key:"table",value:function(){var t;return null===(t=this.row())||void 0===t?void 0:t.table()}},{key:"optimize",value:function(){var t,e,n=null!==(t=this.domNode.getAttribute("".concat(S,"row")))&&void 0!==t?t:this.domNode.getAttribute("".concat(S,"header-row"));!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName,{row:n});for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];(e=v(w(i.prototype),"optimize",this)).call.apply(e,[this].concat(r))}},{key:"deleteAt",value:function(t,e){I(this.children,t,e)}}],[{key:"create",value:function(t){var e=v(w(i),"create",this).call(this,t);return t&&Object.keys(t).forEach((function(i){var n;null===(n=a.Du[i])||void 0===n||n.add(e,t[i])})),e}},{key:"cellFormats",value:function(t){var e,i={};return(t.hasAttribute("".concat(S,"row"))||t.hasAttribute("".concat(S,"header-row")))&&(i.row=null!==(e=t.getAttribute("".concat(S,"row")))&&void 0!==e?e:t.getAttribute("".concat(S,"header-row"))),Object.keys(a.Du).forEach((function(e){var n,o=null===(n=t.firstElementChild)||void 0===n?void 0:n.dataset[e.toLowerCase()];o&&(i[e]=o)})),i}}]),i}(r.Z);O.tagName=["TD","TH"];var T=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i,[{key:"format",value:function(t,e){"row"===t?(this.domNode.setAttribute("".concat(S).concat(t),e),this.children.forEach((function(i){i.format(t,e)}))):v(w(i.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=v(w(i),"create",this).call(this,t),n="".concat(S,"row");return null!=t&&t.row&&e.setAttribute(n,t.row),e}}]),i}(O);T.blotName="tableCell",T.className="ql-table-data-cell",T.dataAttribute="".concat(S,"row"),T.defaultChild=k;var D=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i,[{key:"format",value:function(t,e){"row"===t?(this.domNode.setAttribute("".concat(S).concat(t),e),this.children.forEach((function(i){i.format(t,e)}))):v(w(i.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=v(w(i),"create",this).call(this,t),n="".concat(S,"header-row");return t&&t.row&&e.setAttribute(n,t.row),e}}]),i}(O);D.tagName=["TH","TD"],D.className="ql-table-header-cell",D.blotName="tableHeaderCell",D.dataAttribute="".concat(S,"header-row"),D.defaultChild=E;var B=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i,[{key:"checkMerge",value:function(){if(v(w(i.prototype),"checkMerge",this).call(this)&&(0,s.Z)(this.next.children.head)){var t="row",e=this.children.head.formats(),n=this.children.tail.formats(),o=this.next.children.head.formats(),r=this.next.children.tail.formats();return e[t]===n[t]&&e[t]===o[t]&&e[t]===r[t]}return!1}},{key:"optimize",value:function(){for(var t,e=this,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];(t=v(w(i.prototype),"optimize",this)).call.apply(t,[this].concat(o));var a=this.childFormatName;this.children.forEach((function(t){if((0,s.Z)(t.next)){var i=t.formats(),n=t.next.formats();if(i[a]!==n[a]){var o=e.splitAfter(t);o&&o.optimize(),e.prev&&e.prev.optimize()}}}))}},{key:"rowOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"table",value:function(){var t;return null===(t=this.parent)||void 0===t?void 0:t.parent}},{key:"formats",value:function(){var t={},e="".concat(S,"row");return this.domNode.hasAttribute(e)&&(t[e]=this.domNode.getAttribute(e)),t}}],[{key:"create",value:function(t){var e=v(w(i),"create",this).call(this,t);return null!=t&&t.row&&e.setAttribute("".concat(S,"row"),t.row),e}}]),i}(r.Z);B.tagName="TR";var A=function(t){b(i,t);var e=C(i);function i(t,n){var o;return _(this,i),(o=e.call(this,t,n)).childFormatName="table",o}return g(i,[{key:"deleteAt",value:function(t,e){I(this.children,t,e)}}]),i}(B);A.blotName="tableRow";var P=function(t){b(i,t);var e=C(i);function i(t,n){var o;return _(this,i),(o=e.call(this,t,n)).childFormatName="tableHeaderCell",o}return g(i)}(B);P.blotName="tableHeaderRow";var M=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i,[{key:"optimize",value:function(){var t;if(this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)){var e,n=(null===(e=this.children.head.children.head.children)||void 0===e||null===(e=e.head)||void 0===e?void 0:e.domNode)||null,o={};n&&Object.keys(l.li).forEach((function(t){var e=n.dataset[t.toLowerCase()];e&&(o[t]=e)})),this.wrap(this.statics.requiredContainer.blotName,o)}for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];(t=v(w(i.prototype),"optimize",this)).call.apply(t,[this].concat(s))}}]),i}(r.Z),R=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i)}(M);R.blotName="tableBody",R.tagName="TBODY";var N=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i)}(M);N.blotName="tableHeader",N.tagName="THEAD";var $=function(t){b(i,t);var e=C(i);function i(){return _(this,i),e.apply(this,arguments)}return g(i,[{key:"balanceCells",value:function(){var t=this.descendants(P),e=this.descendants(A),i=this.getMaxTableColCount(t,e);this.balanceRows(i,t,D),this.balanceRows(i,e,T)}},{key:"getMaxTableColCount",value:function(t,e){return Math.max(this.getMaxRowColCount(t),this.getMaxRowColCount(e))}},{key:"getMaxRowColCount",value:function(t){return Math.max.apply(Math,function(t){if(Array.isArray(t))return f(t)}(e=t.map((function(t){return t.children.length})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var e}},{key:"balanceRows",value:function(t,e,i){var n=this;e.forEach((function(e){new Array(t-e.children.length).fill(0).forEach((function(){var t;(0,s.Z)(e.children.head)&&(t=i.cellFormats(e.children.head.domNode));var o=n.scroll.create(i.blotName,t),r=n.scroll.create(i.allowedChildren[0].blotName,t);o.appendChild(r),e.appendChild(o),o.optimize()}))}))}},{key:"cells",value:function(t){return this.rows().map((function(e){return e.children.at(t)}))}},{key:"deleteColumn",value:function(t){var e=this;[N,R].forEach((function(i){var n=h(e.descendants(i),1)[0];(0,s.Z)(n)&&(0,s.Z)(n.children.head)&&n.children.forEach((function(e){var i=e.children.at(t);(0,s.Z)(i)&&i.remove()}))}))}},{key:"insertColumn",value:function(t){var e=this;[N,R].forEach((function(i){var n=h(e.descendants(i),1)[0];if((0,s.Z)(n)&&(0,s.Z)(n.children.head)){var r=i===N?D:T,a=i===N?E:k;n.children.forEach((function(i){var n=i.children.at(t),s=a.formats(i.children.head.children.head.domNode),l=e.scroll.create(r.blotName,{row:s.row}),c=e.scroll.create(a.blotName,{row:s.row}),u=e.scroll.create(o.Z.blotName);c.appendChild(u),l.appendChild(c),i.insertBefore(l,n)}))}}))}},{key:"insertRow",value:function(t){var e=this,i=h(this.descendants(R),1)[0];if((0,s.Z)(i)&&(0,s.Z)(i.children.head)){var n=V(),r=this.scroll.create(A.blotName,{row:n});i.children.head.children.forEach((function(){var t=e.scroll.create(T.blotName,{row:n}),i=e.scroll.create(k.blotName,{row:n}),s=e.scroll.create(o.Z.blotName);i.appendChild(s),t.appendChild(i),r.appendChild(t)}));var a=i.children.at(t);i.insertBefore(r,a)}}},{key:"insertHeaderRow",value:function(){var t=this,e=h(this.descendants(N),1)[0],i=h(this.descendants(R),1)[0];if(!(0,s.Z)(e)&&(0,s.Z)(i)&&(0,s.Z)(i.children.head)){var n=V(),r=this.scroll.create(N.blotName),a=this.scroll.create(P.blotName),l=this.children.at(0);r.appendChild(a),i.children.head.children.forEach((function(){var e=t.scroll.create(D.blotName,{row:n}),i=t.scroll.create(E.blotName,{row:n}),r=t.scroll.create(o.Z.blotName);i.appendChild(r),e.appendChild(i),a.appendChild(e),e.optimize()})),this.insertBefore(r,l)}}},{key:"rows",value:function(){var t=this.children.head;return(0,s.Z)(t)?t.children.map((function(t){return t})):[]}},{key:"formats",value:function(){var t={},e=this.cells()[0].domNode.firstElementChild;return Object.keys(l.li).forEach((function(i){var n=null==e?void 0:e.dataset[i.toLowerCase()];n&&(t[i]=n)})),t}},{key:"format",value:function(t,e){var i=l.li[t];if(i){var n="data-".concat(t.toLowerCase());this.cells().forEach((function(t){(0,u.Z)(t.children.head.domNode,n,e)})),i.add(this.domNode,e)}}}],[{key:"create",value:function(t){var e=v(w(i),"create",this).call(this,t);return t&&Object.keys(t).forEach((function(i){var n;null===(n=l.li[i])||void 0===n||n.add(e,t[i])})),e}}]),i}(r.Z);function V(){return"row-".concat((0,c.Z)())}function F(){return"cell-".concat((0,c.Z)())}$.blotName="tableContainer",$.tagName="TABLE",$.allowedChildren=[N,R],R.requiredContainer=$,N.requiredContainer=$,R.allowedChildren=[A],A.requiredContainer=R,A.allowedChildren=[T],T.requiredContainer=A,k.requiredContainer=T,T.allowedChildren=[k],N.allowedChildren=[P],P.requiredContainer=N,E.requiredContainer=D,D.allowedChildren=[E],P.allowedChildren=[D],D.requiredContainer=P},2795:(t,e,i)=>{"use strict";function n(t,e,i){i?t.setAttribute(e,i):t.removeAttribute(e)}i.d(e,{Z:()=>n})},5635:(t,e,i)=>{"use strict";i.d(e,{HI:()=>N,PF:()=>$,ZP:()=>R,fw:()=>H});var n=i(9098),o=i.n(n),r=i(1233),s=i(6446),a=i(281),l=i(3122),c=i(7094),u=i(715),d=i(7898),h=i(7309),p=i(6039),f=i(4048),_=i(5832),m=i(1629),g=i(3071),v=i(2141);function b(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?b(Object(i),!0).forEach((function(e){w(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function w(t,e,i){return(e=k(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function x(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return S(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?S(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function I(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k(n.key),n)}}function k(t){var e=function(t,e){if("object"!==C(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===C(e)?e:String(e)}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var D=(0,l.Z)("quill:clipboard"),B=[[3,W],[3,j],["br",function(t,e){return $(e,"\n")||e.insert("\n"),e}],[1,j],[1,function(t,e,i){var n=i.query(t);if(null==n)return e;if(n.prototype instanceof r.EmbedBlot){var s={},a=n.value(t);if(null!=a)return s[n.blotName]=a,(new(o())).insert(s,n.formats(t,i))}else if(n.prototype instanceof r.BlockBlot&&!$(e,"\n")&&e.insert("\n"),"function"==typeof n.formats)return N(e,n.blotName,n.formats(t,i));return e}],[1,function(t,e,i){if(-1===["TD","TH","TR","TABLE"].indexOf(t.tagName)){var n=r.Attributor.keys(t),o=r.ClassAttributor.keys(t),s=r.StyleAttributor.keys(t),a={};if(n.concat(o).concat(s).forEach((function(e){var n=i.query(e,r.Scope.ATTRIBUTE);null!=n&&(a[n.attrName]=n.value(t),a[n.attrName])||(null==(n=P[e])||n.attrName!==e&&n.keyName!==e||(a[n.attrName]=n.value(t)||void 0),null==(n=M[e])||n.attrName!==e&&n.keyName!==e||(n=M[e],a[n.attrName]=n.value(t)||void 0))})),Object.keys(a).length>0)return N(e,a)}return e}],[1,function(t,e){var i={},n=t.style||{};return["height","width"].forEach((function(e){var o=-1!==["TD","TH"].indexOf(t.tagName),r="TABLE"===t.tagName;if((o||r)&&n[e]){var s="".concat(r?"table":"cell").concat((0,v.Z)(e));i[s]=n[e]}})),"italic"===n.fontStyle&&(i.italic=!0),-1!==n.textDecoration.indexOf("underline")&&(i.underline=!0),-1!==n.textDecoration.indexOf("line-through")&&(i.strike=!0),(0===n.fontWeight.indexOf("bold")||parseInt(n.fontWeight,10)>=700)&&(i.bold=!0),Object.keys(i).length>0&&(e=N(e,i)),parseFloat(n.textIndent||0)>0?(new(o())).insert("\t").concat(e):e}],["li",function(t,e,i){var n=i.query(t);if(null==n||"list"!==n.blotName||!$(e,"\n"))return e;for(var r=-1,s=t.parentNode;null!=s;)-1!==["OL","UL"].indexOf(s.tagName)&&(r+=1),s=s.parentNode;return r<=0?e:e.reduce((function(t,e){return e.attributes&&"number"==typeof e.attributes.indent?t.push(e):t.insert(e.insert,y({indent:r},e.attributes||{}))}),new(o()))}],["ol, ul",function(t,e){return N(e,"list","OL"===t.tagName?"ordered":"bullet")}],["pre",function(t,e,i){var n=i.query("code-block");return N(e,"code-block",!n||n.formats(t,i))}],["b",L.bind(L,"bold")],["i",L.bind(L,"italic")],["strike",L.bind(L,"strike")],["style",function(){return new(o())}]],A=[W,j],P=[u.if,f.IF].reduce((function(t,e){return t[e.keyName]=e,t}),{}),M=[u.HE,d.w,p.HQ,f.H8,_.H,m.Z].reduce((function(t,e){return t[e.keyName]=e,t}),{}),R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(l,t);var e,i,n,r,s=(n=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(n);if(r){var i=T(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return O(t)}(this,t)});function l(t,e){var i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(n=s.call(this,t,e)).quill.root.addEventListener("copy",(function(t){return n.onCaptureCopy(t,!1)})),n.quill.root.addEventListener("cut",(function(t){return n.onCaptureCopy(t,!0)})),n.quill.root.addEventListener("paste",n.onCapturePaste.bind(O(n))),n.matchers=[],n.tableBlots=null!==(i=e.tableBlots)&&void 0!==i?i:[],n.multilineParagraph=!1,B.concat(n.options.matchers).forEach((function(t){var e=x(t,2),i=e[0],o=e[1];n.addMatcher(i,o)})),n}return e=l,i=[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"addTableBlot",value:function(t){this.tableBlots.push(t)}},{key:"convert",value:function(t){var e=t.html,i=t.text,n=t.keepLastNewLine,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r[h.ZP.blotName]?(new(o())).insert(i,w({},h.ZP.blotName,r[h.ZP.blotName])):e?this.applyMatchers(e,n,r):this.applyTextMatchers(i)}},{key:"applyTextMatchers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0===e.length)return new(o());var i=this.prepareTextMatching(),n=this.quill.root.ownerDocument.createElement("div");n.textContent=e;var r=n.childNodes[0];return i.reduce((function(e,i){return i(r,e,t.quill.scroll)}),new(o()))}},{key:"applyMatchers",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.ZP.replaceStyleAttribute(t),s=(new DOMParser).parseFromString(r,"text/html");a.ZP.restoreStyleAttribute(s);var l=s.body,c=new WeakMap,u=x(this.prepareMatching(l,c),2),d=u[0],h=u[1],p=H(this.quill.scroll,l,d,h,c,this.multilineParagraph);return e||!$(p,"\n")||null!=p.ops[p.ops.length-1].attributes&&!Object.values(n).some((function(t){return i.tableBlots.includes(t)}))?p:p.compose((new(o())).retain(p.length()-1).delete(1))}},{key:"dangerouslyPasteHTML",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.ZP.sources.API;if("string"==typeof t){var n=this.convert({html:t,text:""});this.quill.setContents(n,e),this.quill.setSelection(0,a.ZP.sources.SILENT)}else{var r=this.convert({html:e,text:""});this.quill.updateContents((new(o())).retain(t).concat(r),i),this.quill.setSelection(t+r.length(),a.ZP.sources.SILENT)}}},{key:"onCaptureCopy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.defaultPrevented&&t.clipboardData){t.preventDefault();var i=x(this.quill.selection.getRange(),1)[0];if(null!=i){var n=this.onCopy(i,e),o=n.html,r=n.text;t.clipboardData.setData("text/plain",r),t.clipboardData.setData("text/html",o),e&&(this.raiseCallback("onCut",t),(0,g.WQ)({range:i,quill:this.quill}))}}}},{key:"onCapturePaste",value:function(t){if(!t.defaultPrevented&&this.quill.isEnabled()&&(this.raiseCallback("onPaste",t),t.clipboardData)){t.preventDefault();var e=this.quill.getSelection(!0);if(null!=e){var i=t.clipboardData.getData("text/html"),n=Array.from(t.clipboardData.files||[]);if(!i&&n.length>0)this.quill.uploader.upload(e,n);else{if(i&&n.length>0){var o=(new DOMParser).parseFromString(i,"text/html").body;if(1===o.childElementCount&&"IMG"===o.firstElementChild.tagName)return void this.quill.uploader.upload(e,n)}var r=t.clipboardData.getData("text/plain");this.onPaste(e,{html:i,text:r,keepLastNewLine:!0})}}}}},{key:"raiseCallback",value:function(t,e){var i=this.options[t];i&&"function"==typeof i&&i(e)}},{key:"onCopy",value:function(t){var e=t.index,i=t.length,n=this.quill.getText(e,i);return{html:this.quill.getSemanticHTML(e,i),text:n}}},{key:"onPaste",value:function(t,e){var i=e.text,n=e.html,r=e.keepLastNewLine,s=this.quill.getFormat(t.index),l=this.convert({text:i,html:n,keepLastNewLine:r},s);D.log("onPaste",l,{text:i,html:n});var c=(new(o())).retain(t.index).delete(t.length).concat(l);this.quill.updateContents(c,a.ZP.sources.USER),this.quill.setSelection(c.length()-t.length,a.ZP.sources.SILENT),this.quill.scrollIntoView()}},{key:"prepareMatching",value:function(t,e){var i=[],n=[];return this.matchers.forEach((function(o){var r=x(o,2),s=r[0],a=r[1];switch(s){case 3:n.push(a);break;case 1:i.push(a);break;default:Array.from(t.querySelectorAll(s)).forEach((function(t){e.has(t)?e.get(t).push(a):e.set(t,[a])}))}})),[i,n]}},{key:"prepareTextMatching",value:function(){var t=[z];return this.matchers.forEach((function(e){var i=x(e,2),n=i[0],o=i[1];-1===A.indexOf(o)&&3===n&&t.push(o)})),t}}],i&&I(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),l}(c.Z);function N(t,e,i){return"object"===C(e)?Object.keys(e).reduce((function(t,i){return N(t,i,e[i])}),t):t.reduce((function(t,n){if(n.attributes&&n.attributes[e])return t.push(n);var o=i?w({},e,i):{};return t.insert(n.insert,y(y({},o),n.attributes))}),new(o()))}function $(t,e){for(var i="",n=t.ops.length-1;n>=0&&i.length<e.length;--n){var o=t.ops[n];if("string"!=typeof o.insert)break;i=o.insert+i}return i.slice(-1*e.length)===e}function V(t){return 0!==t.childNodes.length&&-1!==["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].indexOf(t.tagName.toLowerCase())}R.DEFAULTS={matchers:[]};var F=new WeakMap;function Z(t){return null!=t&&(F.has(t)||("PRE"===t.tagName?F.set(t,!0):F.set(t,Z(t.parentNode))),F.get(t))}function H(t,e,i,n,r,s){return e.nodeType===e.TEXT_NODE?n.reduce((function(i,n){return n(e,i,t)}),new(o())):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((function(o,a,l,c){var u=H(t,a,i,n,r,s),d=l<c.length-1&&c[l+1],h=d&&d.nodeType===e.ELEMENT_NODE&&["ul","ol"].indexOf(d.tagName.toLowerCase())>-1;a.nodeType===e.ELEMENT_NODE&&(s="br"===a.tagName.toLowerCase(),u=i.reduce((function(e,i){return i(a,e,t)}),u),u=(r.get(a)||[]).reduce((function(e,i){return i(a,e,t)}),u));var p=o.concat(u);return s&&h&&p.insert("\n"),p}),new(o())):new(o())}function L(t,e,i){return N(i,t,!0)}function j(t,e,i){if(!$(e,"\n")){if(V(t))return e.insert("\n");if(e.length()>0&&t.nextSibling)for(var n=t.nextSibling;null!=n;){if(V(n))return e.insert("\n");var o=i.query(n);if((null==o?void 0:o.prototype)instanceof s.i2)return e.insert("\n");n=n.firstChild}}return e}function z(t,e){var i=t.data||"";return i=i.replace(/\r\n/g,"\n"),e.insert(i)}function W(t,e){var i=t.data;if("O:P"===t.parentNode.tagName)return e.insert(i.trim());if(0===i.trim().length&&-1!==i.indexOf("\n"))return e;if(!Z(t)){var n=function(t,e){var i=e.replace(/[^\u00a0]/g,"");return i.length<1&&t?" ":i};i=(i=i.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==t.previousSibling&&V(t.parentNode)||null!=t.previousSibling&&V(t.previousSibling))&&(i=i.replace(/^\s+/,n.bind(n,!1))),(null==t.nextSibling&&V(t.parentNode)||null!=t.nextSibling&&V(t.nextSibling))&&(i=i.replace(/\s+$/,n.bind(n,!1)))}return e.insert(i)}},2613:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(1233),o=i(281),r=i(7094),s=i(8034);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(_,t);var e,i,r,h,f=(r=_,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(h){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,t)});function _(t,e){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_),(i=f.call(this,t,e)).lastRecorded=0,i.ignoreChange=!1,i.clear(),i.quill.on(o.ZP.events.EDITOR_CHANGE,(function(t,e,n,r){t!==o.ZP.events.TEXT_CHANGE||i.ignoreChange||(i.options.userOnly&&r!==o.ZP.sources.USER?i.transform(e):i.record(e,n))})),i.quill.keyboard.addBinding({key:"z",shortKey:!0},i.undo.bind(u(i))),i.quill.keyboard.addBinding({key:"z",shortKey:!0,shiftKey:!0},i.redo.bind(u(i))),(0,s.Z)()&&/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"y",shortKey:!0},i.redo.bind(u(i))),i.quill.root.addEventListener("beforeinput",(function(t){"historyUndo"===t.inputType?(i.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(i.redo(),t.preventDefault())})),i}return e=_,(i=[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var i=this.stack[t].pop(),r=this.quill.getContents(),s=i.invert(r);this.stack[e].push(s),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i,o.ZP.sources.USER),this.ignoreChange=!1;var a=function(t,e){var i=e.reduce((function(t,e){return t+(e.delete||0)}),0),o=e.length()-i;return function(t,e){var i=e.ops[e.ops.length-1];return null!=i&&(null!=i.insert?"string"==typeof i.insert&&i.insert.endsWith("\n"):null!=i.attributes&&Object.keys(i.attributes).some((function(e){return null!=t.query(e,n.Scope.BLOCK)})))}(t,e)&&(o-=1),o}(this.quill.scroll,i);this.quill.setSelection(a)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var i=t.invert(e),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var o=this.stack.undo.pop();i=i.compose(o)}else this.lastRecorded=n;0!==i.length()&&(this.stack.undo.push(i),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){p(this.stack.undo,t),p(this.stack.redo,t)}},{key:"undo",value:function(){this.change("undo","redo")}}])&&l(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),_}(r.Z);function p(t,e){for(var i=e,n=t.length-1;n>=0;n-=1){var o=t[n];t[n]=i.transform(o,!0),i=o.transform(i),0===t[n].length()&&t.splice(n,1)}}h.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1}},990:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n=i(9098),o=i.n(n),r=i(7094),s=i(281),a=i(3071);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===l(o)?o:String(o)),n)}var o}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var h=["insertText","insertReplacementText"],p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(f,t);var e,i,n,r,p=(n=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(n);if(r){var i=d(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function f(t,e){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),i=p.call(this,t,e),t.root.addEventListener("beforeinput",(function(t){i.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||t.on(s.ZP.events.COMPOSITION_BEFORE_START,(function(){i.handleCompositionStart()})),i}return e=f,i=[{key:"deleteRange",value:function(t){(0,a.WQ)({range:t,quill:this.quill})}},{key:"replaceText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){var i=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new(o())).retain(t.index).insert(e,i),s.ZP.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,s.ZP.sources.SILENT),!0}},{key:"handleBeforeInput",value:function(t){if(!this.quill.composition.isCompositionInProgress()&&!t.defaultPrevented&&h.includes(t.inputType)){var e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(e&&!0!==e.collapsed){var i=function(t){var e;return"string"==typeof t.data?t.data:null!==(e=t.dataTransfer)&&void 0!==e&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}(t);if(null!=i){var n=this.quill.selection.normalizeNative(e),o=n?this.quill.selection.normalizedToRange(n):null;o&&this.replaceText(o,i)&&t.preventDefault()}}}}},{key:"handleCompositionStart",value:function(){var t=this.quill.getSelection();t&&this.replaceText(t)}}],i&&c(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),f}(r.Z);const f=p},3071:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>O,WQ:()=>A});var n=i(8805),o=i.n(n),r=i(2722),s=i.n(r),a=i(9098),l=i.n(a),c=i(1233),u=i(281),d=i(3122),h=i(7094),p=i(8034);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function g(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?g(Object(i),!0).forEach((function(e){b(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function b(t,e,i){return(e=C(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function C(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===f(e)?e:String(e)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var S=(0,d.Z)("quill:keyboard"),I={backspace:"backspace",tab:"tab",enter:"enter",escape:"escape",pageup:"pageUp",pagedown:"pageDown",end:"end",home:"home",arrowleft:"leftArrow",arrowup:"upArrow",arrowright:"rightArrow",arrowdown:"downArrow",delete:"del"," ":"space","*":"asterisk","-":"minus",alt:"alt",control:"control",shift:"shift",left:"leftArrow",up:"upArrow",right:"rightArrow",down:"downArrow",multiply:"asterisk",spacebar:"space",del:"del",subtract:"minus",esc:"escape"},k={8:"backspace",9:"tab",13:"enter",27:"escape",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"leftArrow",38:"upArrow",39:"rightArrow",40:"downArrow",46:"del",32:"space",106:"asterisk",109:"minus",189:"minus",173:"minus",16:"shift",17:"control",18:"alt"},E=(0,p.Z)()&&/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(m,t);var e,i,n,r,d,h=(r=m,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(d){var i=x(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function m(t,e){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),(i=h.call(this,t,e)).bindings={},Object.keys(i.options.bindings).forEach((function(t){i.options.bindings[t]&&i.addBinding(i.options.bindings[t])})),i.addInternalBindings(),i.listen(),i}return e=m,i=[{key:"addInternalBindings",value:function(){var t=this;this.quill.once(u.ZP.events.CONTENT_SETTED,(function(){t.addBinding({key:"enter",shiftKey:null},t.handleEnter),t.addBinding({key:"enter",metaKey:null,ctrlKey:null,altKey:null},(function(){})),(0,p.Z)()&&/Firefox/i.test(navigator.userAgent)?(t.addBinding({key:"backspace"},{collapsed:!0},t.handleBackspace),t.addBinding({key:"del"},{collapsed:!0},t.handleDelete)):(t.addBinding({key:"backspace"},{collapsed:!0,prefix:/^.?$/},t.handleBackspace),t.addBinding({key:"del"},{collapsed:!0,suffix:/^.?$/},t.handleDelete)),t.addBinding({key:"backspace"},{collapsed:!1},t.handleDeleteRange),t.addBinding({key:"del"},{collapsed:!1},t.handleDeleteRange),t.addBinding({key:"backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},t.handleBackspace)}))}},{key:"addBinding",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!==f(t))return null;t=o()(t)}return t.shortKey&&(t[E]=t.shortKey,delete t.shortKey),t}(t);if(null!=r){"function"==typeof i&&(i={handler:i}),"function"==typeof n&&(n={handler:n});var s=r.which?"which":"key";(Array.isArray(r[s])?r[s]:[r[s]]).forEach((function(t){var o=v(v(v({},r),{},{key:t},i),n);e.bindings[o.key]=e.bindings[o.key]||[],e.bindings[o.key].push(o)}))}else S.warn("Attempted to add invalid keyboard binding",r)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(e){if(!e.defaultPrevented&&!e.isComposing){t.raiseOnKeydownCallback(e);var i=m.normalizeKeyName(e),n=(t.bindings[i]||[]).concat(t.bindings[e.which]||[]).filter((function(t){return m.match(e,t)}));if(0!==n.length){var o=t.quill.getSelection();if(null!=o&&t.quill.hasFocus()){var r=_(t.quill.getLine(o.index),2),a=r[0],l=r[1],u=_(t.quill.getLeaf(o.index),2),d=u[0],h=u[1],p=_(0===o.length?[d,h]:t.quill.getLeaf(o.index+o.length),2),g=p[0],v=p[1],b=d instanceof c.TextBlot?d.value().slice(0,h):"",y=g instanceof c.TextBlot?g.value().slice(v):"",C={collapsed:0===o.length,empty:0===o.length&&a.length()<=1,format:t.quill.getFormat(o),line:a,offset:l,prefix:b,suffix:y,event:e},w=!1;n.some((function(e){if(null!=e.collapsed&&e.collapsed!==C.collapsed)return!1;if(null!=e.empty&&e.empty!==C.empty)return!1;if(null!=e.offset&&e.offset!==C.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==C.format[t]})))return!1}else if("object"===f(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=C.format[t]:!1===e.format[t]?null==C.format[t]:s()(e.format[t],C.format[t])})))return!1;if(null!=e.prefix&&!e.prefix.test(C.prefix))return!1;if(null!=e.suffix&&!e.suffix.test(C.suffix))return!1;var i=e.handler.call(t,o,C,e),n=null==i?void 0:i.preventAfterAllMatches;return(w=!0!==i||n)&&!n})),w&&e.preventDefault()}}}}))}},{key:"raiseOnKeydownCallback",value:function(t){var e=this.options.onKeydown;e&&"function"==typeof e&&e(t)}},{key:"handleBackspace",value:function(t,e){var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(!(0===t.index||this.quill.getLength()<=1)){var n={},o=_(this.quill.getLine(t.index),1)[0],r=(new(l())).retain(t.index-i).delete(i);if(0===e.offset){var s=_(this.quill.getLine(t.index-1),1)[0];if(s){var c="block"===s.statics.blotName&&s.length()<=1,d=s.statics.blotName.startsWith("table"),h="block"===o.statics.blotName&&o.length()<=1;if(d&&(h&&o.remove(),this.quill.setSelection(t.index-1)),!c&&!d){var p=o.formats(),f=this.quill.getFormat(t.index-1,1);if(n=a.AttributeMap.diff(p,f)||{},Object.keys(n).length>0){var m=(new(l())).retain(t.index+o.length()-2).retain(1,n);r=r.compose(m)}}}}this.quill.updateContents(r,u.ZP.sources.USER),this.quill.focus()}}},{key:"handleDelete",value:function(t,e){var i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-i)){var n={},o=_(this.quill.getLine(t.index),1)[0],r=(new(l())).retain(t.index).delete(i);if(e.offset>=o.length()-1){var s=_(this.quill.getLine(t.index+1),1)[0];if(s){var c=o.formats(),d=this.quill.getFormat(t.index,1);n=a.AttributeMap.diff(c,d)||{},Object.keys(n).length>0&&(r=r.retain(s.length()-1).retain(1,n))}}this.quill.updateContents(r,u.ZP.sources.USER),this.quill.focus()}}},{key:"handleDeleteRange",value:function(t,e){this.raiseOnKeydownCallback(e.event),A({range:t,quill:this.quill}),this.quill.focus()}},{key:"handleEnter",value:function(t,e){var i=this,n=Object.keys(e.format).reduce((function(t,n){return i.quill.scroll.query(n,c.Scope.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t}),{}),o=(new(l())).retain(t.index).delete(t.length).insert("\n",n);this.quill.updateContents(o,u.ZP.sources.USER),this.quill.setSelection(t.index+1,u.ZP.sources.SILENT),this.quill.focus();var r,s,a,d,h,p=_(this.quill.getLine(t.index+1),1)[0],f=(r=p.domNode,s=window.innerHeight,d=(a=r.getBoundingClientRect()).y,h=a.bottom,d<0||!(h>=s)&&null);null!==f&&p.domNode.scrollIntoView(f),Object.keys(e.format).forEach((function(t){null==n[t]&&(Array.isArray(e.format[t])||"code"!==t&&"link"!==t&&(i.raiseOnKeydownCallback(e.event),i.quill.format(t,e.format[t],u.ZP.sources.USER)))}))}}],n=[{key:"match",value:function(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((function(i){return!!e[i]!==t[i]&&null!==e[i]}))&&(e.key===m.normalizeKeyName(t)||e.key===t.which)}},{key:"normalizeKeyName",value:function(t){var e=t.key,i=t.which,n=!!e,o=n?e:i;return o&&(o=n?I[o.toLowerCase()]||o:k[o]||String.fromCharCode(o)),o}}],i&&y(e.prototype,i),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),m}(h.Z);function T(t){return{key:"tab",shiftKey:!t,format:{"code-block":!0},handler:function(e){var i=this.quill.scroll.query("code-block"),n=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e),o=e.index,r=e.length;n.forEach((function(e,n){t?(e.insertAt(0,i.TAB),0===n?o+=i.TAB.length:r+=i.TAB.length):0===e.domNode.textContent.indexOf(i.TAB)&&(e.deleteAt(0,i.TAB.length),0===n?o-=i.TAB.length:r-=i.TAB.length)})),this.quill.update(u.ZP.sources.USER),this.quill.setSelection(o,r,u.ZP.sources.SILENT)}}}function D(t,e){return b(b({key:t,shiftKey:e,altKey:null},"leftArrow"===t?"prefix":"suffix",/^$/),"handler",(function(i){var n=i.index;return"rightArrow"===t&&(n+=i.length+1),!(_(this.quill.getLeaf(n),1)[0]instanceof c.EmbedBlot&&("leftArrow"===t?e?this.quill.setSelection(i.index-1,i.length+1,u.ZP.sources.USER):this.quill.setSelection(i.index-1,u.ZP.sources.USER):e?this.quill.setSelection(i.index,i.length+1,u.ZP.sources.USER):this.quill.setSelection(i.index+i.length+1,u.ZP.sources.USER),1))}))}function B(t,e){return{key:t[0],which:e,shortKey:!0,handler:function(e,i){return this.quill.format(t,!i.format[t],u.ZP.sources.USER),{preventAfterAllMatches:!0}}}}function A(t){var e=t.quill,i=t.range,n=e.getLines(i),o={};if(n.length>1){var r=n[0].formats(),s=n[n.length-1].formats();o=a.AttributeMap.diff(s,r)||{}}e.deleteText(i,u.ZP.sources.USER),Object.keys(o).length>0&&e.formatLine(i.index,1,o,u.ZP.sources.USER),e.setSelection(i.index,u.ZP.sources.SILENT)}O.DEFAULTS={bindings:{bold:B("bold",66),italic:B("italic",73),underline:B("underline",85),indent:{key:"tab",format:["blockquote","indent","list"],handler:function(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",u.ZP.sources.USER),!1)}},outdent:{key:"tab",shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",u.ZP.sources.USER),!1)}},"outdent backspace":{key:"backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",u.ZP.sources.USER):null!=e.format.list&&this.quill.format("list",!1,u.ZP.sources.USER)}},"indent code-block":T(!0),"outdent code-block":T(!1),"remove tab":{key:"tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,u.ZP.sources.USER)}},tab:{key:"tab",handler:function(t,e){var i=e.format;if(i.tableCellLine||i.tableHeaderCellLine||i.tableHeaderCell||i.table)return!0;this.quill.history.cutoff();var n=(new(l())).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(n,u.ZP.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,u.ZP.sources.SILENT),!1}},"blockquote empty enter":{key:"enter",collapsed:!0,format:["blockquote"],empty:!0,handler:function(){this.quill.format("blockquote",!1,u.ZP.sources.USER)}},"list empty enter":{key:"enter",collapsed:!0,format:["list"],empty:!0,handler:function(t,e){var i={list:!1};e.format.indent&&(i.indent=!1),this.quill.formatLine(t.index,t.length,i,u.ZP.sources.USER)}},"checklist enter":{key:"enter",collapsed:!0,format:{list:"checked"},handler:function(t){var e=_(this.quill.getLine(t.index),2),i=e[0],n=e[1],o=v(v({},i.formats()),{},{list:"checked"}),r=(new(l())).retain(t.index).insert("\n",o).retain(i.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,u.ZP.sources.USER),this.quill.setSelection(t.index+1,u.ZP.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:"enter",collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var i=_(this.quill.getLine(t.index),2),n=i[0],o=i[1],r=(new(l())).retain(t.index).insert("\n",e.format).retain(n.length()-o-1).retain(1,{header:null});this.quill.updateContents(r,u.ZP.sources.USER),this.quill.setSelection(t.index+1,u.ZP.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:"space",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){if(null==this.quill.scroll.query("list"))return!0;var i,n=e.prefix.length,o=_(this.quill.getLine(t.index),2),r=o[0],s=o[1];if(s>n)return!0;switch(e.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(t.index," ",u.ZP.sources.USER),this.quill.history.cutoff();var a=(new(l())).retain(t.index-s).delete(n+1).retain(r.length()-2-s).retain(1,{list:i});return this.raiseOnKeydownCallback(e.event),this.quill.updateContents(a,u.ZP.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,u.ZP.sources.SILENT),!1}},"code exit":{key:"enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler:function(t){for(var e=_(this.quill.getLine(t.index),2),i=e[0],n=e[1],o=2,r=i;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,(o-=1)<=0){var s=(new(l())).retain(t.index+i.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,u.ZP.sources.USER),this.quill.setSelection(t.index-1,u.ZP.sources.SILENT),!1}return!0}},"embed left":D("leftArrow",!1),"embed left shift":D("leftArrow",!0),"embed right":D("rightArrow",!1),"embed right shift":D("rightArrow",!0)}}},9072:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>P});var n=i(9098),o=i.n(n),r=i(1233),s=i(6603),a=i(281),l=i(7094),c=i(6446),u=i(4122),d=i(3657),h=i(8222),p=i(7309),f=i(5635),_=i(8034);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function g(t,e,i){return(e=w(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w(n.key),n)}}function C(t,e,i){return e&&y(t.prototype,e),i&&y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function w(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}function x(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S(t,e)}function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=O(t);if(e){var o=O(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k(t)}(this,i)}}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},E.apply(this,arguments)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}var T=new r.ClassAttributor("code-token","hljs",{scope:r.Scope.INLINE}),D=function(t){x(i,t);var e=I(i);function i(t,n,o){var r;return b(this,i),r=e.call(this,t,n,o),T.add(r.domNode,o),r}return C(i,[{key:"format",value:function(t,e){t!==i.blotName?E(O(i.prototype),"format",this).call(this,t,e):e?T.add(this.domNode,e):(T.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}},{key:"optimize",value:function(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];(t=E(O(i.prototype),"optimize",this)).call.apply(t,[this].concat(n)),T.value(this.domNode)||this.unwrap()}}],[{key:"formats",value:function(t,e){for(;null!=t&&t!==e.domNode;){if(t.classList&&t.classList.contains(p.ZP.className))return E(O(i),"formats",this).call(this,t,e);t=t.parentNode}}}]),i}(s.Z);D.blotName="code-token",D.className="ql-token";var B=function(t){x(i,t);var e=I(i);function i(){return b(this,i),e.apply(this,arguments)}return C(i,[{key:"format",value:function(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):E(O(i.prototype),"format",this).call(this,t,e)}},{key:"replaceWith",value:function(t,e){return this.formatAt(0,this.length(),D.blotName,!1),E(O(i.prototype),"replaceWith",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=E(O(i),"create",this).call(this,t);return"string"==typeof t&&e.setAttribute("data-language",t),e}},{key:"formats",value:function(t){return t.getAttribute("data-language")||"plain"}},{key:"register",value:function(){}}]),i}(p.ZP),A=function(t){x(i,t);var e=I(i);function i(){return b(this,i),e.apply(this,arguments)}return C(i,[{key:"attach",value:function(){E(O(i.prototype),"attach",this).call(this),this.forceNext=!1,this.scroll.emitMount(this)}},{key:"format",value:function(t,e){t===B.blotName&&(this.forceNext=!0,this.children.forEach((function(i){i.format(t,e)})))}},{key:"formatAt",value:function(t,e,n,o){n===B.blotName&&(this.forceNext=!0),E(O(i.prototype),"formatAt",this).call(this,t,e,n,o)}},{key:"highlight",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=this.children.head){var n=Array.from(this.domNode.childNodes).filter((function(t){return t!==e.uiNode})),r="".concat(n.map((function(t){return t.textContent})).join("\n"),"\n"),s=B.formats(this.children.head.domNode);if(i||this.forceNext||this.cachedText!==r){if(r.trim().length>0||null==this.cachedText){var a=this.children.reduce((function(t,e){return t.concat((0,c.qz)(e,!1))}),new(o())),l=t(r,s);a.diff(l).reduce((function(t,i){var n=i.retain,o=i.attributes;return n?(o&&Object.keys(o).forEach((function(i){-1!==[B.blotName,D.blotName].indexOf(i)&&e.formatAt(t,n,i,o[i])})),t+n):t}),0)}this.cachedText=r,this.forceNext=!1}}}},{key:"html",value:function(t,e){var i,n,o=(i=this.children.find(t),n=1,function(t){if(Array.isArray(t))return t}(i)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(i,n)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(t,e):void 0}}(i,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],r=o?B.formats(o.domNode):"plain";return'<pre data-language="'.concat(r,'">\n').concat(this.code(t,e),"\n</pre>")}},{key:"optimize",value:function(t){if(E(O(i.prototype),"optimize",this).call(this,t),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){var e=B.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}]),i}(p.se);A.allowedChildren=[B],B.requiredContainer=A,B.allowedChildren=[D,d.Z,h.Z,u.Z];var P=function(t){x(i,t);var e=I(i);function i(t,n){var o;if(b(this,i),null==(o=e.call(this,t,n)).options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");return o.languages=o.options.languages.reduce((function(t,e){return t[e.key]=!0,t}),{}),o.highlightBlot=o.highlightBlot.bind(k(o)),o.initListener(),o.initTimer(),o}return C(i,[{key:"initListener",value:function(){var t=this;this.quill.on(a.ZP.events.SCROLL_BLOT_MOUNT,(function(e){if(e instanceof A){var i=t.quill.root.ownerDocument.createElement("select");t.options.languages.forEach((function(t){var e=t.key,n=t.label,o=i.ownerDocument.createElement("option");o.textContent=n,o.setAttribute("value",e),i.appendChild(o)})),i.addEventListener("change",(function(){e.format(B.blotName,i.value),t.quill.root.focus(),t.highlight(e,!0)})),null==e.uiNode&&(e.attachUI(i),e.children.head&&(i.value=B.formats(e.children.head.domNode)))}}))}},{key:"initTimer",value:function(){var t=this,e=null;this.quill.on(a.ZP.events.SCROLL_OPTIMIZE,(function(){clearTimeout(e),e=setTimeout((function(){t.highlight(),e=null}),t.options.interval)}))}},{key:"highlight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.quill.selection.composing){this.quill.update(a.ZP.sources.USER);var n=this.quill.getSelection();(null==e?this.quill.scroll.descendants(A):[e]).forEach((function(e){e.highlight(t.highlightBlot,i)})),this.quill.update(a.ZP.sources.SILENT),null!=n&&this.quill.setSelection(n,a.ZP.sources.SILENT)}}},{key:"highlightBlot",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if("plain"===(e=this.languages[e]?e:"plain"))return(0,h.b)(t).split("\n").reduce((function(t,i,n){return 0!==n&&t.insert("\n",g({},p.ZP.blotName,e)),t.insert(i)}),new(o()));var i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(p.ZP.className),i.innerHTML=this.options.hljs.highlight(e,t).value,(0,f.fw)(this.quill.scroll,i,[function(t,e){var i=T.value(t);return i?e.compose((new(o())).retain(e.length(),g({},D.blotName,i))):e}],[function(t,i){return t.data.split("\n").reduce((function(t,i,n){return 0!==n&&t.insert("\n",g({},p.ZP.blotName,e)),t.insert(i)}),i)}],new WeakMap)}}],[{key:"register",value:function(){a.ZP.register(D,!0),a.ZP.register(B,!0),a.ZP.register(A,!0)}}]),i}(l.Z);P.DEFAULTS={hljs:(0,_.Z)()?window.hljs:null,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"Javascript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]}},867:(t,e,i)=>{"use strict";i.d(e,{Z:()=>E});var n=i(9098),o=i.n(n),r=i(1233),s=i(281),a=i(7094),l=i(1969),c=i(5874),u=i(5635),d=i(9466),h=i(7896),p=i(319),f=i(1342),_=i(2480);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function g(t,e,i){return(e=C(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function C(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var S=[null,null,null,-1],I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(d,t);var e,i,n,r,a,u=(r=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(a){var i=x(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(t=u.call.apply(u,[this].concat(i))).tableBlots=[l.zW.blotName,l.iD.blotName],t.tableBlots.forEach((function(e){t.quill.editor.addImmediateFormat(e)})),t.integrateClipboard(),t.addKeyboardHandlers(),t.listenBalanceCells(),t}return e=d,i=[{key:"integrateClipboard",value:function(){var t=this;this.tableBlots.forEach((function(e){t.quill.clipboard.addTableBlot(e)})),this.quill.clipboard.addMatcher("td, th",k),this.quill.clipboard.addMatcher("table",(0,h.F)(p.Zt)),this.quill.clipboard.addMatcher("td, th",(0,h.a)(f.h6))}},{key:"addKeyboardHandlers",value:function(){var t=this,e=d.keyboardBindings;Object.keys(e).forEach((function(i){e[i]&&t.quill.keyboard.addBinding(e[i])}))}},{key:"balanceTables",value:function(){this.quill.scroll.descendants(l.xJ).forEach((function(t){t.balanceCells()}))}},{key:"deleteColumn",value:function(){var t=v(this.getTable(),3),e=t[0],i=t[2];(0,c.Z)(i)&&(e.deleteColumn(i.cellOffset()),this.quill.update(s.ZP.sources.USER))}},{key:"deleteRow",value:function(){var t=v(this.getTable(),2)[1];(0,c.Z)(t)&&(t.remove(),this.quill.update(s.ZP.sources.USER))}},{key:"deleteTable",value:function(){var t=v(this.getTable(),1)[0];if((0,c.Z)(t)){var e=t.offset();t.remove(),this.quill.update(s.ZP.sources.USER),this.quill.setSelection(e,s.ZP.sources.SILENT)}}},{key:"getTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(!(0,c.Z)(t))return S;var e=v(this.quill.getLine(t.index),2),i=e[0],n=e[1];if(!(0,c.Z)(i)||-1===this.tableBlots.indexOf(i.statics.blotName))return S;var o=i.parent,r=o.parent;return[r.parent.parent,r,o,n]}},{key:"insertColumn",value:function(t){var e=this.quill.getSelection(),i=v(this.getTable(e),3),n=i[0],o=i[1],r=i[2];if((0,c.Z)(r)){var a=r.cellOffset();n.insertColumn(a+t),this.quill.update(s.ZP.sources.USER);var l=o.rowOffset();0===t&&(l+=1),this.quill.setSelection(e.index+l,e.length,s.ZP.sources.SILENT)}}},{key:"insertColumnLeft",value:function(){this.insertColumn(0)}},{key:"insertColumnRight",value:function(){this.insertColumn(1)}},{key:"insertRow",value:function(t){var e=this.quill.getSelection(),i=v(this.getTable(e),3),n=i[0],o=i[1],r=i[2];if((0,c.Z)(r)){var a=o.rowOffset();n.insertRow(a+t),this.quill.update(s.ZP.sources.USER),t>0?this.quill.setSelection(e,s.ZP.sources.SILENT):this.quill.setSelection(e.index+o.children.length,e.length,s.ZP.sources.SILENT)}}},{key:"insertRowAbove",value:function(){this.insertRow(0)}},{key:"insertRowBelow",value:function(){this.insertRow(1)}},{key:"insertHeaderRow",value:function(){var t=this.quill.getSelection(),e=v(this.getTable(t),3),i=e[0],n=e[2];(0,c.Z)(n)&&(i.insertHeaderRow(),this.quill.update(s.ZP.sources.USER))}},{key:"insertTable",value:function(t,e){var i=this.quill.getSelection();if((0,c.Z)(i)){var n=new Array(t).fill(0).reduce((function(t){var i=(0,l.Lv)();return new Array(e).fill("\n").forEach((function(e){t.insert(e,{tableCellLine:{row:i,cell:(0,l.Lv)()}})})),t}),(new(o())).retain(i.index));this.quill.updateContents(n,s.ZP.sources.USER),this.quill.setSelection(i.index,s.ZP.sources.SILENT),this.balanceTables()}}},{key:"tableFormats",value:function(){return this.tableBlots}},{key:"listenBalanceCells",value:function(){var t=this;this.quill.on(s.ZP.events.SCROLL_OPTIMIZE,(function(e){e.some((function(e){return-1!==["TD","TH","TR","TBODY","THEAD","TABLE"].indexOf(e.target.tagName)&&(t.quill.once(s.ZP.events.TEXT_CHANGE,(function(e,i,n){n===s.ZP.sources.USER&&t.balanceTables()})),!0)}))})),this.quill.on(s.ZP.events.CONTENT_SETTED,(function(){t.quill.once(s.ZP.events.TEXT_CHANGE,(function(){t.balanceTables()}))}))}}],n=[{key:"register",value:function(){s.ZP.register(l.zW,!0),s.ZP.register(l.iD,!0),s.ZP.register(l.xs,!0),s.ZP.register(l.pj,!0),s.ZP.register(l.KA,!0),s.ZP.register(l.SC,!0),s.ZP.register(l.RM,!0),s.ZP.register(l.xD,!0),s.ZP.register(l.xJ,!0),[p.li,f.Du].forEach((function(t){Object.keys(t).forEach((function(e){s.ZP.register(g({},"formats/".concat(e),t[e]),!0)}))}))}}],i&&y(e.prototype,i),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}(a.Z);function k(t,e){var i=t.parentNode,n="TABLE"===i.parentNode.tagName?i.parentNode:i.parentNode.parentNode,r="THEAD"===i.parentNode.tagName||null,s=Array.from(n.querySelectorAll("tr")),a=Array.from(i.querySelectorAll("th,td")),l=s.indexOf(i)+1,c=a.indexOf(t)+1,d=r?"tableHeaderCellLine":"tableCellLine";return 0===e.length()?e=(new(o())).insert("\n",g({},d,{row:l,cell:c})):((0,u.PF)(e,"\n")||e.insert("\n"),(0,u.HI)(e,d,{row:l,cell:c}))}I.keyboardBindings={"table backspace":{key:"backspace",format:["tableCellLine","tableHeaderCellLine"],collapsed:!0,offset:0,handler:function(t){var e=v(this.quill.getLine(t.index),1)[0];return!(!e.prev||-1===["tableCellLine","tableHeaderCellLine"].indexOf(e.prev.statics.blotName))}},"table delete":{key:"del",format:["tableCellLine","tableHeaderCellLine"],collapsed:!0,suffix:/^$/,handler:function(){}},"table enter":{key:"enter",shiftKey:null,format:["tableCellLine","tableHeaderCellLine"],handler:function(t,e){var i,n,o=this,a=this.quill.getModule("table");if(a){var l=this.quill,c=v(a.getTable(t),1)[0];if(1===(null===(i=this.quill.selection)||void 0===i?void 0:i.lastNative.native.endContainer.nodeType)){var u=c.offset();(0,_.Z)({quill:l,index:u,table:c})}else if(null===(n=this.quill.selection)||void 0===n||!n.composing){t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var d=Object.keys(e.format).reduce((function(t,i){return o.quill.scroll.query(i,r.Scope.BLOCK)&&!Array.isArray(e.format[i])&&(t[i]=e.format[i]),t}),{});this.quill.insertText(t.index,"\n",d.tableCellLine,s.ZP.sources.USER),this.quill.setSelection(t.index+1,s.ZP.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach((function(t){null==d[t]&&(Array.isArray(e.format[t])||"link"!==t&&o.quill.format(t,e.format[t],s.ZP.sources.USER))}))}}}},"table tab":{key:"tab",shiftKey:null,format:["tableCellLine","tableHeaderCellLine"],handler:function(t,e){var i=e.event,n=e.line,o=n.offset(this.quill.scroll);i.shiftKey?this.quill.setSelection(o-1,s.ZP.sources.USER):this.quill.setSelection(o+n.length(),s.ZP.sources.USER)}},"table down":(0,d.Z)(!1,["tableCellLine","tableHeaderCellLine"]),"table up":(0,d.Z)(!0,["tableCellLine","tableHeaderCellLine"])};const E=I},6054:(t,e,i)=>{"use strict";i.d(e,{Z:()=>tt});var n=i(9098),o=i.n(n),r=i(281),s=i(7094),a=i(6446),l=i(3553),c=i(5874),u=i(319),d=i(8536),h=i(2795);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return m(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}function b(t,e,i){return e&&v(t.prototype,e),i&&v(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},y.apply(this,arguments)}function C(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=S(t);if(e){var o=S(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}var I="data-tablelite-",k=function(t){C(i,t);var e=x(i);function i(){return g(this,i),e.apply(this,arguments)}return b(i,[{key:"format",value:function(t,e){if(u.li[t]){var n,o="data-".concat(t.toLowerCase());(0,h.Z)(this.domNode,o,e),null===(n=this.row())||void 0===n||null===(n=n.table())||void 0===n||n.format(t,e)}else y(S(i.prototype),"format",this).call(this,t,e)}},{key:"cellOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"row",value:function(){return"table"in this.parent?this.parent:null}},{key:"rowOffset",value:function(){return this.row()?this.row().rowOffset():-1}},{key:"table",value:function(){var t;return null===(t=this.row())||void 0===t?void 0:t.table()}}],[{key:"create",value:function(t){var e=y(S(i),"create",this).call(this),n=this.dataAttribute;return(0,h.Z)(e,n,null!=t?t:N()),e}},{key:"formats",value:function(t){var e=this.dataAttribute;if(t.hasAttribute(e))return t.getAttribute(e)}}]),i}(a.ZP);k.tagName=["TD","TH"];var E=function(t){C(i,t);var e=x(i);function i(){return g(this,i),e.apply(this,arguments)}return b(i,[{key:"format",value:function(t,e){t===i.blotName&&e?this.domNode.setAttribute(i.dataAttribute,e):y(S(i.prototype),"format",this).call(this,t,e)}}]),i}(k);E.blotName="table",E.dataAttribute="".concat(I,"row");var O=function(t){C(i,t);var e=x(i);function i(){return g(this,i),e.apply(this,arguments)}return b(i,[{key:"format",value:function(t,e){t===i.blotName&&e?this.domNode.setAttribute(i.dataAttribute,e):y(S(i.prototype),"format",this).call(this,t,e)}}]),i}(k);O.tagName=["TH","TD"],O.blotName="tableHeaderCell",O.dataAttribute="".concat(I,"header-row");var T=function(t){C(i,t);var e=x(i);function i(){return g(this,i),e.apply(this,arguments)}return b(i,[{key:"checkMerge",value:function(){if(y(S(i.prototype),"checkMerge",this).call(this)&&(0,c.Z)(this.next.children.head)){var t=this.childFormatName,e=this.children.head.formats(),n=this.children.tail.formats(),o=this.next.children.head.formats(),r=this.next.children.tail.formats();return e[t]===n[t]&&e[t]===o[t]&&e[t]===r[t]}return!1}},{key:"optimize",value:function(){for(var t,e=this,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];(t=y(S(i.prototype),"optimize",this)).call.apply(t,[this].concat(o));var s=this.childFormatName;this.children.forEach((function(t){if((0,c.Z)(t.next)){var i=t.formats(),n=t.next.formats();if(i[s]!==n[s]){var o=e.splitAfter(t);o&&o.optimize(),e.prev&&e.prev.optimize()}}}))}},{key:"rowOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"table",value:function(){var t;return null===(t=this.parent)||void 0===t?void 0:t.parent}}]),i}(l.Z);T.tagName="TR";var D=function(t){C(i,t);var e=x(i);function i(t,n){var o;return g(this,i),(o=e.call(this,t,n)).childFormatName="table",o}return b(i)}(T);D.blotName="tableRow";var B=function(t){C(i,t);var e=x(i);function i(t,n){var o;return g(this,i),(o=e.call(this,t,n)).childFormatName="tableHeaderCell",o}return b(i)}(T);B.blotName="tableHeaderRow";var A=function(t){C(i,t);var e=x(i);function i(){return g(this,i),e.apply(this,arguments)}return b(i,[{key:"optimize",value:function(){var t;if(this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)){var e=this.children.head.children.head.domNode,n={};Object.keys(u.li).forEach((function(t){var i=e.dataset[t.toLowerCase()];i&&(n[t]=i)})),this.wrap(this.statics.requiredContainer.blotName,n)}for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];(t=y(S(i.prototype),"optimize",this)).call.apply(t,[this].concat(r))}}]),i}(l.Z),P=function(t){C(i,t);var e=x(i);function i(){return g(this,i),e.apply(this,arguments)}return b(i)}(A);P.blotName="tableBody",P.tagName=["TBODY"];var M=function(t){C(i,t);var e=x(i);function i(){return g(this,i),e.apply(this,arguments)}return b(i)}(A);M.blotName="tableHeader",M.tagName=["THEAD"];var R=function(t){C(i,t);var e=x(i);function i(){return g(this,i),e.apply(this,arguments)}return b(i,[{key:"balanceCells",value:function(){var t=this.descendants(B),e=this.descendants(D),i=this.getMaxTableColCount(t,e);this.balanceRows(i,t,O),this.balanceRows(i,e,E)}},{key:"getMaxTableColCount",value:function(t,e){return Math.max(this.getMaxRowColCount(t),this.getMaxRowColCount(e))}},{key:"getMaxRowColCount",value:function(t){return Math.max.apply(Math,function(t){if(Array.isArray(t))return m(t)}(e=t.map((function(t){return t.children.length})))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var e}},{key:"balanceRows",value:function(t,e,i){var n=this;e.forEach((function(e){new Array(t-e.children.length).fill(0).forEach((function(){var t;(0,c.Z)(e.children.head)&&(t=i.formats(e.children.head.domNode));var o=n.scroll.create(i.blotName,t);e.appendChild(o),o.optimize()}))}))}},{key:"cells",value:function(t){return this.rows().map((function(e){return e.children.at(t)}))}},{key:"deleteColumn",value:function(t){var e=this;[M,P].forEach((function(i){var n=f(e.descendants(i),1)[0];(0,c.Z)(n)&&(0,c.Z)(n.children.head)&&n.children.forEach((function(e){var i=e.children.at(t);(0,c.Z)(i)&&i.remove()}))}))}},{key:"insertColumn",value:function(t){var e=this;[M,P].forEach((function(i){var n=f(e.descendants(i),1)[0];if((0,c.Z)(n)&&(0,c.Z)(n.children.head)){var o=i===M?O:E;n.children.forEach((function(i){var n=i.children.at(t),r=o.formats(i.children.head.domNode),s=e.scroll.create(o.blotName,r);i.insertBefore(s,n)}))}}))}},{key:"insertRow",value:function(t){var e=this,i=f(this.descendants(P),1)[0];if((0,c.Z)(i)&&(0,c.Z)(i.children.head)){var n=N(),o=this.scroll.create(D.blotName);i.children.head.children.forEach((function(){var t=e.scroll.create(E.blotName,n);o.appendChild(t)}));var r=i.children.at(t);i.insertBefore(o,r)}}},{key:"insertHeaderRow",value:function(){var t=this,e=f(this.descendants(M),1)[0],i=f(this.descendants(P),1)[0];if(!(0,c.Z)(e)&&(0,c.Z)(i)&&(0,c.Z)(i.children.head)){var n=N(),o=this.scroll.create(M.blotName),r=this.scroll.create(B.blotName),s=this.children.at(0);o.appendChild(r),i.children.head.children.forEach((function(){var e=t.scroll.create(O.blotName,n);r.appendChild(e),e.optimize()})),this.insertBefore(o,s)}}},{key:"rows",value:function(){var t=this.children.head;return(0,c.Z)(t)?t.children.map((function(t){return t})):[]}},{key:"formats",value:function(){var t={},e=this.cells()[0].domNode;return Object.keys(u.li).forEach((function(i){var n=e.dataset[i.toLowerCase()];n&&(t[i]=n)})),t}},{key:"format",value:function(t,e){var i=u.li[t];if(i){var n="data-".concat(t.toLowerCase());this.cells().forEach((function(t){(0,h.Z)(t.domNode,n,e)})),i.add(this.domNode,e)}}}],[{key:"create",value:function(t){var e=y(S(i),"create",this).call(this,t);return t&&Object.keys(t).forEach((function(i){var n;null===(n=u.li[i])||void 0===n||n.add(e,t[i])})),e}}]),i}(l.Z);function N(){return"row-".concat((0,d.Z)())}R.blotName="tableContainer",R.tagName="TABLE",R.allowedChildren=[M,P],P.requiredContainer=R,M.requiredContainer=R,P.allowedChildren=[D],D.requiredContainer=P,D.allowedChildren=[E],E.requiredContainer=D,M.allowedChildren=[B],B.requiredContainer=M,B.allowedChildren=[O],O.requiredContainer=B;var $=i(5635),V=i(9466);function F(t){var e=t.quill,i=t.index,n=t.range,s=i-1,a=(new(o())).retain(s).insert("\n");e.updateContents(a,r.ZP.sources.USER),e.setSelection(n.index+1,n.length,r.ZP.sources.SILENT)}var Z=i(2480);function H(t,e,i){return null==t.prev&&null==t.next?null==e.prev&&null==e.next?0===i?-1:1:null==e.prev?-1:1:null==t.prev?-1:null==t.next?1:null}var L=i(7896),j=i(1342);function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return K(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?K(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U(n.key),n)}}function U(t){var e=function(t,e){if("object"!==z(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===z(e)?e:String(e)}function G(t,e){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},G(t,e)}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(t)}var Q=[null,null,null,-1],X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(d,t);var e,i,n,s,a,l=(s=d,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Y(s);if(a){var i=Y(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return(t=l.call.apply(l,[this].concat(i))).tableBlots=[E.blotName,O.blotName],t.tableBlots.forEach((function(e){t.quill.editor.addImmediateFormat(e)})),t.integrateClipboard(),t.addKeyboardHandlers(),t.listenBalanceCells(),t}return e=d,i=[{key:"integrateClipboard",value:function(){var t=this;this.tableBlots.forEach((function(e){return t.quill.clipboard.addTableBlot(e)})),this.quill.clipboard.addMatcher("tr",J),this.quill.clipboard.addMatcher("table",(0,L.F)(u.Zt)),this.quill.clipboard.addMatcher("td, th",(0,L.a)(j.h6))}},{key:"addKeyboardHandlers",value:function(){var t=this,e=d.keyboardBindings;Object.keys(e).forEach((function(i){e[i]&&t.quill.keyboard.addBinding(e[i])}))}},{key:"balanceTables",value:function(){this.quill.scroll.descendants(R).forEach((function(t){t.balanceCells()}))}},{key:"deleteColumn",value:function(){var t=W(this.getTable(),3),e=t[0],i=t[2];(0,c.Z)(i)&&(e.deleteColumn(i.cellOffset()),this.quill.update(r.ZP.sources.USER))}},{key:"deleteRow",value:function(){var t=W(this.getTable(),2)[1];(0,c.Z)(t)&&(t.remove(),this.quill.update(r.ZP.sources.USER))}},{key:"deleteTable",value:function(){var t=W(this.getTable(),1)[0];if((0,c.Z)(t)){var e=t.offset();t.remove(),this.quill.update(r.ZP.sources.USER),this.quill.setSelection(e,r.ZP.sources.SILENT)}}},{key:"getTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(!(0,c.Z)(t))return Q;var e=W(this.quill.getLine(t.index),2),i=e[0],n=e[1];if(!(0,c.Z)(i)||-1===this.tableBlots.indexOf(i.statics.blotName))return Q;var o=i.parent;return[o.parent.parent,o,i,n]}},{key:"insertColumn",value:function(t){var e=this.quill.getSelection(),i=W(this.getTable(e),3),n=i[0],o=i[1],s=i[2];if((0,c.Z)(s)){var a=s.cellOffset();n.insertColumn(a+t),this.quill.update(r.ZP.sources.USER);var l=o.rowOffset();0===t&&(l+=1),this.quill.setSelection(e.index+l,e.length,r.ZP.sources.SILENT)}}},{key:"insertColumnLeft",value:function(){this.insertColumn(0)}},{key:"insertColumnRight",value:function(){this.insertColumn(1)}},{key:"insertRow",value:function(t){var e=this.quill.getSelection(),i=W(this.getTable(e),3),n=i[0],o=i[1],s=i[2];if((0,c.Z)(s)){var a=o.rowOffset();n.insertRow(a+t),this.quill.update(r.ZP.sources.USER),t>0?this.quill.setSelection(e,r.ZP.sources.SILENT):this.quill.setSelection(e.index+o.children.length,e.length,r.ZP.sources.SILENT)}}},{key:"insertRowAbove",value:function(){this.insertRow(0)}},{key:"insertRowBelow",value:function(){this.insertRow(1)}},{key:"insertHeaderRow",value:function(){var t=this.quill.getSelection(),e=W(this.getTable(t),3),i=e[0],n=e[2];(0,c.Z)(n)&&(i.insertHeaderRow(),this.quill.update(r.ZP.sources.USER))}},{key:"insertTable",value:function(t,e){var i=this.quill.getSelection();if((0,c.Z)(i)){var n=new Array(t).fill(0).reduce((function(t){var i=new Array(e).fill("\n").join("");return t.insert(i,{table:N()})}),(new(o())).retain(i.index));this.quill.updateContents(n,r.ZP.sources.USER),this.quill.setSelection(i.index,r.ZP.sources.SILENT),this.balanceTables()}}},{key:"tableFormats",value:function(){return this.tableBlots}},{key:"listenBalanceCells",value:function(){var t=this;this.quill.on(r.ZP.events.SCROLL_OPTIMIZE,(function(e){e.some((function(e){return-1!==["TD","TH","TR","TBODY","THEAD","TABLE"].indexOf(e.target.tagName)&&(t.quill.once(r.ZP.events.TEXT_CHANGE,(function(e,i,n){n===r.ZP.sources.USER&&t.balanceTables()})),!0)}))})),this.quill.on(r.ZP.events.CONTENT_SETTED,(function(){t.quill.once(r.ZP.events.TEXT_CHANGE,(function(){t.balanceTables()}))}))}}],n=[{key:"register",value:function(){r.ZP.register(O,!0),r.ZP.register(E,!0),r.ZP.register(B,!0),r.ZP.register(D,!0),r.ZP.register(P,!0),r.ZP.register(M,!0),r.ZP.register(R,!0),[u.li,j.Du].forEach((function(t){Object.keys(t).forEach((function(e){var i,n,o;r.ZP.register((i={},n="formats/".concat(e),o=t[e],(n=U(n))in i?Object.defineProperty(i,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[n]=o,i),!0)}))}))}}],i&&q(e.prototype,i),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}(s.Z);function J(t,e){var i="TABLE"===t.parentNode.tagName?t.parentNode:t.parentNode.parentNode,n="THEAD"===t.parentNode.tagName||null,o=Array.from(i.querySelectorAll("tr")).indexOf(t)+1;return(0,$.HI)(e,n?"tableHeaderCell":"table",o)}X.keyboardBindings={"table backspace":{key:"backspace",format:["table","tableHeaderCell"],collapsed:!0,offset:0,handler:function(){}},"table delete":{key:"del",format:["table","tableHeaderCell"],collapsed:!0,suffix:/^$/,handler:function(){}},"table enter":{key:"enter",shiftKey:null,format:["table"],handler:function(t){var e=this.quill.getModule("table");if(e){var i=this.quill,n=W(e.getTable(t),4),o=n[0],r=H(n[1],n[2],n[3]),s=o.children.length>1&&o.children.head;if(null==r||r<0&&s)return;var a=o.offset();r<0?F({quill:i,index:a,range:t}):(0,Z.Z)({quill:i,index:a,table:o})}}},"table header enter":{key:"enter",shiftKey:null,format:["tableHeaderCell"],handler:function(t){var e=this.quill.getModule("table");if(e){var i=this.quill,n=W(e.getTable(t),4),o=n[0],r=H(n[1],n[2],n[3]);if(null==r)return;var s=o.offset(),a=o.children.length>1&&o.children.tail;r<0||r>0&&a?F({quill:i,index:s,range:t}):(0,Z.Z)({quill:i,index:s,table:o})}}},"table tab":{key:"tab",shiftKey:null,format:["table","tableHeaderCell"],handler:function(t,e){var i=e.event,n=e.line,o=n.offset(this.quill.scroll);i.shiftKey?this.quill.setSelection(o-1,r.ZP.sources.USER):this.quill.setSelection(o+n.length(),r.ZP.sources.USER)}},"table down":(0,V.Z)(!1,["table","tableHeaderCell"]),"table up":(0,V.Z)(!0,["table","tableHeaderCell"])};const tt=X},2480:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(9098),o=i.n(n),r=i(281);function s(t){var e=t.quill,i=t.index+t.table.length(),n=(new(o())).retain(i).insert("\n");e.updateContents(n,r.ZP.sources.USER),e.setSelection(i,r.ZP.sources.USER)}},9466:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(281);function o(t,e){return{key:t?"upArrow":"downArrow",collapsed:!0,format:e,handler:function(e,i){var o=t?"prev":"next",r=i.line,s=r.statics.blotName.indexOf("Line")>-1?r.parent:r,a=s.parent.parent[o],l=s.parent[o]||(null==a?void 0:a.children.head);if(null!=l){if("tableRow"===l.statics.blotName||"tableHeaderRow"===l.statics.blotName){for(var c=l.children.head,u=s;null!=u.prev;)u=u.prev,c=c.next;var d=c.offset(this.quill.scroll)+Math.min(i.offset,c.length()-1);this.quill.setSelection(d,0,n.ZP.sources.USER)}}else{var h=s.table()[o];null!=h&&(t?this.quill.setSelection(h.offset(this.quill.scroll)+h.length()-1,0,n.ZP.sources.USER):this.quill.setSelection(h.offset(this.quill.scroll),0,n.ZP.sources.USER))}return!1}}}},7896:(t,e,i)=>{"use strict";i.d(e,{F:()=>h,a:()=>p});var n=i(1233),o=i(1674),r=i(4569),s=i(5635);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){var n,o,r;n=t,o=e,r=i[e],(o=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===a(e)?e:String(e)}(o))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e,i,n){t[e]=!n&&t[e]?t[e]:i}function d(t,e,i,o,r,s){return t.filter((function(t){return!!t})).forEach((function(t){var a=i.query(t,n.Scope.ATTRIBUTE);if(null!==a){var l=a.value(e);if(l)return void u(r,a.attrName,l,s)}var c=o[t];if(null!=c&&(c.attrName===t||c.keyName===t)){var d=c.value(e)||void 0;u(r,c.attrName,d,s)}})),r}function h(t){return function(e,i,n){var a=o.Z.keys(e),l=r.Z.keys(e),u=c(c({},d(a,e,n,t,{},!0)),d(l,e,n,t,{},!0));return Object.keys(u).length>0?(0,s.HI)(i,u):i}}function p(t){return function(e,i,n){var a,l=o.Z.keys(e),u=r.Z.keys(e),h="TR"===(null===(a=e.parentNode)||void 0===a?void 0:a.tagName)?e.parentNode:void 0,p=c(c({},d(l,e,n,t,{},!0)),d(u,e,n,t,{},!0));return h&&(p=d(r.Z.keys(h),h,n,t,p,!1)),Object.keys(p).length>0?(0,s.HI)(i,p):i}}},3859:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n=i(9098),o=i.n(n),r=i(2069),s=i(7094),a=i(8034);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===l(e)?e:String(e)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(s,t);var e,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(n);if(o){var i=h(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t,e){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(i=r.call(this,t,e)).preventImageUploading(!1),i.addDragOverHandler(),i.addDropHandler(),i}return e=s,(i=[{key:"addDragOverHandler",value:function(){if((0,a.Z)()){var t=window.navigator.userAgent.toLowerCase();(-1!==t.indexOf("msie ")||-1!==t.indexOf("trident/")||-1!==t.indexOf("edge/"))&&this.quill.root.addEventListener("dragover",(function(t){t.preventDefault()}))}}},{key:"addDropHandler",value:function(){var t=this;this.quill.root.addEventListener("drop",(function(e){var i=0===e.dataTransfer.files.length,n=t.options.onDrop;if(n&&"function"==typeof n&&n(e),!i&&!t.preventImageUpload){var o;if(e.preventDefault(),document.caretRangeFromPoint)o=document.caretRangeFromPoint(e.clientX,e.clientY);else{if(!document.caretPositionFromPoint)return;var r=document.caretPositionFromPoint(e.clientX,e.clientY);(o=document.createRange()).setStart(r.offsetNode,r.offset),o.setEnd(r.offsetNode,r.offset)}var s=t.quill.selection.normalizeNative(o),a=t.quill.selection.normalizedToRange(s);t.upload(a,e.dataTransfer.files)}}))}},{key:"preventImageUploading",value:function(t){return void 0!==t&&(this.preventImageUpload=t),this.preventImageUpload}},{key:"upload",value:function(t,e,i){var n=this;if(!this.preventImageUpload||i){var o=[];Array.from(e).forEach((function(t){t&&-1!==n.options.mimetypes.indexOf(t.type)&&o.push(t)})),o.length>0&&this.options.handler.call(this,t,o,this.options.imageBlot)}}}])&&c(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(s.Z);p.DEFAULTS={mimetypes:["image/png","image/jpeg","image/pjpeg","image/gif","image/webp","image/bmp","image/svg+xml","image/vnd.microsoft.icon"],imageBlot:"image",handler:function(t,e,i){var n=this,s=e.map((function(t){return new Promise((function(e){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.readAsDataURL(t)}))}));Promise.all(s).then((function(e){var s=e.reduce((function(t,e){return t.insert((n={},r=e,(o=u(o=i))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n));var n,o,r}),(new(o())).retain(t.index).delete(t.length));n.quill.updateContents(s,r.Z.sources.USER),n.quill.setSelection(t.index+e.length,r.Z.sources.SILENT)}))}};const f=p},2141:(t,e,i)=>{"use strict";function n(t){return t?t.substring(0,1).toUpperCase()+t.substring(1):""}i.d(e,{Z:()=>n})},8034:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=function(){return"undefined"!=typeof window}},5874:(t,e,i)=>{"use strict";function n(t){return null!=t}i.d(e,{Z:()=>n})},1233:(t,e,i)=>{"use strict";var n;i.r(e),i.d(e,{Attributor:()=>w,AttributorStore:()=>B,BlockBlot:()=>$,ClassAttributor:()=>k,ContainerBlot:()=>v,EmbedBlot:()=>Z,InlineBlot:()=>M,LeafBlot:()=>C,ParentBlot:()=>_,Registry:()=>d,Scope:()=>o,ScrollBlot:()=>z,StyleAttributor:()=>D,TextBlot:()=>K}),function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(n||(n={}));const o=n;var r=function(){function t(){this.head=null,this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.insertBefore(t[0],null),t.length>1){var i=t.slice(1);this.append.apply(this,i)}},t.prototype.at=function(t){for(var e=this.iterator(),i=e();i&&t>0;)t-=1,i=e();return i},t.prototype.contains=function(t){for(var e=this.iterator(),i=e();i;){if(i===t)return!0;i=e()}return!1},t.prototype.indexOf=function(t){for(var e=this.iterator(),i=e(),n=0;i;){if(i===t)return n;n+=1,i=e()}return-1},t.prototype.insertBefore=function(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,i=this.head;null!=i;){if(i===t)return e;e+=i.length(),i=i.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var i=this.iterator(),n=i();n;){var o=n.length();if(t<o||e&&t===o&&(null==n.next||0!==n.next.length()))return[n,t];t-=o,n=i()}return[null,0]},t.prototype.forEach=function(t){for(var e=this.iterator(),i=e();i;)t(i),i=e()},t.prototype.forEachAt=function(t,e,i){if(!(e<=0))for(var n=this.find(t),o=n[0],r=t-n[1],s=this.iterator(o),a=s();a&&r<t+e;){var l=a.length();t>r?i(a,t-r,Math.min(e,r+l-t)):i(a,0,Math.min(l,t+e-r)),r+=l,a=s()}},t.prototype.map=function(t){return this.reduce((function(e,i){return e.push(t(i)),e}),[])},t.prototype.reduce=function(t,e){for(var i=this.iterator(),n=i();n;)e=t(e,n),n=i();return e},t}();const s=r;var a,l=(a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},a(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});const c=function(t){function e(e){var i=this;return e="[Parchment] "+e,(i=t.call(this,e)||this).message=e,i.name=i.constructor.name,i}return l(e,t),e}(Error);var u=function(){function t(){this.attributes={},this.classes={},this.tags={},this.types={}}return t.find=function(t,e){if(void 0===e&&(e=!1),null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){var i=null;try{i=t.parentNode}catch(t){return null}return this.find(i,e)}return null},t.prototype.create=function(e,i,n){var o=this.query(i);if(null==o)throw new c("Unable to create ".concat(i," blot"));var r=o,s=i instanceof Node||i.nodeType===Node.TEXT_NODE?i:r.create(n),a=new r(e,s,n);return t.blots.set(a.domNode,a),a},t.prototype.find=function(e,i){return void 0===i&&(i=!1),t.find(e,i)},t.prototype.query=function(t,e){var i,n=this;return void 0===e&&(e=o.ANY),"string"==typeof t?i=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?i=this.types.text:"number"==typeof t?t&o.LEVEL&o.BLOCK?i=this.types.block:t&o.LEVEL&o.INLINE&&(i=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some((function(t){return!!(i=n.classes[t])})),i=i||this.tags[t.tagName]),null==i?null:e&o.LEVEL&i.scope&&e&o.TYPE&i.scope?i:null},t.prototype.register=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(e.length>1)return e.map((function(e){return t.register(e)}));var n=e[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new c("Invalid definition");if("abstract"===n.blotName)throw new c("Cannot register abstract class");return this.types[n.blotName||n.attrName]=n,"string"==typeof n.keyName?this.attributes[n.keyName]=n:(null!=n.className&&(this.classes[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map((function(t){return t.toUpperCase()})):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach((function(e){null!=t.tags[e]&&null!=n.className||(t.tags[e]=n)})))),n},t.blots=new WeakMap,t}();const d=u,h=function(){function t(t,e){this.scroll=t,this.domNode=e,d.blots.set(e,this),this.prev=null,this.next=null}return t.create=function(t){if(null==this.tagName)throw new c("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t,10).toString()===t&&(t=parseInt(t,10))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!1,configurable:!0}),t.prototype.attach=function(){},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return this.scroll.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),d.blots.delete(this.domNode)},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,i,n){var r=this.isolate(t,e);if(null!=this.scroll.query(i,o.BLOT)&&n)r.wrap(i,n);else if(null!=this.scroll.query(i,o.ATTRIBUTE)){var s=this.scroll.create(this.statics.scope);r.wrap(s),s.format(i,n)}},t.prototype.insertAt=function(t,e,i){var n=null==i?this.scroll.create("text",e):this.scroll.create(e,i),o=this.split(t);this.parent.insertBefore(n,o||void 0)},t.prototype.isolate=function(t,e){var i=this.split(t);if(null==i)throw new Error("Attempt to isolate at end");return i.split(e),i},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName)},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replaceWith=function(t,e){var i="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var i="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(i,this.next||void 0),"function"!=typeof i.appendChild)throw new c("Cannot wrap ".concat(t));return i.appendChild(this),i},t.blotName="abstract",t}();var p=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function f(t,e){var i=e.find(t);if(null==i)try{i=e.create(t)}catch(n){i=e.create(o.INLINE),Array.from(t.childNodes).forEach((function(t){i.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(i.domNode,t),i.attach()}return i}const _=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.uiNode=null,n.build(),n}return p(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){t.prototype.attach.call(this),this.children.forEach((function(t){t.attach()}))},e.prototype.attachUI=function(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,e.uiClass&&this.uiNode.classList.add(e.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)},e.prototype.build=function(){var t=this;this.children=new s,Array.from(this.domNode.childNodes).filter((function(e){return e!==t.uiNode})).reverse().forEach((function(e){try{var i=f(e,t.scroll);t.insertBefore(i,t.children.head||void 0)}catch(t){if(t instanceof c)return;throw t}}))},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,i){t.deleteAt(e,i)}))},e.prototype.descendant=function(t,i){void 0===i&&(i=0);var n=this.children.find(i),o=n[0],r=n[1];return null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t?[o,r]:o instanceof e?o.descendant(t,r):[null,-1]},e.prototype.descendants=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=Number.MAX_VALUE);var o=[],r=n;return this.children.forEachAt(i,n,(function(i,n,s){(null==t.blotName&&t(i)||null!=t.blotName&&i instanceof t)&&o.push(i),i instanceof e&&(o=o.concat(i.descendants(t,n,r))),r-=s})),o},e.prototype.detach=function(){this.children.forEach((function(t){t.detach()})),t.prototype.detach.call(this)},e.prototype.enforceAllowedChildren=function(){var t=this,i=!1;this.children.forEach((function(n){i||t.statics.allowedChildren.some((function(t){return n instanceof t}))||(n.statics.scope===o.BLOCK_BLOT?(null!=n.next&&t.splitAfter(n),null!=n.prev&&t.splitAfter(n.prev),n.parent.unwrap(),i=!0):n instanceof e?n.unwrap():n.remove())}))},e.prototype.formatAt=function(t,e,i,n){this.children.forEachAt(t,e,(function(t,e,o){t.formatAt(e,o,i,n)}))},e.prototype.insertAt=function(t,e,i){var n=this.children.find(t),o=n[0],r=n[1];if(o)o.insertAt(r,e,i);else{var s=null==i?this.scroll.create("text",e):this.scroll.create(e,i);this.appendChild(s)}},e.prototype.insertBefore=function(t,e){null!=t.parent&&t.parent.children.remove(t);var i=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(i=e.domNode),this.domNode.parentNode===t.domNode&&this.domNode.nextSibling===i||this.domNode.insertBefore(t.domNode,i),t.attach()},e.prototype.length=function(){return this.children.reduce((function(t,e){return t+e.length()}),0)},e.prototype.moveChildren=function(t,e){this.children.forEach((function(i){t.insertBefore(i,e)}))},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){var i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i)}else this.remove()},e.prototype.path=function(t,i){void 0===i&&(i=!1);var n=this.children.find(t,i),o=n[0],r=n[1],s=[[this,t]];return o instanceof e?s.concat(o.path(r,i)):(null!=o&&s.push([o,r]),s)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replaceWith=function(i,n){var o="string"==typeof i?this.scroll.create(i,n):i;return o instanceof e&&this.moveChildren(o),t.prototype.replaceWith.call(this,o)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(t,this.length(),(function(t,n,o){var r=t.split(n,e);null!=r&&i.appendChild(r)})),i},e.prototype.splitAfter=function(t){for(var e=this.clone();null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e},e.prototype.unwrap=function(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()},e.prototype.update=function(t,e){var i=this,n=[],o=[];t.forEach((function(t){t.target===i.domNode&&"childList"===t.type&&(n.push.apply(n,t.addedNodes),o.push.apply(o,t.removedNodes))})),o.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=i.scroll.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==i.domNode||e.detach())}})),n.filter((function(t){return t.parentNode===i.domNode||t===i.uiNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=i.scroll.find(t.nextSibling));var n=f(t,i.scroll);n.next===e&&null!=n.next||(null!=n.parent&&n.parent.removeChild(i),i.insertBefore(n,e||void 0))})),this.enforceAllowedChildren()},e.uiClass="",e}(h);var m=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.checkMerge=function(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName},e.prototype.deleteAt=function(e,i){t.prototype.deleteAt.call(this,e,i),this.enforceAllowedChildren()},e.prototype.formatAt=function(e,i,n,o){t.prototype.formatAt.call(this,e,i,n,o),this.enforceAllowedChildren()},e.prototype.insertAt=function(e,i,n){t.prototype.insertAt.call(this,e,i,n),this.enforceAllowedChildren()},e.prototype.optimize=function(e){t.prototype.optimize.call(this,e),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())},e.blotName="container",e.scope=o.BLOCK_BLOT,e}(_);const v=g;var b=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return b(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]},e.prototype.value=function(){var t;return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t},e.scope=o.INLINE_BLOT,e}(h);const C=y,w=function(){function t(t,e,i){void 0===i&&(i={}),this.attrName=t,this.keyName=e;var n=o.TYPE&o.ATTRIBUTE;this.scope=null!=i.scope?i.scope&o.LEVEL|n:o.ATTRIBUTE,null!=i.whitelist&&(this.whitelist=i.whitelist)}return t.keys=function(t){return Array.from(t.attributes).map((function(t){return t.name}))},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();var x=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function S(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf("".concat(e,"-"))}))}var I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add("".concat(this.keyName,"-").concat(e)),!0)},e.prototype.remove=function(t){S(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=(S(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(w);const k=I;var E=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function O(t){var e=t.split("-"),i=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+i}var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[O(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[O(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[O(this.keyName)];return this.canAdd(t,e)?e:""},e}(w);const D=T,B=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=d.find(this.domNode);if(null!=e){var i=w.keys(this.domNode),n=k.keys(this.domNode),r=D.keys(this.domNode);i.concat(n).concat(r).forEach((function(i){var n=e.scroll.query(i,o.ATTRIBUTE);n instanceof w&&(t.attributes[n.attrName]=n)}))}},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach((function(i){var n=e.attributes[i].value(e.domNode);t.format(i,n)}))},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce((function(e,i){return e[i]=t.attributes[i].value(t.domNode),e}),{})},t}();var A=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),P=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.attributes=new B(n.domNode),n}return A(e,t),e.formats=function(t,i){var n=i.query(e.blotName);if(null==n||t.tagName!==n.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,i){var n=this;if(t!==this.statics.blotName||i){var r=this.scroll.query(t,o.INLINE);if(null==r)return;r instanceof w?this.attributes.attribute(r,i):!i||t===this.statics.blotName&&this.formats()[t]===i||this.replaceWith(t,i)}else this.children.forEach((function(t){t instanceof e||(t=t.wrap(e.blotName,!0)),n.attributes.copy(t)})),this.unwrap()},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.formatAt=function(e,i,n,r){null!=this.formats()[n]||this.scroll.query(n,o.ATTRIBUTE)?this.isolate(e,i).format(n,r):t.prototype.formatAt.call(this,e,i,n,r)},e.prototype.optimize=function(i){t.prototype.optimize.call(this,i);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var o=this.next;o instanceof e&&o.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(t[i]!==e[i])return!1;return!0}(n,o.formats())&&(o.moveChildren(this),o.remove())},e.prototype.replaceWith=function(e,i){var n=t.prototype.replaceWith.call(this,e,i);return this.attributes.copy(n),n},e.prototype.update=function(e,i){var n=this;t.prototype.update.call(this,e,i),e.some((function(t){return t.target===n.domNode&&"attributes"===t.type}))&&this.attributes.build()},e.prototype.wrap=function(i,n){var o=t.prototype.wrap.call(this,i,n);return o instanceof e&&this.attributes.move(o),o},e.allowedChildren=[e,C],e.blotName="inline",e.scope=o.INLINE_BLOT,e.tagName="SPAN",e}(_);const M=P;var R=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),N=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.attributes=new B(n.domNode),n}return R(e,t),e.formats=function(t,i){var n=i.query(e.blotName);if(null==n||t.tagName!==n.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,i){var n=this.scroll.query(t,o.BLOCK);null!=n&&(n instanceof w?this.attributes.attribute(n,i):t!==this.statics.blotName||i?!i||t===this.statics.blotName&&this.formats()[t]===i||this.replaceWith(t,i):this.replaceWith(e.blotName))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.formatAt=function(e,i,n,r){null!=this.scroll.query(n,o.BLOCK)?this.format(n,r):t.prototype.formatAt.call(this,e,i,n,r)},e.prototype.insertAt=function(e,i,n){if(null==n||null!=this.scroll.query(i,o.INLINE))t.prototype.insertAt.call(this,e,i,n);else{var r=this.split(e);if(null==r)throw new Error("Attempt to insertAt after block boundaries");var s=this.scroll.create(i,n);r.parent.insertBefore(s,r)}},e.prototype.replaceWith=function(e,i){var n=t.prototype.replaceWith.call(this,e,i);return this.attributes.copy(n),n},e.prototype.update=function(e,i){var n=this;t.prototype.update.call(this,e,i),e.some((function(t){return t.target===n.domNode&&"attributes"===t.type}))&&this.attributes.build()},e.blotName="block",e.scope=o.BLOCK_BLOT,e.tagName="P",e.allowedChildren=[M,e,C],e}(_);const $=N;var V=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return V(e,t),e.formats=function(t,e){},e.prototype.format=function(e,i){t.prototype.formatAt.call(this,0,this.length(),e,i)},e.prototype.formatAt=function(e,i,n,o){0===e&&i===this.length()?this.format(n,o):t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.formats=function(){return this.statics.formats(this.domNode,this.scroll)},e}(C);const Z=F;var H=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},j=function(t){function e(e,i){var n=t.call(this,null,i)||this;return n.registry=e,n.scroll=n,n.build(),n.observer=new MutationObserver((function(t){n.update(t)})),n.observer.observe(n.domNode,L),n.attach(),n}return H(e,t),e.prototype.create=function(t,e){return this.registry.create(this,t,e)},e.prototype.find=function(t,e){void 0===e&&(e=!1);var i=this.registry.find(t,e);return i?i.scroll===this?i:e?this.find(i.scroll.domNode.parentNode,!0):null:null},e.prototype.query=function(t,e){return void 0===e&&(e=o.ANY),this.registry.query(t,e)},e.prototype.register=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return(t=this.registry).register.apply(t,e)},e.prototype.build=function(){null!=this.scroll&&t.prototype.build.call(this)},e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,i){this.update(),0===e&&i===this.length()?this.children.forEach((function(t){t.remove()})):t.prototype.deleteAt.call(this,e,i)},e.prototype.formatAt=function(e,i,n,o){this.update(),t.prototype.formatAt.call(this,e,i,n,o)},e.prototype.insertAt=function(e,i,n){this.update(),t.prototype.insertAt.call(this,e,i,n)},e.prototype.optimize=function(e,i){var n=this;void 0===e&&(e=[]),void 0===i&&(i={}),t.prototype.optimize.call(this,i);for(var o=i.mutationsMap||new WeakMap,r=Array.from(this.observer.takeRecords());r.length>0;)e.push(r.pop());for(var s=function t(e,i){void 0===i&&(i=!0),null!=e&&e!==n&&null!=e.domNode.parentNode&&(o.has(e.domNode)||o.set(e.domNode,[]),i&&t(e.parent))},a=function t(e){o.has(e.domNode)&&(e instanceof _&&e.children.forEach(t),o.delete(e.domNode),e.optimize(i))},l=e,c=0;l.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach((function(t){var e=n.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(s(n.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach((function(t){var e=n.find(t,!1);s(e,!1),e instanceof _&&e.children.forEach((function(t){s(t,!1)}))}))):"attributes"===t.type&&s(e.prev)),s(e))})),this.children.forEach(a),r=(l=Array.from(this.observer.takeRecords())).slice();r.length>0;)e.push(r.pop())}},e.prototype.update=function(e,i){var n=this;void 0===i&&(i={}),e=e||this.observer.takeRecords();var o=new WeakMap;e.map((function(t){var e=n.find(t.target,!0);return null==e?null:o.has(e.domNode)?(o.get(e.domNode).push(t),null):(o.set(e.domNode,[t]),e)})).forEach((function(t){null!=t&&t!==n&&o.has(t.domNode)&&t.update(o.get(t.domNode)||[],i)})),i.mutationsMap=o,o.has(this.domNode)&&t.prototype.update.call(this,o.get(this.domNode),i),this.optimize(e,i)},e.blotName="scroll",e.defaultChild=$,e.allowedChildren=[$,v],e.scope=o.BLOCK_BLOT,e.tagName="DIV",e}(_);const z=j;var W=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const K=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.text=n.statics.value(n.domNode),n}return W(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){return t.data},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,i,n){null==n?(this.text=this.text.slice(0,e)+i+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,i,n)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(i){t.prototype.optimize.call(this,i),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var i=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i},e.prototype.update=function(t,e){var i=this;t.some((function(t){return"characterData"===t.type&&t.target===i.domNode}))&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=o.INLINE_BLOT,e}(C)},3034:function(t,e){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function o(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||t,s),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),l.prototype.eventNames=function(){var t,e,o=[];if(0===this._eventsCount)return o;for(e in t=this._events)i.call(t,e)&&o.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},l.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,s=new Array(r);o<r;o++)s[o]=i[o].fn;return s},l.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},l.prototype.emit=function(t,e,i,o,r,s){var a=n?n+t:t;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,o),!0;case 5:return u.fn.call(u.context,e,i,o,r),!0;case 6:return u.fn.call(u.context,e,i,o,r,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,i);break;case 4:u[c].fn.call(u[c].context,e,i,o);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},l.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},l.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},l.prototype.removeListener=function(t,e,i,o){var r=n?n+t:t;if(!this._events[r])return this;if(!e)return a(this,r),this;var s=this._events[r];if(s.fn)s.fn!==e||o&&!s.once||i&&s.context!==i||a(this,r);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||o&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[r]=1===c.length?c[0]:c:a(this,r)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,void 0!==t&&(t.exports=l)},1456:t=>{var e=-1,i=1,n=0;function o(t,c,u,d){if(t===c)return t?[[n,t]]:[];if(null!=u){var h=function(t,e,i){var n="number"==typeof i?{index:i,length:0}:i.oldRange,o="number"==typeof i?null:i.newRange,r=t.length,s=e.length;if(0===n.length&&(null===o||0===o.length)){var a=n.index,l=t.slice(0,a),c=t.slice(a),u=o?o.index:null,d=a+s-r;if((null===u||u===d)&&!(d<0||d>s)){var h=e.slice(0,d);if((m=e.slice(d))===c){var f=Math.min(a,d);if((v=l.slice(0,f))===(y=h.slice(0,f)))return p(v,l.slice(f),h.slice(f),c)}}if(null===u||u===a){var _=a,m=(h=e.slice(0,_),e.slice(_));if(h===l){var g=Math.min(r-_,s-_);if((b=c.slice(c.length-g))===(C=m.slice(m.length-g)))return p(l,c.slice(0,c.length-g),m.slice(0,m.length-g),b)}}}if(n.length>0&&o&&0===o.length){var v=t.slice(0,n.index),b=t.slice(n.index+n.length);if(!(s<(f=v.length)+(g=b.length))){var y=e.slice(0,f),C=e.slice(s-g);if(v===y&&b===C)return p(v,t.slice(f,r-g),e.slice(f,s-g),b)}}return null}(t,c,u);if(h)return h}var f=s(t,c),_=t.substring(0,f);f=a(t=t.substring(f),c=c.substring(f));var m=t.substring(t.length-f),g=function(t,l){var c;if(!t)return[[i,l]];if(!l)return[[e,t]];var u=t.length>l.length?t:l,d=t.length>l.length?l:t,h=u.indexOf(d);if(-1!==h)return c=[[i,u.substring(0,h)],[n,d],[i,u.substring(h+d.length)]],t.length>l.length&&(c[0][0]=c[2][0]=e),c;if(1===d.length)return[[e,t],[i,l]];var p=function(t,e){var i=t.length>e.length?t:e,n=t.length>e.length?e:t;if(i.length<4||2*n.length<i.length)return null;function o(t,e,i){for(var n,o,r,l,c=t.substring(i,i+Math.floor(t.length/4)),u=-1,d="";-1!==(u=e.indexOf(c,u+1));){var h=s(t.substring(i),e.substring(u)),p=a(t.substring(0,i),e.substring(0,u));d.length<p+h&&(d=e.substring(u-p,u)+e.substring(u,u+h),n=t.substring(0,i-p),o=t.substring(i+h),r=e.substring(0,u-p),l=e.substring(u+h))}return 2*d.length>=t.length?[n,o,r,l,d]:null}var r,l,c,u,d,h=o(i,n,Math.ceil(i.length/4)),p=o(i,n,Math.ceil(i.length/2));return h||p?(r=p?h&&h[4].length>p[4].length?h:p:h,t.length>e.length?(l=r[0],c=r[1],u=r[2],d=r[3]):(u=r[0],d=r[1],l=r[2],c=r[3]),[l,c,u,d,r[4]]):null}(t,l);if(p){var f=p[0],_=p[1],m=p[2],g=p[3],v=p[4],b=o(f,m),y=o(_,g);return b.concat([[n,v]],y)}return function(t,n){for(var o=t.length,s=n.length,a=Math.ceil((o+s)/2),l=a,c=2*a,u=new Array(c),d=new Array(c),h=0;h<c;h++)u[h]=-1,d[h]=-1;u[l+1]=0,d[l+1]=0;for(var p=o-s,f=p%2!=0,_=0,m=0,g=0,v=0,b=0;b<a;b++){for(var y=-b+_;y<=b-m;y+=2){for(var C=l+y,w=(E=y===-b||y!==b&&u[C-1]<u[C+1]?u[C+1]:u[C-1]+1)-y;E<o&&w<s&&t.charAt(E)===n.charAt(w);)E++,w++;if(u[C]=E,E>o)m+=2;else if(w>s)_+=2;else if(f&&(I=l+p-y)>=0&&I<c&&-1!==d[I]&&E>=(S=o-d[I]))return r(t,n,E,w)}for(var x=-b+g;x<=b-v;x+=2){for(var S,I=l+x,k=(S=x===-b||x!==b&&d[I-1]<d[I+1]?d[I+1]:d[I-1]+1)-x;S<o&&k<s&&t.charAt(o-S-1)===n.charAt(s-k-1);)S++,k++;if(d[I]=S,S>o)v+=2;else if(k>s)g+=2;else if(!f){var E;if((C=l+p-x)>=0&&C<c&&-1!==u[C]&&(w=l+(E=u[C])-C,E>=(S=o-S)))return r(t,n,E,w)}}}return[[e,t],[i,n]]}(t,l)}(t=t.substring(0,t.length-f),c=c.substring(0,c.length-f));return _&&g.unshift([n,_]),m&&g.push([n,m]),l(g,d),g}function r(t,e,i,n){var r=t.substring(0,i),s=e.substring(0,n),a=t.substring(i),l=e.substring(n),c=o(r,s),u=o(a,l);return c.concat(u)}function s(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var i=0,n=Math.min(t.length,e.length),o=n,r=0;i<o;)t.substring(r,o)==e.substring(r,o)?r=i=o:n=o,o=Math.floor((n-i)/2+i);return c(t.charCodeAt(o-1))&&o--,o}function a(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var i=0,n=Math.min(t.length,e.length),o=n,r=0;i<o;)t.substring(t.length-o,t.length-r)==e.substring(e.length-o,e.length-r)?r=i=o:n=o,o=Math.floor((n-i)/2+i);return u(t.charCodeAt(t.length-o))&&o--,o}function l(t,o){t.push([n,""]);for(var r,c=0,u=0,p=0,f="",_="";c<t.length;)if(c<t.length-1&&!t[c][1])t.splice(c,1);else switch(t[c][0]){case i:p++,_+=t[c][1],c++;break;case e:u++,f+=t[c][1],c++;break;case n:var m=c-p-u-1;if(o){if(m>=0&&h(t[m][1])){var g=t[m][1].slice(-1);if(t[m][1]=t[m][1].slice(0,-1),f=g+f,_=g+_,!t[m][1]){t.splice(m,1),c--;var v=m-1;t[v]&&t[v][0]===i&&(p++,_=t[v][1]+_,v--),t[v]&&t[v][0]===e&&(u++,f=t[v][1]+f,v--),m=v}}d(t[c][1])&&(g=t[c][1].charAt(0),t[c][1]=t[c][1].slice(1),f+=g,_+=g)}if(c<t.length-1&&!t[c][1]){t.splice(c,1);break}if(f.length>0||_.length>0){f.length>0&&_.length>0&&(0!==(r=s(_,f))&&(m>=0?t[m][1]+=_.substring(0,r):(t.splice(0,0,[n,_.substring(0,r)]),c++),_=_.substring(r),f=f.substring(r)),0!==(r=a(_,f))&&(t[c][1]=_.substring(_.length-r)+t[c][1],_=_.substring(0,_.length-r),f=f.substring(0,f.length-r)));var b=p+u;0===f.length&&0===_.length?(t.splice(c-b,b),c-=b):0===f.length?(t.splice(c-b,b,[i,_]),c=c-b+1):0===_.length?(t.splice(c-b,b,[e,f]),c=c-b+1):(t.splice(c-b,b,[e,f],[i,_]),c=c-b+2)}0!==c&&t[c-1][0]===n?(t[c-1][1]+=t[c][1],t.splice(c,1)):c++,p=0,u=0,f="",_=""}""===t[t.length-1][1]&&t.pop();var y=!1;for(c=1;c<t.length-1;)t[c-1][0]===n&&t[c+1][0]===n&&(t[c][1].substring(t[c][1].length-t[c-1][1].length)===t[c-1][1]?(t[c][1]=t[c-1][1]+t[c][1].substring(0,t[c][1].length-t[c-1][1].length),t[c+1][1]=t[c-1][1]+t[c+1][1],t.splice(c-1,1),y=!0):t[c][1].substring(0,t[c+1][1].length)==t[c+1][1]&&(t[c-1][1]+=t[c+1][1],t[c][1]=t[c][1].substring(t[c+1][1].length)+t[c+1][1],t.splice(c+1,1),y=!0)),c++;y&&l(t,o)}function c(t){return t>=55296&&t<=56319}function u(t){return t>=56320&&t<=57343}function d(t){return u(t.charCodeAt(0))}function h(t){return c(t.charCodeAt(t.length-1))}function p(t,o,r,s){return h(t)||d(s)?null:function(t){for(var e=[],i=0;i<t.length;i++)t[i][1].length>0&&e.push(t[i]);return e}([[n,t],[e,o],[i,r],[n,s]])}function f(t,e,i){return o(t,e,i,!0)}f.INSERT=i,f.DELETE=e,f.EQUAL=n,t.exports=f},8805:(t,e,i)=>{t=i.nmd(t);var n="__lodash_hash_undefined__",o=9007199254740991,r="[object Arguments]",s="[object Boolean]",a="[object Date]",l="[object Function]",c="[object GeneratorFunction]",u="[object Map]",d="[object Number]",h="[object Object]",p="[object Promise]",f="[object RegExp]",_="[object Set]",m="[object String]",g="[object Symbol]",v="[object WeakMap]",b="[object ArrayBuffer]",y="[object DataView]",C="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",S="[object Int16Array]",I="[object Int32Array]",k="[object Uint8Array]",E="[object Uint8ClampedArray]",O="[object Uint16Array]",T="[object Uint32Array]",D=/\w*$/,B=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,P={};P[r]=P["[object Array]"]=P[b]=P[y]=P[s]=P[a]=P[C]=P[w]=P[x]=P[S]=P[I]=P[u]=P[d]=P[h]=P[f]=P[_]=P[m]=P[g]=P[k]=P[E]=P[O]=P[T]=!0,P["[object Error]"]=P[l]=P[v]=!1;var M="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,R="object"==typeof self&&self&&self.Object===Object&&self,N=M||R||Function("return this")(),$=e&&!e.nodeType&&e,V=$&&t&&!t.nodeType&&t,F=V&&V.exports===$;function Z(t,e){return t.set(e[0],e[1]),t}function H(t,e){return t.add(e),t}function L(t,e,i,n){var o=-1,r=t?t.length:0;for(n&&r&&(i=t[++o]);++o<r;)i=e(i,t[o],o,t);return i}function j(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function z(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function W(t,e){return function(i){return t(e(i))}}function K(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var q,U=Array.prototype,G=Function.prototype,Y=Object.prototype,Q=N["__core-js_shared__"],X=(q=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",J=G.toString,tt=Y.hasOwnProperty,et=Y.toString,it=RegExp("^"+J.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=F?N.Buffer:void 0,ot=N.Symbol,rt=N.Uint8Array,st=W(Object.getPrototypeOf,Object),at=Object.create,lt=Y.propertyIsEnumerable,ct=U.splice,ut=Object.getOwnPropertySymbols,dt=nt?nt.isBuffer:void 0,ht=W(Object.keys,Object),pt=Nt(N,"DataView"),ft=Nt(N,"Map"),_t=Nt(N,"Promise"),mt=Nt(N,"Set"),gt=Nt(N,"WeakMap"),vt=Nt(Object,"create"),bt=Ht(pt),yt=Ht(ft),Ct=Ht(_t),wt=Ht(mt),xt=Ht(gt),St=ot?ot.prototype:void 0,It=St?St.valueOf:void 0;function kt(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Et(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ot(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){this.__data__=new Et(t)}function Dt(t,e,i){var n=t[e];tt.call(t,e)&&Lt(n,i)&&(void 0!==i||e in t)||(t[e]=i)}function Bt(t,e){for(var i=t.length;i--;)if(Lt(t[i][0],e))return i;return-1}function At(t,e,i,n,o,p,v){var B;if(n&&(B=p?n(t,o,p,v):n(t)),void 0!==B)return B;if(!qt(t))return t;var A=jt(t);if(A){if(B=function(t){var e=t.length,i=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!e)return function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}(t,B)}else{var M=Vt(t),R=M==l||M==c;if(Wt(t))return function(t,e){if(e)return t.slice();var i=new t.constructor(t.length);return t.copy(i),i}(t,e);if(M==h||M==r||R&&!p){if(j(t))return p?t:{};if(B=function(t){return"function"!=typeof t.constructor||Zt(t)?{}:qt(e=st(t))?at(e):{};var e}(R?{}:t),!e)return function(t,e){return Mt(t,$t(t),e)}(t,function(t,e){return t&&Mt(e,Ut(e),t)}(B,t))}else{if(!P[M])return p?t:{};B=function(t,e,i,n){var o,r=t.constructor;switch(e){case b:return Pt(t);case s:case a:return new r(+t);case y:return function(t,e){var i=e?Pt(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,n);case C:case w:case x:case S:case I:case k:case E:case O:case T:return function(t,e){var i=e?Pt(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(t,n);case u:return function(t,e,i){return L(e?i(z(t),!0):z(t),Z,new t.constructor)}(t,n,i);case d:case m:return new r(t);case f:return function(t){var e=new t.constructor(t.source,D.exec(t));return e.lastIndex=t.lastIndex,e}(t);case _:return function(t,e,i){return L(e?i(K(t),!0):K(t),H,new t.constructor)}(t,n,i);case g:return o=t,It?Object(It.call(o)):{}}}(t,M,At,e)}}v||(v=new Tt);var N=v.get(t);if(N)return N;if(v.set(t,B),!A)var $=i?function(t){return function(t,e,i){var n=e(t);return jt(t)?n:function(t,e){for(var i=-1,n=e.length,o=t.length;++i<n;)t[o+i]=e[i];return t}(n,i(t))}(t,Ut,$t)}(t):Ut(t);return function(t,e){for(var i=-1,n=t?t.length:0;++i<n&&!1!==e(t[i],i););}($||t,(function(o,r){$&&(o=t[r=o]),Dt(B,r,At(o,e,i,n,r,t,v))})),B}function Pt(t){var e=new t.constructor(t.byteLength);return new rt(e).set(new rt(t)),e}function Mt(t,e,i,n){i||(i={});for(var o=-1,r=e.length;++o<r;){var s=e[o],a=n?n(i[s],t[s],s,i,t):void 0;Dt(i,s,void 0===a?t[s]:a)}return i}function Rt(t,e){var i,n,o=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof e?"string":"hash"]:o.map}function Nt(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!qt(t)||(e=t,X&&X in e))&&(Kt(t)||j(t)?it:B).test(Ht(t));var e}(i)?i:void 0}kt.prototype.clear=function(){this.__data__=vt?vt(null):{}},kt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},kt.prototype.get=function(t){var e=this.__data__;if(vt){var i=e[t];return i===n?void 0:i}return tt.call(e,t)?e[t]:void 0},kt.prototype.has=function(t){var e=this.__data__;return vt?void 0!==e[t]:tt.call(e,t)},kt.prototype.set=function(t,e){return this.__data__[t]=vt&&void 0===e?n:e,this},Et.prototype.clear=function(){this.__data__=[]},Et.prototype.delete=function(t){var e=this.__data__,i=Bt(e,t);return!(i<0||(i==e.length-1?e.pop():ct.call(e,i,1),0))},Et.prototype.get=function(t){var e=this.__data__,i=Bt(e,t);return i<0?void 0:e[i][1]},Et.prototype.has=function(t){return Bt(this.__data__,t)>-1},Et.prototype.set=function(t,e){var i=this.__data__,n=Bt(i,t);return n<0?i.push([t,e]):i[n][1]=e,this},Ot.prototype.clear=function(){this.__data__={hash:new kt,map:new(ft||Et),string:new kt}},Ot.prototype.delete=function(t){return Rt(this,t).delete(t)},Ot.prototype.get=function(t){return Rt(this,t).get(t)},Ot.prototype.has=function(t){return Rt(this,t).has(t)},Ot.prototype.set=function(t,e){return Rt(this,t).set(t,e),this},Tt.prototype.clear=function(){this.__data__=new Et},Tt.prototype.delete=function(t){return this.__data__.delete(t)},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Et){var n=i.__data__;if(!ft||n.length<199)return n.push([t,e]),this;i=this.__data__=new Ot(n)}return i.set(t,e),this};var $t=ut?W(ut,Object):function(){return[]},Vt=function(t){return et.call(t)};function Ft(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||A.test(t))&&t>-1&&t%1==0&&t<e}function Zt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Y)}function Ht(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Lt(t,e){return t===e||t!=t&&e!=e}(pt&&Vt(new pt(new ArrayBuffer(1)))!=y||ft&&Vt(new ft)!=u||_t&&Vt(_t.resolve())!=p||mt&&Vt(new mt)!=_||gt&&Vt(new gt)!=v)&&(Vt=function(t){var e=et.call(t),i=e==h?t.constructor:void 0,n=i?Ht(i):void 0;if(n)switch(n){case bt:return y;case yt:return u;case Ct:return p;case wt:return _;case xt:return v}return e});var jt=Array.isArray;function zt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!Kt(t)}var Wt=dt||function(){return!1};function Kt(t){var e=qt(t)?et.call(t):"";return e==l||e==c}function qt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ut(t){return zt(t)?function(t,e){var i=jt(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&zt(t)}(t)&&tt.call(t,"callee")&&(!lt.call(t,"callee")||et.call(t)==r)}(t)?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],n=i.length,o=!!n;for(var s in t)!e&&!tt.call(t,s)||o&&("length"==s||Ft(s,n))||i.push(s);return i}(t):function(t){if(!Zt(t))return ht(t);var e=[];for(var i in Object(t))tt.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}t.exports=function(t){return At(t,!0,!0)}},2722:(t,e,i)=>{t=i.nmd(t);var n="__lodash_hash_undefined__",o=1,r=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",f="[object GeneratorFunction]",_="[object Map]",m="[object Number]",g="[object Null]",v="[object Object]",b="[object Promise]",y="[object Proxy]",C="[object RegExp]",w="[object Set]",x="[object String]",S="[object Undefined]",I="[object WeakMap]",k="[object ArrayBuffer]",E="[object DataView]",O=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,D={};D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D[a]=D[l]=D[k]=D[u]=D[E]=D[d]=D[h]=D[p]=D[_]=D[m]=D[v]=D[C]=D[w]=D[x]=D[I]=!1;var B="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,A="object"==typeof self&&self&&self.Object===Object&&self,P=B||A||Function("return this")(),M=e&&!e.nodeType&&e,R=M&&t&&!t.nodeType&&t,N=R&&R.exports===M,$=N&&B.process,V=function(){try{return $&&$.binding&&$.binding("util")}catch(t){}}(),F=V&&V.isTypedArray;function Z(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function H(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function L(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var j,z,W,K=Array.prototype,q=Function.prototype,U=Object.prototype,G=P["__core-js_shared__"],Y=q.toString,Q=U.hasOwnProperty,X=(j=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",J=U.toString,tt=RegExp("^"+Y.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=N?P.Buffer:void 0,it=P.Symbol,nt=P.Uint8Array,ot=U.propertyIsEnumerable,rt=K.splice,st=it?it.toStringTag:void 0,at=Object.getOwnPropertySymbols,lt=et?et.isBuffer:void 0,ct=(z=Object.keys,W=Object,function(t){return z(W(t))}),ut=Rt(P,"DataView"),dt=Rt(P,"Map"),ht=Rt(P,"Promise"),pt=Rt(P,"Set"),ft=Rt(P,"WeakMap"),_t=Rt(Object,"create"),mt=Ft(ut),gt=Ft(dt),vt=Ft(ht),bt=Ft(pt),yt=Ft(ft),Ct=it?it.prototype:void 0,wt=Ct?Ct.valueOf:void 0;function xt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function St(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function It(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function kt(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new It;++e<i;)this.add(t[e])}function Et(t){var e=this.__data__=new St(t);this.size=e.size}function Ot(t,e){for(var i=t.length;i--;)if(Zt(t[i][0],e))return i;return-1}function Tt(t){return null==t?void 0===t?S:g:st&&st in Object(t)?function(t){var e=Q.call(t,st),i=t[st];try{t[st]=void 0;var n=!0}catch(t){}var o=J.call(t);return n&&(e?t[st]=i:delete t[st]),o}(t):function(t){return J.call(t)}(t)}function Dt(t){return qt(t)&&Tt(t)==a}function Bt(t,e,i,n,s){return t===e||(null==t||null==e||!qt(t)&&!qt(e)?t!=t&&e!=e:function(t,e,i,n,s,c){var p=Lt(t),f=Lt(e),g=p?l:$t(t),b=f?l:$t(e),y=(g=g==a?v:g)==v,S=(b=b==a?v:b)==v,I=g==b;if(I&&jt(t)){if(!jt(e))return!1;p=!0,y=!1}if(I&&!y)return c||(c=new Et),p||Ut(t)?At(t,e,i,n,s,c):function(t,e,i,n,s,a,l){switch(i){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case k:return!(t.byteLength!=e.byteLength||!a(new nt(t),new nt(e)));case u:case d:case m:return Zt(+t,+e);case h:return t.name==e.name&&t.message==e.message;case C:case x:return t==e+"";case _:var c=H;case w:var p=n&o;if(c||(c=L),t.size!=e.size&&!p)return!1;var f=l.get(t);if(f)return f==e;n|=r,l.set(t,e);var g=At(c(t),c(e),n,s,a,l);return l.delete(t),g;case"[object Symbol]":if(wt)return wt.call(t)==wt.call(e)}return!1}(t,e,g,i,n,s,c);if(!(i&o)){var O=y&&Q.call(t,"__wrapped__"),T=S&&Q.call(e,"__wrapped__");if(O||T){var D=O?t.value():t,B=T?e.value():e;return c||(c=new Et),s(D,B,i,n,c)}}return!!I&&(c||(c=new Et),function(t,e,i,n,r,s){var a=i&o,l=Pt(t),c=l.length;if(c!=Pt(e).length&&!a)return!1;for(var u=c;u--;){var d=l[u];if(!(a?d in e:Q.call(e,d)))return!1}var h=s.get(t);if(h&&s.get(e))return h==e;var p=!0;s.set(t,e),s.set(e,t);for(var f=a;++u<c;){var _=t[d=l[u]],m=e[d];if(n)var g=a?n(m,_,d,e,t,s):n(_,m,d,t,e,s);if(!(void 0===g?_===m||r(_,m,i,n,s):g)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,i,n,s,c))}(t,e,i,n,Bt,s))}function At(t,e,i,n,s,a){var l=i&o,c=t.length,u=e.length;if(c!=u&&!(l&&u>c))return!1;var d=a.get(t);if(d&&a.get(e))return d==e;var h=-1,p=!0,f=i&r?new kt:void 0;for(a.set(t,e),a.set(e,t);++h<c;){var _=t[h],m=e[h];if(n)var g=l?n(m,_,h,e,t,a):n(_,m,h,t,e,a);if(void 0!==g){if(g)continue;p=!1;break}if(f){if(!Z(e,(function(t,e){if(o=e,!f.has(o)&&(_===t||s(_,t,i,n,a)))return f.push(e);var o}))){p=!1;break}}else if(_!==m&&!s(_,m,i,n,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Pt(t){return function(t,e,i){var n=e(t);return Lt(t)?n:function(t,e){for(var i=-1,n=e.length,o=t.length;++i<n;)t[o+i]=e[i];return t}(n,i(t))}(t,Gt,Nt)}function Mt(t,e){var i,n,o=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof e?"string":"hash"]:o.map}function Rt(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Kt(t)||function(t){return!!X&&X in t}(t))&&(zt(t)?tt:O).test(Ft(t))}(i)?i:void 0}xt.prototype.clear=function(){this.__data__=_t?_t(null):{},this.size=0},xt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},xt.prototype.get=function(t){var e=this.__data__;if(_t){var i=e[t];return i===n?void 0:i}return Q.call(e,t)?e[t]:void 0},xt.prototype.has=function(t){var e=this.__data__;return _t?void 0!==e[t]:Q.call(e,t)},xt.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=_t&&void 0===e?n:e,this},St.prototype.clear=function(){this.__data__=[],this.size=0},St.prototype.delete=function(t){var e=this.__data__,i=Ot(e,t);return!(i<0||(i==e.length-1?e.pop():rt.call(e,i,1),--this.size,0))},St.prototype.get=function(t){var e=this.__data__,i=Ot(e,t);return i<0?void 0:e[i][1]},St.prototype.has=function(t){return Ot(this.__data__,t)>-1},St.prototype.set=function(t,e){var i=this.__data__,n=Ot(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},It.prototype.clear=function(){this.size=0,this.__data__={hash:new xt,map:new(dt||St),string:new xt}},It.prototype.delete=function(t){var e=Mt(this,t).delete(t);return this.size-=e?1:0,e},It.prototype.get=function(t){return Mt(this,t).get(t)},It.prototype.has=function(t){return Mt(this,t).has(t)},It.prototype.set=function(t,e){var i=Mt(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},kt.prototype.add=kt.prototype.push=function(t){return this.__data__.set(t,n),this},kt.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.clear=function(){this.__data__=new St,this.size=0},Et.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var i=this.__data__;if(i instanceof St){var n=i.__data__;if(!dt||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new It(n)}return i.set(t,e),this.size=i.size,this};var Nt=at?function(t){return null==t?[]:(t=Object(t),function(e,i){for(var n=-1,o=null==e?0:e.length,r=0,s=[];++n<o;){var a=e[n];l=a,ot.call(t,l)&&(s[r++]=a)}var l;return s}(at(t)))}:function(){return[]},$t=Tt;function Vt(t,e){return!!(e=null==e?s:e)&&("number"==typeof t||T.test(t))&&t>-1&&t%1==0&&t<e}function Ft(t){if(null!=t){try{return Y.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Zt(t,e){return t===e||t!=t&&e!=e}(ut&&$t(new ut(new ArrayBuffer(1)))!=E||dt&&$t(new dt)!=_||ht&&$t(ht.resolve())!=b||pt&&$t(new pt)!=w||ft&&$t(new ft)!=I)&&($t=function(t){var e=Tt(t),i=e==v?t.constructor:void 0,n=i?Ft(i):"";if(n)switch(n){case mt:return E;case gt:return _;case vt:return b;case bt:return w;case yt:return I}return e});var Ht=Dt(function(){return arguments}())?Dt:function(t){return qt(t)&&Q.call(t,"callee")&&!ot.call(t,"callee")},Lt=Array.isArray,jt=lt||function(){return!1};function zt(t){if(!Kt(t))return!1;var e=Tt(t);return e==p||e==f||e==c||e==y}function Wt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function Kt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function qt(t){return null!=t&&"object"==typeof t}var Ut=F?function(t){return function(e){return t(e)}}(F):function(t){return qt(t)&&Wt(t.length)&&!!D[Tt(t)]};function Gt(t){return null!=(e=t)&&Wt(e.length)&&!zt(e)?function(t,e){var i=Lt(t),n=!i&&Ht(t),o=!i&&!n&&jt(t),r=!i&&!n&&!o&&Ut(t),s=i||n||o||r,a=s?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],l=a.length;for(var c in t)!e&&!Q.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Vt(c,l))||a.push(c);return a}(t):function(t){if(i=(e=t)&&e.constructor,e!==("function"==typeof i&&i.prototype||U))return ct(t);var e,i,n=[];for(var o in Object(t))Q.call(t,o)&&"constructor"!=o&&n.push(o);return n}(t);var e}t.exports=function(t,e){return Bt(t,e)}},732:(t,e,i)=>{t=i.nmd(t);var n="__lodash_hash_undefined__",o=9007199254740991,r="[object Arguments]",s="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",c="[object Null]",u="[object Object]",d="[object Proxy]",h="[object Undefined]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[r]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_[a]=_["[object Map]"]=_["[object Number]"]=_[u]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object WeakMap]"]=!1;var m,g,v,b="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,y="object"==typeof self&&self&&self.Object===Object&&self,C=b||y||Function("return this")(),w=e&&!e.nodeType&&e,x=w&&t&&!t.nodeType&&t,S=x&&x.exports===w,I=S&&b.process,k=function(){try{return x&&x.require&&x.require("util").types||I&&I.binding&&I.binding("util")}catch(t){}}(),E=k&&k.isTypedArray,O=Array.prototype,T=Function.prototype,D=Object.prototype,B=C["__core-js_shared__"],A=T.toString,P=D.hasOwnProperty,M=(m=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",R=D.toString,N=A.call(Object),$=RegExp("^"+A.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=S?C.Buffer:void 0,F=C.Symbol,Z=C.Uint8Array,H=(V&&V.allocUnsafe,g=Object.getPrototypeOf,v=Object,function(t){return g(v(t))}),L=Object.create,j=D.propertyIsEnumerable,z=O.splice,W=F?F.toStringTag:void 0,K=function(){try{var t=ht(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),q=V?V.isBuffer:void 0,U=Math.max,G=Date.now,Y=ht(C,"Map"),Q=ht(Object,"create"),X=function(){function t(){}return function(e){if(!St(e))return{};if(L)return L(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function J(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function tt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function et(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function it(t){var e=this.__data__=new tt(t);this.size=e.size}function nt(t,e,i){(void 0!==i&&!gt(t[e],i)||void 0===i&&!(e in t))&&st(t,e,i)}function ot(t,e,i){var n=t[e];P.call(t,e)&&gt(n,i)&&(void 0!==i||e in t)||st(t,e,i)}function rt(t,e){for(var i=t.length;i--;)if(gt(t[i][0],e))return i;return-1}function st(t,e,i){"__proto__"==e&&K?K(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}J.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},J.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},J.prototype.get=function(t){var e=this.__data__;if(Q){var i=e[t];return i===n?void 0:i}return P.call(e,t)?e[t]:void 0},J.prototype.has=function(t){var e=this.__data__;return Q?void 0!==e[t]:P.call(e,t)},J.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Q&&void 0===e?n:e,this},tt.prototype.clear=function(){this.__data__=[],this.size=0},tt.prototype.delete=function(t){var e=this.__data__,i=rt(e,t);return!(i<0||(i==e.length-1?e.pop():z.call(e,i,1),--this.size,0))},tt.prototype.get=function(t){var e=this.__data__,i=rt(e,t);return i<0?void 0:e[i][1]},tt.prototype.has=function(t){return rt(this.__data__,t)>-1},tt.prototype.set=function(t,e){var i=this.__data__,n=rt(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},et.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(Y||tt),string:new J}},et.prototype.delete=function(t){var e=dt(this,t).delete(t);return this.size-=e?1:0,e},et.prototype.get=function(t){return dt(this,t).get(t)},et.prototype.has=function(t){return dt(this,t).has(t)},et.prototype.set=function(t,e){var i=dt(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},it.prototype.clear=function(){this.__data__=new tt,this.size=0},it.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},it.prototype.get=function(t){return this.__data__.get(t)},it.prototype.has=function(t){return this.__data__.has(t)},it.prototype.set=function(t,e){var i=this.__data__;if(i instanceof tt){var n=i.__data__;if(!Y||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new et(n)}return i.set(t,e),this.size=i.size,this};function at(t){return null==t?void 0===t?h:c:W&&W in Object(t)?function(t){var e=P.call(t,W),i=t[W];try{t[W]=void 0;var n=!0}catch(t){}var o=R.call(t);return n&&(e?t[W]=i:delete t[W]),o}(t):function(t){return R.call(t)}(t)}function lt(t){return It(t)&&at(t)==r}function ct(t,e,i,n,o){t!==e&&function(t,e,i){for(var n=-1,o=Object(t),r=i(t),s=r.length;s--;){var a=r[++n];if(!1===e(o[a],a,o))break}}(e,(function(r,s){if(o||(o=new it),St(r))!function(t,e,i,n,o,r,s){var a=_t(t,i),l=_t(e,i),c=s.get(l);if(c)nt(t,i,c);else{var d,h,p,f,_,m=r?r(a,l,i+"",t,e,s):void 0,g=void 0===m;if(g){var v=bt(l),b=!v&&Ct(l),y=!v&&!b&&kt(l);m=l,v||b||y?bt(a)?m=a:It(_=a)&&yt(_)?m=function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}(a):b?(g=!1,m=function(t,e){return t.slice()}(l)):y?(g=!1,f=new(p=(d=l).buffer).constructor(p.byteLength),new Z(f).set(new Z(p)),h=f,m=new d.constructor(h,d.byteOffset,d.length)):m=[]:function(t){if(!It(t)||at(t)!=u)return!1;var e=H(t);if(null===e)return!0;var i=P.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&A.call(i)==N}(l)||vt(l)?(m=a,vt(a)?m=function(t){return function(t,e,i,n){var o=!i;i||(i={});for(var r=-1,s=e.length;++r<s;){var a=e[r],l=void 0;void 0===l&&(l=t[a]),o?st(i,a,l):ot(i,a,l)}return i}(t,Et(t))}(a):St(a)&&!wt(a)||(m=function(t){return"function"!=typeof t.constructor||ft(t)?{}:X(H(t))}(l))):g=!1}g&&(s.set(l,m),o(m,l,n,r,s),s.delete(l)),nt(t,i,m)}}(t,e,s,i,ct,n,o);else{var a=n?n(_t(t,s),r,s+"",t,e,o):void 0;void 0===a&&(a=r),nt(t,s,a)}}),Et)}var ut=K?function(t,e){return K(t,"toString",{configurable:!0,enumerable:!1,value:(i=e,function(){return i}),writable:!0});var i}:Dt;function dt(t,e){var i,n,o=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof e?"string":"hash"]:o.map}function ht(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!St(t)||function(t){return!!M&&M in t}(t))&&(wt(t)?$:p).test(function(t){if(null!=t){try{return A.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(i)?i:void 0}function pt(t,e){var i=typeof t;return!!(e=null==e?o:e)&&("number"==i||"symbol"!=i&&f.test(t))&&t>-1&&t%1==0&&t<e}function ft(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||D)}function _t(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var mt=function(t){var e=0,i=0;return function(){var n=G(),o=16-(n-i);if(i=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(ut);function gt(t,e){return t===e||t!=t&&e!=e}var vt=lt(function(){return arguments}())?lt:function(t){return It(t)&&P.call(t,"callee")&&!j.call(t,"callee")},bt=Array.isArray;function yt(t){return null!=t&&xt(t.length)&&!wt(t)}var Ct=q||function(){return!1};function wt(t){if(!St(t))return!1;var e=at(t);return e==a||e==l||e==s||e==d}function xt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function St(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function It(t){return null!=t&&"object"==typeof t}var kt=E?function(t){return function(e){return t(e)}}(E):function(t){return It(t)&&xt(t.length)&&!!_[at(t)]};function Et(t){return yt(t)?function(t,e){var i=bt(t),n=!i&&vt(t),o=!i&&!n&&Ct(t),r=!i&&!n&&!o&&kt(t),s=i||n||o||r,a=s?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],l=a.length;for(var c in t)!e&&!P.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pt(c,l))||a.push(c);return a}(t,!0):function(t){if(!St(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=ft(t),i=[];for(var n in t)("constructor"!=n||!e&&P.call(t,n))&&i.push(n);return i}(t)}var Ot,Tt=(Ot=function(t,e,i){ct(t,e,i)},function(t,e){return mt(function(t,e,i){return e=U(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,r=U(n.length-e,0),s=Array(r);++o<r;)s[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=i(s),function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}(t,this,a)}}(t,e,Dt),t+"")}((function(t,e){var i=-1,n=e.length,o=n>1?e[n-1]:void 0,r=n>2?e[2]:void 0;for(o=Ot.length>3&&"function"==typeof o?(n--,o):void 0,r&&function(t,e,i){if(!St(i))return!1;var n=typeof e;return!!("number"==n?yt(i)&&pt(e,i.length):"string"==n&&e in i)&&gt(i[e],t)}(e[0],e[1],r)&&(o=n<3?void 0:o,n=1),t=Object(t);++i<n;){var s=e[i];s&&Ot(t,s,i)}return t})));function Dt(t){return t}t.exports=Tt},5143:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(8805),o=i(2722);var r;!function(t){t.compose=function(t={},e={},i=!1){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});let o=n(e);i||(o=Object.keys(o).reduce(((t,e)=>(null!=o[e]&&(t[e]=o[e]),t)),{}));for(const i in t)void 0!==t[i]&&void 0===e[i]&&(o[i]=t[i]);return Object.keys(o).length>0?o:void 0},t.diff=function(t={},e={}){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});const i=Object.keys(t).concat(Object.keys(e)).reduce(((i,n)=>(o(t[n],e[n])||(i[n]=void 0===e[n]?null:e[n]),i)),{});return Object.keys(i).length>0?i:void 0},t.invert=function(t={},e={}){t=t||{};const i=Object.keys(e).reduce(((i,n)=>(e[n]!==t[n]&&void 0!==t[n]&&(i[n]=e[n]),i)),{});return Object.keys(t).reduce(((i,n)=>(t[n]!==e[n]&&void 0===e[n]&&(i[n]=null),i)),i)},t.transform=function(t,e,i=!1){if("object"!=typeof t)return e;if("object"!=typeof e)return;if(!i)return e;const n=Object.keys(e).reduce(((i,n)=>(void 0===t[n]&&(i[n]=e[n]),i)),{});return Object.keys(n).length>0?n:void 0}}(r||(r={})),e.default=r},9098:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=i(1456),o=i(8805),r=i(2722),s=i(5143);e.AttributeMap=s.default;const a=i(6237);e.Op=a.default;const l=i(2849);e.OpIterator=l.default;const c=String.fromCharCode(0),u=(t,e)=>{if("object"!=typeof t||null===t)throw new Error("cannot retain a "+typeof t);if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);const i=Object.keys(t)[0];if(!i||i!==Object.keys(e)[0])throw new Error(`embed types not matched: ${i} != ${Object.keys(e)[0]}`);return[i,t[i],e[i]]};class d{constructor(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){const e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){const i={};return"string"==typeof t&&0===t.length?this:(i.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if("number"==typeof t&&t<=0)return this;const i={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i)}push(t){let e=this.ops.length,i=this.ops[e-1];if(t=o(t),"object"==typeof i){if("number"==typeof t.delete&&"number"==typeof i.delete)return this.ops[e-1]={delete:i.delete+t.delete},this;if("number"==typeof i.delete&&null!=t.insert&&(e-=1,i=this.ops[e-1],"object"!=typeof i))return this.ops.unshift(t),this;if(r(t.attributes,i.attributes)){if("string"==typeof t.insert&&"string"==typeof i.insert)return this.ops[e-1]={insert:i.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof i.retain)return this.ops[e-1]={retain:i.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){const t=this.ops[this.ops.length-1];return t&&"number"==typeof t.retain&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){const e=[],i=[];return this.forEach((n=>{(t(n)?e:i).push(n)})),[e,i]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce(((t,e)=>e.insert?t+a.default.length(e):e.delete?t-e.delete:t),0)}length(){return this.reduce(((t,e)=>t+a.default.length(e)),0)}slice(t=0,e=1/0){const i=[],n=new l.default(this.ops);let o=0;for(;o<e&&n.hasNext();){let r;o<t?r=n.next(t-o):(r=n.next(e-o),i.push(r)),o+=a.default.length(r)}return new d(i)}compose(t){const e=new l.default(this.ops),i=new l.default(t.ops),n=[],o=i.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){let t=o.retain;for(;"insert"===e.peekType()&&e.peekLength()<=t;)t-=e.peekLength(),n.push(e.next());o.retain-t>0&&i.next(o.retain-t)}const a=new d(n);for(;e.hasNext()||i.hasNext();)if("insert"===i.peekType())a.push(i.next());else if("delete"===e.peekType())a.push(e.next());else{const t=Math.min(e.peekLength(),i.peekLength()),n=e.next(t),o=i.next(t);if(o.retain){const l={};if("number"==typeof n.retain)l.retain="number"==typeof o.retain?t:o.retain;else if("number"==typeof o.retain)null==n.retain?l.insert=n.insert:l.retain=n.retain;else{const t=null==n.retain?"insert":"retain",[e,i,r]=u(n[t],o.retain),s=d.getHandler(e);l[t]={[e]:s.compose(i,r,"retain"===t)}}const c=s.default.compose(n.attributes,o.attributes,"number"==typeof n.retain);if(c&&(l.attributes=c),a.push(l),!i.hasNext()&&r(a.ops[a.ops.length-1],l)){const t=new d(e.rest());return a.concat(t).chop()}}else"number"==typeof o.delete&&("number"==typeof n.retain||"object"==typeof n.retain&&null!==n.retain)&&a.push(o)}return a.chop()}concat(t){const e=new d(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new d;const i=[this,t].map((e=>e.map((i=>{if(null!=i.insert)return"string"==typeof i.insert?i.insert:c;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join(""))),o=new d,a=n(i[0],i[1],e),u=new l.default(this.ops),h=new l.default(t.ops);return a.forEach((t=>{let e=t[1].length;for(;e>0;){let i=0;switch(t[0]){case n.INSERT:i=Math.min(h.peekLength(),e),o.push(h.next(i));break;case n.DELETE:i=Math.min(e,u.peekLength()),u.next(i),o.delete(i);break;case n.EQUAL:i=Math.min(u.peekLength(),h.peekLength(),e);const t=u.next(i),a=h.next(i);r(t.insert,a.insert)?o.retain(i,s.default.diff(t.attributes,a.attributes)):o.push(a).delete(i)}e-=i}})),o.chop()}eachLine(t,e="\n"){const i=new l.default(this.ops);let n=new d,o=0;for(;i.hasNext();){if("insert"!==i.peekType())return;const r=i.peek(),s=a.default.length(r)-i.peekLength(),l="string"==typeof r.insert?r.insert.indexOf(e,s)-s:-1;if(l<0)n.push(i.next());else if(l>0)n.push(i.next(l));else{if(!1===t(n,i.next(1).attributes||{},o))return;o+=1,n=new d}}n.length()>0&&t(n,{},o)}invert(t){const e=new d;return this.reduce(((i,n)=>{if(n.insert)e.delete(a.default.length(n));else{if("number"==typeof n.retain&&null==n.attributes)return e.retain(n.retain),i+n.retain;if(n.delete||"number"==typeof n.retain){const o=n.delete||n.retain;return t.slice(i,i+o).forEach((t=>{n.delete?e.push(t):n.retain&&n.attributes&&e.retain(a.default.length(t),s.default.invert(n.attributes,t.attributes))})),i+o}if("object"==typeof n.retain&&null!==n.retain){const o=t.slice(i,i+1),r=new l.default(o.ops).next(),[a,c,h]=u(n.retain,r.insert),p=d.getHandler(a);return e.retain({[a]:p.invert(c,h)},s.default.invert(n.attributes,r.attributes)),i+1}}return i}),0),e.chop()}transform(t,e=!1){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);const i=t,n=new l.default(this.ops),o=new l.default(i.ops),r=new d;for(;n.hasNext()||o.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===o.peekType())if("insert"===o.peekType())r.push(o.next());else{const t=Math.min(n.peekLength(),o.peekLength()),i=n.next(t),a=o.next(t);if(i.delete)continue;if(a.delete)r.push(a);else{const n=i.retain,o=a.retain;let l="object"==typeof o&&null!==o?o:t;if("object"==typeof n&&null!==n&&"object"==typeof o&&null!==o){const t=Object.keys(n)[0];if(t===Object.keys(o)[0]){const i=d.getHandler(t);i&&(l={[t]:i.transform(n[t],o[t],e)})}}r.retain(l,s.default.transform(i.attributes,a.attributes,e))}}else r.retain(a.default.length(n.next()));return r.chop()}transformPosition(t,e=!1){e=!!e;const i=new l.default(this.ops);let n=0;for(;i.hasNext()&&n<=t;){const o=i.peekLength(),r=i.peekType();i.next(),"delete"!==r?("insert"===r&&(n<t||!e)&&(t+=o),n+=o):t-=Math.min(o,t-n)}return t}}d.Op=a.default,d.OpIterator=l.default,d.AttributeMap=s.default,d.handlers={},e.default=d,t.exports=d,t.exports.default=d},6237:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"object"==typeof t.retain&&null!==t.retain?1:"string"==typeof t.insert?t.insert.length:1}}(i||(i={})),e.default=i},2849:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(6237);e.default=class{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const i=this.offset,o=n.default.length(e);if(t>=o-i?(t=o-i,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};{const n={};return e.attributes&&(n.attributes=e.attributes),"number"==typeof e.retain?n.retain=t:"object"==typeof e.retain&&null!==e.retain?n.retain=e.retain:"string"==typeof e.insert?n.insert=e.insert.substr(i,t):n.insert=e.insert,n}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?"number"==typeof t.delete?"delete":"number"==typeof t.retain||"object"==typeof t.retain&&null!==t.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const t=this.offset,e=this.index,i=this.next(),n=this.ops.slice(this.index);return this.offset=t,this.index=e,[i].concat(n)}}return[]}}},1863:(t,e,i)=>{"use strict";var n=i(9731);t.exports=n},6572:(t,e,i)=>{"use strict";var n=i(4401);t.exports=n},2318:(t,e,i)=>{"use strict";var n=i(3661);t.exports=n},576:(t,e,i)=>{"use strict";var n=i(5606);t.exports=n},2327:(t,e,i)=>{"use strict";i(5445);var n=i(6731);t.exports=n("Array","fill")},3274:(t,e,i)=>{"use strict";i(9477),i(6272);var n=i(577);t.exports=n.Array.from},5339:(t,e,i)=>{"use strict";i(2947);var n=i(577);t.exports=n.Object.values},1189:(t,e,i)=>{"use strict";i(538);var n=i(6731);t.exports=n("String","endsWith")},5142:(t,e,i)=>{"use strict";i(297)},1019:(t,e,i)=>{"use strict";i(4660)},1183:(t,e,i)=>{"use strict";i(5275)},2570:(t,e,i)=>{"use strict";i(2839)},297:(t,e,i)=>{"use strict";var n=i(1863);t.exports=n},4660:(t,e,i)=>{"use strict";var n=i(6572);t.exports=n},5275:(t,e,i)=>{"use strict";var n=i(2318);t.exports=n},2839:(t,e,i)=>{"use strict";var n=i(576);t.exports=n},6324:(t,e,i)=>{"use strict";var n=i(2539),o=i(7471),r=TypeError;t.exports=function(t){if(n(t))return t;throw new r(o(t)+" is not a function")}},2162:(t,e,i)=>{"use strict";var n=i(2539),o=String,r=TypeError;t.exports=function(t){if("object"==typeof t||n(t))return t;throw new r("Can't set "+o(t)+" as a prototype")}},2572:(t,e,i)=>{"use strict";var n=i(5485),o=i(3830),r=i(8503).f,s=n("unscopables"),a=Array.prototype;void 0===a[s]&&r(a,s,{configurable:!0,value:o(null)}),t.exports=function(t){a[s][t]=!0}},8874:(t,e,i)=>{"use strict";var n=i(3988),o=String,r=TypeError;t.exports=function(t){if(n(t))return t;throw new r(o(t)+" is not an object")}},9236:(t,e,i)=>{"use strict";var n=i(6015),o=i(7234),r=i(3235);t.exports=function(t){for(var e=n(this),i=r(e),s=arguments.length,a=o(s>1?arguments[1]:void 0,i),l=s>2?arguments[2]:void 0,c=void 0===l?i:o(l,i);c>a;)e[a++]=t;return e}},8459:(t,e,i)=>{"use strict";var n=i(9794),o=i(2977),r=i(6015),s=i(9154),a=i(7024),l=i(6467),c=i(3235),u=i(3003),d=i(2387),h=i(7874),p=Array;t.exports=function(t){var e=r(t),i=l(this),f=arguments.length,_=f>1?arguments[1]:void 0,m=void 0!==_;m&&(_=n(_,f>2?arguments[2]:void 0));var g,v,b,y,C,w,x=h(e),S=0;if(!x||this===p&&a(x))for(g=c(e),v=i?new this(g):p(g);g>S;S++)w=m?_(e[S],S):e[S],u(v,S,w);else for(C=(y=d(e,x)).next,v=i?new this:[];!(b=o(C,y)).done;S++)w=m?s(y,_,[b.value,S],!0):b.value,u(v,S,w);return v.length=S,v}},5644:(t,e,i)=>{"use strict";var n=i(7625),o=i(7234),r=i(3235),s=function(t){return function(e,i,s){var a,l=n(e),c=r(l),u=o(s,c);if(t&&i!=i){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},9154:(t,e,i)=>{"use strict";var n=i(8874),o=i(8880);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){o(t,"throw",e)}}},3346:(t,e,i)=>{"use strict";var n=i(5485)("iterator"),o=!1;try{var r=0,s={next:function(){return{done:!!r++}},return:function(){o=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!o)return!1}catch(t){return!1}var i=!1;try{var r={};r[n]=function(){return{next:function(){return{done:i=!0}}}},t(r)}catch(t){}return i}},4545:(t,e,i)=>{"use strict";var n=i(4038),o=n({}.toString),r=n("".slice);t.exports=function(t){return r(o(t),8,-1)}},2702:(t,e,i)=>{"use strict";var n=i(1923),o=i(2539),r=i(4545),s=i(5485)("toStringTag"),a=Object,l="Arguments"===r(function(){return arguments}());t.exports=n?r:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?i:l?r(e):"Object"===(n=r(e))&&o(e.callee)?"Arguments":n}},1358:(t,e,i)=>{"use strict";var n=i(2623),o=i(3054),r=i(3037),s=i(8503);t.exports=function(t,e,i){for(var a=o(e),l=s.f,c=r.f,u=0;u<a.length;u++){var d=a[u];n(t,d)||i&&n(i,d)||l(t,d,c(e,d))}}},6775:(t,e,i)=>{"use strict";var n=i(5485)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},6141:(t,e,i)=>{"use strict";var n=i(5202);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},3585:t=>{"use strict";t.exports=function(t,e){return{value:t,done:e}}},8868:(t,e,i)=>{"use strict";var n=i(5007),o=i(8503),r=i(4238);t.exports=n?function(t,e,i){return o.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},4238:t=>{"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},3003:(t,e,i)=>{"use strict";var n=i(3164),o=i(8503),r=i(4238);t.exports=function(t,e,i){var s=n(e);s in t?o.f(t,s,r(0,i)):t[s]=i}},916:(t,e,i)=>{"use strict";var n=i(2539),o=i(8503),r=i(6614),s=i(2136);t.exports=function(t,e,i,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(n(i)&&r(i,c,a),a.global)l?t[e]=i:s(e,i);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=i:o.f(t,e,{value:i,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},2136:(t,e,i)=>{"use strict";var n=i(730),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(i){n[t]=e}return e}},5007:(t,e,i)=>{"use strict";var n=i(5202);t.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8629:t=>{"use strict";var e="object"==typeof document&&document.all,i=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:i}},2215:(t,e,i)=>{"use strict";var n=i(730),o=i(3988),r=n.document,s=o(r)&&o(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},932:t=>{"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7626:(t,e,i)=>{"use strict";var n,o,r=i(730),s=i(932),a=r.process,l=r.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(o=(n=u.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},6731:(t,e,i)=>{"use strict";var n=i(730),o=i(4038);t.exports=function(t,e){return o(n[t].prototype[e])}},8552:t=>{"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2189:(t,e,i)=>{"use strict";var n=i(730),o=i(3037).f,r=i(8868),s=i(916),a=i(2136),l=i(1358),c=i(3455);t.exports=function(t,e){var i,u,d,h,p,f=t.target,_=t.global,m=t.stat;if(i=_?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(u in e){if(h=e[u],d=t.dontCallGetSet?(p=o(i,u))&&p.value:i[u],!c(_?u:f+(m?".":"#")+u,t.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(t.sham||d&&d.sham)&&r(h,"sham",!0),s(i,u,h,t)}}},5202:t=>{"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},9794:(t,e,i)=>{"use strict";var n=i(6192),o=i(6324),r=i(2865),s=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:r?s(t,e):function(){return t.apply(e,arguments)}}},2865:(t,e,i)=>{"use strict";var n=i(5202);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},2977:(t,e,i)=>{"use strict";var n=i(2865),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},9895:(t,e,i)=>{"use strict";var n=i(5007),o=i(2623),r=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=o(r,"name"),l=a&&"something"===function(){}.name,c=a&&(!n||n&&s(r,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},6589:(t,e,i)=>{"use strict";var n=i(4038),o=i(6324);t.exports=function(t,e,i){try{return n(o(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(t){}}},6192:(t,e,i)=>{"use strict";var n=i(4545),o=i(4038);t.exports=function(t){if("Function"===n(t))return o(t)}},4038:(t,e,i)=>{"use strict";var n=i(2865),o=Function.prototype,r=o.call,s=n&&o.bind.bind(r,r);t.exports=n?s:function(t){return function(){return r.apply(t,arguments)}}},7300:(t,e,i)=>{"use strict";var n=i(730),o=i(2539);t.exports=function(t,e){return arguments.length<2?(i=n[t],o(i)?i:void 0):n[t]&&n[t][e];var i}},7874:(t,e,i)=>{"use strict";var n=i(2702),o=i(3923),r=i(2219),s=i(7817),a=i(5485)("iterator");t.exports=function(t){if(!r(t))return o(t,a)||o(t,"@@iterator")||s[n(t)]}},2387:(t,e,i)=>{"use strict";var n=i(2977),o=i(6324),r=i(8874),s=i(7471),a=i(7874),l=TypeError;t.exports=function(t,e){var i=arguments.length<2?a(t):e;if(o(i))return r(n(i,t));throw new l(s(t)+" is not iterable")}},3923:(t,e,i)=>{"use strict";var n=i(6324),o=i(2219);t.exports=function(t,e){var i=t[e];return o(i)?void 0:n(i)}},730:function(t,e,i){"use strict";var n=function(t){return t&&t.Math===Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},2623:(t,e,i)=>{"use strict";var n=i(4038),o=i(6015),r=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(o(t),e)}},7467:t=>{"use strict";t.exports={}},845:(t,e,i)=>{"use strict";var n=i(7300);t.exports=n("document","documentElement")},2470:(t,e,i)=>{"use strict";var n=i(5007),o=i(5202),r=i(2215);t.exports=!n&&!o((function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},6854:(t,e,i)=>{"use strict";var n=i(4038),o=i(5202),r=i(4545),s=Object,a=n("".split);t.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===r(t)?a(t,""):s(t)}:s},7821:(t,e,i)=>{"use strict";var n=i(4038),o=i(2539),r=i(6838),s=n(Function.toString);o(r.inspectSource)||(r.inspectSource=function(t){return s(t)}),t.exports=r.inspectSource},5378:(t,e,i)=>{"use strict";var n,o,r,s=i(2543),a=i(730),l=i(3988),c=i(8868),u=i(2623),d=i(6838),h=i(3511),p=i(7467),f="Object already initialized",_=a.TypeError,m=a.WeakMap;if(s||d.state){var g=d.state||(d.state=new m);g.get=g.get,g.has=g.has,g.set=g.set,n=function(t,e){if(g.has(t))throw new _(f);return e.facade=t,g.set(t,e),e},o=function(t){return g.get(t)||{}},r=function(t){return g.has(t)}}else{var v=h("state");p[v]=!0,n=function(t,e){if(u(t,v))throw new _(f);return e.facade=t,c(t,v,e),e},o=function(t){return u(t,v)?t[v]:{}},r=function(t){return u(t,v)}}t.exports={set:n,get:o,has:r,enforce:function(t){return r(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!l(e)||(i=o(e)).type!==t)throw new _("Incompatible receiver, "+t+" required");return i}}}},7024:(t,e,i)=>{"use strict";var n=i(5485),o=i(7817),r=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||s[r]===t)}},2539:(t,e,i)=>{"use strict";var n=i(8629),o=n.all;t.exports=n.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},6467:(t,e,i)=>{"use strict";var n=i(4038),o=i(5202),r=i(2539),s=i(2702),a=i(7300),l=i(7821),c=function(){},u=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.test(c),_=function(t){if(!r(t))return!1;try{return d(c,u,t),!0}catch(t){return!1}},m=function(t){if(!r(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,l(t))}catch(t){return!0}};m.sham=!0,t.exports=!d||o((function(){var t;return _(_.call)||!_(Object)||!_((function(){t=!0}))||t}))?m:_},3455:(t,e,i)=>{"use strict";var n=i(5202),o=i(2539),r=/#|\.prototype\./,s=function(t,e){var i=l[a(t)];return i===u||i!==c&&(o(e)?n(e):!!e)},a=s.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";t.exports=s},2219:t=>{"use strict";t.exports=function(t){return null==t}},3988:(t,e,i)=>{"use strict";var n=i(2539),o=i(8629),r=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:n(t)||t===r}:function(t){return"object"==typeof t?null!==t:n(t)}},4708:t=>{"use strict";t.exports=!1},184:(t,e,i)=>{"use strict";var n=i(3988),o=i(4545),r=i(5485)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"===o(t))}},8820:(t,e,i)=>{"use strict";var n=i(7300),o=i(2539),r=i(7676),s=i(3713),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return o(e)&&r(e.prototype,a(t))}},8880:(t,e,i)=>{"use strict";var n=i(2977),o=i(8874),r=i(3923);t.exports=function(t,e,i){var s,a;o(t);try{if(!(s=r(t,"return"))){if("throw"===e)throw i;return i}s=n(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw i;if(a)throw s;return o(s),i}},3450:(t,e,i)=>{"use strict";var n=i(344).IteratorPrototype,o=i(3830),r=i(4238),s=i(3506),a=i(7817),l=function(){return this};t.exports=function(t,e,i,c){var u=e+" Iterator";return t.prototype=o(n,{next:r(+!c,i)}),s(t,u,!1,!0),a[u]=l,t}},3174:(t,e,i)=>{"use strict";var n=i(2189),o=i(2977),r=i(4708),s=i(9895),a=i(2539),l=i(3450),c=i(8059),u=i(5502),d=i(3506),h=i(8868),p=i(916),f=i(5485),_=i(7817),m=i(344),g=s.PROPER,v=s.CONFIGURABLE,b=m.IteratorPrototype,y=m.BUGGY_SAFARI_ITERATORS,C=f("iterator"),w="keys",x="values",S="entries",I=function(){return this};t.exports=function(t,e,i,s,f,m,k){l(i,e,s);var E,O,T,D=function(t){if(t===f&&R)return R;if(!y&&t&&t in P)return P[t];switch(t){case w:case x:case S:return function(){return new i(this,t)}}return function(){return new i(this)}},B=e+" Iterator",A=!1,P=t.prototype,M=P[C]||P["@@iterator"]||f&&P[f],R=!y&&M||D(f),N="Array"===e&&P.entries||M;if(N&&(E=c(N.call(new t)))!==Object.prototype&&E.next&&(r||c(E)===b||(u?u(E,b):a(E[C])||p(E,C,I)),d(E,B,!0,!0),r&&(_[B]=I)),g&&f===x&&M&&M.name!==x&&(!r&&v?h(P,"name",x):(A=!0,R=function(){return o(M,this)})),f)if(O={values:D(x),keys:m?R:D(w),entries:D(S)},k)for(T in O)(y||A||!(T in P))&&p(P,T,O[T]);else n({target:e,proto:!0,forced:y||A},O);return r&&!k||P[C]===R||p(P,C,R,{name:f}),_[e]=R,O}},344:(t,e,i)=>{"use strict";var n,o,r,s=i(5202),a=i(2539),l=i(3988),c=i(3830),u=i(8059),d=i(916),h=i(5485),p=i(4708),f=h("iterator"),_=!1;[].keys&&("next"in(r=[].keys())?(o=u(u(r)))!==Object.prototype&&(n=o):_=!0),!l(n)||s((function(){var t={};return n[f].call(t)!==t}))?n={}:p&&(n=c(n)),a(n[f])||d(n,f,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:_}},7817:t=>{"use strict";t.exports={}},3235:(t,e,i)=>{"use strict";var n=i(3627);t.exports=function(t){return n(t.length)}},6614:(t,e,i)=>{"use strict";var n=i(4038),o=i(5202),r=i(2539),s=i(2623),a=i(5007),l=i(9895).CONFIGURABLE,c=i(7821),u=i(5378),d=u.enforce,h=u.get,p=String,f=Object.defineProperty,_=n("".slice),m=n("".replace),g=n([].join),v=a&&!o((function(){return 8!==f((function(){}),"length",{value:8}).length})),b=String(String).split("String"),y=t.exports=function(t,e,i){"Symbol("===_(p(e),0,7)&&(e="["+m(p(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),v&&i&&s(i,"arity")&&t.length!==i.arity&&f(t,"length",{value:i.arity});try{i&&s(i,"constructor")&&i.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=d(t);return s(n,"source")||(n.source=g(b,"string"==typeof e?e:"")),t};Function.prototype.toString=y((function(){return r(this)&&h(this).source||c(this)}),"toString")},3041:t=>{"use strict";var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?i:e)(n)}},50:(t,e,i)=>{"use strict";var n=i(184),o=TypeError;t.exports=function(t){if(n(t))throw new o("The method doesn't accept regular expressions");return t}},3830:(t,e,i)=>{"use strict";var n,o=i(8874),r=i(3944),s=i(8552),a=i(7467),l=i(845),c=i(2215),u=i(3511),d="prototype",h="script",p=u("IE_PROTO"),f=function(){},_=function(t){return"<"+h+">"+t+"</"+h+">"},m=function(t){t.write(_("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,i;g="undefined"!=typeof document?document.domain&&n?m(n):(e=c("iframe"),i="java"+h+":",e.style.display="none",l.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(_("document.F=Object")),t.close(),t.F):m(n);for(var o=s.length;o--;)delete g[d][s[o]];return g()};a[p]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(f[d]=o(t),i=new f,f[d]=null,i[p]=t):i=g(),void 0===e?i:r.f(i,e)}},3944:(t,e,i)=>{"use strict";var n=i(5007),o=i(2268),r=i(8503),s=i(8874),a=i(7625),l=i(4254);e.f=n&&!o?Object.defineProperties:function(t,e){s(t);for(var i,n=a(e),o=l(e),c=o.length,u=0;c>u;)r.f(t,i=o[u++],n[i]);return t}},8503:(t,e,i)=>{"use strict";var n=i(5007),o=i(2470),r=i(2268),s=i(8874),a=i(3164),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";e.f=n?r?function(t,e,i){if(s(t),e=a(e),s(i),"function"==typeof t&&"prototype"===e&&"value"in i&&p in i&&!i[p]){var n=u(t,e);n&&n[p]&&(t[e]=i.value,i={configurable:h in i?i[h]:n[h],enumerable:d in i?i[d]:n[d],writable:!1})}return c(t,e,i)}:c:function(t,e,i){if(s(t),e=a(e),s(i),o)try{return c(t,e,i)}catch(t){}if("get"in i||"set"in i)throw new l("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},3037:(t,e,i)=>{"use strict";var n=i(5007),o=i(2977),r=i(6251),s=i(4238),a=i(7625),l=i(3164),c=i(2623),u=i(2470),d=Object.getOwnPropertyDescriptor;e.f=n?d:function(t,e){if(t=a(t),e=l(e),u)try{return d(t,e)}catch(t){}if(c(t,e))return s(!o(r.f,t,e),t[e])}},5974:(t,e,i)=>{"use strict";var n=i(7862),o=i(8552).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},1526:(t,e)=>{"use strict";e.f=Object.getOwnPropertySymbols},8059:(t,e,i)=>{"use strict";var n=i(2623),o=i(2539),r=i(6015),s=i(3511),a=i(6141),l=s("IE_PROTO"),c=Object,u=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=r(t);if(n(e,l))return e[l];var i=e.constructor;return o(i)&&e instanceof i?i.prototype:e instanceof c?u:null}},7676:(t,e,i)=>{"use strict";var n=i(4038);t.exports=n({}.isPrototypeOf)},7862:(t,e,i)=>{"use strict";var n=i(4038),o=i(2623),r=i(7625),s=i(5644).indexOf,a=i(7467),l=n([].push);t.exports=function(t,e){var i,n=r(t),c=0,u=[];for(i in n)!o(a,i)&&o(n,i)&&l(u,i);for(;e.length>c;)o(n,i=e[c++])&&(~s(u,i)||l(u,i));return u}},4254:(t,e,i)=>{"use strict";var n=i(7862),o=i(8552);t.exports=Object.keys||function(t){return n(t,o)}},6251:(t,e)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!i.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},5502:(t,e,i)=>{"use strict";var n=i(6589),o=i(8874),r=i(2162);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=n(Object.prototype,"__proto__","set"))(i,[]),e=i instanceof Array}catch(t){}return function(i,n){return o(i),r(n),e?t(i,n):i.__proto__=n,i}}():void 0)},7830:(t,e,i)=>{"use strict";var n=i(5007),o=i(5202),r=i(4038),s=i(8059),a=i(4254),l=i(7625),c=r(i(6251).f),u=r([].push),d=n&&o((function(){var t=Object.create(null);return t[2]=2,!c(t,2)})),h=function(t){return function(e){for(var i,o=l(e),r=a(o),h=d&&null===s(o),p=r.length,f=0,_=[];p>f;)i=r[f++],n&&!(h?i in o:c(o,i))||u(_,t?[i,o[i]]:o[i]);return _}};t.exports={entries:h(!0),values:h(!1)}},532:(t,e,i)=>{"use strict";var n=i(2977),o=i(2539),r=i(3988),s=TypeError;t.exports=function(t,e){var i,a;if("string"===e&&o(i=t.toString)&&!r(a=n(i,t)))return a;if(o(i=t.valueOf)&&!r(a=n(i,t)))return a;if("string"!==e&&o(i=t.toString)&&!r(a=n(i,t)))return a;throw new s("Can't convert object to primitive value")}},3054:(t,e,i)=>{"use strict";var n=i(7300),o=i(4038),r=i(5974),s=i(1526),a=i(8874),l=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=r.f(a(t)),i=s.f;return i?l(e,i(t)):e}},577:(t,e,i)=>{"use strict";var n=i(730);t.exports=n},6373:(t,e,i)=>{"use strict";var n=i(2219),o=TypeError;t.exports=function(t){if(n(t))throw new o("Can't call method on "+t);return t}},3506:(t,e,i)=>{"use strict";var n=i(8503).f,o=i(2623),r=i(5485)("toStringTag");t.exports=function(t,e,i){t&&!i&&(t=t.prototype),t&&!o(t,r)&&n(t,r,{configurable:!0,value:e})}},3511:(t,e,i)=>{"use strict";var n=i(6568),o=i(2858),r=n("keys");t.exports=function(t){return r[t]||(r[t]=o(t))}},6838:(t,e,i)=>{"use strict";var n=i(730),o=i(2136),r="__core-js_shared__",s=n[r]||o(r,{});t.exports=s},6568:(t,e,i)=>{"use strict";var n=i(4708),o=i(6838);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.34.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.34.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6365:(t,e,i)=>{"use strict";var n=i(4038),o=i(3550),r=i(2532),s=i(6373),a=n("".charAt),l=n("".charCodeAt),c=n("".slice),u=function(t){return function(e,i){var n,u,d=r(s(e)),h=o(i),p=d.length;return h<0||h>=p?t?"":void 0:(n=l(d,h))<55296||n>56319||h+1===p||(u=l(d,h+1))<56320||u>57343?t?a(d,h):n:t?c(d,h,h+2):u-56320+(n-55296<<10)+65536}};t.exports={codeAt:u(!1),charAt:u(!0)}},3370:(t,e,i)=>{"use strict";var n=i(7626),o=i(5202),r=i(730).String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol("symbol detection");return!r(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},7234:(t,e,i)=>{"use strict";var n=i(3550),o=Math.max,r=Math.min;t.exports=function(t,e){var i=n(t);return i<0?o(i+e,0):r(i,e)}},7625:(t,e,i)=>{"use strict";var n=i(6854),o=i(6373);t.exports=function(t){return n(o(t))}},3550:(t,e,i)=>{"use strict";var n=i(3041);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},3627:(t,e,i)=>{"use strict";var n=i(3550),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},6015:(t,e,i)=>{"use strict";var n=i(6373),o=Object;t.exports=function(t){return o(n(t))}},634:(t,e,i)=>{"use strict";var n=i(2977),o=i(3988),r=i(8820),s=i(3923),a=i(532),l=i(5485),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!o(t)||r(t))return t;var i,l=s(t,u);if(l){if(void 0===e&&(e="default"),i=n(l,t,e),!o(i)||r(i))return i;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},3164:(t,e,i)=>{"use strict";var n=i(634),o=i(8820);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},1923:(t,e,i)=>{"use strict";var n={};n[i(5485)("toStringTag")]="z",t.exports="[object z]"===String(n)},2532:(t,e,i)=>{"use strict";var n=i(2702),o=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},7471:t=>{"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},2858:(t,e,i)=>{"use strict";var n=i(4038),o=0,r=Math.random(),s=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++o+r,36)}},3713:(t,e,i)=>{"use strict";var n=i(3370);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2268:(t,e,i)=>{"use strict";var n=i(5007),o=i(5202);t.exports=n&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2543:(t,e,i)=>{"use strict";var n=i(730),o=i(2539),r=n.WeakMap;t.exports=o(r)&&/native code/.test(String(r))},5485:(t,e,i)=>{"use strict";var n=i(730),o=i(6568),r=i(2623),s=i(2858),a=i(3370),l=i(3713),c=n.Symbol,u=o("wks"),d=l?c.for||c:c&&c.withoutSetter||s;t.exports=function(t){return r(u,t)||(u[t]=a&&r(c,t)?c[t]:d("Symbol."+t)),u[t]}},5445:(t,e,i)=>{"use strict";var n=i(2189),o=i(9236),r=i(2572);n({target:"Array",proto:!0},{fill:o}),r("fill")},6272:(t,e,i)=>{"use strict";var n=i(2189),o=i(8459);n({target:"Array",stat:!0,forced:!i(3346)((function(t){Array.from(t)}))},{from:o})},2947:(t,e,i)=>{"use strict";var n=i(2189),o=i(7830).values;n({target:"Object",stat:!0},{values:function(t){return o(t)}})},538:(t,e,i)=>{"use strict";var n,o=i(2189),r=i(6192),s=i(3037).f,a=i(3627),l=i(2532),c=i(50),u=i(6373),d=i(6775),h=i(4708),p=r("".endsWith),f=r("".slice),_=Math.min,m=d("endsWith");o({target:"String",proto:!0,forced:!(!h&&!m&&(n=s(String.prototype,"endsWith"),n&&!n.writable)||m)},{endsWith:function(t){var e=l(u(this));c(t);var i=arguments.length>1?arguments[1]:void 0,n=e.length,o=void 0===i?n:_(a(i),n),r=l(t);return p?p(e,r,o):f(e,o-r.length,o)===r}})},9477:(t,e,i)=>{"use strict";var n=i(6365).charAt,o=i(2532),r=i(5378),s=i(3174),a=i(3585),l="String Iterator",c=r.set,u=r.getterFor(l);s(String,"String",(function(t){c(this,{type:l,string:o(t),index:0})}),(function(){var t,e=u(this),i=e.string,o=e.index;return o>=i.length?a(void 0,!0):(t=n(i,o),e.index+=t.length,a(t,!1))}))},9731:(t,e,i)=>{"use strict";var n=i(2327);t.exports=n},4401:(t,e,i)=>{"use strict";var n=i(3274);t.exports=n},3661:(t,e,i)=>{"use strict";var n=i(5339);t.exports=n},5606:(t,e,i)=>{"use strict";var n=i(1189);t.exports=n}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var n={};return(()=>{"use strict";i.d(n,{default:()=>de}),i(1019),i(5142),i(1183),i(2570);var t=i(2432),e=i(715),o=i(4048),r=i(1233);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==s(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},l.apply(this,arguments)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(d,t);var e,i,n,o,r=(n=d,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(n);if(o){var i=u(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function d(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),r.apply(this,arguments)}return e=d,i=[{key:"add",value:function(t,e){if("+1"===e||"-1"===e){var i=this.value(t)||0;e="+1"===e?i+1:i-1}return 0===e?(this.remove(t),!0):l(u(d.prototype),"add",this).call(this,t,e)}},{key:"canAdd",value:function(t,e){return l(u(d.prototype),"canAdd",this).call(this,t,e)||l(u(d.prototype),"canAdd",this).call(this,t,parseInt(e,10))}},{key:"value",value:function(t){return parseInt(l(u(d.prototype),"value",this).call(this,t),10)||void 0}}],i&&a(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),d}(r.ClassAttributor);const h=new d("indent","ql-indent",{scope:r.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});var p=i(6446);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(r,t);var e,i,n,o=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=m(i);if(n){var o=m(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}(p.ZP);g.blotName="blockquote",g.tagName="blockquote";const v=g;function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===b(o)?o:String(o)),n)}var o}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(s,t);var e,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(n);if(o){var i=w(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),r.apply(this,arguments)}return e=s,i=[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}],null&&y(e.prototype,null),i&&y(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(p.ZP);x.blotName="header",x.tagName=["H1","H2","H3","H4","H5","H6"];const S=x;var I=i(3553),k=i(281);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},O.apply(this,arguments)}function T(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}function D(t,e,i){return e&&T(t.prototype,e),i&&T(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=R(t);if(e){var o=R(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var N=function(t){A(i,t);var e=M(i);function i(){return B(this,i),e.apply(this,arguments)}return D(i)}(I.Z);N.blotName="list-container",N.tagName="OL";var $=function(t){A(i,t);var e=M(i);function i(t,n){var o;B(this,i),o=e.call(this,t,n);var r=n.ownerDocument.createElement("span"),s=function(e){if(t.isEnabled()){var i=o.statics.formats(n,t);"checked"===i?(o.format("list","unchecked"),e.preventDefault()):"unchecked"===i&&(o.format("list","checked"),e.preventDefault())}};return r.addEventListener("mousedown",s),r.addEventListener("touchstart",s),o.attachUI(r),o}return D(i,[{key:"format",value:function(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):O(R(i.prototype),"format",this).call(this,t,e)}}],[{key:"create",value:function(t){var e=O(R(i),"create",this).call(this);return e.setAttribute("data-list",t),e}},{key:"formats",value:function(t){return t.getAttribute("data-list")||void 0}},{key:"register",value:function(){k.ZP.register(N)}}]),i}(p.ZP);$.blotName="list",$.tagName="LI",N.allowedChildren=[$],$.requiredContainer=N;var V=i(7898),F=i(6039),Z=i(5832),H=i(1629),L=i(3991);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},W(t)}var K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(r,t);var e,i,n,o=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=W(i);if(n){var o=W(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}(L.Z);K.blotName="italic",K.tagName=["EM","I"];const q=K;var U=i(7256),G=i(6603);function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function Q(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Y(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===Y(o)?o:String(o)),n)}var o}function X(){return X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},X.apply(this,arguments)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function tt(t){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tt(t)}var et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(s,t);var e,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tt(n);if(o){var i=tt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),r.apply(this,arguments)}return e=s,i=[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):X(tt(s),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}],null&&Q(e.prototype,null),i&&Q(e,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(G.Z);et.blotName="script",et.tagName=["SUB","SUP"];const it=et;function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t,e){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ot(t,e)}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ot(t,e)}(r,t);var e,i,n,o=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=rt(i);if(n){var o=rt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}(L.Z);st.blotName="strike",st.tagName=["S","STRIKE"];const at=st;function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function ct(t,e){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ct(t,e)}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ut(t)}var dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(r,t);var e,i,n,o=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ut(i);if(n){var o=ut(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return e=r,Object.defineProperty(e,"prototype",{writable:!1}),e}(G.Z);dt.blotName="underline",dt.tagName="U";const ht=dt;var pt=i(7452),ft=i(8034);function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function mt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==_t(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==_t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===_t(o)?o:String(o)),n)}var o}function gt(){return gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},gt.apply(this,arguments)}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vt(t,e)}function bt(t){return bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bt(t)}var yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vt(t,e)}(a,t);var e,i,n,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bt(o);if(r){var i=bt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return e=a,i=[{key:"html",value:function(){var t=this.value().formula;return"<span>".concat(t,"</span>")}}],n=[{key:"create",value:function(t){var e=null;if((0,ft.Z)()&&(e=window.katex),null==e)throw new Error("Formula module requires KaTeX.");var i=gt(bt(a),"create",this).call(this,t);return"string"==typeof t&&(e.render(t,i,{throwOnError:!1,errorColor:"#f00"}),i.setAttribute("data-value",t)),i}},{key:"value",value:function(t){return t.getAttribute("data-value")}}],i&&mt(e.prototype,i),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(pt.Z);yt.blotName="formula",yt.className="ql-formula",yt.tagName="SPAN";const Ct=yt;function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function xt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==wt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===wt(o)?o:String(o)),n)}var o}function St(){return St="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},St.apply(this,arguments)}function It(t,e){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},It(t,e)}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kt(t)}var Et=["alt","height","width"],Ot=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&It(t,e)}(a,t);var e,i,n,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kt(o);if(r){var i=kt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===wt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return e=a,n=[{key:"create",value:function(t){var e=St(kt(a),"create",this).call(this,t);return"string"==typeof t&&e.setAttribute("src",this.sanitize(t)),e}},{key:"formats",value:function(t){return Et.reduce((function(e,i){return t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e}),{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"register",value:function(){(0,ft.Z)()&&/Firefox/i.test(navigator.userAgent)&&setTimeout((function(){document.execCommand("enableObjectResizing",!1,!1)}),1)}},{key:"sanitize",value:function(t){return(0,U.N)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}],(i=[{key:"format",value:function(t,e){Et.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):St(kt(a.prototype),"format",this).call(this,t,e)}}])&&xt(e.prototype,i),n&&xt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(r.EmbedBlot);Ot.blotName="image",Ot.tagName="IMG";const Tt=Ot;function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Bt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Dt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===Dt(o)?o:String(o)),n)}var o}function At(){return At="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:i):o.value}},At.apply(this,arguments)}function Pt(t,e){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pt(t,e)}function Mt(t){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mt(t)}var Rt=["height","width"],Nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(a,t);var e,i,n,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mt(o);if(r){var i=Mt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return e=a,i=[{key:"format",value:function(t,e){Rt.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):At(Mt(a.prototype),"format",this).call(this,t,e)}},{key:"html",value:function(){var t=this.value().video;return'<a href="'.concat(t,'">').concat(t,"</a>")}}],n=[{key:"create",value:function(t){var e=At(Mt(a),"create",this).call(this,t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen",!0),e.setAttribute("src",this.sanitize(t)),e}},{key:"formats",value:function(t){return Rt.reduce((function(e,i){return t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e}),{})}},{key:"sanitize",value:function(t){return U.Z.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}],i&&Bt(e.prototype,i),n&&Bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(p.i2);Nt.blotName="video",Nt.className="ql-video",Nt.tagName="IFRAME";const $t=Nt;var Vt=i(7309),Ft=i(9072),Zt=i(867),Ht=i(9098),Lt=i.n(Ht);function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function zt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==jt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===jt(o)?o:String(o)),n)}var o}function Wt(t,e){return Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wt(t,e)}function Kt(t){return Kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kt(t)}var qt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wt(t,e)}(a,t);var e,i,n,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Kt(o);if(r){var i=Kt(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return e=a,n=[{key:"value",value:function(){return"\n"}}],(i=[{key:"length",value:function(){return 1}},{key:"value",value:function(){return"\n"}},{key:"optimize",value:function(){this.prev||this.next||this.remove()}}])&&zt(e.prototype,i),n&&zt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(r.EmbedBlot);qt.blotName="multilineBreak",qt.tagName="BR";const Ut=qt;function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Yt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qt(n.key),n)}}function Qt(t){var e=function(t,e){if("object"!==Gt(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==Gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Gt(e)?e:String(e)}function Xt(t,e){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xt(t,e)}function Jt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},te(t)}function ee(t){return t.nextSibling||t.previousSibling?(new(Lt())).insert({multilineBreak:""}):(new(Lt())).insert("\n")}var ie=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xt(t,e)}(s,t);var e,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=te(n);if(o){var i=te(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jt(t)}(this,t)});function s(t,e){var i,n,o,a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i=r.call(this,t,e),k.ZP.register((n={},a=Ut,(o=Qt(o="blots/multilineBreak"))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n),!0),t.keyboard.addBinding({key:"enter",shiftKey:!0},i.enterHandler.bind(Jt(i))),t.keyboard.bindings.enter.unshift(t.keyboard.bindings.enter.pop()),t.clipboard.addMatcher("BR",ee),i}return e=s,(i=[{key:"enterHandler",value:function(t){var e=this.quill.getLeaf(t.index)[0],i=this.quill.getLeaf(t.index+1)[0];this.quill.insertEmbed(t.index,"multilineBreak",!0,"user"),null!==i&&e.parent===i.parent||this.quill.insertEmbed(t.index,"multilineBreak",!0,"user"),this.quill.setSelection(t.index+1,k.ZP.sources.SILENT)}}])&&Yt(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),s}(i(7094).Z);const ne=ie;var oe=i(6054),re=i(1342),se=i(319);function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function le(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function ce(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?le(Object(i),!0).forEach((function(e){var n,o,r;n=t,o=e,r=i[e],(o=function(t){var e=function(t,e){if("object"!==ae(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ae(e)?e:String(e)}(o))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):le(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ue(t,e){return e.reduce((function(e,i){return e["".concat(t).concat(i.attrName)]=i,e}),{})}t.default.register(ce(ce(ce(ce({"attributors/attribute/direction":o.IF},ue("attributors/attribute/",se.Qu)),ue("attributors/attribute/",re.yA)),{},{"attributors/class/align":e.dk,"attributors/class/background":V.Y,"attributors/class/color":F.Hn,"attributors/class/direction":o.hY,"attributors/class/font":Z._,"attributors/class/size":H.m,"attributors/style/align":e.HE,"attributors/style/background":V.w,"attributors/style/color":F.HQ,"attributors/style/direction":o.H8,"attributors/style/font":Z.H,"attributors/style/size":H.Z},ue("attributors/style/",se.VT)),ue("attributors/style/",re.kk)),!0),t.default.register({"formats/align":e.dk,"formats/direction":o.hY,"formats/indent":h,"formats/background":V.w,"formats/color":F.HQ,"formats/font":Z._,"formats/size":H.m,"formats/blockquote":v,"formats/code-block":Vt.ZP,"formats/header":S,"formats/list":$,"formats/bold":L.Z,"formats/code":Vt.EK,"formats/italic":q,"formats/link":U.Z,"formats/script":it,"formats/strike":at,"formats/underline":ht,"formats/formula":Ct,"formats/image":Tt,"formats/video":$t,"tableModules/lite":oe.Z,"tableModules/main":Zt.Z,"modules/syntax":Ft.ZP,"modules/multiline":ne,"modules/table":Zt.Z},!0);const de=t.default})(),n.default})(),t.exports=e()},3787:function(t,e,i){var n;(function(){function o(t){"use strict";var e={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===t)return JSON.parse(JSON.stringify(e));var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n].defaultValue);return i}var r={},s={},a={},l=o(!0),c="vanilla",u={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:o(!0),allOn:function(){"use strict";var t=o(!0),e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}()};function d(t,e){"use strict";var i=e?"Error in "+e+" extension->":"Error in unnamed extension",n={valid:!0,error:""};r.helper.isArray(t)||(t=[t]);for(var o=0;o<t.length;++o){var s=i+" sub-extension "+o+": ",a=t[o];if("object"!=typeof a)return n.valid=!1,n.error=s+"must be an object, but "+typeof a+" given",n;if(!r.helper.isString(a.type))return n.valid=!1,n.error=s+'property "type" must be a string, but '+typeof a.type+" given",n;var l=a.type=a.type.toLowerCase();if("language"===l&&(l=a.type="lang"),"html"===l&&(l=a.type="output"),"lang"!==l&&"output"!==l&&"listener"!==l)return n.valid=!1,n.error=s+"type "+l+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',n;if("listener"===l){if(r.helper.isUndefined(a.listeners))return n.valid=!1,n.error=s+'. Extensions of type "listener" must have a property called "listeners"',n}else if(r.helper.isUndefined(a.filter)&&r.helper.isUndefined(a.regex))return n.valid=!1,n.error=s+l+' extensions must define either a "regex" property or a "filter" method',n;if(a.listeners){if("object"!=typeof a.listeners)return n.valid=!1,n.error=s+'"listeners" property must be an object but '+typeof a.listeners+" given",n;for(var c in a.listeners)if(a.listeners.hasOwnProperty(c)&&"function"!=typeof a.listeners[c])return n.valid=!1,n.error=s+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+typeof a.listeners[c]+" given",n}if(a.filter){if("function"!=typeof a.filter)return n.valid=!1,n.error=s+'"filter" must be a function, but '+typeof a.filter+" given",n}else if(a.regex){if(r.helper.isString(a.regex)&&(a.regex=new RegExp(a.regex,"g")),!(a.regex instanceof RegExp))return n.valid=!1,n.error=s+'"regex" property must either be a string or a RegExp object, but '+typeof a.regex+" given",n;if(r.helper.isUndefined(a.replace))return n.valid=!1,n.error=s+'"regex" extensions must implement a replace string or function',n}}return n}function h(t,e){"use strict";return"¨E"+e.charCodeAt(0)+"E"}r.helper={},r.extensions={},r.setOption=function(t,e){"use strict";return l[t]=e,this},r.getOption=function(t){"use strict";return l[t]},r.getOptions=function(){"use strict";return l},r.resetOptions=function(){"use strict";l=o(!0)},r.setFlavor=function(t){"use strict";if(!u.hasOwnProperty(t))throw Error(t+" flavor was not found");r.resetOptions();var e=u[t];for(var i in c=t,e)e.hasOwnProperty(i)&&(l[i]=e[i])},r.getFlavor=function(){"use strict";return c},r.getFlavorOptions=function(t){"use strict";if(u.hasOwnProperty(t))return u[t]},r.getDefaultOptions=function(t){"use strict";return o(t)},r.subParser=function(t,e){"use strict";if(r.helper.isString(t)){if(void 0===e){if(s.hasOwnProperty(t))return s[t];throw Error("SubParser named "+t+" not registered!")}s[t]=e}},r.extension=function(t,e){"use strict";if(!r.helper.isString(t))throw Error("Extension 'name' must be a string");if(t=r.helper.stdExtName(t),r.helper.isUndefined(e)){if(!a.hasOwnProperty(t))throw Error("Extension named "+t+" is not registered!");return a[t]}"function"==typeof e&&(e=e()),r.helper.isArray(e)||(e=[e]);var i=d(e,t);if(!i.valid)throw Error(i.error);a[t]=e},r.getAllExtensions=function(){"use strict";return a},r.removeExtension=function(t){"use strict";delete a[t]},r.resetExtensions=function(){"use strict";a={}},r.validateExtension=function(t){"use strict";var e=d(t,null);return!!e.valid||(console.warn(e.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(t){"use strict";return"string"==typeof t||t instanceof String},r.helper.isFunction=function(t){"use strict";return t&&"[object Function]"==={}.toString.call(t)},r.helper.isArray=function(t){"use strict";return Array.isArray(t)},r.helper.isUndefined=function(t){"use strict";return void 0===t},r.helper.forEach=function(t,e){"use strict";if(r.helper.isUndefined(t))throw new Error("obj param is required");if(r.helper.isUndefined(e))throw new Error("callback param is required");if(!r.helper.isFunction(e))throw new Error("callback param must be a function/closure");if("function"==typeof t.forEach)t.forEach(e);else if(r.helper.isArray(t))for(var i=0;i<t.length;i++)e(t[i],i,t);else{if("object"!=typeof t)throw new Error("obj does not seem to be an array or an iterable object");for(var n in t)t.hasOwnProperty(n)&&e(t[n],n,t)}},r.helper.stdExtName=function(t){"use strict";return t.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},r.helper.escapeCharactersCallback=h,r.helper.escapeCharacters=function(t,e,i){"use strict";var n="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";i&&(n="\\\\"+n);var o=new RegExp(n,"g");return t.replace(o,h)},r.helper.unescapeHTMLEntities=function(t){"use strict";return t.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var p=function(t,e,i,n){"use strict";var o,r,s,a,l,c=n||"",u=c.indexOf("g")>-1,d=new RegExp(e+"|"+i,"g"+c.replace(/g/g,"")),h=new RegExp(e,c.replace(/g/g,"")),p=[];do{for(o=0;s=d.exec(t);)if(h.test(s[0]))o++||(a=(r=d.lastIndex)-s[0].length);else if(o&&! --o){l=s.index+s[0].length;var f={left:{start:a,end:r},match:{start:r,end:s.index},right:{start:s.index,end:l},wholeMatch:{start:a,end:l}};if(p.push(f),!u)return p}}while(o&&(d.lastIndex=r));return p};r.helper.matchRecursiveRegExp=function(t,e,i,n){"use strict";for(var o=p(t,e,i,n),r=[],s=0;s<o.length;++s)r.push([t.slice(o[s].wholeMatch.start,o[s].wholeMatch.end),t.slice(o[s].match.start,o[s].match.end),t.slice(o[s].left.start,o[s].left.end),t.slice(o[s].right.start,o[s].right.end)]);return r},r.helper.replaceRecursiveRegExp=function(t,e,i,n,o){"use strict";if(!r.helper.isFunction(e)){var s=e;e=function(){return s}}var a=p(t,i,n,o),l=t,c=a.length;if(c>0){var u=[];0!==a[0].wholeMatch.start&&u.push(t.slice(0,a[0].wholeMatch.start));for(var d=0;d<c;++d)u.push(e(t.slice(a[d].wholeMatch.start,a[d].wholeMatch.end),t.slice(a[d].match.start,a[d].match.end),t.slice(a[d].left.start,a[d].left.end),t.slice(a[d].right.start,a[d].right.end))),d<c-1&&u.push(t.slice(a[d].wholeMatch.end,a[d+1].wholeMatch.start));a[c-1].wholeMatch.end<t.length&&u.push(t.slice(a[c-1].wholeMatch.end)),l=u.join("")}return l},r.helper.regexIndexOf=function(t,e,i){"use strict";if(!r.helper.isString(t))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(e instanceof RegExp==0)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var n=t.substring(i||0).search(e);return n>=0?n+(i||0):n},r.helper.splitAtIndex=function(t,e){"use strict";if(!r.helper.isString(t))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[t.substring(0,e),t.substring(e)]},r.helper.encodeEmailAddress=function(t){"use strict";var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return t.replace(/./g,(function(t){if("@"===t)t=e[Math.floor(2*Math.random())](t);else{var i=Math.random();t=i>.9?e[2](t):i>.45?e[1](t):e[0](t)}return t}))},r.helper.padEnd=function(t,e,i){"use strict";return e>>=0,i=String(i||" "),t.length>e?String(t):((e-=t.length)>i.length&&(i+=i.repeat(e/i.length)),String(t)+i.slice(0,e))},"undefined"==typeof console&&(console={warn:function(t){"use strict";alert(t)},log:function(t){"use strict";alert(t)},error:function(t){"use strict";throw t}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},r.Converter=function(t){"use strict";var e={},i=[],n=[],o={},s=c,h={parsed:{},raw:"",format:""};function p(t,e){if(e=e||null,r.helper.isString(t)){if(e=t=r.helper.stdExtName(t),r.extensions[t])return console.warn("DEPRECATION WARNING: "+t+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(t,e){"function"==typeof t&&(t=t(new r.Converter)),r.helper.isArray(t)||(t=[t]);var o=d(t,e);if(!o.valid)throw Error(o.error);for(var s=0;s<t.length;++s)switch(t[s].type){case"lang":i.push(t[s]);break;case"output":n.push(t[s]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(r.extensions[t],t);if(r.helper.isUndefined(a[t]))throw Error('Extension "'+t+'" could not be loaded. It was either not found or is not a valid extension.');t=a[t]}"function"==typeof t&&(t=t()),r.helper.isArray(t)||(t=[t]);var o=d(t,e);if(!o.valid)throw Error(o.error);for(var s=0;s<t.length;++s){switch(t[s].type){case"lang":i.push(t[s]);break;case"output":n.push(t[s])}if(t[s].hasOwnProperty("listeners"))for(var l in t[s].listeners)t[s].listeners.hasOwnProperty(l)&&f(l,t[s].listeners[l])}}function f(t,e){if(!r.helper.isString(t))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof t+" given");if("function"!=typeof e)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof e+" given");o.hasOwnProperty(t)||(o[t]=[]),o[t].push(e)}!function(){for(var i in t=t||{},l)l.hasOwnProperty(i)&&(e[i]=l[i]);if("object"!=typeof t)throw Error("Converter expects the passed parameter to be an object, but "+typeof t+" was passed instead.");for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.extensions&&r.helper.forEach(e.extensions,p)}(),this._dispatch=function(t,e,i,n){if(o.hasOwnProperty(t))for(var r=0;r<o[t].length;++r){var s=o[t][r](t,e,this,i,n);s&&void 0!==s&&(e=s)}return e},this.listen=function(t,e){return f(t,e),this},this.makeHtml=function(t){if(!t)return t;var o={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:i,outputModifiers:n,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return t=(t=(t=(t=(t=t.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),e.smartIndentationFix&&(t=function(t){var e=t.match(/^\s*/)[0].length,i=new RegExp("^\\s{0,"+e+"}","gm");return t.replace(i,"")}(t)),t="\n\n"+t+"\n\n",t=(t=r.subParser("detab")(t,e,o)).replace(/^[ \t]+$/gm,""),r.helper.forEach(i,(function(i){t=r.subParser("runExtension")(i,t,e,o)})),t=r.subParser("metadata")(t,e,o),t=r.subParser("hashPreCodeTags")(t,e,o),t=r.subParser("githubCodeBlocks")(t,e,o),t=r.subParser("hashHTMLBlocks")(t,e,o),t=r.subParser("hashCodeTags")(t,e,o),t=r.subParser("stripLinkDefinitions")(t,e,o),t=r.subParser("blockGamut")(t,e,o),t=r.subParser("unhashHTMLSpans")(t,e,o),t=(t=(t=r.subParser("unescapeSpecialChars")(t,e,o)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),t=r.subParser("completeHTMLDocument")(t,e,o),r.helper.forEach(n,(function(i){t=r.subParser("runExtension")(i,t,e,o)})),h=o.metadata,t},this.makeMarkdown=this.makeMd=function(t,e){if(t=(t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">¨NBSP;<"),!e){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");e=window.document}var i=e.createElement("div");i.innerHTML=t;var n={preList:function(t){for(var e=t.querySelectorAll("pre"),i=[],n=0;n<e.length;++n)if(1===e[n].childElementCount&&"code"===e[n].firstChild.tagName.toLowerCase()){var o=e[n].firstChild.innerHTML.trim(),s=e[n].firstChild.getAttribute("data-language")||"";if(""===s)for(var a=e[n].firstChild.className.split(" "),l=0;l<a.length;++l){var c=a[l].match(/^language-(.+)$/);if(null!==c){s=c[1];break}}o=r.helper.unescapeHTMLEntities(o),i.push(o),e[n].outerHTML='<precode language="'+s+'" precodenum="'+n.toString()+'"></precode>'}else i.push(e[n].innerHTML),e[n].innerHTML="",e[n].setAttribute("prenum",n.toString());return i}(i)};!function t(e){for(var i=0;i<e.childNodes.length;++i){var n=e.childNodes[i];3===n.nodeType?/\S/.test(n.nodeValue)||/^[ ]+$/.test(n.nodeValue)?(n.nodeValue=n.nodeValue.split("\n").join(" "),n.nodeValue=n.nodeValue.replace(/(\s)+/g,"$1")):(e.removeChild(n),--i):1===n.nodeType&&t(n)}}(i);for(var o=i.childNodes,s="",a=0;a<o.length;a++)s+=r.subParser("makeMarkdown.node")(o[a],n);return s},this.setOption=function(t,i){e[t]=i},this.getOption=function(t){return e[t]},this.getOptions=function(){return e},this.addExtension=function(t,e){p(t,e=e||null)},this.useExtension=function(t){p(t)},this.setFlavor=function(t){if(!u.hasOwnProperty(t))throw Error(t+" flavor was not found");var i=u[t];for(var n in s=t,i)i.hasOwnProperty(n)&&(e[n]=i[n])},this.getFlavor=function(){return s},this.removeExtension=function(t){r.helper.isArray(t)||(t=[t]);for(var e=0;e<t.length;++e){for(var o=t[e],s=0;s<i.length;++s)i[s]===o&&i.splice(s,1);for(var a=0;a<n.length;++a)n[a]===o&&n.splice(a,1)}},this.getAllExtensions=function(){return{language:i,output:n}},this.getMetadata=function(t){return t?h.raw:h.parsed},this.getMetadataFormat=function(){return h.format},this._setMetadataPair=function(t,e){h.parsed[t]=e},this._setMetadataFormat=function(t){h.format=t},this._setMetadataRaw=function(t){h.raw=t}},r.subParser("anchors",(function(t,e,i){"use strict";var n=function(t,n,o,s,a,l,c){if(r.helper.isUndefined(c)&&(c=""),o=o.toLowerCase(),t.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)s="";else if(!s){if(o||(o=n.toLowerCase().replace(/ ?\n/g," ")),s="#"+o,r.helper.isUndefined(i.gUrls[o]))return t;s=i.gUrls[o],r.helper.isUndefined(i.gTitles[o])||(c=i.gTitles[o])}var u='<a href="'+(s=s.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'"';return""!==c&&null!==c&&(u+=' title="'+(c=(c=c.replace(/"/g,"&quot;")).replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'"'),e.openLinksInNewWindow&&!/^#/.test(s)&&(u+=' rel="noopener noreferrer" target="¨E95Eblank"'),u+">"+n+"</a>"};return t=(t=(t=(t=(t=i.converter._dispatch("anchors.before",t,e,i)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[([^\[\]]+)]()()()()()/g,n),e.ghMentions&&(t=t.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,(function(t,i,n,o,s){if("\\"===n)return i+o;if(!r.helper.isString(e.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var a=e.ghMentionsLink.replace(/\{u}/g,s),l="";return e.openLinksInNewWindow&&(l=' rel="noopener noreferrer" target="¨E95Eblank"'),i+'<a href="'+a+'"'+l+">"+o+"</a>"}))),i.converter._dispatch("anchors.after",t,e,i)}));var f=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,_=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,m=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,g=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,v=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,b=function(t){"use strict";return function(e,i,n,o,s,a,l){var c=n=n.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),u="",d="",h=i||"",p=l||"";return/^www\./i.test(n)&&(n=n.replace(/^www\./i,"http://www.")),t.excludeTrailingPunctuationFromURLs&&a&&(u=a),t.openLinksInNewWindow&&(d=' rel="noopener noreferrer" target="¨E95Eblank"'),h+'<a href="'+n+'"'+d+">"+c+"</a>"+u+p}},y=function(t,e){"use strict";return function(i,n,o){var s="mailto:";return n=n||"",o=r.subParser("unescapeSpecialChars")(o,t,e),t.encodeEmails?(s=r.helper.encodeEmailAddress(s+o),o=r.helper.encodeEmailAddress(o)):s+=o,n+'<a href="'+s+'">'+o+"</a>"}};r.subParser("autoLinks",(function(t,e,i){"use strict";return t=(t=(t=i.converter._dispatch("autoLinks.before",t,e,i)).replace(m,b(e))).replace(v,y(e,i)),i.converter._dispatch("autoLinks.after",t,e,i)})),r.subParser("simplifiedAutoLinks",(function(t,e,i){"use strict";return e.simplifiedAutoLink?(t=i.converter._dispatch("simplifiedAutoLinks.before",t,e,i),t=(t=e.excludeTrailingPunctuationFromURLs?t.replace(_,b(e)):t.replace(f,b(e))).replace(g,y(e,i)),t=i.converter._dispatch("simplifiedAutoLinks.after",t,e,i)):t})),r.subParser("blockGamut",(function(t,e,i){"use strict";return t=i.converter._dispatch("blockGamut.before",t,e,i),t=r.subParser("blockQuotes")(t,e,i),t=r.subParser("headers")(t,e,i),t=r.subParser("horizontalRule")(t,e,i),t=r.subParser("lists")(t,e,i),t=r.subParser("codeBlocks")(t,e,i),t=r.subParser("tables")(t,e,i),t=r.subParser("hashHTMLBlocks")(t,e,i),t=r.subParser("paragraphs")(t,e,i),i.converter._dispatch("blockGamut.after",t,e,i)})),r.subParser("blockQuotes",(function(t,e,i){"use strict";t=i.converter._dispatch("blockQuotes.before",t,e,i),t+="\n\n";var n=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return e.splitAdjacentBlockquotes&&(n=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),t=t.replace(n,(function(t){return t=(t=(t=t.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),t=r.subParser("githubCodeBlocks")(t,e,i),t=(t=(t=r.subParser("blockGamut")(t,e,i)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(t,e){var i=e;return(i=i.replace(/^  /gm,"¨0")).replace(/¨0/g,"")})),r.subParser("hashBlock")("<blockquote>\n"+t+"\n</blockquote>",e,i)})),i.converter._dispatch("blockQuotes.after",t,e,i)})),r.subParser("codeBlocks",(function(t,e,i){"use strict";return t=i.converter._dispatch("codeBlocks.before",t,e,i),t=(t=(t+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,(function(t,n,o){var s=n,a=o,l="\n";return s=r.subParser("outdent")(s,e,i),s=r.subParser("encodeCode")(s,e,i),s=(s=(s=r.subParser("detab")(s,e,i)).replace(/^\n+/g,"")).replace(/\n+$/g,""),e.omitExtraWLInCodeBlocks&&(l=""),s="<pre><code>"+s+l+"</code></pre>",r.subParser("hashBlock")(s,e,i)+a}))).replace(/¨0/,""),i.converter._dispatch("codeBlocks.after",t,e,i)})),r.subParser("codeSpans",(function(t,e,i){"use strict";return void 0===(t=i.converter._dispatch("codeSpans.before",t,e,i))&&(t=""),t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(t,n,o,s){var a=s;return a=(a=a.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),a=n+"<code>"+(a=r.subParser("encodeCode")(a,e,i))+"</code>",r.subParser("hashHTMLSpans")(a,e,i)})),i.converter._dispatch("codeSpans.after",t,e,i)})),r.subParser("completeHTMLDocument",(function(t,e,i){"use strict";if(!e.completeHTMLDocument)return t;t=i.converter._dispatch("completeHTMLDocument.before",t,e,i);var n="html",o="<!DOCTYPE HTML>\n",r="",s='<meta charset="utf-8">\n',a="",l="";for(var c in void 0!==i.metadata.parsed.doctype&&(o="<!DOCTYPE "+i.metadata.parsed.doctype+">\n","html"!==(n=i.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==n||(s='<meta charset="utf-8">')),i.metadata.parsed)if(i.metadata.parsed.hasOwnProperty(c))switch(c.toLowerCase()){case"doctype":break;case"title":r="<title>"+i.metadata.parsed.title+"</title>\n";break;case"charset":s="html"===n||"html5"===n?'<meta charset="'+i.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+i.metadata.parsed.charset+'">\n';break;case"language":case"lang":a=' lang="'+i.metadata.parsed[c]+'"',l+='<meta name="'+c+'" content="'+i.metadata.parsed[c]+'">\n';break;default:l+='<meta name="'+c+'" content="'+i.metadata.parsed[c]+'">\n'}return t=o+"<html"+a+">\n<head>\n"+r+s+l+"</head>\n<body>\n"+t.trim()+"\n</body>\n</html>",i.converter._dispatch("completeHTMLDocument.after",t,e,i)})),r.subParser("detab",(function(t,e,i){"use strict";return t=(t=(t=(t=(t=(t=i.converter._dispatch("detab.before",t,e,i)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,(function(t,e){for(var i=e,n=4-i.length%4,o=0;o<n;o++)i+=" ";return i}))).replace(/¨A/g,"    ")).replace(/¨B/g,""),i.converter._dispatch("detab.after",t,e,i)})),r.subParser("ellipsis",(function(t,e,i){"use strict";return e.ellipsis?(t=(t=i.converter._dispatch("ellipsis.before",t,e,i)).replace(/\.\.\./g,"…"),t=i.converter._dispatch("ellipsis.after",t,e,i)):t})),r.subParser("emoji",(function(t,e,i){"use strict";return e.emoji?(t=(t=i.converter._dispatch("emoji.before",t,e,i)).replace(/:([\S]+?):/g,(function(t,e){return r.helper.emojis.hasOwnProperty(e)?r.helper.emojis[e]:t})),i.converter._dispatch("emoji.after",t,e,i)):t})),r.subParser("encodeAmpsAndAngles",(function(t,e,i){"use strict";return t=(t=(t=(t=(t=i.converter._dispatch("encodeAmpsAndAngles.before",t,e,i)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),i.converter._dispatch("encodeAmpsAndAngles.after",t,e,i)})),r.subParser("encodeBackslashEscapes",(function(t,e,i){"use strict";return t=(t=(t=i.converter._dispatch("encodeBackslashEscapes.before",t,e,i)).replace(/\\(\\)/g,r.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),i.converter._dispatch("encodeBackslashEscapes.after",t,e,i)})),r.subParser("encodeCode",(function(t,e,i){"use strict";return t=(t=i.converter._dispatch("encodeCode.before",t,e,i)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),i.converter._dispatch("encodeCode.after",t,e,i)})),r.subParser("escapeSpecialCharsWithinTagAttributes",(function(t,e,i){"use strict";return t=(t=(t=i.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",t,e,i)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,(function(t){return t.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}))).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,(function(t){return t.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)})),i.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",t,e,i)})),r.subParser("githubCodeBlocks",(function(t,e,i){"use strict";return e.ghCodeBlocks?(t=i.converter._dispatch("githubCodeBlocks.before",t,e,i),t=(t=(t+="¨0").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,(function(t,n,o,s){var a=e.omitExtraWLInCodeBlocks?"":"\n";return s=r.subParser("encodeCode")(s,e,i),s="<pre><code"+(o?' class="'+o+" language-"+o+'"':"")+">"+(s=(s=(s=r.subParser("detab")(s,e,i)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+a+"</code></pre>",s=r.subParser("hashBlock")(s,e,i),"\n\n¨G"+(i.ghCodeBlocks.push({text:t,codeblock:s})-1)+"G\n\n"}))).replace(/¨0/,""),i.converter._dispatch("githubCodeBlocks.after",t,e,i)):t})),r.subParser("hashBlock",(function(t,e,i){"use strict";return t=(t=i.converter._dispatch("hashBlock.before",t,e,i)).replace(/(^\n+|\n+$)/g,""),t="\n\n¨K"+(i.gHtmlBlocks.push(t)-1)+"K\n\n",i.converter._dispatch("hashBlock.after",t,e,i)})),r.subParser("hashCodeTags",(function(t,e,i){"use strict";return t=i.converter._dispatch("hashCodeTags.before",t,e,i),t=r.helper.replaceRecursiveRegExp(t,(function(t,n,o,s){var a=o+r.subParser("encodeCode")(n,e,i)+s;return"¨C"+(i.gHtmlSpans.push(a)-1)+"C"}),"<code\\b[^>]*>","</code>","gim"),i.converter._dispatch("hashCodeTags.after",t,e,i)})),r.subParser("hashElement",(function(t,e,i){"use strict";return function(t,e){var n=e;return n=(n=(n=n.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),"\n\n¨K"+(i.gHtmlBlocks.push(n)-1)+"K\n\n"}})),r.subParser("hashHTMLBlocks",(function(t,e,i){"use strict";t=i.converter._dispatch("hashHTMLBlocks.before",t,e,i);var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],o=function(t,e,n,o){var r=t;return-1!==n.search(/\bmarkdown\b/)&&(r=n+i.converter.makeHtml(e)+o),"\n\n¨K"+(i.gHtmlBlocks.push(r)-1)+"K\n\n"};e.backslashEscapesHTMLTags&&(t=t.replace(/\\<(\/?[^>]+?)>/g,(function(t,e){return"&lt;"+e+"&gt;"})));for(var s=0;s<n.length;++s)for(var a,l=new RegExp("^ {0,3}(<"+n[s]+"\\b[^>]*>)","im"),c="<"+n[s]+"\\b[^>]*>",u="</"+n[s]+">";-1!==(a=r.helper.regexIndexOf(t,l));){var d=r.helper.splitAtIndex(t,a),h=r.helper.replaceRecursiveRegExp(d[1],o,c,u,"im");if(h===d[1])break;t=d[0].concat(h)}return t=t.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(t,e,i)),t=(t=r.helper.replaceRecursiveRegExp(t,(function(t){return"\n\n¨K"+(i.gHtmlBlocks.push(t)-1)+"K\n\n"}),"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(t,e,i)),i.converter._dispatch("hashHTMLBlocks.after",t,e,i)})),r.subParser("hashHTMLSpans",(function(t,e,i){"use strict";function n(t){return"¨C"+(i.gHtmlSpans.push(t)-1)+"C"}return t=(t=(t=(t=(t=i.converter._dispatch("hashHTMLSpans.before",t,e,i)).replace(/<[^>]+?\/>/gi,(function(t){return n(t)}))).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,(function(t){return n(t)}))).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,(function(t){return n(t)}))).replace(/<[^>]+?>/gi,(function(t){return n(t)})),i.converter._dispatch("hashHTMLSpans.after",t,e,i)})),r.subParser("unhashHTMLSpans",(function(t,e,i){"use strict";t=i.converter._dispatch("unhashHTMLSpans.before",t,e,i);for(var n=0;n<i.gHtmlSpans.length;++n){for(var o=i.gHtmlSpans[n],r=0;/¨C(\d+)C/.test(o);){var s=RegExp.$1;if(o=o.replace("¨C"+s+"C",i.gHtmlSpans[s]),10===r){console.error("maximum nesting of 10 spans reached!!!");break}++r}t=t.replace("¨C"+n+"C",o)}return i.converter._dispatch("unhashHTMLSpans.after",t,e,i)})),r.subParser("hashPreCodeTags",(function(t,e,i){"use strict";return t=i.converter._dispatch("hashPreCodeTags.before",t,e,i),t=r.helper.replaceRecursiveRegExp(t,(function(t,n,o,s){var a=o+r.subParser("encodeCode")(n,e,i)+s;return"\n\n¨G"+(i.ghCodeBlocks.push({text:t,codeblock:a})-1)+"G\n\n"}),"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),i.converter._dispatch("hashPreCodeTags.after",t,e,i)})),r.subParser("headers",(function(t,e,i){"use strict";t=i.converter._dispatch("headers.before",t,e,i);var n=isNaN(parseInt(e.headerLevelStart))?1:parseInt(e.headerLevelStart),o=e.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,s=e.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;t=(t=t.replace(o,(function(t,o){var s=r.subParser("spanGamut")(o,e,i),a=e.noHeaderId?"":' id="'+l(o)+'"',c="<h"+n+a+">"+s+"</h"+n+">";return r.subParser("hashBlock")(c,e,i)}))).replace(s,(function(t,o){var s=r.subParser("spanGamut")(o,e,i),a=e.noHeaderId?"":' id="'+l(o)+'"',c=n+1,u="<h"+c+a+">"+s+"</h"+c+">";return r.subParser("hashBlock")(u,e,i)}));var a=e.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function l(t){var n,o;if(e.customizedHeaderId){var s=t.match(/\{([^{]+?)}\s*$/);s&&s[1]&&(t=s[1])}return n=t,o=r.helper.isString(e.prefixHeaderId)?e.prefixHeaderId:!0===e.prefixHeaderId?"section-":"",e.rawPrefixHeaderId||(n=o+n),n=e.ghCompatibleHeaderId?n.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():e.rawHeaderId?n.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():n.replace(/[^\w]/g,"").toLowerCase(),e.rawPrefixHeaderId&&(n=o+n),i.hashLinkCounts[n]?n=n+"-"+i.hashLinkCounts[n]++:i.hashLinkCounts[n]=1,n}return t=t.replace(a,(function(t,o,s){var a=s;e.customizedHeaderId&&(a=s.replace(/\s?\{([^{]+?)}\s*$/,""));var c=r.subParser("spanGamut")(a,e,i),u=e.noHeaderId?"":' id="'+l(s)+'"',d=n-1+o.length,h="<h"+d+u+">"+c+"</h"+d+">";return r.subParser("hashBlock")(h,e,i)})),i.converter._dispatch("headers.after",t,e,i)})),r.subParser("horizontalRule",(function(t,e,i){"use strict";t=i.converter._dispatch("horizontalRule.before",t,e,i);var n=r.subParser("hashBlock")("<hr />",e,i);return t=(t=(t=t.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,n),i.converter._dispatch("horizontalRule.after",t,e,i)})),r.subParser("images",(function(t,e,i){"use strict";function n(t,e,n,o,s,a,l,c){var u=i.gUrls,d=i.gTitles,h=i.gDimensions;if(n=n.toLowerCase(),c||(c=""),t.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(""===o||null===o){if(""!==n&&null!==n||(n=e.toLowerCase().replace(/ ?\n/g," ")),o="#"+n,r.helper.isUndefined(u[n]))return t;o=u[n],r.helper.isUndefined(d[n])||(c=d[n]),r.helper.isUndefined(h[n])||(s=h[n].width,a=h[n].height)}e=e.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var p='<img src="'+(o=o.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'" alt="'+e+'"';return c&&r.helper.isString(c)&&(p+=' title="'+(c=c.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'"'),s&&a&&(p+=' width="'+(s="*"===s?"auto":s)+'"',p+=' height="'+(a="*"===a?"auto":a)+'"'),p+" />"}return t=(t=(t=(t=(t=(t=i.converter._dispatch("images.before",t,e,i)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,(function(t,e,i,o,r,s,a,l){return n(t,e,i,o=o.replace(/\s/g,""),r,s,0,l)}))).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,n)).replace(/!\[([^\[\]]+)]()()()()()/g,n),i.converter._dispatch("images.after",t,e,i)})),r.subParser("italicsAndBold",(function(t,e,i){"use strict";function n(t,e,i){return e+t+i}return t=i.converter._dispatch("italicsAndBold.before",t,e,i),t=e.literalMidWordUnderscores?(t=(t=t.replace(/\b___(\S[\s\S]*?)___\b/g,(function(t,e){return n(e,"<strong><em>","</em></strong>")}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(t,e){return n(e,"<strong>","</strong>")}))).replace(/\b_(\S[\s\S]*?)_\b/g,(function(t,e){return n(e,"<em>","</em>")})):(t=(t=t.replace(/___(\S[\s\S]*?)___/g,(function(t,e){return/\S$/.test(e)?n(e,"<strong><em>","</em></strong>"):t}))).replace(/__(\S[\s\S]*?)__/g,(function(t,e){return/\S$/.test(e)?n(e,"<strong>","</strong>"):t}))).replace(/_([^\s_][\s\S]*?)_/g,(function(t,e){return/\S$/.test(e)?n(e,"<em>","</em>"):t})),t=e.literalMidWordAsterisks?(t=(t=t.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,(function(t,e,i){return n(i,e+"<strong><em>","</em></strong>")}))).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,(function(t,e,i){return n(i,e+"<strong>","</strong>")}))).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,(function(t,e,i){return n(i,e+"<em>","</em>")})):(t=(t=t.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,(function(t,e){return/\S$/.test(e)?n(e,"<strong><em>","</em></strong>"):t}))).replace(/\*\*(\S[\s\S]*?)\*\*/g,(function(t,e){return/\S$/.test(e)?n(e,"<strong>","</strong>"):t}))).replace(/\*([^\s*][\s\S]*?)\*/g,(function(t,e){return/\S$/.test(e)?n(e,"<em>","</em>"):t})),i.converter._dispatch("italicsAndBold.after",t,e,i)})),r.subParser("lists",(function(t,e,i){"use strict";function n(t,n){i.gListLevel++,t=t.replace(/\n{2,}$/,"\n");var o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,s=/\n[ \t]*\n(?!¨0)/.test(t+="¨0");return e.disableForced4SpacesIndentedSublists&&(o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),t=(t=t.replace(o,(function(t,n,o,a,l,c,u){u=u&&""!==u.trim();var d=r.subParser("outdent")(l,e,i),h="";return c&&e.tasklists&&(h=' class="task-list-item" style="list-style-type: none;"',d=d.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var t='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return u&&(t+=" checked"),t+">"}))),d=d.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,(function(t){return"¨A"+t})),n||d.search(/\n{2,}/)>-1?(d=r.subParser("githubCodeBlocks")(d,e,i),d=r.subParser("blockGamut")(d,e,i)):(d=(d=r.subParser("lists")(d,e,i)).replace(/\n$/,""),d=(d=r.subParser("hashHTMLBlocks")(d,e,i)).replace(/\n\n+/g,"\n\n"),d=s?r.subParser("paragraphs")(d,e,i):r.subParser("spanGamut")(d,e,i)),"<li"+h+">"+(d=d.replace("¨A",""))+"</li>\n"}))).replace(/¨0/g,""),i.gListLevel--,n&&(t=t.replace(/\s+$/,"")),t}function o(t,e){if("ol"===e){var i=t.match(/^ *(\d+)\./);if(i&&"1"!==i[1])return' start="'+i[1]+'"'}return""}function s(t,i,r){var s=e.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,a=e.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===i?s:a,c="";if(-1!==t.search(l))!function e(u){var d=u.search(l),h=o(t,i);-1!==d?(c+="\n\n<"+i+h+">\n"+n(u.slice(0,d),!!r)+"</"+i+">\n",l="ul"==(i="ul"===i?"ol":"ul")?s:a,e(u.slice(d))):c+="\n\n<"+i+h+">\n"+n(u,!!r)+"</"+i+">\n"}(t);else{var u=o(t,i);c="\n\n<"+i+u+">\n"+n(t,!!r)+"</"+i+">\n"}return c}return t=i.converter._dispatch("lists.before",t,e,i),t+="¨0",t=(t=i.gListLevel?t.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(t,e,i){return s(e,i.search(/[*+-]/g)>-1?"ul":"ol",!0)})):t.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(t,e,i,n){return s(i,n.search(/[*+-]/g)>-1?"ul":"ol",!1)}))).replace(/¨0/,""),i.converter._dispatch("lists.after",t,e,i)})),r.subParser("metadata",(function(t,e,i){"use strict";if(!e.metadata)return t;function n(t){i.metadata.raw=t,(t=(t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,(function(t,e,n){return i.metadata.parsed[e]=n,""}))}return t=(t=(t=(t=i.converter._dispatch("metadata.before",t,e,i)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,(function(t,e,i){return n(i),"¨M"}))).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,(function(t,e,o){return e&&(i.metadata.format=e),n(o),"¨M"}))).replace(/¨M/g,""),i.converter._dispatch("metadata.after",t,e,i)})),r.subParser("outdent",(function(t,e,i){"use strict";return t=(t=(t=i.converter._dispatch("outdent.before",t,e,i)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),i.converter._dispatch("outdent.after",t,e,i)})),r.subParser("paragraphs",(function(t,e,i){"use strict";for(var n=(t=(t=(t=i.converter._dispatch("paragraphs.before",t,e,i)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],s=n.length,a=0;a<s;a++){var l=n[a];l.search(/¨(K|G)(\d+)\1/g)>=0?o.push(l):l.search(/\S/)>=0&&(l=(l=r.subParser("spanGamut")(l,e,i)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",o.push(l))}for(s=o.length,a=0;a<s;a++){for(var c="",u=o[a],d=!1;/¨(K|G)(\d+)\1/.test(u);){var h=RegExp.$1,p=RegExp.$2;c=(c="K"===h?i.gHtmlBlocks[p]:d?r.subParser("encodeCode")(i.ghCodeBlocks[p].text,e,i):i.ghCodeBlocks[p].codeblock).replace(/\$/g,"$$$$"),u=u.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(u)&&(d=!0)}o[a]=u}return t=(t=(t=o.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),i.converter._dispatch("paragraphs.after",t,e,i)})),r.subParser("runExtension",(function(t,e,i,n){"use strict";if(t.filter)e=t.filter(e,n.converter,i);else if(t.regex){var o=t.regex;o instanceof RegExp||(o=new RegExp(o,"g")),e=e.replace(o,t.replace)}return e})),r.subParser("spanGamut",(function(t,e,i){"use strict";return t=i.converter._dispatch("spanGamut.before",t,e,i),t=r.subParser("codeSpans")(t,e,i),t=r.subParser("escapeSpecialCharsWithinTagAttributes")(t,e,i),t=r.subParser("encodeBackslashEscapes")(t,e,i),t=r.subParser("images")(t,e,i),t=r.subParser("anchors")(t,e,i),t=r.subParser("autoLinks")(t,e,i),t=r.subParser("simplifiedAutoLinks")(t,e,i),t=r.subParser("emoji")(t,e,i),t=r.subParser("underline")(t,e,i),t=r.subParser("italicsAndBold")(t,e,i),t=r.subParser("strikethrough")(t,e,i),t=r.subParser("ellipsis")(t,e,i),t=r.subParser("hashHTMLSpans")(t,e,i),t=r.subParser("encodeAmpsAndAngles")(t,e,i),e.simpleLineBreaks?/\n\n¨K/.test(t)||(t=t.replace(/\n+/g,"<br />\n")):t=t.replace(/  +\n/g,"<br />\n"),i.converter._dispatch("spanGamut.after",t,e,i)})),r.subParser("strikethrough",(function(t,e,i){"use strict";return e.strikethrough&&(t=(t=i.converter._dispatch("strikethrough.before",t,e,i)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,(function(t,n){return function(t){return e.simplifiedAutoLink&&(t=r.subParser("simplifiedAutoLinks")(t,e,i)),"<del>"+t+"</del>"}(n)})),t=i.converter._dispatch("strikethrough.after",t,e,i)),t})),r.subParser("stripLinkDefinitions",(function(t,e,i){"use strict";var n=function(n,o,s,a,l,c,u){return o=o.toLowerCase(),t.toLowerCase().split(o).length-1<2?n:(s.match(/^data:.+?\/.+?;base64,/)?i.gUrls[o]=s.replace(/\s/g,""):i.gUrls[o]=r.subParser("encodeAmpsAndAngles")(s,e,i),c?c+u:(u&&(i.gTitles[o]=u.replace(/"|'/g,"&quot;")),e.parseImgDimensions&&a&&l&&(i.gDimensions[o]={width:a,height:l}),""))};return t=(t=(t=(t+="¨0").replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,n)).replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,n)).replace(/¨0/,"")})),r.subParser("tables",(function(t,e,i){"use strict";if(!e.tables)return t;function n(t,n){return"<td"+n+">"+r.subParser("spanGamut")(t,e,i)+"</td>\n"}function o(t){var o,s=t.split("\n");for(o=0;o<s.length;++o)/^ {0,3}\|/.test(s[o])&&(s[o]=s[o].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(s[o])&&(s[o]=s[o].replace(/\|[ \t]*$/,"")),s[o]=r.subParser("codeSpans")(s[o],e,i);var a,l,c,u,d=s[0].split("|").map((function(t){return t.trim()})),h=s[1].split("|").map((function(t){return t.trim()})),p=[],f=[],_=[],m=[];for(s.shift(),s.shift(),o=0;o<s.length;++o)""!==s[o].trim()&&p.push(s[o].split("|").map((function(t){return t.trim()})));if(d.length<h.length)return t;for(o=0;o<h.length;++o)_.push((a=h[o],/^:[ \t]*--*$/.test(a)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(a)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(a)?' style="text-align:center;"':""));for(o=0;o<d.length;++o)r.helper.isUndefined(_[o])&&(_[o]=""),f.push((l=d[o],c=_[o],u=void 0,u="",l=l.trim(),(e.tablesHeaderId||e.tableHeaderId)&&(u=' id="'+l.replace(/ /g,"_").toLowerCase()+'"'),"<th"+u+c+">"+(l=r.subParser("spanGamut")(l,e,i))+"</th>\n"));for(o=0;o<p.length;++o){for(var g=[],v=0;v<f.length;++v)r.helper.isUndefined(p[o][v]),g.push(n(p[o][v],_[v]));m.push(g)}return function(t,e){for(var i="<table>\n<thead>\n<tr>\n",n=t.length,o=0;o<n;++o)i+=t[o];for(i+="</tr>\n</thead>\n<tbody>\n",o=0;o<e.length;++o){i+="<tr>\n";for(var r=0;r<n;++r)i+=e[o][r];i+="</tr>\n"}return i+"</tbody>\n</table>\n"}(f,m)}return t=(t=(t=(t=i.converter._dispatch("tables.before",t,e,i)).replace(/\\(\|)/g,r.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,o)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,o),i.converter._dispatch("tables.after",t,e,i)})),r.subParser("underline",(function(t,e,i){"use strict";return e.underline?(t=i.converter._dispatch("underline.before",t,e,i),t=(t=e.literalMidWordUnderscores?(t=t.replace(/\b___(\S[\s\S]*?)___\b/g,(function(t,e){return"<u>"+e+"</u>"}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(t,e){return"<u>"+e+"</u>"})):(t=t.replace(/___(\S[\s\S]*?)___/g,(function(t,e){return/\S$/.test(e)?"<u>"+e+"</u>":t}))).replace(/__(\S[\s\S]*?)__/g,(function(t,e){return/\S$/.test(e)?"<u>"+e+"</u>":t}))).replace(/(_)/g,r.helper.escapeCharactersCallback),t=i.converter._dispatch("underline.after",t,e,i)):t})),r.subParser("unescapeSpecialChars",(function(t,e,i){"use strict";return t=(t=i.converter._dispatch("unescapeSpecialChars.before",t,e,i)).replace(/¨E(\d+)E/g,(function(t,e){var i=parseInt(e);return String.fromCharCode(i)})),i.converter._dispatch("unescapeSpecialChars.after",t,e,i)})),r.subParser("makeMarkdown.blockquote",(function(t,e){"use strict";var i="";if(t.hasChildNodes())for(var n=t.childNodes,o=n.length,s=0;s<o;++s){var a=r.subParser("makeMarkdown.node")(n[s],e);""!==a&&(i+=a)}return"> "+(i=i.trim()).split("\n").join("\n> ")})),r.subParser("makeMarkdown.codeBlock",(function(t,e){"use strict";var i=t.getAttribute("language"),n=t.getAttribute("precodenum");return"```"+i+"\n"+e.preList[n]+"\n```"})),r.subParser("makeMarkdown.codeSpan",(function(t){"use strict";return"`"+t.innerHTML+"`"})),r.subParser("makeMarkdown.emphasis",(function(t,e){"use strict";var i="";if(t.hasChildNodes()){i+="*";for(var n=t.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],e);i+="*"}return i})),r.subParser("makeMarkdown.header",(function(t,e,i){"use strict";var n=new Array(i+1).join("#"),o="";if(t.hasChildNodes()){o=n+" ";for(var s=t.childNodes,a=s.length,l=0;l<a;++l)o+=r.subParser("makeMarkdown.node")(s[l],e)}return o})),r.subParser("makeMarkdown.hr",(function(){"use strict";return"---"})),r.subParser("makeMarkdown.image",(function(t){"use strict";var e="";return t.hasAttribute("src")&&(e+="!["+t.getAttribute("alt")+"](",e+="<"+t.getAttribute("src")+">",t.hasAttribute("width")&&t.hasAttribute("height")&&(e+=" ="+t.getAttribute("width")+"x"+t.getAttribute("height")),t.hasAttribute("title")&&(e+=' "'+t.getAttribute("title")+'"'),e+=")"),e})),r.subParser("makeMarkdown.links",(function(t,e){"use strict";var i="";if(t.hasChildNodes()&&t.hasAttribute("href")){var n=t.childNodes,o=n.length;i="[";for(var s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],e);i+="](",i+="<"+t.getAttribute("href")+">",t.hasAttribute("title")&&(i+=' "'+t.getAttribute("title")+'"'),i+=")"}return i})),r.subParser("makeMarkdown.list",(function(t,e,i){"use strict";var n="";if(!t.hasChildNodes())return"";for(var o=t.childNodes,s=o.length,a=t.getAttribute("start")||1,l=0;l<s;++l)void 0!==o[l].tagName&&"li"===o[l].tagName.toLowerCase()&&(n+=("ol"===i?a.toString()+". ":"- ")+r.subParser("makeMarkdown.listItem")(o[l],e),++a);return(n+="\n\x3c!-- --\x3e\n").trim()})),r.subParser("makeMarkdown.listItem",(function(t,e){"use strict";for(var i="",n=t.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],e);return/\n$/.test(i)?i=i.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):i+="\n",i})),r.subParser("makeMarkdown.node",(function(t,e,i){"use strict";i=i||!1;var n="";if(3===t.nodeType)return r.subParser("makeMarkdown.txt")(t,e);if(8===t.nodeType)return"\x3c!--"+t.data+"--\x3e\n\n";if(1!==t.nodeType)return"";switch(t.tagName.toLowerCase()){case"h1":i||(n=r.subParser("makeMarkdown.header")(t,e,1)+"\n\n");break;case"h2":i||(n=r.subParser("makeMarkdown.header")(t,e,2)+"\n\n");break;case"h3":i||(n=r.subParser("makeMarkdown.header")(t,e,3)+"\n\n");break;case"h4":i||(n=r.subParser("makeMarkdown.header")(t,e,4)+"\n\n");break;case"h5":i||(n=r.subParser("makeMarkdown.header")(t,e,5)+"\n\n");break;case"h6":i||(n=r.subParser("makeMarkdown.header")(t,e,6)+"\n\n");break;case"p":i||(n=r.subParser("makeMarkdown.paragraph")(t,e)+"\n\n");break;case"blockquote":i||(n=r.subParser("makeMarkdown.blockquote")(t,e)+"\n\n");break;case"hr":i||(n=r.subParser("makeMarkdown.hr")(t,e)+"\n\n");break;case"ol":i||(n=r.subParser("makeMarkdown.list")(t,e,"ol")+"\n\n");break;case"ul":i||(n=r.subParser("makeMarkdown.list")(t,e,"ul")+"\n\n");break;case"precode":i||(n=r.subParser("makeMarkdown.codeBlock")(t,e)+"\n\n");break;case"pre":i||(n=r.subParser("makeMarkdown.pre")(t,e)+"\n\n");break;case"table":i||(n=r.subParser("makeMarkdown.table")(t,e)+"\n\n");break;case"code":n=r.subParser("makeMarkdown.codeSpan")(t,e);break;case"em":case"i":n=r.subParser("makeMarkdown.emphasis")(t,e);break;case"strong":case"b":n=r.subParser("makeMarkdown.strong")(t,e);break;case"del":n=r.subParser("makeMarkdown.strikethrough")(t,e);break;case"a":n=r.subParser("makeMarkdown.links")(t,e);break;case"img":n=r.subParser("makeMarkdown.image")(t,e);break;default:n=t.outerHTML+"\n\n"}return n})),r.subParser("makeMarkdown.paragraph",(function(t,e){"use strict";var i="";if(t.hasChildNodes())for(var n=t.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],e);return i.trim()})),r.subParser("makeMarkdown.pre",(function(t,e){"use strict";var i=t.getAttribute("prenum");return"<pre>"+e.preList[i]+"</pre>"})),r.subParser("makeMarkdown.strikethrough",(function(t,e){"use strict";var i="";if(t.hasChildNodes()){i+="~~";for(var n=t.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],e);i+="~~"}return i})),r.subParser("makeMarkdown.strong",(function(t,e){"use strict";var i="";if(t.hasChildNodes()){i+="**";for(var n=t.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],e);i+="**"}return i})),r.subParser("makeMarkdown.table",(function(t,e){"use strict";var i,n,o="",s=[[],[]],a=t.querySelectorAll("thead>tr>th"),l=t.querySelectorAll("tbody>tr");for(i=0;i<a.length;++i){var c=r.subParser("makeMarkdown.tableCell")(a[i],e),u="---";if(a[i].hasAttribute("style"))switch(a[i].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":u=":---";break;case"text-align:right;":u="---:";break;case"text-align:center;":u=":---:"}s[0][i]=c.trim(),s[1][i]=u}for(i=0;i<l.length;++i){var d=s.push([])-1,h=l[i].getElementsByTagName("td");for(n=0;n<a.length;++n){var p=" ";void 0!==h[n]&&(p=r.subParser("makeMarkdown.tableCell")(h[n],e)),s[d].push(p)}}var f=3;for(i=0;i<s.length;++i)for(n=0;n<s[i].length;++n){var _=s[i][n].length;_>f&&(f=_)}for(i=0;i<s.length;++i){for(n=0;n<s[i].length;++n)1===i?":"===s[i][n].slice(-1)?s[i][n]=r.helper.padEnd(s[i][n].slice(-1),f-1,"-")+":":s[i][n]=r.helper.padEnd(s[i][n],f,"-"):s[i][n]=r.helper.padEnd(s[i][n],f);o+="| "+s[i].join(" | ")+" |\n"}return o.trim()})),r.subParser("makeMarkdown.tableCell",(function(t,e){"use strict";var i="";if(!t.hasChildNodes())return"";for(var n=t.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],e,!0);return i.trim()})),r.subParser("makeMarkdown.txt",(function(t){"use strict";var e=t.nodeValue;return e=(e=e.replace(/ +/g," ")).replace(/¨NBSP;/g," "),(e=(e=(e=(e=(e=(e=(e=(e=r.helper.unescapeHTMLEntities(e)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")})),void 0===(n=function(){"use strict";return r}.call(e,i,e,t))||(t.exports=n)}).call(this)}}]);